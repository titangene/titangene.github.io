var customSearch;!function(e){"use strict";const t=70;function a(a,o){o=o||t;const n=a.href?e(a.getAttribute("href")):e(a);e("html, body").animate({scrollTop:n.offset().top-o},400)}e(function(){var o;!function(){if(!window.subData)return;const t=e("header .wrapper"),o=e(".s-comment",t),n=e(".s-toc",t),i=e(".s-top",t);let c=document.body.scrollTop;e(document,window).scroll(()=>{const a=e(window).scrollTop(),o=a-c;o>=20?(c=a,t.addClass("sub")):o<=-20&&(c=a,t.removeClass("sub"))});const s=e("#comments");s.length?o.click(e=>{e.preventDefault(),e.stopPropagation(),a(s)}):o.remove();const r=e(".toc-wrapper");r.length&&r.children().length?n.click(e=>{e.stopPropagation(),r.toggleClass("active")}):n.remove(),i.click(()=>a(document.body))}(),function(){var t=e("header .menu"),a=t.find(".underline");function o(e,o){e=e||t.find("li a.active"),(o=void 0===o||!!o)||a.addClass("disable-trans"),e&&e.length?(e.addClass("active").siblings().removeClass("active"),a.css({left:e.position().left,width:e.innerWidth()})):a.css({left:0,width:0}),o||setTimeout(function(){a.removeClass("disable-trans")},0)}t.on("mouseenter","li",function(t){o(e(t.currentTarget))}),t.on("mouseout",function(){o()});var n=null;if("/"===location.pathname||location.pathname.startsWith("/page/"))n=e(".nav-home",t);else{var i=location.pathname.match(/\/(.*?)\//);i.length>1&&(n=e(".nav-"+i[1],t))}o(n,!1)}(),(o=e(".l_header .switcher .s-menu")).click(function(t){t.stopPropagation(),e("body").toggleClass("z_menu-open"),o.toggleClass("active")}),e(document).click(function(t){e("body").removeClass("z_menu-open"),o.removeClass("active")}),function(){var t=e(".l_header .switcher .s-search"),a=e(".l_header"),o=e(".l_header .m_search");0!==t.length&&(t.click(function(e){e.stopPropagation(),a.toggleClass("z_search-open"),o.find("input").focus()}),e(document).click(function(e){a.removeClass("z_search-open")}),o.click(function(e){e.stopPropagation()}))}(),0!==e(".reveal").length&&ScrollReveal().reveal(".reveal",{duration:300}),function(){const o=e(".toc-wrapper");if(0===o.length)return;o.click(e=>{e.stopPropagation(),o.addClass("active")}),e(document).click(()=>o.removeClass("active")),o.on("click","a",e=>{e.preventDefault(),e.stopPropagation(),a("a"===e.target.tagName.toLowerCase?e.target:e.target.parentElement)});const n=Array.from(o.find("li a")),i=function(){n.map(a=>{Math.floor(e(a.getAttribute("href")).offset().top-t)})};let c=i();const s=()=>{const t=e("html").scrollTop()||e("body").scrollTop();if(!c)return;let a,o=0,i=c.length-1;for(;o<i;)c[a=o+i+1>>1]===t?o=i=a:c[a]<t?o=a:i=a-1;e(n).removeClass("active").eq(o).addClass("active")};e(window).resize(()=>{c=i(),s()}).scroll(()=>{s()}),s()}(),e(".article .video-container").fitVids(),setTimeout(function(){e("#loading-bar-wrapper").fadeOut(500)},300),"hexo"===SEARCH_SERVICE?customSearch=new HexoSearch({imagePath:"/images/"}):"google"===SEARCH_SERVICE?customSearch=new GoogleCustomSearch({apiKey:GOOGLE_CUSTOM_SEARCH_API_KEY,engineId:GOOGLE_CUSTOM_SEARCH_ENGINE_ID,imagePath:"/images/"}):"algolia"===SEARCH_SERVICE?customSearch=new AlgoliaSearch({apiKey:ALGOLIA_API_KEY,appId:ALGOLIA_APP_ID,indexName:ALGOLIA_INDEX_NAME,imagePath:"/images/"}):"azure"===SEARCH_SERVICE?customSearch=new AzureSearch({serviceName:AZURE_SERVICE_NAME,indexName:AZURE_INDEX_NAME,queryKey:AZURE_QUERY_KEY,imagePath:"/images/"}):"baidu"===SEARCH_SERVICE&&(customSearch=new BaiduSearch({apiId:BAIDU_API_ID,imagePath:"/images/"}))})}(jQuery);