<?xml version="1.0" encoding="utf-8"?>
<feed xmlns="http://www.w3.org/2005/Atom">
  <title>Titangene Blog</title>
  
  
  <link href="/atom.xml" rel="self"/>
  
  <link href="https://titangene.github.io/"/>
  <updated>2020-05-31T14:26:12.479Z</updated>
  <id>https://titangene.github.io/</id>
  
  <author>
    <name>Titangene</name>
    
  </author>
  
  <generator uri="https://hexo.io/">Hexo</generator>
  
  <entry>
    <title>Jestï¼šå»ºç½®æ¸¬è©¦ç’°å¢ƒ (åŒ…å« Babel)</title>
    <link href="https://titangene.github.io/article/jest-build-test-env.html"/>
    <id>https://titangene.github.io/article/jest-build-test-env.html</id>
    <published>2020-05-24T15:50:20.000Z</published>
    <updated>2020-05-31T14:26:12.479Z</updated>
    
    <content type="html"><![CDATA[<p><img src="../images/cover/jest.jpg" alt=""></p><p>æœ€è¿‘åœ¨å­¸ç¿’å–®å…ƒæ¸¬è©¦ï¼Œè€Œ Jest æ˜¯åœ¨å‰ç«¯è »å¸¸è¦‹çš„æ¸¬è©¦æ¡†æ¶ï¼Œå¯é€éå»ºç«‹æ¸¬è©¦ä¾†ç¢ºä¿è‡ªå·±å¯«çš„ç¨‹å¼ç¢¼æ˜¯å¦ç¬¦åˆéœ€æ±‚ï¼Œè€Œä¸”ç•¶æ”¹å‹•ç¨‹å¼ç¢¼æ™‚ï¼Œæ‰èƒ½ç¢ºä¿æ˜¯å¦å› ä¸å°å¿ƒè€Œç”¢ç”Ÿçš„ bugï¼Œæ¸¬è©¦èƒ½è®“æˆ‘æ›´æœ‰ä¿¡å¿ƒçš„å»é‡æ§‹ç¨‹å¼ç¢¼ã€‚</p><a id="more"></a><p>é‚£ Jest å¯ä»¥ç”¨åœ¨å“ªäº›å°ˆæ¡ˆï¼Ÿä½ å¯ç‚ºä¸‹é¢é€™äº›å°ˆæ¡ˆå»ºç«‹æ¸¬è©¦ï¼š</p><ul><li><a href="https://babeljs.io/" target="_blank" rel="noopener">Babel</a></li><li><a href="https://www.typescriptlang.org/" target="_blank" rel="noopener">TypeScript</a></li><li><a href="https://nodejs.org/en/" target="_blank" rel="noopener">Node</a></li><li><a href="https://angular.io/" target="_blank" rel="noopener">Angular</a>ã€<a href="https://vuejs.org/" target="_blank" rel="noopener">Vue</a>ã€<a href="https://reactjs.org/" target="_blank" rel="noopener">React</a></li><li>â€¦ç­‰</li></ul><p>ä¸‹é¢ä¾†ä»‹ç´¹å¦‚ä½•å»ºç½® Jest çš„æ¸¬è©¦é–‹ç™¼ç’°å¢ƒã€‚</p><h1 id="å»ºç«‹é–‹ç™¼ç’°å¢ƒ"><a class="header-anchor" href="#å»ºç«‹é–‹ç™¼ç’°å¢ƒ"></a>å»ºç«‹é–‹ç™¼ç’°å¢ƒ</h1><h2 id="å»ºç«‹-npm-å°ˆæ¡ˆ"><a class="header-anchor" href="#å»ºç«‹-npm-å°ˆæ¡ˆ"></a>å»ºç«‹ npm å°ˆæ¡ˆ</h2><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs shell"><span class="hljs-meta">$</span><span class="bash"> npm init -y</span><br></code></pre></td></tr></table></figure><h2 id="å®‰è£-Jest"><a class="header-anchor" href="#å®‰è£-Jest"></a>å®‰è£ Jest</h2><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs shell"><span class="hljs-meta">$</span><span class="bash"> yarn add -D jest</span><br></code></pre></td></tr></table></figure><p>æˆ–</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs shell"><span class="hljs-meta">$</span><span class="bash"> npm install -D jest</span><br></code></pre></td></tr></table></figure><h2 id="è¨­å®š-package-json"><a class="header-anchor" href="#è¨­å®š-package-json"></a>è¨­å®š <code>package.json</code></h2><p>åœ¨ <code>package.json</code> åŠ ä¸Šä¸‹é¢å…§å®¹ï¼š</p><figure class="highlight json"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><code class="hljs json">&#123;<br>  <span class="hljs-attr">"scripts"</span>: &#123;<br>    <span class="hljs-attr">"test"</span>: <span class="hljs-string">"jest"</span><br>  &#125;<br>&#125;<br></code></pre></td></tr></table></figure><h1 id="å¯«ç¯„ä¾‹ç¨‹å¼ç¢¼"><a class="header-anchor" href="#å¯«ç¯„ä¾‹ç¨‹å¼ç¢¼"></a>å¯«ç¯„ä¾‹ç¨‹å¼ç¢¼</h1><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><code class="hljs javascript"><span class="hljs-comment">// sum.js</span><br><span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">sum</span>(<span class="hljs-params">a, b</span>) </span>&#123;<br>  <span class="hljs-keyword">return</span> a + b;<br>&#125;<br><span class="hljs-built_in">module</span>.exports = sum;<br></code></pre></td></tr></table></figure><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><code class="hljs javascript"><span class="hljs-comment">// main.js</span><br><span class="hljs-keyword">const</span> sum = <span class="hljs-built_in">require</span>(<span class="hljs-string">'./sum'</span>);<br><br><span class="hljs-built_in">console</span>.log(sum(<span class="hljs-number">1</span>, <span class="hljs-number">2</span>));<br></code></pre></td></tr></table></figure><p>åŸ·è¡Œ <code>main.js</code>ï¼š</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs shell"><span class="hljs-meta">$</span><span class="bash"> node main.js</span><br>3<br></code></pre></td></tr></table></figure><h1 id="å»ºç«‹æ¸¬è©¦"><a class="header-anchor" href="#å»ºç«‹æ¸¬è©¦"></a>å»ºç«‹æ¸¬è©¦</h1><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><code class="hljs javascript"><span class="hljs-comment">// sum.test.js</span><br><span class="hljs-keyword">const</span> sum = <span class="hljs-built_in">require</span>(<span class="hljs-string">'./sum'</span>);<br><br>test(<span class="hljs-string">'adds 1 + 2 to equal 3'</span>, () =&gt; &#123;<br>  <span class="hljs-comment">// Arrange</span><br>  <span class="hljs-keyword">let</span> x = <span class="hljs-number">1</span>, y = <span class="hljs-number">2</span>;<br>  <span class="hljs-keyword">let</span> expected = <span class="hljs-number">3</span>;<br><br>  <span class="hljs-comment">// Act</span><br>  <span class="hljs-keyword">let</span> actual = sum(x, y);<br><br>  <span class="hljs-comment">// Assert</span><br>  expect(actual).toBe(expected);<br>&#125;);<br></code></pre></td></tr></table></figure><h1 id="åŸ·è¡Œæ¸¬è©¦"><a class="header-anchor" href="#åŸ·è¡Œæ¸¬è©¦"></a>åŸ·è¡Œæ¸¬è©¦</h1><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs shell"><span class="hljs-meta">$</span><span class="bash"> yarn <span class="hljs-built_in">test</span></span><br></code></pre></td></tr></table></figure><p>æˆ–</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs shell"><span class="hljs-meta">$</span><span class="bash"> npm run <span class="hljs-built_in">test</span></span><br></code></pre></td></tr></table></figure><p>æ¸¬è©¦é€šéï¼š</p><p><img src="../images/jest-build-test-env/2020-05-24-22-26-37.png" alt=""></p><h1 id="å¾æŒ‡ä»¤åˆ—åŸ·è¡Œæ¸¬è©¦"><a class="header-anchor" href="#å¾æŒ‡ä»¤åˆ—åŸ·è¡Œæ¸¬è©¦"></a>å¾æŒ‡ä»¤åˆ—åŸ·è¡Œæ¸¬è©¦</h1><p>ä¾‹å¦‚ï¼šJest åªåŸ·è¡Œ match <code>my-test</code> çš„æ¸¬è©¦æª”æ¡ˆï¼Œä»¥åŠä½¿ç”¨ <code>config.json</code> ä½œç‚ºé…ç½®æª”æ¡ˆï¼Œä¸¦ä¸”åœ¨åŸ·è¡Œå¾Œé¡¯ç¤º native çš„ OS é€šçŸ¥ï¼š</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs shell"><span class="hljs-meta">$</span><span class="bash"> jest my-test --notify --config=config.json</span><br></code></pre></td></tr></table></figure><p>Jest CLI option èªªæ˜ï¼š</p><ul><li><code>jest &lt;regexForTestFiles&gt;</code>ï¼šmatch åˆ°åç‚º <code>&lt;regexForTestFiles&gt;</code> (åƒæ­¤ç¯„ä¾‹çš„ <code>my-test</code> ) çš„æª”æ¡ˆåŸ·è¡Œ Jest<ul><li>è‹¥åœ¨åŸ·è¡Œ <code>jest</code> æ™‚ä½¿ç”¨äº† <code>&lt;regexForTestFiles&gt;</code> argumentï¼Œè©² argument æœƒè¢«è¦–ç‚º regex patternï¼ŒJest åªæœƒåŸ·è¡Œèˆ‡ pattern match çš„æ¸¬è©¦æª”æ¡ˆ</li><li>æœ‰äº› terminal å¯èƒ½éœ€è¦ç”¨å¼•è™ŸæŠŠ argument åŒ…èµ·ä¾†ï¼Œä¾‹å¦‚ï¼š<code>jest &quot;my.*(complex)?pattern&quot;</code></li><li>Windows éœ€ä½¿ç”¨ <code>/</code> ä½œç‚ºè·¯å¾‘åˆ†éš”å­—å…ƒ (separator) æˆ–å°‡ <code>\</code> è½‰ç¾© (escape) æˆ <code>\\</code></li></ul></li><li><code>--config=&lt;path&gt;</code>ï¼Œ<code>-c=&lt;path&gt;</code>ï¼šä½¿ç”¨ <code>&lt;path&gt;</code> (åƒæ­¤ç¯„ä¾‹çš„ <code>config.json</code> ) ä½œç‚ºé…ç½®æª”æ¡ˆ<ul><li>Jest é…ç½®æª”æ¡ˆçš„è·¯å¾‘ä¾†æŒ‡å®šå¦‚ä½•æŸ¥æ‰¾å’ŒåŸ·è¡Œæ¸¬è©¦</li><li>å¦‚æœåœ¨é…ç½®ä¸­æœªè¨­å®š <code>rootDir</code>ï¼Œå‰‡å‡å®šåŒ…å«é…ç½®æª”æ¡ˆçš„ç›®éŒ„ç‚ºå°ˆæ¡ˆçš„ <code>rootDir</code></li><li>ä¹Ÿå¯ä»¥æ˜¯ JSON-encoded value ä½œç‚º Jest çš„é…ç½®</li></ul></li><li><code>--notify</code>ï¼šåŸ·è¡Œå®Œæˆå¾Œé¡¯ç¤ºåŸç”Ÿçš„ OS é€šçŸ¥<ul><li>æ¿€æ´» (activates) æ¸¬è©¦çµæœé€šçŸ¥</li><li>ç•¶ä½ ä¸å¸Œæœ›è‡ªå·±çš„æ„è­˜èƒ½å¤ å°ˆæ³¨æ–¼ JavaScript æ¸¬è©¦ä»¥å¤–çš„ä»»ä½•äº‹ç‰©æ™‚ï¼Œå¯ç”¨æ­¤ option</li><li>Bewareï¼šJest ä½¿ç”¨ <a href="https://github.com/mikaelbr/node-notifier" target="_blank" rel="noopener">node-notifier</a> ä¾†é¡¯ç¤ºæ¡Œé¢é€šçŸ¥<ul><li>åœ¨ Windows ä¸Šï¼Œå®ƒåœ¨ç¬¬ä¸€æ¬¡ä½¿ç”¨æ™‚æœƒå»ºç«‹ä¸€å€‹æ–°çš„ start menu entryï¼Œä¸¦ä¸”ä¸æœƒé¡¯ç¤ºé€šçŸ¥ã€‚é€šçŸ¥å°‡åœ¨å¾ŒçºŒåŸ·è¡Œä¸­æ­£ç¢ºé¡¯ç¤º</li></ul></li></ul></li></ul><h1 id="Jest-Config"><a class="header-anchor" href="#Jest-Config"></a>Jest Config</h1><p>ä½¿ç”¨ä¸‹é¢æŒ‡ä»¤ç”Ÿæˆ Jest çš„åŸºç¤é…ç½®æª”æ¡ˆ <code>jest.config.js</code>ï¼š</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs shell"><span class="hljs-meta">$</span><span class="bash"> jest --init</span><br></code></pre></td></tr></table></figure><p>å› ç‚ºæˆ‘æ²’æœ‰åœ¨ global å®‰è£ <code>jest</code>ï¼Œæ‰€ä»¥éœ€è¦é€é <code>yarn</code> ä¾†åŸ·è¡Œ Jest CLI (æˆ–æ˜¯å¯é€é <code>npx</code> ä¾†åŸ·è¡Œ)ï¼š</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><code class="hljs shell"><span class="hljs-meta">$</span><span class="bash"> yarn <span class="hljs-built_in">test</span> --init</span><br>yarn run v1.21.1<br><span class="hljs-meta">$</span><span class="bash"> jest --init</span><br><br>The following questions will help Jest to create a suitable configuration for your project<br><br>âœ” Choose the test environment that will be used for testing â€º node<br>âœ” Do you want Jest to add coverage reports? â€¦ yes<br>âœ” Automatically clear mock calls and instances between every test? â€¦ no<br><br>ğŸ“  Configuration file created at /home/titan/.local/share/Trash/files/jest.config.js<br>Done in 7.41s.<br></code></pre></td></tr></table></figure><p>ç¬¬ä¸€å€‹å•é¡Œæˆ‘é¸æ“‡ <code>node</code>ï¼š</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs shell">? Choose the test environment that will be used for testing â€º - Use arrow-keys. Return to submit.<br>â¯   node<br>    jsdom (browser-like)<br></code></pre></td></tr></table></figure><p>ç¬¬äºŒå€‹å•é¡Œï¼šæ˜¯å¦è¦æ¸¬è©¦æ¶µè“‹å ±å‘Š (coverage reports)ï¼Ÿæˆ‘é¸æ“‡ <code>yes</code>ï¼š</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs shell">? Do you want Jest to add coverage reports? â€º (y/N)<br></code></pre></td></tr></table></figure><p>ç¬¬ä¸‰å€‹å•é¡Œï¼šæ˜¯å¦è¦åœ¨æ¯å€‹æ¸¬è©¦ä¹‹é–“è‡ªå‹•æ¸…é™¤ mock calls å’Œ instanceï¼Ÿæˆ‘é¸æ“‡ <code>No</code>ï¼š</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs shell">? Automatically clear mock calls and instances between every test? â€º (y/N)<br></code></pre></td></tr></table></figure><p>ä¸‹é¢æ˜¯å‰›å‰›åŸ·è¡Œ <code>jest init</code> æ™‚ï¼Œæ‰€ç”Ÿæˆçš„ <code>jest.config.js</code> è¨­å®šï¼š</p><ul><li><code>coverageDirectory</code>ï¼šJest è¼¸å‡ºçš„ coverage æª”æ¡ˆè¦æ”¾åœ¨å“ªå€‹ç›®éŒ„<ul><li>é è¨­ï¼š<code>undefined</code></li></ul></li><li><code>testEnvironment</code>ï¼šç”¨æ–¼æ¸¬è©¦çš„æ¸¬è©¦ç’°å¢ƒ<ul><li>é è¨­ï¼š<code>&quot;jsdom&quot;</code> (é¡ä¼¼ç€è¦½å™¨çš„ç’°å¢ƒ)</li><li>è‹¥è¦å»ºç½® node serviceï¼Œå¯ç”¨ <code>&quot;node&quot;</code> ä¾†ä½¿ç”¨é¡ä¼¼ node çš„ç’°å¢ƒ</li></ul></li></ul><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><code class="hljs javascript"><span class="hljs-built_in">module</span>.exports = &#123;<br>  coverageDirectory: <span class="hljs-string">"coverage"</span>,<br>  testEnvironment: <span class="hljs-string">"node"</span><br>&#125;;<br></code></pre></td></tr></table></figure><blockquote><p>æ›´å¤š Jest é…ç½®è¨­å®šï¼Œè©³æƒ…å¯åƒé–± <a href="https://jestjs.io/docs/en/configuration" target="_blank" rel="noopener">Configuring Jest Â· Jest</a>ã€‚</p></blockquote><h1 id="ä½¿ç”¨-Babel"><a class="header-anchor" href="#ä½¿ç”¨-Babel"></a>ä½¿ç”¨ Babel</h1><p>åœ¨å®‰è£ Babel å‰ï¼Œå°‡ç¨‹å¼ç¢¼æ”¹æˆ ES6 èªæ³•ï¼š</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs javascript"><span class="hljs-comment">// sum.js</span><br><span class="hljs-keyword">const</span> sum = <span class="hljs-function">(<span class="hljs-params">a, b</span>) =&gt;</span> a + b;<br><span class="hljs-keyword">export</span> <span class="hljs-keyword">default</span> sum;<br></code></pre></td></tr></table></figure><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><code class="hljs javascript"><span class="hljs-comment">// main.js</span><br><span class="hljs-keyword">import</span> sum <span class="hljs-keyword">from</span> <span class="hljs-string">'./sum'</span>;<br><br><span class="hljs-built_in">console</span>.log(sum(<span class="hljs-number">1</span>, <span class="hljs-number">2</span>));<br></code></pre></td></tr></table></figure><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><code class="hljs javascript"><span class="hljs-comment">// sum.test.js</span><br><span class="hljs-keyword">import</span> sum <span class="hljs-keyword">from</span> <span class="hljs-string">'./sum'</span>;<br><br>test(<span class="hljs-string">'adds 1 + 2 to equal 3'</span>, () =&gt; &#123;<br>  <span class="hljs-comment">// Arrange</span><br>  <span class="hljs-keyword">let</span> x = <span class="hljs-number">1</span>, y = <span class="hljs-number">2</span>;<br>  <span class="hljs-keyword">let</span> expected = <span class="hljs-number">3</span>;<br><br>  <span class="hljs-comment">// Act</span><br>  <span class="hljs-keyword">let</span> actual = sum(x, y);<br><br>  <span class="hljs-comment">// Assert</span><br>  expect(actual).toBe(expected);<br>&#125;);<br></code></pre></td></tr></table></figure><p>è·‘æ¸¬è©¦æœƒå‡ºéŒ¯ï¼Œå› ç‚º Jest éœ€è¦é€é Babel æ‰èƒ½åŸ·è¡Œ ES6 çš„èªæ³•ï¼š</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs shell"><span class="hljs-meta">$</span><span class="bash"> yarn <span class="hljs-built_in">test</span></span><br></code></pre></td></tr></table></figure><p><img src="../images/jest-build-test-env/2020-05-24-23-17-50.png" alt=""></p><p>æ‰€ä»¥ä¾†å®‰è£ <a href="http://babeljs.io/" target="_blank" rel="noopener">Babel</a>ï¼š</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs shell"><span class="hljs-meta">$</span><span class="bash"> yarn add -D babel-jest @babel/core @babel/preset-env</span><br></code></pre></td></tr></table></figure><p>åœ¨å°ˆæ¡ˆæ ¹ç›®éŒ„å»ºç«‹ <code>babel.config.js</code>ï¼Œæ­¤æª”æ¡ˆç”¨æ–¼é…ç½®èˆ‡ä½ ç•¶å‰ Node ç‰ˆæœ¬ç›¸å®¹çš„ Babelï¼š</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><code class="hljs javascript"><span class="hljs-comment">// babel.config.js</span><br><span class="hljs-built_in">module</span>.exports = &#123;<br>  presets: [<br>    [<br>      <span class="hljs-string">'@babel/preset-env'</span>,<br>      &#123;<br>        targets: &#123;<br>          node: <span class="hljs-string">'current'</span>,<br>        &#125;,<br>      &#125;,<br>    ],<br>  ],<br>&#125;;<br></code></pre></td></tr></table></figure><p>å†è·‘æ¸¬è©¦å°±æœƒé€šéï¼š</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs shell"><span class="hljs-meta">$</span><span class="bash"> yarn <span class="hljs-built_in">test</span></span><br></code></pre></td></tr></table></figure><p><img src="../images/jest-build-test-env/2020-05-24-23-24-29.png" alt=""></p><blockquote><p>è©³æƒ…å¯åƒé–± <a href="https://babeljs.io/docs/en/" target="_blank" rel="noopener">Babel å®˜æ–¹æ–‡ä»¶</a>ã€‚</p></blockquote><p>è³‡æ–™ä¾†æºï¼š</p><ul><li><a href="https://jestjs.io/docs/en/getting-started" target="_blank" rel="noopener">Getting Started Â· Jest</a></li><li><a href="https://jestjs.io/docs/en/cli" target="_blank" rel="noopener">Jest CLI Options Â· Jest</a></li><li><a href="https://jestjs.io/docs/en/configuration" target="_blank" rel="noopener">Configuring Jest Â· Jest</a></li></ul>]]></content>
    
    <summary type="html">
    
      &lt;p&gt;&lt;img src=&quot;../images/cover/jest.jpg&quot; alt=&quot;&quot;&gt;&lt;/p&gt;&lt;p&gt;æœ€è¿‘åœ¨å­¸ç¿’å–®å…ƒæ¸¬è©¦ï¼Œè€Œ Jest æ˜¯åœ¨å‰ç«¯è »å¸¸è¦‹çš„æ¸¬è©¦æ¡†æ¶ï¼Œå¯é€éå»ºç«‹æ¸¬è©¦ä¾†ç¢ºä¿è‡ªå·±å¯«çš„ç¨‹å¼ç¢¼æ˜¯å¦ç¬¦åˆéœ€æ±‚ï¼Œè€Œä¸”ç•¶æ”¹å‹•ç¨‹å¼ç¢¼æ™‚ï¼Œæ‰èƒ½ç¢ºä¿æ˜¯å¦å› ä¸å°å¿ƒè€Œç”¢ç”Ÿçš„ bugï¼Œæ¸¬è©¦èƒ½è®“æˆ‘æ›´æœ‰ä¿¡å¿ƒçš„å»é‡æ§‹ç¨‹å¼ç¢¼ã€‚&lt;/p&gt;
    
    </summary>
    
    
      <category term="Testing" scheme="https://titangene.github.io/categories/testing/"/>
    
    
      <category term="Jest" scheme="https://titangene.github.io/tags/jest/"/>
    
      <category term="Unit Testing" scheme="https://titangene.github.io/tags/unit-testing/"/>
    
      <category term="w3HexSchool" scheme="https://titangene.github.io/tags/w3hexschool/"/>
    
      <category term="JavaScript" scheme="https://titangene.github.io/tags/javascript/"/>
    
      <category term="Babel" scheme="https://titangene.github.io/tags/babel/"/>
    
  </entry>
  
  <entry>
    <title>Sassï¼š@import rule</title>
    <link href="https://titangene.github.io/article/sass-import-rule.html"/>
    <id>https://titangene.github.io/article/sass-import-rule.html</id>
    <published>2020-05-17T15:54:46.000Z</published>
    <updated>2020-05-17T15:53:41.487Z</updated>
    
    <content type="html"><![CDATA[<p><img src="../images/cover/sass.jpg" alt=""></p><p>Sass çš„ <code>@import</code> rule å¯ä»¥å¼•å…¥ Sass å’Œ CSS stylesheetã€æä¾›å° mixinã€function å’Œè®Šæ•¸çš„å­˜å–ï¼Œä¸¦ä¸”é‚„èƒ½å°‡å¤šå€‹ stylesheet çš„ CSS çµ„åˆåœ¨ä¸€èµ·ã€‚ä¾‹å¦‚ï¼š<code>main.scss</code> å…§ä½¿ç”¨ <code>@import</code> å¼•å…¥ Sass å’Œ CSS æª”ï¼Œåœ¨ç·¨è­¯ Sass å¾Œï¼Œå°±åªæœƒç”¢ç”Ÿä¸€å€‹ <code>main.css</code> æª”ã€‚</p><a id="more"></a><p>è€Œ CSS æœ¬èº«æä¾›çš„ <code>@import</code> rule æœƒè®“ç€è¦½å™¨åœ¨å‘ˆç¾é é¢æ™‚ï¼Œæœ‰å¹¾å€‹ CSS æª”æ¡ˆæ˜¯é€é <code>@import</code> å¼•å…¥çš„ï¼Œå°±è¦ç™¼å‡ºå¹¾å€‹ HTTP requestï¼Œé€™èˆ‡ Sass <code>@import</code> rule çš„è¡Œç‚ºä¸åŒã€‚</p><h2 id="åŒæ™‚å¼•å…¥å¤šå€‹æª”æ¡ˆ"><a class="header-anchor" href="#åŒæ™‚å¼•å…¥å¤šå€‹æª”æ¡ˆ"></a>åŒæ™‚å¼•å…¥å¤šå€‹æª”æ¡ˆ</h2><p>é›–ç„¶ Sass å’Œ CSS çš„å¼•å…¥èªæ³•ç›¸åŒï¼Œä½† Sass å¯ä»¥ç”¨é€—è™Ÿåˆ†éš”ï¼Œä¸€æ¬¡å¼•å…¥å¤šå€‹æª”æ¡ˆï¼Œä¸éœ€è¦æ¯å€‹æª”æ¡ˆéƒ½å„åˆ¥ç”¨ä¸€è¡Œ <code>@import</code> å¼•å…¥ï¼š</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs sass">&#x2F;&#x2F; _button.scss<br>.button &#123; color: #aaa; &#125;<br></code></pre></td></tr></table></figure><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs sass">&#x2F;&#x2F; _nav.scss<br>.nav &#123; color: #bbb; &#125;<br></code></pre></td></tr></table></figure><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><code class="hljs sass">&#x2F;&#x2F; main.scss<br>@import &#39;button&#39;, &#39;nav&#39;;<br><br>main &#123; color: #000; &#125;<br></code></pre></td></tr></table></figure><p>è¼¸å‡ºï¼š</p><figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs css"><span class="hljs-selector-class">.button</span> &#123; <span class="hljs-attribute">color</span>: <span class="hljs-number">#aaa</span>; &#125;<br><span class="hljs-selector-class">.nav</span> &#123; <span class="hljs-attribute">color</span>: <span class="hljs-number">#bbb</span>; &#125;<br><span class="hljs-selector-tag">main</span> &#123; <span class="hljs-attribute">color</span>: <span class="hljs-number">#000</span>; &#125;<br></code></pre></td></tr></table></figure><p>ç•¶ Sass å¼•å…¥æª”æ¡ˆæ™‚ï¼Œæœƒå°è©²æª”æ¡ˆé€²è¡Œä¼°ç®—ï¼Œå¾ˆåƒæ˜¯å°‡å…§å®¹ç›´æ¥æŠ„åœ¨ä½ ä½¿ç”¨ <code>@import</code> çš„ä½ç½®ä¸Šã€‚</p><p>åœ¨ <code>@import</code> ä¹‹å‰å®šç¾©çš„ä»»ä½• mixinã€function æˆ–è®Šæ•¸ (ç”šè‡³ä¾†è‡ªå…¶ä»– <code>@import</code> çš„) éƒ½å¯ä»¥åœ¨ä½ å¼•å…¥çš„ stylesheet ä¸­ä½¿ç”¨ä»–å€‘ã€‚</p><h2 id="ä¸è¦é‡è¤‡å¼•å…¥"><a class="header-anchor" href="#ä¸è¦é‡è¤‡å¼•å…¥"></a>ä¸è¦é‡è¤‡å¼•å…¥</h2><p>æ‰€ä»¥è‹¥å°åŒä¸€å€‹æª”æ¡ˆå¼•å…¥å¤šæ¬¡ï¼Œå°±æœƒé€ æˆç·¨è­¯å‡ºä¾†çš„ CSS æª”æ¡ˆå…§ï¼Œæœƒæœ‰é‡è¤‡çš„ stylesheetã€‚ä¾‹å¦‚ï¼š</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><code class="hljs sass">&#x2F;&#x2F; main.scss<br>@import &#39;button&#39;;<br>@import &#39;button&#39;;<br><br>main &#123; color: #000; &#125;<br></code></pre></td></tr></table></figure><p>è¼¸å‡ºï¼š</p><figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs css"><span class="hljs-selector-class">.button</span> &#123; <span class="hljs-attribute">color</span>: <span class="hljs-number">#aaa</span>; &#125;<br><span class="hljs-selector-class">.button</span> &#123; <span class="hljs-attribute">color</span>: <span class="hljs-number">#aaa</span>; &#125;<br><span class="hljs-selector-tag">main</span> &#123; <span class="hljs-attribute">color</span>: <span class="hljs-number">#000</span>; &#125;<br></code></pre></td></tr></table></figure><p>é™¤éä½ é‡è¤‡å¼•å…¥çš„æª”æ¡ˆå…§ï¼Œåªæœ‰åƒæ˜¯ mixinã€function æˆ–è®Šæ•¸ç­‰ä¸æœƒç”¢ç”Ÿæ¨£å¼è¦å‰‡çš„æ±è¥¿ï¼Œå°±ä¸æœƒç”¢ç”Ÿé‡è¤‡çš„å…§å®¹ã€‚</p><h2 id="å¼•å…¥ä¸ç”¨å¯«å‰¯æª”å"><a class="header-anchor" href="#å¼•å…¥ä¸ç”¨å¯«å‰¯æª”å"></a>å¼•å…¥ä¸ç”¨å¯«å‰¯æª”å</h2><p>å¦å¤–ï¼Œä½¿ç”¨ Sass çš„ <code>@import</code> rule æ™‚ï¼Œä¸ç”¨å¯«æª”æ¡ˆçš„å‰¯æª”åï¼Œå› ç‚º Sass æœƒè‡ªå‹•å¹«ä½ å¼•å…¥ã€‚</p><p>ä¾‹å¦‚ï¼šç•¶ä½ å¼•å…¥ <code>@import &quot;a&quot;</code> æ™‚ï¼ŒSass æœƒè‡ªå‹•å¼•å…¥ <code>a.scss</code>ã€<code>a.sass</code> æˆ– <code>a.css</code>ã€‚ä½† CSS æœ¬èº«æä¾›çš„ <code>@import</code> rule è¨˜å¾—è¦å¯«æª”æ¡ˆçš„å‰¯æª”åæ‰èƒ½æ­£ç¢ºçš„å¼•å…¥ã€‚</p><h2 id="å¼•å…¥è·¯å¾‘"><a class="header-anchor" href="#å¼•å…¥è·¯å¾‘"></a>å¼•å…¥è·¯å¾‘</h2><ul><li>åœ¨å¼•å…¥ partials (ä»¥ <code>_</code> ç‚ºé–‹é ­çš„æª”æ¡ˆ) æ™‚ï¼Œä¸ç”¨å¯« <code>_</code> å°±èƒ½å¼•å…¥ï¼Œä¸”è©²æª”æ¡ˆä¸æœƒè¢«ç·¨è­¯</li><li>å¼•å…¥æª”æ¡ˆæ™‚å¯çœç•¥ <code>./</code> ç›¸å°å¼•å…¥</li><li>åœ¨ä½¿ç”¨ Sass CLI æ™‚ï¼Œè‹¥æœ‰æä¾› <code>--load-path</code> æˆ– <code>-I</code> optionï¼Œå°±å¯ä»¥ç°¡åŒ–å¼•å…¥çš„è·¯å¾‘<ul><li>è©³æƒ…å¯åƒé–±æˆ‘ä¹‹å‰å¯«çš„ <a href="https://titangene.github.io/article/dart-sass.html#load-path%EF%BC%8C-I">Dart Sass ä»‹ç´¹ (ä½¿ç”¨èˆ‡å®‰è£)</a></li><li>ä½†å¼•å…¥æ™‚ï¼ŒSass æœƒå…ˆè§£æç›¸å°æ–¼ç•¶å‰æª”æ¡ˆçš„è·¯å¾‘ï¼Œè‹¥æ²’æœ‰æ‰¾åˆ°æ™‚ï¼Œæ‰æœƒå¼•å…¥ç›¸å°æ–¼ <code>--load-path</code> æä¾›çš„è·¯å¾‘å…§çš„æª”æ¡ˆ</li></ul></li></ul><p>ä¾‹å¦‚ï¼šåœ¨ <code>node_modules/bootstrap/scss</code> ç›®éŒ„å…§æ­£å¥½æœ‰åç‚º <code>_button.scss</code> çš„æª”æ¡ˆï¼Œè€Œæˆ‘å¼•å…¥äº† <code>@import 'buttons'</code>ï¼š</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs sass">&#x2F;&#x2F; src&#x2F;_buttons.scss<br>.button &#123; color: blue; &#125;<br></code></pre></td></tr></table></figure><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><code class="hljs sass">&#x2F;&#x2F; src&#x2F;main.scss<br>@import &#39;buttons&#39;;<br><br>main &#123; color: #000; &#125;<br></code></pre></td></tr></table></figure><p>ç·¨è­¯ Sass (æ³¨æ„ï¼Œæˆ‘ä½¿ç”¨äº† <code>--load-path</code> optionï¼ŒæŒ‡å®šäº† Bootstrap å…§çš„è·¯å¾‘)ï¼š</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs shell"><span class="hljs-meta">$</span><span class="bash"> sass --load-path=node_modules/bootstrap/scss src/main.scss</span><br></code></pre></td></tr></table></figure><p>ä½†è¼¸å‡ºçš„çµæœè¡¨åï¼Œæˆ‘å¼•å…¥çš„ <code>@import 'buttons'</code> æŒ‡çš„æ˜¯ <code>src/_buttons.scss</code> é€™å€‹æª”æ¡ˆï¼Œè€Œä¸æ˜¯ <code>node_modules/bootstrap/scss</code> ç›®éŒ„å…§çš„ <code>_button.scss</code> é€™å€‹æª”æ¡ˆï¼š</p><figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs css"><span class="hljs-selector-class">.button</span> &#123; <span class="hljs-attribute">color</span>: blue; &#125;<br><span class="hljs-selector-tag">main</span> &#123; <span class="hljs-attribute">color</span>: <span class="hljs-number">#000</span>; &#125;<br></code></pre></td></tr></table></figure><p>å› ç‚ºåœ¨ <code>src</code> ç›®éŒ„å…§ï¼Œ<code>_buttons.scss</code> ç›¸å°æ–¼ <code>main.scss</code>ï¼Œæ‰€ä»¥ä¸æœƒå¼•ç”¨åˆ° Bootstrap å…§çš„æª”æ¡ˆã€‚</p><h2 id="index-æª”æ¡ˆ"><a class="header-anchor" href="#index-æª”æ¡ˆ"></a>index æª”æ¡ˆ</h2><p>è‹¥åœ¨è³‡æ–™å¤¾ (ä¾‹å¦‚ï¼š<code>base</code> è³‡æ–™å¤¾) å…§å»ºç«‹ <code>_index.scss</code> æˆ– <code>_index.sass</code> æª”æ¡ˆï¼Œè€Œ index æª”æ¡ˆå…§å¼•å…¥äº†è©²è³‡æ–™å¤¾å…§çš„å…¶ä»–æª”æ¡ˆ (ä¾‹å¦‚ï¼š<code>_code.scss</code> å’Œ <code>_list.scss</code> ) æ™‚ï¼Œå‰‡å¯ç›´æ¥é€é <code>@import</code> è©²è³‡æ–™å¤¾ä¾†å¼•å…¥é‚£äº›æª”æ¡ˆã€‚</p><p>ç›®éŒ„çµæ§‹ï¼š</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><code class="hljs shell"><span class="hljs-meta">$</span><span class="bash"> tree</span><br>.<br>â”œâ”€â”€ base<br>â”‚   â”œâ”€â”€ _code.scss<br>â”‚   â”œâ”€â”€ _index.scss<br>â”‚   â””â”€â”€ _list.scss<br>â””â”€â”€ main.scss<br></code></pre></td></tr></table></figure><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs sass">&#x2F;&#x2F; base&#x2F;_code.scss<br>code &#123; padding: 4px; &#125;<br></code></pre></td></tr></table></figure><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs sass">&#x2F;&#x2F; base&#x2F;_list.scss<br>ul &#123; padding: 0; &#125;<br></code></pre></td></tr></table></figure><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs sass">&#x2F;&#x2F; base&#x2F;_index.scss<br>@import &#39;code&#39;, &#39;list&#39;;<br></code></pre></td></tr></table></figure><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><code class="hljs sass">&#x2F;&#x2F; main.scss<br>@import &#39;base&#39;;<br><br>main &#123; color: #000; &#125;<br></code></pre></td></tr></table></figure><p>è¼¸å‡ºï¼š</p><figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs css"><span class="hljs-selector-tag">code</span> &#123; <span class="hljs-attribute">padding</span>: <span class="hljs-number">4px</span>; &#125;<br><span class="hljs-selector-tag">ul</span> &#123; <span class="hljs-attribute">padding</span>: <span class="hljs-number">0</span>; &#125;<br><span class="hljs-selector-tag">main</span> &#123; <span class="hljs-attribute">color</span>: <span class="hljs-number">#000</span>; &#125;<br></code></pre></td></tr></table></figure><h2 id="å·¢ç‹€å¼•å…¥"><a class="header-anchor" href="#å·¢ç‹€å¼•å…¥"></a>å·¢ç‹€å¼•å…¥</h2><p>ä¹Ÿå¯ä»¥å·¢ç‹€å¼•å…¥ï¼Œä½†è¦æ³¨æ„çš„æ˜¯åœ¨å·¢ç‹€å¼•å…¥ (nested import) ä¸­å®šç¾©çš„ mixinã€function æˆ–è®Šæ•¸éƒ½é‚„æ˜¯å…¨åŸŸå®šç¾©çš„ï¼š</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs sass">&#x2F;&#x2F; _button.scss<br>.button &#123; color: #aaa; &#125;<br></code></pre></td></tr></table></figure><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><code class="hljs sass">&#x2F;&#x2F; main.scss<br>main &#123;<br>  @import &#39;a&#39;;<br>&#125;<br></code></pre></td></tr></table></figure><p>è¼¸å‡ºï¼š</p><figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs css"><span class="hljs-selector-tag">main</span> <span class="hljs-selector-class">.button</span> &#123; <span class="hljs-attribute">color</span>: <span class="hljs-number">#aaa</span>; &#125;<br></code></pre></td></tr></table></figure><p>è‹¥æ˜¯å·¢ç‹€å¼•å…¥çš„æª”æ¡ˆå…§æœ‰ä½¿ç”¨ parent selectors (ä¹Ÿå°±æ˜¯ <code>&amp;</code> )ï¼Œå‰‡æœƒå¼•ç”¨ stylesheet å·¢ç‹€åœ¨å…¶ä¸­çš„é¸æ“‡å™¨ (ä¼°ç®—çš„æ–¹å¼é¡ä¼¼ mixin)ï¼Œä¾‹å¦‚ï¼š</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><code class="hljs sass">&#x2F;&#x2F; _theme.scss<br>ul li &#123;<br>  padding-left: 16px;<br><br>  [dir&#x3D;rtl] &amp; &#123;<br>    padding-left: 0;<br>    padding-right: 16px;<br>  &#125;<br>&#125;<br></code></pre></td></tr></table></figure><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><code class="hljs sass">&#x2F;&#x2F; style.scss<br>.theme-sample &#123;<br>  @import &#39;theme&#39;;<br>&#125;<br></code></pre></td></tr></table></figure><p>è¼¸å‡ºï¼š</p><figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><code class="hljs css"><span class="hljs-selector-class">.theme-sample</span> <span class="hljs-selector-tag">ul</span> <span class="hljs-selector-tag">li</span> &#123;<br>  <span class="hljs-attribute">padding-left</span>: <span class="hljs-number">16px</span>;<br>&#125;<br><span class="hljs-selector-attr">[dir=rtl]</span> <span class="hljs-selector-class">.theme-sample</span> <span class="hljs-selector-tag">ul</span> <span class="hljs-selector-tag">li</span> &#123;<br>  <span class="hljs-attribute">padding-left</span>: <span class="hljs-number">0</span>;<br>  <span class="hljs-attribute">padding-right</span>: <span class="hljs-number">16px</span>;<br>&#125;<br></code></pre></td></tr></table></figure><h2 id="å¼•å…¥-CSS"><a class="header-anchor" href="#å¼•å…¥-CSS"></a>å¼•å…¥ CSS</h2><p>Sass çš„ <code>@import</code> rule é™¤äº†å¯ä»¥å¼•å…¥ <code>.scss</code> å’Œ <code>.sass</code> æª”ï¼Œä¹Ÿå¯ä»¥å¼•å…¥ <code>.css</code> æª”ã€‚</p><p>ä½†è¦è¨˜å¾—åœ¨å¼•å…¥ <code>.css</code> æª”æ™‚ï¼Œä¸å¯ä»¥åƒ <code>@import 'file.css';</code> é€™æ¨£æ˜ç¢ºçš„å¯«ä½ å¼•å…¥äº† <code>.css</code> æª”ï¼Œè€Œæ˜¯è¦å¿½ç•¥å‰¯æª”åã€‚å› ç‚ºç•¶ä½ æ˜ç¢ºçš„å¯« <code>.css</code> å‰¯æª”åæ™‚ï¼Œä»£è¡¨ä½ æƒ³ç”¨ <a href="https://sass-lang.com/documentation/at-rules/import#plain-css-imports" target="_blank" rel="noopener">CSS åŸæœ¬çš„ <code>@import</code> rule</a>ã€‚</p><p>ä»¥ä¸‹é€™äº›å¼•å…¥æ–¹å¼éƒ½æ˜¯ CSS åŸæœ¬çš„ <code>@import</code> ruleï¼š</p><ul><li>ä»¥ <code>.css</code> ç‚ºçµå°¾çš„ URL</li><li>ä»¥ <code>http://</code> æˆ– <code>https://</code> ç‚ºé–‹é ­çš„ URL</li><li>ç”¨ <code>url()</code> ä¾†å¼•å…¥ URL</li><li>å…·æœ‰ media query çš„å¼•å…¥</li></ul><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><code class="hljs sass">@import &quot;theme.css&quot;;<br>@import &quot;http:&#x2F;&#x2F;fonts.googleapis.com&#x2F;css?family&#x3D;Droid+Sans&quot;;<br>@import url(theme);<br>@import &quot;landscape&quot; screen and (orientation: landscape);<br></code></pre></td></tr></table></figure><h2 id="Interpolation"><a class="header-anchor" href="#Interpolation"></a>Interpolation</h2><p>é›–ç„¶ Sass imports ä¸èƒ½ä½¿ç”¨ <a href="https://sass-lang.com/documentation/interpolation" target="_blank" rel="noopener">interpolation</a>ï¼Œä½† CSS åŸæœ¬çš„ <code>@import</code> æ˜¯å¯ä»¥çš„ã€‚é€™æ¨£å°±å¯ä»¥å‹•æ…‹ç”Ÿæˆå¼•å…¥çš„ URLï¼Œä¾‹å¦‚ï¼š</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><code class="hljs sass">@mixin google-font($family) &#123;<br>  @import url(&quot;http:&#x2F;&#x2F;fonts.googleapis.com&#x2F;css?family&#x3D;#&#123;$family&#125;&quot;);<br>&#125;<br><br>@include google-font(&quot;Droid Sans&quot;);<br></code></pre></td></tr></table></figure><p>è¼¸å‡ºï¼š</p><figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs css"><span class="hljs-keyword">@import</span> url(<span class="hljs-string">"http://fonts.googleapis.com/css?family=Droid Sans"</span>);<br></code></pre></td></tr></table></figure><p>è³‡æ–™ä¾†æºï¼š<a href="https://sass-lang.com/documentation/at-rules/import" target="_blank" rel="noopener">Sass: @import</a></p>]]></content>
    
    <summary type="html">
    
      &lt;p&gt;&lt;img src=&quot;../images/cover/sass.jpg&quot; alt=&quot;&quot;&gt;&lt;/p&gt;&lt;p&gt;Sass çš„ &lt;code&gt;@import&lt;/code&gt; rule å¯ä»¥å¼•å…¥ Sass å’Œ CSS stylesheetã€æä¾›å° mixinã€function å’Œè®Šæ•¸çš„å­˜å–ï¼Œä¸¦ä¸”é‚„èƒ½å°‡å¤šå€‹ stylesheet çš„ CSS çµ„åˆåœ¨ä¸€èµ·ã€‚ä¾‹å¦‚ï¼š&lt;code&gt;main.scss&lt;/code&gt; å…§ä½¿ç”¨ &lt;code&gt;@import&lt;/code&gt; å¼•å…¥ Sass å’Œ CSS æª”ï¼Œåœ¨ç·¨è­¯ Sass å¾Œï¼Œå°±åªæœƒç”¢ç”Ÿä¸€å€‹ &lt;code&gt;main.css&lt;/code&gt; æª”ã€‚&lt;/p&gt;
    
    </summary>
    
    
      <category term="Web Dev" scheme="https://titangene.github.io/categories/web-dev/"/>
    
    
      <category term="w3HexSchool" scheme="https://titangene.github.io/tags/w3hexschool/"/>
    
      <category term="Sass" scheme="https://titangene.github.io/tags/sass/"/>
    
      <category term="CSS" scheme="https://titangene.github.io/tags/css/"/>
    
      <category term="Dart Sass" scheme="https://titangene.github.io/tags/dart-sass/"/>
    
  </entry>
  
  <entry>
    <title>Sassï¼š@use rule</title>
    <link href="https://titangene.github.io/article/sass-use-rule.html"/>
    <id>https://titangene.github.io/article/sass-use-rule.html</id>
    <published>2020-05-10T15:54:48.000Z</published>
    <updated>2020-05-10T23:03:19.504Z</updated>
    
    <content type="html"><![CDATA[<p><img src="../images/cover/sass.jpg" alt=""></p><p>è‹¥è¦æ¨¡çµ„åŒ– Sassï¼Œæœ€å¸¸ç”¨çš„å°±æ˜¯ <code>@import</code> è¦å‰‡ã€‚ä½†åœ¨ <a href="https://titangene.github.io/article/dart-sass.html">Dart Sass</a> æ¨å‡ºäº†ä¸€å€‹æ–°åŠŸèƒ½ï¼šæ¨¡çµ„ç³»çµ±ï¼Œå¯ç”¨ <code>@use</code> è¦å‰‡ï¼Œä¸¦é€é namespace ä¾†å¼•å…¥å…¶ä»– stylesheet ä¸­çš„æˆå“¡ã€‚</p><a id="more"></a><h1 id="Overview"><a class="header-anchor" href="#Overview"></a>Overview</h1><ul><li>è¼‰å…¥å…¶ä»– Sass stylesheet ä¸­çš„ mixinã€å‡½æ•¸å’Œè®Šæ•¸ï¼Œä¸¦å°‡å¤šå€‹ stylesheet ä¸­çš„ CSS çµ„åˆåœ¨ä¸€èµ·</li><li>ä¸ç®¡ç”¨ <code>@use</code> è¼‰å…¥å¹¾æ¬¡çš„ä»»ä½•æ¨£å¼ï¼Œéƒ½åªæœƒåœ¨ç·¨è­¯çš„ CSS è¼¸å‡ºä¸­å‡ºç¾ä¸€æ¬¡</li><li><code>@use</code> å¿…é ˆæ”¾åœ¨æ‰€æœ‰è¦å‰‡ä¹‹å‰ (é™¤äº† <code>@forward</code> å’Œè®Šæ•¸å®£å‘Šä¹‹å¤–)</li><li>ä¾¿æ–¼äº†è§£æˆå“¡æ˜¯å¾å“ªäº›æª”æ¡ˆè¼‰å…¥çš„</li><li>ä¸ç”¨åƒä½¿ç”¨ <code>@import</code> æ™‚é‚£æ¨£ï¼Œéœ€æŠŠå‘½åå¯«æ¸…æ¥šï¼Œå› ç‚ºå¯é€é <code>@use</code> æä¾›çš„ namespace ä¾†é¿å…å‘½åè¡çª</li></ul><div class="info"><p>åªè¦ä½¿ç”¨ <code>@use</code> å¼•å…¥çš„æª”æ¡ˆï¼Œstylesheet å°±æœƒè¢«å…¨éƒ¨å¼•å…¥ï¼Œä¸ç®¡æœ‰ç„¡å¦å¤–ä½¿ç”¨ã€‚</p></div><h1 id="èªæ³•"><a class="header-anchor" href="#èªæ³•"></a>èªæ³•</h1><figure class="highlight scss"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><code class="hljs scss"><span class="hljs-keyword">@use</span> <span class="hljs-string">"&lt;url&gt;"</span>;<br><br><span class="hljs-keyword">@use</span> <span class="hljs-string">"&lt;url&gt;"</span> as &lt;namespace&gt;;<br><span class="hljs-keyword">@use</span> <span class="hljs-string">"&lt;url&gt;"</span> as *;<br><br><span class="hljs-keyword">@use</span> <span class="hljs-string">"&lt;url&gt;"</span> with (<br>  &lt;variable&gt;: &lt;value&gt;,<br>  &lt;variable&gt;: &lt;value&gt;<br>);<br></code></pre></td></tr></table></figure><h1 id="è¼‰å…¥æˆå“¡"><a class="header-anchor" href="#è¼‰å…¥æˆå“¡"></a>è¼‰å…¥æˆå“¡</h1><ul><li>ç”¨ <code>@use</code> è¼‰å…¥çš„ stylesheet ç¨±ç‚ºã€Œmodules (æ¨¡çµ„)ã€ã€‚</li><li>ä½¿ç”¨ <code>@use</code> æ™‚ï¼Œå¯é€é namespace ä¾†å­˜å–å¦ä¸€å€‹æ¨¡çµ„ä¸­çš„è®Šæ•¸ã€å‡½æ•¸å’Œ mixinï¼š<ul><li>è®Šæ•¸ï¼š<code>&lt;namespace&gt;.&lt;variable&gt;</code></li><li>å‡½æ•¸ï¼š<code>&lt;namespace&gt;.&lt;function&gt;()</code></li><li>mixinï¼š<code>@include &lt;namespace&gt;.&lt;mixin&gt;()</code></li></ul></li><li>é è¨­çš„ <code>&lt;namespace&gt;</code> å°±æ˜¯æ¨¡çµ„ URL çš„æª”å (ä¸åŒ…å« <code>_</code> åº•ç·šå‰ç¶´å’Œå‰¯æª”å)</li><li>ç”¨ <code>@use</code> è¼‰å…¥çš„æˆå“¡æœ‰å­˜å–ç¯„åœï¼Œåªæœ‰è¼‰å…¥å®ƒå€‘çš„ stylesheet æ‰èƒ½å­˜å–<ul><li>è‹¥å…¶ä»– stylesheet æƒ³å­˜å–é€™äº›æˆå“¡ï¼Œå°±å¿…é ˆè‡ªå·±å¯« <code>@use</code> è¼‰å…¥</li></ul></li></ul><p>ä¾‹å¦‚ï¼šç”¨ <code>@use</code> å¼•å…¥çš„ <code>styles/base/_color.scss</code> æª”æ¡ˆæœƒåƒä¸‹é¢é€™æ¨£ï¼Œè€Œæ­¤æ¨¡çµ„çš„ namespace å°±æ˜¯ <code>color</code>ï¼š</p><figure class="highlight scss"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs scss"><span class="hljs-comment">// styles/base/_color.scss</span><br><span class="hljs-variable">$blue</span>: <span class="hljs-number">#2979ff</span>;<br></code></pre></td></tr></table></figure><figure class="highlight scss"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><code class="hljs scss"><span class="hljs-comment">// styles/_tool.scss</span><br><span class="hljs-keyword">@mixin</span> rounded &#123;<br>  <span class="hljs-attribute">border-radius</span>: <span class="hljs-number">3px</span>;<br>&#125;<br><br><span class="hljs-keyword">@function</span> px2em(<span class="hljs-variable">$pixel</span>, <span class="hljs-variable">$font-size-base</span>: <span class="hljs-number">16px</span>) &#123;<br>  <span class="hljs-keyword">@return</span> (<span class="hljs-variable">$pixel</span> / <span class="hljs-variable">$font-size-base</span>) * <span class="hljs-number">1em</span>;<br>&#125;<br></code></pre></td></tr></table></figure><figure class="highlight scss"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><code class="hljs scss"><span class="hljs-comment">// styles/main.scss</span><br><span class="hljs-keyword">@use</span> <span class="hljs-string">"base/color"</span>;<br><span class="hljs-keyword">@use</span> <span class="hljs-string">"tool"</span>;<br><br><span class="hljs-selector-class">.button</span> &#123;<br>  <span class="hljs-attribute">padding</span>: <span class="hljs-number">10px</span>;<br>  <span class="hljs-attribute">color</span>: color.<span class="hljs-variable">$blue</span>;<br>  <span class="hljs-attribute">font-size</span>: tool.px2em(<span class="hljs-number">32px</span>);<br>  <span class="hljs-keyword">@include</span> tool.rounded;<br>&#125;<br></code></pre></td></tr></table></figure><p>è¼¸å‡ºï¼š</p><figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><code class="hljs css"><span class="hljs-selector-class">.button</span> &#123;<br>  <span class="hljs-attribute">padding</span>: <span class="hljs-number">10px</span>;<br>  <span class="hljs-attribute">color</span>: <span class="hljs-number">#2979ff</span>;<br>  <span class="hljs-attribute">font-size</span>: <span class="hljs-number">2em</span>;<br>  <span class="hljs-attribute">border-radius</span>: <span class="hljs-number">3px</span>;<br>&#125;<br></code></pre></td></tr></table></figure><h1 id="è¨­å®š-namespace"><a class="header-anchor" href="#è¨­å®š-namespace"></a>è¨­å®š namespace</h1><p>èªæ³•ï¼š</p><figure class="highlight scss"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs scss"><span class="hljs-keyword">@use</span> <span class="hljs-string">"&lt;url&gt;"</span> as &lt;namespace&gt;;<br><span class="hljs-keyword">@use</span> <span class="hljs-string">"&lt;url&gt;"</span> as *;<br></code></pre></td></tr></table></figure><p>è‡ªè¨‚ namespace (å¾ˆåƒè¨­å®š alias) çš„æƒ…å¢ƒï¼š</p><ul><li>è¼‰å…¥ç›¸åŒæª”åçš„å¤šå€‹æ¨¡çµ„ (ä¾‹å¦‚ï¼šç¬¬ä¸‰æ–¹ library å’Œæˆ‘çš„æª”åç›¸åŒ)</li><li>è®“æ¨¡çµ„çš„åç¨±è®ŠçŸ­</li></ul><figure class="highlight scss"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs scss"><span class="hljs-comment">// src/_mycolor.scss</span><br><span class="hljs-variable">$blue</span>: <span class="hljs-number">#2979ff</span>;<br></code></pre></td></tr></table></figure><figure class="highlight scss"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><code class="hljs scss"><span class="hljs-comment">// src/main.scss</span><br><span class="hljs-keyword">@use</span> <span class="hljs-string">"src/mycolor"</span> as color;<br><br><span class="hljs-selector-class">.button</span> &#123;<br>  <span class="hljs-attribute">color</span>: color.<span class="hljs-variable">$blue</span>;<br>&#125;<br></code></pre></td></tr></table></figure><p>è¼¸å‡ºï¼š</p><figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs css"><span class="hljs-selector-class">.button</span> &#123;<br>  <span class="hljs-attribute">color</span>: <span class="hljs-number">#2979ff</span>;<br>&#125;<br></code></pre></td></tr></table></figure><p>ä¹Ÿå¯ç”¨ <code>*</code> ä¾†è¼‰å…¥æ²’æœ‰ namespace çš„æ¨¡çµ„ï¼Œä½†å»ºè­°ä½¿ç”¨åœ¨è‡ªå·±å¯«çš„ stylesheet æˆ– <a href="https://sass-lang.com/documentation/modules" target="_blank" rel="noopener">Sass æä¾›çš„å…§å»ºæ¨¡çµ„</a>ï¼Œä»¥é¿å…å¼•å…¥åç¨±è¡çªçš„æˆå“¡ï¼š</p><p>ä¾‹å¦‚ï¼š</p><figure class="highlight scss"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><code class="hljs scss"><span class="hljs-keyword">@use</span> <span class="hljs-string">'sass:math'</span> as *;<br><br><span class="hljs-variable">$half</span>: percentage(<span class="hljs-number">1</span>/<span class="hljs-number">2</span>);<br><br><span class="hljs-selector-class">.button</span> &#123;<br>  <span class="hljs-attribute">border-radius</span>: <span class="hljs-variable">$half</span>;<br>&#125;<br></code></pre></td></tr></table></figure><p>è¼¸å‡ºï¼š</p><figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs css"><span class="hljs-selector-class">.button</span> &#123;<br>  <span class="hljs-attribute">border-radius</span>: <span class="hljs-number">50%</span>;<br>&#125;<br></code></pre></td></tr></table></figure><h1 id="ç§æœ‰æˆå“¡"><a class="header-anchor" href="#ç§æœ‰æˆå“¡"></a>ç§æœ‰æˆå“¡</h1><p>è‹¥ä½ ä¸æƒ³è®“ä½ å®šç¾©çš„æ‰€æœ‰æˆå“¡éƒ½å¯åœ¨ stylesheet ä¹‹å¤–ä½¿ç”¨ï¼Œå°±å¯åœ¨æˆå“¡åç¨±çš„å‰é¢åŠ ä¸Š <code>-</code> æˆ– <code>_</code>ï¼Œä¾†è®“å®ƒå€‘è®Šæˆç§æœ‰æˆå“¡ã€‚</p><figure class="highlight scss"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><code class="hljs scss"><span class="hljs-comment">// styles/_corner.scss</span><br>$_radius: <span class="hljs-number">3px</span>;<br><br><span class="hljs-keyword">@mixin</span> rounded &#123;<br>  <span class="hljs-attribute">border-radius</span>: $_radius;<br>&#125;<br></code></pre></td></tr></table></figure><figure class="highlight scss"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><code class="hljs scss"><span class="hljs-comment">// styles/main.scss</span><br><span class="hljs-keyword">@use</span> <span class="hljs-string">"corner"</span>;<br><br><span class="hljs-selector-class">.button</span> &#123;<br>  <span class="hljs-attribute">border-radius</span>: corner.rounded;<br>  <span class="hljs-attribute">padding</span>: corner.$_radius;  <span class="hljs-comment">// Error</span><br>&#125;<br></code></pre></td></tr></table></figure><p>ç·¨è­¯æœƒå ±éŒ¯ï¼š</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><code class="hljs shell"><span class="hljs-meta">$</span><span class="bash"> npx sass styles:dict/styles</span><br>Error: Private members can't be accessed from outside their modules.<br>  â•·<br>5 â”‚   padding: corner.$_radius;<br>  â”‚            ^^^^^^^^^^^^^^^<br>  â•µ<br>  src/scss/main.scss 5:12  root stylesheet<br></code></pre></td></tr></table></figure><h1 id="é…ç½®æ¨¡çµ„"><a class="header-anchor" href="#é…ç½®æ¨¡çµ„"></a>é…ç½®æ¨¡çµ„</h1><p>stylesheet å¯ç”¨ <a href="https://sass-lang.com/documentation/variables#default-values" target="_blank" rel="noopener"><code>!default</code> flag</a> ä¾†å®šç¾©è®Šæ•¸ï¼Œæœƒè¢«æ–°çš„å€¼çµ¦è¦†è“‹ã€‚</p><p>è‹¥è¦è¼‰å…¥å¸¶æœ‰é…ç½®çš„æ¨¡çµ„ï¼Œå¯ç”¨ä»¥ä¸‹èªæ³•ï¼š</p><figure class="highlight scss"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><code class="hljs scss"><span class="hljs-keyword">@use</span> <span class="hljs-string">"&lt;url&gt;"</span> with (<br>  &lt;variable&gt;: &lt;value&gt;,<br>  &lt;variable&gt;: &lt;value&gt;<br>);<br></code></pre></td></tr></table></figure><p>é…ç½®çš„å€¼æœƒè¦†è“‹è®Šæ•¸çš„é è¨­å€¼ã€‚</p><p>ä¾‹å¦‚ï¼š</p><figure class="highlight scss"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><code class="hljs scss"><span class="hljs-comment">// styles/base/_color.scss</span><br><span class="hljs-variable">$blue</span>: <span class="hljs-number">#2979ff</span> !default;<br><span class="hljs-variable">$red</span>: <span class="hljs-number">#f44336</span> !default;<br><br><span class="hljs-variable">$primary</span>: <span class="hljs-variable">$blue</span>;<br><span class="hljs-variable">$secondary</span>: <span class="hljs-variable">$red</span>;<br></code></pre></td></tr></table></figure><figure class="highlight scss"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><code class="hljs scss"><span class="hljs-comment">// styles/main.scss</span><br><span class="hljs-keyword">@use</span> <span class="hljs-string">"base/color"</span> with (<br>  <span class="hljs-variable">$blue</span>: <span class="hljs-number">#00f</span>,<br>  <span class="hljs-variable">$red</span>: <span class="hljs-number">#f00</span><br>);<br><br><span class="hljs-selector-class">.button-primary</span> &#123;<br>  <span class="hljs-attribute">background-color</span>: color.<span class="hljs-variable">$primary</span>;<br>&#125;<br><br><span class="hljs-selector-class">.button-secondary</span> &#123;<br>  <span class="hljs-attribute">background-color</span>: color.<span class="hljs-variable">$secondary</span>;<br>&#125;<br></code></pre></td></tr></table></figure><p>è¼¸å‡ºï¼š</p><figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><code class="hljs css"><span class="hljs-selector-class">.button-primary</span> &#123;<br>  <span class="hljs-attribute">background-color</span>: <span class="hljs-number">#00f</span>;<br>&#125;<br><br><span class="hljs-selector-class">.button-secondary</span> &#123;<br>  <span class="hljs-attribute">background-color</span>: <span class="hljs-number">#f00</span>;<br>&#125;<br></code></pre></td></tr></table></figure><p>è³‡æ–™ä¾†æºï¼š</p><ul><li><a href="https://sass-lang.com/documentation/at-rules/use#configuring-modules" target="_blank" rel="noopener">Sass: @use</a></li></ul>]]></content>
    
    <summary type="html">
    
      &lt;p&gt;&lt;img src=&quot;../images/cover/sass.jpg&quot; alt=&quot;&quot;&gt;&lt;/p&gt;&lt;p&gt;è‹¥è¦æ¨¡çµ„åŒ– Sassï¼Œæœ€å¸¸ç”¨çš„å°±æ˜¯ &lt;code&gt;@import&lt;/code&gt; è¦å‰‡ã€‚ä½†åœ¨ &lt;a href=&quot;https://titangene.github.io/article/dart-sass.html&quot;&gt;Dart Sass&lt;/a&gt; æ¨å‡ºäº†ä¸€å€‹æ–°åŠŸèƒ½ï¼šæ¨¡çµ„ç³»çµ±ï¼Œå¯ç”¨ &lt;code&gt;@use&lt;/code&gt; è¦å‰‡ï¼Œä¸¦é€é namespace ä¾†å¼•å…¥å…¶ä»– stylesheet ä¸­çš„æˆå“¡ã€‚&lt;/p&gt;
    
    </summary>
    
    
      <category term="Web Dev" scheme="https://titangene.github.io/categories/web-dev/"/>
    
    
      <category term="w3HexSchool" scheme="https://titangene.github.io/tags/w3hexschool/"/>
    
      <category term="Sass" scheme="https://titangene.github.io/tags/sass/"/>
    
      <category term="CSS" scheme="https://titangene.github.io/tags/css/"/>
    
      <category term="Dart Sass" scheme="https://titangene.github.io/tags/dart-sass/"/>
    
  </entry>
  
  <entry>
    <title>Dart Sass ä»‹ç´¹ (ä½¿ç”¨èˆ‡å®‰è£)</title>
    <link href="https://titangene.github.io/article/dart-sass.html"/>
    <id>https://titangene.github.io/article/dart-sass.html</id>
    <published>2020-05-03T15:54:55.000Z</published>
    <updated>2020-05-10T23:03:26.624Z</updated>
    
    <content type="html"><![CDATA[<p><img src="../images/cover/sass.jpg" alt=""></p><p><a href="https://github.com/sass/dart-sass" target="_blank" rel="noopener">Dart Sass</a> æ˜¯ Sass çš„ä¸»è¦å¯¦ä½œï¼Œéå»å¸¸è¦‹çš„æ˜¯ Ruby Sassï¼Œè€Œç¾ä»Š <a href="https://sass-lang.com/ruby-sass" target="_blank" rel="noopener">Sass å®˜æ–¹æ¨è–¦å¤§å®¶æ”¹ç”¨ Dart Sass</a>ï¼Œå°¤å…¶æ˜¯ç”¨ JavaScript æˆ– Node.js é–‹ç™¼çš„ç›¸é—œå°ˆæ¡ˆã€‚</p><a id="more"></a><p>Dart Sass æ˜¯ Sass çš„ Dart å¯¦ä½œï¼Œæ•ˆèƒ½æ¯” Ruby Sass é‚„è¦å¿«ï¼Œä¸”æ˜“æ–¼å®‰è£ï¼Œé‚„å¯ç·¨è­¯æˆç´” JavaScriptï¼Œè®“æˆ‘å€‘å¯ä»¥è¼•é¬†çš„æ•´åˆè‡³ç¾æœ‰çš„ Web é–‹ç™¼å·¥ä½œæµç¨‹ä¸­ã€‚</p><h1 id="å®‰è£"><a class="header-anchor" href="#å®‰è£"></a>å®‰è£</h1><p>æœ‰å¤šç¨®å®‰è£å’ŒåŸ·è¡Œ Dart Sass çš„æ–¹æ³•ï¼š</p><h2 id="Standalone"><a class="header-anchor" href="#Standalone"></a>Standalone</h2><p>å¾ <a href="https://github.com/sass/dart-sass/releases/" target="_blank" rel="noopener">GitHub Release é é¢</a>ä¸‹è¼‰é©ç”¨æ–¼ä½  OS çš„ standalone Dart Sass archiveï¼Œå…¶ä¸­åŒ…å« Dart VM å’Œ executable çš„ snapshotã€‚</p><p>ä½¿ç”¨æ–¹æ³•å¾ˆç°¡å–®ï¼Œä¸‹è¼‰å¾Œä¸¦è§£å£“ç¸®ï¼Œå°‡è§£å£“ç¸®å¾Œçš„ç›®éŒ„æ–°å¢è‡³ <code>PATH</code> (<a href="https://katiek2.github.io/path-doc/" target="_blank" rel="noopener">é€™ç¯‡</a> æä¾›å„ OS å¦‚ä½•è¨­å®š <code>PATH</code> çš„æ­¥é©Ÿ)ï¼Œæ¥è‘—é‡æ–°å•Ÿå‹• terminalï¼Œç„¶å¾Œå°±èƒ½åŸ·è¡Œ <code>sass</code> executable é–‹å§‹ä½¿ç”¨ï¼</p><h2 id="npm"><a class="header-anchor" href="#npm"></a>npm</h2><p>å¯é€é npm å®‰è£ <a href="https://www.npmjs.com/package/sass" target="_blank" rel="noopener">Dart Sass</a>ï¼Œè©²å¥—ä»¶æ˜¯å·²ç·¨è­¯ç‚º JavaScriptï¼Œä¸”æ²’æœ‰ä»»ä½• native code æˆ–å¤–éƒ¨ä¾è³´ã€‚æä¾› command-line <code>sass</code> executable å’Œ Node.js APIã€‚</p><p>å…¨åŸŸå®‰è£ï¼š</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs shell"><span class="hljs-meta">$</span><span class="bash"> npm install -g sass</span><br></code></pre></td></tr></table></figure><p>local å®‰è£ï¼šæ–°å¢è‡³å°ˆæ¡ˆ</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs shell"><span class="hljs-meta">$</span><span class="bash"> npm init -y</span><br><span class="hljs-meta">$</span><span class="bash"> npm install --save-dev sass</span><br></code></pre></td></tr></table></figure><div class="info"><p>å…¶é¤˜çš„å®‰è£æ–¹å¼å¯åƒè€ƒ <a href="https://github.com/sass/dart-sass#using-dart-sass" target="_blank" rel="noopener">Dart Sass GitHub Repo çš„ README èªªæ˜</a>ã€‚</p></div><h1 id="ç‚ºä½•ç”¨-Dartï¼Ÿ"><a class="header-anchor" href="#ç‚ºä½•ç”¨-Dartï¼Ÿ"></a>ç‚ºä½•ç”¨ Dartï¼Ÿ</h1><p>åœ¨ <a href="https://github.com/sass/dart-sass#why-dart" target="_blank" rel="noopener">Dart Sass GitHub Repo</a> çš„ README æœ‰æåˆ°ç‚ºä½• Dart Sass æœƒå–ä»£ Ruby Sassï¼Œæœ‰ä»¥ä¸‹å¹¾å€‹å„ªé»ï¼š</p><ul><li>æ•ˆèƒ½å¿«ï¼šæ¯” Ruby å¡Šï¼Œä¸”èˆ‡ C++ å·®ä¸å¤š</li><li>å…å®‰è£ï¼š<ul><li>Dart VM æ²’æœ‰å¤–éƒ¨ä¾è³´ï¼Œå¯å°‡æ‡‰ç”¨ç¨‹å¼ç·¨è­¯æˆç¨ç«‹çš„ snapshot æª”æ¡ˆï¼Œå› æ­¤å¯å°‡ Dart Sass åªéœ€ç™¼ä½ˆä¸‰å€‹æª”æ¡ˆ (VMã€snapshot å’Œ wrapper script)</li><li>å¯ç·¨è­¯æˆ JavaScriptï¼Œæ‰€ä»¥å¯é€é npm ç™¼ä½ˆ</li></ul></li><li>å®¹æ˜“å¯«ï¼š<ul><li>Dart æ˜¯æ¯” C++ æ›´é«˜ç´šçš„èªè¨€ï¼Œä¸éœ€è¦å¤ªå¤šçš„è¨˜æ†¶é«”ç®¡ç†å’Œå»ºåˆ¶ç³»çµ±çš„éº»ç…©</li><li>Dart æ˜¯éœæ…‹å‹åˆ¥ (statically typed)ï¼Œèˆ‡ Ruby ç›¸æ¯” å¯æ›´å®¹æ˜“çš„é€²è¡Œå¤§å‹é‡æ§‹</li></ul></li><li>å°è²¢ç»è€…æ›´å‹å¥½ï¼š<ul><li>Dart æ¯” Ruby æ›´å®¹æ˜“å­¸ç¿’</li></ul></li></ul><h1 id="Command-Line"><a class="header-anchor" href="#Command-Line"></a>Command Line</h1><p>Dart Sass executable æœ‰å…©ç¨®ä½¿ç”¨æ¨¡å¼ï¼š</p><ul><li>One-to-One Mode (ä¸€å°ä¸€æ¨¡å¼)</li><li>Many-to-many Mode (å¤šå°å¤šæ¨¡å¼)</li></ul><h2 id="One-to-One-Mode"><a class="header-anchor" href="#One-to-One-Mode"></a>One-to-One Mode</h2><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs shell"><span class="hljs-meta">$</span><span class="bash"> sass &lt;input.scss&gt; [output.css]</span><br></code></pre></td></tr></table></figure><ul><li>ä¸€å€‹è¼¸å…¥æª” ( <code>input.scss</code> ) ç·¨è­¯æˆä¸€å€‹è¼¸å‡ºæª” ( <code>output.scss</code> )</li><li>è‹¥ç‚ºæä¾›è¼¸å‡ºè·¯å¾‘ï¼Œæœƒå°‡å·²ç·¨è­¯çš„ CSS åˆ—å°è‡³ terminal ä¸Š</li><li>è‹¥è¼¸å…¥æª”çš„å‰¯æª”åæ˜¯ï¼š<ul><li><code>.scss</code>ï¼šè§£ææˆ <a href="https://sass-lang.com/documentation/syntax#scss" target="_blank" rel="noopener">SCSS</a></li><li><code>.sass</code>ï¼šè§£ææˆ <a href="https://sass-lang.com/documentation/syntax#the-indented-syntax" target="_blank" rel="noopener">ç¸®æ’èªæ³• (indented syntax)</a></li><li><code>.css</code>ï¼šè§£ææˆ <a href="https://sass-lang.com/documentation/at-rules/import#importing-css" target="_blank" rel="noopener">ç´” CSS</a></li><li>è‹¥éƒ½ä¸æ˜¯ä»¥ä¸Šä¸‰ç¨®ï¼Œæˆ–ä¾†è‡³æ¨™æº–è¼¸å…¥ï¼Œé è¨­æœƒè§£ææˆ SCSS<ul><li>ä¹Ÿå¯ç”¨ <code>--indented</code> flag ä¾†æ§åˆ¶è¼¸å‡ºæ ¼å¼</li></ul></li></ul></li></ul><h2 id="Many-to-many-Mode"><a class="header-anchor" href="#Many-to-many-Mode"></a>Many-to-many Mode</h2><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs shell"><span class="hljs-meta">$</span><span class="bash"> sass [&lt;input.css&gt;:&lt;output.css&gt;] [&lt;input/&gt;:&lt;output/&gt;]...</span><br></code></pre></td></tr></table></figure><ul><li>ä¸€å€‹æˆ–å¤šå€‹è¼¸å…¥æª”ç·¨è­¯æˆä¸€å€‹æˆ–å¤šå€‹è¼¸å‡ºæª”</li><li>è¼¸å…¥å’Œè¼¸å‡ºç”¨ <code>:</code> å­—å…ƒä¾†éš”é–‹</li><li>å¯å°‡ç›®éŒ„ä¸­çš„æ‰€æœ‰ Sass æª”ç·¨è­¯ç‚ºå¦ä¸€å€‹ç›®éŒ„ä¸­å…·æœ‰ç›¸åŒåç¨±çš„ CSS æª”</li></ul><p>ä¾‹å¦‚ï¼š</p><p>å°‡ <code>style.scss</code> ç·¨è­¯æˆ <code>style.css</code></p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs shell"><span class="hljs-meta">$</span><span class="bash"> sass style.scss:style.css</span><br></code></pre></td></tr></table></figure><p>å°‡ <code>light.scss</code> å’Œ <code>dark.scss</code> ç·¨è­¯æˆ <code>light.css</code> å’Œ <code>dark.css</code>ï¼š</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs shell"><span class="hljs-meta">$</span><span class="bash"> sass light.scss:light.css dark.scss:dark.css</span><br></code></pre></td></tr></table></figure><p>å°‡ <code>src/scss/</code> ç›®éŒ„å…§çš„æ‰€æœ‰ Sass æª”ç·¨è­¯è‡³ <code>public/css/</code> ç›®éŒ„ä¸­ï¼Œä¸”æœƒç·¨è­¯æˆ CSS æª”ï¼š</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs shell"><span class="hljs-meta">$</span><span class="bash"> sass src/scss:public/css</span><br></code></pre></td></tr></table></figure><div class="info"><p>ç·¨è­¯æ•´å€‹ç›®éŒ„æ™‚ï¼Œå¦‚æœåªæƒ³ç·¨è­¯å‡ºä¸€å€‹ CSS æª”æ¡ˆ (ä¾‹å¦‚ï¼š<code>main.css</code> )ï¼Œå°±è¦å°‡ä¸»è¦æª”æ¡ˆä¹‹å¤–çš„å…¶ä»–æª”æ¡ˆçš„åç¨±ï¼Œæ”¹ç‚ºä»¥ <code>_</code> ç‚ºé–‹é ­çš„ (ä¾‹å¦‚ï¼š<code>_color.scss</code>ï¼Œé€™ç¨®æª”æ¡ˆè¢«ç¨±ç‚º <a href="https://sass-lang.com/documentation/at-rules/import#partials" target="_blank" rel="noopener">partial æª”æ¡ˆ</a>)ã€‚</p></div><h2 id="CLI-option"><a class="header-anchor" href="#CLI-option"></a>CLI option</h2><h3 id="indented"><a class="header-anchor" href="#indented"></a><code>--indented</code></h3><p>æŒ‡å®šè¼¸å…¥æª”è¦è§£ææˆç¸®æ’èªæ³• (indented syntax)</p><h3 id="load-pathï¼Œ-I"><a class="header-anchor" href="#load-pathï¼Œ-I"></a><code>--load-path</code>ï¼Œ<code>-I</code></h3><ul><li>æ–°å¢é¡å¤–çš„è¼‰å…¥è·¯å¾‘ä¾†æŸ¥æ‰¾ stylesheet</li><li>æ­¤ option å¯ä½¿ç”¨å¤šæ¬¡ï¼Œä»£è¡¨æä¾›å¤šå€‹è¼‰å…¥è·¯å¾‘</li><li>æœ€å…ˆè¼‰å…¥çš„æœƒå„ªå…ˆæ–¼è¼ƒæ™šè¼‰å…¥çš„è·¯å¾‘</li></ul><p>ä¾‹å¦‚ï¼šå¦‚æœæ²’æœ‰ä½¿ç”¨ <code>--load-path</code> optionï¼Œè¦ import Bootstrap å°±å¿…é ˆä½¿ç”¨å¾ˆé•·çš„è·¯å¾‘ï¼š</p><figure class="highlight scss"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs scss"><span class="hljs-keyword">@import</span> <span class="hljs-string">"../node_modules/bootstrap/scss/functions"</span>;<br><span class="hljs-keyword">@import</span> <span class="hljs-string">"../node_modules/bootstrap/scss/variables"</span>;<br><span class="hljs-keyword">@import</span> <span class="hljs-string">"../node_modules/bootstrap/scss/mixins"</span>;<br></code></pre></td></tr></table></figure><p>è‹¥ä½¿ç”¨ <code>--load-path</code> optionï¼Œå°±èƒ½ç°¡çŸ­ import Bootstrap çš„è·¯å¾‘ï¼š</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs shell"><span class="hljs-meta">$</span><span class="bash"> sass --load-path=node_modules src/main.scss dist/main.css</span><br></code></pre></td></tr></table></figure><figure class="highlight scss"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs scss"><span class="hljs-keyword">@import</span> <span class="hljs-string">"bootstrap/scss/functions"</span>;<br><span class="hljs-keyword">@import</span> <span class="hljs-string">"bootstrap/scss/variables"</span>;<br><span class="hljs-keyword">@import</span> <span class="hljs-string">"bootstrap/scss/mixins"</span>;<br></code></pre></td></tr></table></figure><h3 id="styleï¼Œ-s"><a class="header-anchor" href="#styleï¼Œ-s"></a><code>--style</code>ï¼Œ<code>-s</code></h3><p>æŒ‡å®š CSS çš„è¼¸å‡ºæ¨£å¼ã€‚</p><p>Dart Sass æ”¯æ´å…©ç¨®è¼¸å‡ºæ¨£å¼ï¼š</p><ul><li><code>expanded</code>ï¼šé è¨­ï¼Œå°‡æ¯å€‹é¸æ“‡å™¨å’Œå®£å‘Šå¯«åœ¨è‡ªå·±çš„é‚£è¡Œä¸Š</li><li><code>compressed</code>ï¼šåˆªé™¤ç›¡å¯èƒ½å¤šçš„å¤šé¤˜å­—å…ƒï¼Œä¸¦å°‡æ•´å€‹ stylesheet å¯«æˆä¸€è¡Œ</li></ul><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><code class="hljs shell"><span class="hljs-meta">$</span><span class="bash"> sass --style=expanded style.scss</span><br>h1 &#123;<br>  font-size: 40px;<br>&#125;<br><br><span class="hljs-meta">$</span><span class="bash"> sass --style=compressed style.scss</span><br>h1&#123;font-size:40px&#125;<br></code></pre></td></tr></table></figure><h3 id="error-css"><a class="header-anchor" href="#error-css"></a><code>--error-css</code></h3><ul><li>ç•¶ç·¨è­¯æœŸé–“ç™¼ç”ŸéŒ¯èª¤æ™‚ï¼Œæœƒå‘Šè¨´ Sass æ˜¯å¦ emit CSS æª”æ¡ˆ</li><li>è©² CSS æª”æœƒåœ¨è¨»è§£å’Œ <code>body::before</code> çš„ <code>content</code> property ä¸­æè¿°éŒ¯èª¤<ul><li>å¯åœ¨ç€è¦½å™¨ä¸­å¯Ÿçœ‹éŒ¯èª¤è¨Šæ¯ï¼Œè€Œä¸æœƒåˆ‡å› terminal å¯Ÿçœ‹</li></ul></li><li>é è¨­è‹¥è¦ç·¨è­¯è‡³å°‘ä¸€å€‹æª”æ¡ˆ (ä¸æ˜¯æ¨™æº–è¼¸å‡º)ï¼Œå°±æœƒå•Ÿç”¨ error CSS<ul><li>å¯åœ¨ç·¨è­¯æˆæ¨™æº–è¼¸å‡ºæ™‚åŠ ä¸Š <code>--error-css</code> ä¾†å•Ÿç”¨ error CSS</li><li>ä¹Ÿå¯ä»¥åŠ ä¸Š <code>--no-error-css</code> ä¾†ç¦ç”¨ error CSS</li></ul></li><li>ç¦ç”¨ error CSS å¾Œï¼Œ<code>--update</code> flag å’Œ <code>--watch</code> flag æœƒåœ¨ç™¼ç”ŸéŒ¯èª¤æ™‚åˆªé™¤ CSS æª”æ¡ˆ</li></ul><p>ä¾‹å¦‚ï¼šä»¥ä¸‹ Sass æª”çš„å…§å®¹æ˜¯éŒ¯èª¤çš„ï¼š</p><figure class="highlight scss"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs scss"><span class="hljs-comment">// main.scss</span><br><span class="hljs-variable">$width</span>: <span class="hljs-number">15px</span> + <span class="hljs-number">2em</span>;<br></code></pre></td></tr></table></figure><p>ç·¨è­¯æ­¤ Sass æª”æœƒå‡ºç¾ä»¥ä¸‹éŒ¯èª¤ï¼š</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><code class="hljs shell"><span class="hljs-meta">$</span><span class="bash"> sass --error-css main.scss main.css</span><br>Error: Incompatible units em and px.<br>  â•·<br>1 â”‚ $width: 15px + 2em;<br>  â”‚         ^^^^^^^^^^<br>  â•µ<br>  test.scss 1:9  root stylesheet<br></code></pre></td></tr></table></figure><p>è€Œè¼¸å‡ºçš„ <code>main.css</code> æª”çš„å…§å®¹å¦‚ä¸‹ï¼š</p><figure class="highlight scss"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><code class="hljs scss"><span class="hljs-comment">/* Error: Incompatible units em and px.</span><br><span class="hljs-comment"> *   ,</span><br><span class="hljs-comment"> * 1 | $width: 15px + 2em;</span><br><span class="hljs-comment"> *   |         ^^^^^^^^^^</span><br><span class="hljs-comment"> *   '</span><br><span class="hljs-comment"> *   test.scss 1:9  root stylesheet */</span><br><br><span class="hljs-selector-tag">body</span><span class="hljs-selector-pseudo">::before</span> &#123;<br>  <span class="hljs-attribute">font-family</span>: <span class="hljs-string">"Source Code Pro"</span>, <span class="hljs-string">"SF Mono"</span>, Monaco, Inconsolata, <span class="hljs-string">"Fira Mono"</span>,<br>      <span class="hljs-string">"Droid Sans Mono"</span>, monospace, monospace;<br>  <span class="hljs-attribute">white-space</span>: pre;<br>  <span class="hljs-attribute">display</span>: block;<br>  <span class="hljs-attribute">padding</span>: <span class="hljs-number">1em</span>;<br>  <span class="hljs-attribute">margin-bottom</span>: <span class="hljs-number">1em</span>;<br>  <span class="hljs-attribute">border-bottom</span>: <span class="hljs-number">2px</span> solid black;<br>  <span class="hljs-attribute">content</span>: <span class="hljs-string">"Error: Incompatible units em and px.\a   \2577 \a 1 \2502  $width: 15px + 2em;\a   \2502          ^^^^^^^^^^\a   \2575 \a   test.scss 1:9  root stylesheet"</span>;         <br>&#125;<br></code></pre></td></tr></table></figure><p>è‹¥ç”¨ç€è¦½å™¨å¯Ÿçœ‹ä½¿ç”¨æ­¤ <code>main.css</code> æª”çš„é é¢æœƒåƒä¸‹åœ–é€™æ¨£ï¼š</p><p><img src="../images/dart-sass/error-css.png" alt=""></p><h3 id="update"><a class="header-anchor" href="#update"></a><code>--update</code></h3><ul><li>ç•¶ stylesheets çš„ä¾è³´æ›´æ–°æ™‚ï¼ŒSass å°±åªæœƒç·¨è­¯ stylesheets</li><li>æ›´æ–° stylesheets æ™‚ï¼Œæœƒåˆ—å°ç‹€æ…‹è¨Šæ¯</li></ul><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs shell"><span class="hljs-meta">$</span><span class="bash"> sass --update themes:public/css</span><br>Compiled themes/light.scss to public/css/light.css.<br></code></pre></td></tr></table></figure><h3 id="watch"><a class="header-anchor" href="#watch"></a><code>--watch</code></h3><p>é¡ä¼¼ <code>--update</code>ï¼Œä½†æ˜¯åœ¨å®Œæˆç¬¬ä¸€æ¬¡ç·¨è­¯å¾Œï¼ŒSass ä¿æŒ open ç‹€æ…‹ï¼Œä¸¦åœ¨ stylesheets æˆ–å…¶ä¾è³´ç™¼ç”Ÿæ›´æ”¹æ™‚ç¹¼çºŒç·¨è­¯ stylesheetsã€‚</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><code class="hljs shell"><span class="hljs-meta">$</span><span class="bash"> sass --watch themes:public/css</span><br>Compiled themes/light.scss to public/css/light.css.<br><br><span class="hljs-meta">#</span><span class="bash"> Then when you edit themes/dark.scss...</span><br>Compiled themes/dark.scss to public/css/dark.css.<br></code></pre></td></tr></table></figure><h2 id="å¸¸ç”¨çš„-option"><a class="header-anchor" href="#å¸¸ç”¨çš„-option"></a>å¸¸ç”¨çš„ option</h2><p>é–‹ç™¼ç”¨ï¼š</p><ul><li><code>--watch</code>ï¼šwatch æ¨¡å¼</li><li><code>-I node_modules</code>ï¼šæ–°å¢é¡å¤–è¼‰å…¥çš„ <code>node_modules</code> ç›®éŒ„</li></ul><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs shell"><span class="hljs-meta">$</span><span class="bash"> sass --watch -I node_modules src/scss:dict/styles</span><br></code></pre></td></tr></table></figure><p>éƒ¨ç½²ç”¨ (build)ï¼š</p><ul><li><code>-s compressed</code>ï¼šCSS Minifier</li></ul><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs shell"><span class="hljs-meta">$</span><span class="bash"> sass -s compressed src/scss:dict/styles</span><br></code></pre></td></tr></table></figure><div class="info"><p>æ›´å¤š CLI option å¯åƒé–± <a href="https://sass-lang.com/documentation/cli/dart-sass" target="_blank" rel="noopener">Sass æ–‡ä»¶</a>ã€‚</p></div><h1 id="è³‡æ–™ä¾†æº"><a class="header-anchor" href="#è³‡æ–™ä¾†æº"></a>è³‡æ–™ä¾†æº</h1><ul><li><a href="https://github.com/sass/dart-sass#using-dart-sass" target="_blank" rel="noopener">sass/dart-sass: The reference implementation of Sass, written in Dart.</a></li><li><a href="https://sass-lang.com/ruby-sass" target="_blank" rel="noopener">Sass: Ruby Sass</a></li><li><a href="https://www.npmjs.com/package/sass" target="_blank" rel="noopener">sass - npm</a></li><li><a href="https://sass-lang.com/install" target="_blank" rel="noopener">Sass: Install Sass</a></li><li><a href="https://www.dart-china.org/t/topic/146" target="_blank" rel="noopener">CSS é è™•ç†å™¨ Sass çš„é è¨­å¯¦ä½œå°‡é·ç§»åˆ° Dart Sass - åˆ†äº« - Dart ä¸­æ–‡ç¤¾å€</a></li><li><a href="https://sass-lang.com/documentation/cli/dart-sass" target="_blank" rel="noopener">Sass: Dart Sass Command-Line Interface</a></li></ul>]]></content>
    
    <summary type="html">
    
      &lt;p&gt;&lt;img src=&quot;../images/cover/sass.jpg&quot; alt=&quot;&quot;&gt;&lt;/p&gt;&lt;p&gt;&lt;a href=&quot;https://github.com/sass/dart-sass&quot; target=&quot;_blank&quot; rel=&quot;noopener&quot;&gt;Dart Sass&lt;/a&gt; æ˜¯ Sass çš„ä¸»è¦å¯¦ä½œï¼Œéå»å¸¸è¦‹çš„æ˜¯ Ruby Sassï¼Œè€Œç¾ä»Š &lt;a href=&quot;https://sass-lang.com/ruby-sass&quot; target=&quot;_blank&quot; rel=&quot;noopener&quot;&gt;Sass å®˜æ–¹æ¨è–¦å¤§å®¶æ”¹ç”¨ Dart Sass&lt;/a&gt;ï¼Œå°¤å…¶æ˜¯ç”¨ JavaScript æˆ– Node.js é–‹ç™¼çš„ç›¸é—œå°ˆæ¡ˆã€‚&lt;/p&gt;
    
    </summary>
    
    
      <category term="Web Dev" scheme="https://titangene.github.io/categories/web-dev/"/>
    
    
      <category term="Dart" scheme="https://titangene.github.io/tags/dart/"/>
    
      <category term="w3HexSchool" scheme="https://titangene.github.io/tags/w3hexschool/"/>
    
      <category term="CLI" scheme="https://titangene.github.io/tags/cli/"/>
    
      <category term="Sass" scheme="https://titangene.github.io/tags/sass/"/>
    
      <category term="CSS" scheme="https://titangene.github.io/tags/css/"/>
    
      <category term="Dart Sass" scheme="https://titangene.github.io/tags/dart-sass/"/>
    
  </entry>
  
  <entry>
    <title>npm / Yarn å¥—ä»¶ç®¡ç†å™¨æŒ‡ä»¤æ¯”å° cheatsheet</title>
    <link href="https://titangene.github.io/article/npm-and-yarn-cheatsheet.html"/>
    <id>https://titangene.github.io/article/npm-and-yarn-cheatsheet.html</id>
    <published>2020-04-26T11:36:11.000Z</published>
    <updated>2020-05-03T14:05:17.000Z</updated>
    
    <content type="html"><![CDATA[<p><img src="../images/cover/npm_yarn.jpg" alt=""></p><p>npm æˆ– Yarn éƒ½æ˜¯æœ€å¸¸è¦‹çš„ Node.js å¥—ä»¶ç®¡ç†å™¨ã€‚æœ¬ç¯‡ç´€éŒ„å…©å€‹ CLI å°æ‡‰çš„æŒ‡ä»¤ã€‚</p><a id="more"></a><h2 id="å»ºç«‹æ–°å°ˆæ¡ˆ"><a class="header-anchor" href="#å»ºç«‹æ–°å°ˆæ¡ˆ"></a>å»ºç«‹æ–°å°ˆæ¡ˆ</h2><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs shell"><span class="hljs-meta">$</span><span class="bash"> npm init</span><br><span class="hljs-meta">$</span><span class="bash"> npm init -y</span><br></code></pre></td></tr></table></figure><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs shell"><span class="hljs-meta">$</span><span class="bash"> yarn init</span><br><span class="hljs-meta">$</span><span class="bash"> yarn init -y</span><br></code></pre></td></tr></table></figure><h2 id="å®‰è£å°ˆæ¡ˆ-package-json-ä¸­çš„æ‰€æœ‰ç›¸ä¾å¥—ä»¶"><a class="header-anchor" href="#å®‰è£å°ˆæ¡ˆ-package-json-ä¸­çš„æ‰€æœ‰ç›¸ä¾å¥—ä»¶"></a>å®‰è£å°ˆæ¡ˆ <code>package.json</code> ä¸­çš„æ‰€æœ‰ç›¸ä¾å¥—ä»¶</h2><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs shell"><span class="hljs-meta">$</span><span class="bash"> yarn</span><br><span class="hljs-meta">$</span><span class="bash"> yarn install</span><br></code></pre></td></tr></table></figure><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs shell"><span class="hljs-meta">$</span><span class="bash"> npm install</span><br><span class="hljs-meta">$</span><span class="bash"> npm i</span><br></code></pre></td></tr></table></figure><h2 id="å®‰è£ç›¸ä¾å¥—ä»¶"><a class="header-anchor" href="#å®‰è£ç›¸ä¾å¥—ä»¶"></a>å®‰è£ç›¸ä¾å¥—ä»¶</h2><p>å®‰è£ç›¸ä¾å¥—ä»¶ï¼Œä¸¦å°‡å¥—ä»¶æ–°å¢è‡³ä¸åŒé¡å‹çš„ <code>dependencies</code>ï¼š</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs shell"><span class="hljs-meta">$</span><span class="bash"> npm i &lt;package&gt;</span><br><span class="hljs-meta">$</span><span class="bash"> npm install &lt;package&gt;</span><br></code></pre></td></tr></table></figure><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs shell"><span class="hljs-meta">$</span><span class="bash"> yarn add &lt;package&gt;</span><br><span class="hljs-meta">$</span><span class="bash"> yarn add &lt;package&gt;@&lt;version&gt;</span><br><span class="hljs-meta">$</span><span class="bash"> yarn add &lt;package&gt;@&lt;tag&gt;</span><br></code></pre></td></tr></table></figure><p>å®‰è£å¥—ä»¶ä¸¦å°‡æ­¤å¥—ä»¶å„²å­˜è‡³ <code>package.json</code> ä¸­çš„ <code>dependencies</code> (ç›®å‰ npm çš„é è¨­åƒæ•¸ï¼Œä¸éœ€åŠ  <code>-S</code> å°±æœ‰æ­¤åŠŸèƒ½ï¼ŒèˆŠç‰ˆ npm éœ€è¦åŠ æ­¤ option æ‰æœƒå°‡å®‰è£çš„å¥—ä»¶å­˜è‡³ <code>package.json</code> )ï¼š</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs shell"><span class="hljs-meta">$</span><span class="bash"> npm install &lt;package&gt; --save</span><br><span class="hljs-meta">$</span><span class="bash"> npm install &lt;package&gt; -S</span><br></code></pre></td></tr></table></figure><h3 id="æ–°å¢è‡³ä¸åŒé¡å‹çš„-dependencies"><a class="header-anchor" href="#æ–°å¢è‡³ä¸åŒé¡å‹çš„-dependencies"></a>æ–°å¢è‡³ä¸åŒé¡å‹çš„ dependencies</h3><p>å®‰è£ç›¸ä¾å¥—ä»¶ï¼Œä¸¦å°‡å¥—ä»¶æ–°å¢è‡³ä¸åŒé¡å‹çš„ <code>devDependencies</code>ï¼š</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs shell"><span class="hljs-meta">$</span><span class="bash"> npm install &lt;package&gt; --save-dev</span><br><span class="hljs-meta">$</span><span class="bash"> npm install &lt;package&gt; -D</span><br></code></pre></td></tr></table></figure><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs shell"><span class="hljs-meta">$</span><span class="bash"> yarn add &lt;package&gt; --dev</span><br><span class="hljs-meta">$</span><span class="bash"> yarn add &lt;package&gt; -D</span><br></code></pre></td></tr></table></figure><p>å®‰è£ç›¸ä¾å¥—ä»¶ï¼Œä¸¦å°‡å¥—ä»¶æ–°å¢è‡³ä¸åŒé¡å‹çš„ <code>optionalDependencies</code>ï¼š</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs shell"><span class="hljs-meta">$</span><span class="bash"> npm install &lt;package&gt; --save-optional</span><br><span class="hljs-meta">$</span><span class="bash"> npm install &lt;package&gt; -O</span><br></code></pre></td></tr></table></figure><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs shell"><span class="hljs-meta">$</span><span class="bash"> yarn add &lt;package&gt; --optional</span><br><span class="hljs-meta">$</span><span class="bash"> yarn add &lt;package&gt; -O</span><br></code></pre></td></tr></table></figure><p>å®‰è£ç›¸ä¾å¥—ä»¶ï¼Œä¸¦å°‡å¥—ä»¶æ–°å¢è‡³ä¸åŒé¡å‹çš„ <code>bundleDependencies</code>ï¼š</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs shell"><span class="hljs-meta">$</span><span class="bash"> npm install &lt;package&gt; --save-bundle</span><br><span class="hljs-meta">$</span><span class="bash"> npm install &lt;package&gt; -B</span><br></code></pre></td></tr></table></figure><p>å®‰è£ç›¸ä¾å¥—ä»¶ï¼Œä¸¦å°‡å¥—ä»¶æ–°å¢è‡³ä¸åŒé¡å‹çš„ <code>peerDependencies</code>ï¼š</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs shell"><span class="hljs-meta">$</span><span class="bash"> yarn add &lt;package&gt; --peer</span><br><span class="hljs-meta">$</span><span class="bash"> yarn add &lt;package&gt; -P</span><br></code></pre></td></tr></table></figure><blockquote><p>ä¸åŒé¡å‹çš„ dependencies å¯åƒé–± <a href="https://classic.yarnpkg.com/zh-Hant/docs/dependency-types/" target="_blank" rel="noopener">Yarn å®˜æ–¹æ–‡ä»¶ä¸­çš„ã€Œä¾è³´é—œä¿‚çš„ç¨®é¡ã€</a> é€™ç¯‡ã€‚</p></blockquote><h3 id="å®‰è£æŒ‡å®šç‰ˆæœ¬"><a class="header-anchor" href="#å®‰è£æŒ‡å®šç‰ˆæœ¬"></a>å®‰è£æŒ‡å®šç‰ˆæœ¬</h3><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs shell"><span class="hljs-meta">$</span><span class="bash"> npm install &lt;package&gt; --save-exact</span><br><span class="hljs-meta">$</span><span class="bash"> npm install &lt;package&gt; -E</span><br></code></pre></td></tr></table></figure><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs shell"><span class="hljs-meta">$</span><span class="bash"> yarn add &lt;package&gt; --exact</span><br><span class="hljs-meta">$</span><span class="bash"> yarn add &lt;package&gt; -E</span><br></code></pre></td></tr></table></figure><h3 id="å®‰è£æ¬¡ç‰ˆè™Ÿçš„æœ€æ–°ç‰ˆ"><a class="header-anchor" href="#å®‰è£æ¬¡ç‰ˆè™Ÿçš„æœ€æ–°ç‰ˆ"></a>å®‰è£æ¬¡ç‰ˆè™Ÿçš„æœ€æ–°ç‰ˆ</h3><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs shell"><span class="hljs-meta">$</span><span class="bash"> yarn add &lt;package&gt; --tilde</span><br><span class="hljs-meta">$</span><span class="bash"> yarn add &lt;package&gt; -T</span><br></code></pre></td></tr></table></figure><h3 id="åœ¨å…¨åŸŸå®‰è£å¥—ä»¶"><a class="header-anchor" href="#åœ¨å…¨åŸŸå®‰è£å¥—ä»¶"></a>åœ¨å…¨åŸŸå®‰è£å¥—ä»¶</h3><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs shell"><span class="hljs-meta">$</span><span class="bash"> npm install -g &lt;package&gt;</span><br></code></pre></td></tr></table></figure><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs shell"><span class="hljs-meta">$</span><span class="bash"> yarn global add &lt;package&gt;</span><br></code></pre></td></tr></table></figure><h2 id="å‡ç´šç›¸ä¾å¥—ä»¶"><a class="header-anchor" href="#å‡ç´šç›¸ä¾å¥—ä»¶"></a>å‡ç´šç›¸ä¾å¥—ä»¶</h2><p>å‡ç´šç›®å‰å°ˆæ¡ˆçš„ç›¸ä¾å¥—ä»¶ï¼š</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs shell"><span class="hljs-meta">$</span><span class="bash"> npm update</span><br><span class="hljs-meta">$</span><span class="bash"> npm update &lt;package&gt;</span><br></code></pre></td></tr></table></figure><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs shell"><span class="hljs-meta">$</span><span class="bash"> yarn upgrade</span><br><span class="hljs-meta">$</span><span class="bash"> yarn upgrade &lt;package&gt;</span><br></code></pre></td></tr></table></figure><p>å…¨åŸŸçš„ç›¸ä¾å¥—ä»¶ï¼š</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs shell"><span class="hljs-meta">$</span><span class="bash"> npm update -g</span><br><span class="hljs-meta">$</span><span class="bash"> npm update -g &lt;package&gt;</span><br></code></pre></td></tr></table></figure><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs shell"><span class="hljs-meta">$</span><span class="bash"> yarn global upgrade</span><br><span class="hljs-meta">$</span><span class="bash"> yarn global upgrade &lt;package&gt;</span><br></code></pre></td></tr></table></figure><h3 id="å‡ç´šè‡³æœ€æ–°ç‰ˆ"><a class="header-anchor" href="#å‡ç´šè‡³æœ€æ–°ç‰ˆ"></a>å‡ç´šè‡³æœ€æ–°ç‰ˆ</h3><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs shell"><span class="hljs-meta">$</span><span class="bash"> yarn upgrade &lt;package&gt; --latest</span><br></code></pre></td></tr></table></figure><h2 id="å‡ç´šç›¸ä¾å¥—ä»¶å¯é¸æ“‡æ˜¯å¦å‡ç´š"><a class="header-anchor" href="#å‡ç´šç›¸ä¾å¥—ä»¶å¯é¸æ“‡æ˜¯å¦å‡ç´š"></a>å‡ç´šç›¸ä¾å¥—ä»¶å¯é¸æ“‡æ˜¯å¦å‡ç´š</h2><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs shell"><span class="hljs-meta">$</span><span class="bash"> yarn upgrade-interactive &lt;package&gt;</span><br></code></pre></td></tr></table></figure><h2 id="åˆªé™¤å¥—ä»¶"><a class="header-anchor" href="#åˆªé™¤å¥—ä»¶"></a>åˆªé™¤å¥—ä»¶</h2><p>åˆªé™¤ç›®å‰å°ˆæ¡ˆçš„ç›¸ä¾å¥—ä»¶ï¼š</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs shell"><span class="hljs-meta">$</span><span class="bash"> npm uninstall &lt;package&gt;</span><br></code></pre></td></tr></table></figure><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs shell"><span class="hljs-meta">$</span><span class="bash"> yarn remove &lt;package&gt;</span><br></code></pre></td></tr></table></figure><p>åˆªé™¤å…¨åŸŸçš„ç›¸ä¾å¥—ä»¶ï¼š</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs shell"><span class="hljs-meta">$</span><span class="bash"> npm uninstall -g &lt;package&gt;</span><br></code></pre></td></tr></table></figure><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs shell"><span class="hljs-meta">$</span><span class="bash"> yarn global remove &lt;package&gt;</span><br></code></pre></td></tr></table></figure><h2 id="åˆ—å‡ºå·²å®‰è£çš„å¥—ä»¶"><a class="header-anchor" href="#åˆ—å‡ºå·²å®‰è£çš„å¥—ä»¶"></a>åˆ—å‡ºå·²å®‰è£çš„å¥—ä»¶</h2><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs shell"><span class="hljs-meta">$</span><span class="bash"> npm ls</span><br></code></pre></td></tr></table></figure><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs shell"><span class="hljs-meta">$</span><span class="bash"> yarn list</span><br></code></pre></td></tr></table></figure><p>è³‡æ–™ä¾†æº</p><ul><li><a href="https://classic.yarnpkg.com/zh-Hant/docs/migrating-from-npm" target="_blank" rel="noopener">migrating from npm | Yarn</a></li><li><a href="https://classic.yarnpkg.com/zh-Hant/docs/cli/add" target="_blank" rel="noopener">yarn add | Yarn</a></li></ul>]]></content>
    
    <summary type="html">
    
      &lt;p&gt;&lt;img src=&quot;../images/cover/npm_yarn.jpg&quot; alt=&quot;&quot;&gt;&lt;/p&gt;&lt;p&gt;npm æˆ– Yarn éƒ½æ˜¯æœ€å¸¸è¦‹çš„ Node.js å¥—ä»¶ç®¡ç†å™¨ã€‚æœ¬ç¯‡ç´€éŒ„å…©å€‹ CLI å°æ‡‰çš„æŒ‡ä»¤ã€‚&lt;/p&gt;
    
    </summary>
    
    
      <category term="Web Dev" scheme="https://titangene.github.io/categories/web-dev/"/>
    
    
      <category term="Node.js" scheme="https://titangene.github.io/tags/node-js/"/>
    
      <category term="w3HexSchool" scheme="https://titangene.github.io/tags/w3hexschool/"/>
    
      <category term="version manager" scheme="https://titangene.github.io/tags/version-manager/"/>
    
      <category term="JavaScript" scheme="https://titangene.github.io/tags/javascript/"/>
    
      <category term="CLI" scheme="https://titangene.github.io/tags/cli/"/>
    
      <category term="npm" scheme="https://titangene.github.io/tags/npm/"/>
    
      <category term="Yarn" scheme="https://titangene.github.io/tags/yarn/"/>
    
  </entry>
  
  <entry>
    <title>nvmï¼šå®‰è£ã€åˆ‡æ›ä¸åŒ Node.js ç‰ˆæœ¬çš„ç®¡ç†å™¨</title>
    <link href="https://titangene.github.io/article/nvm.html"/>
    <id>https://titangene.github.io/article/nvm.html</id>
    <published>2020-04-19T15:56:52.000Z</published>
    <updated>2020-05-03T14:05:35.000Z</updated>
    
    <content type="html"><![CDATA[<p><img src="../images/cover/node.jpg" alt=""></p><p>nvm æ˜¯ Node.js çš„ç‰ˆæœ¬ç®¡ç†å™¨ (version manager)ï¼Œå¯åœ¨åŒä¸€å°ä¸»æ©Ÿä¸Šå®‰è£å¤šå€‹ç‰ˆæœ¬çš„ Node.js ç’°å¢ƒï¼Œå› ç‚ºä¸åŒå°ˆæ¡ˆå¯èƒ½æœƒä½¿ç”¨ä¸åŒçš„ Node.js ç‰ˆæœ¬ï¼Œé‚£å°±éœ€è¦é€éä¸€å€‹ç‰ˆæœ¬ç®¡ç†å™¨ä¾†åˆ‡æ›ä¸åŒçš„ Node.js ç‰ˆæœ¬ã€‚</p><a id="more"></a><h2 id="å®‰è£-NVM"><a class="header-anchor" href="#å®‰è£-NVM"></a>å®‰è£ NVM</h2><p>å¯ç”¨ <code>cURL</code> æˆ– <code>wget</code> æŒ‡ä»¤ä½¿ç”¨å®‰è£è…³æœ¬å®‰è£æˆ–æ›´æ–° nvmï¼š</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs shell"><span class="hljs-meta">$</span><span class="bash"> curl -o- https://raw.githubusercontent.com/nvm-sh/nvm/v0.34.0/install.sh | bash</span><br></code></pre></td></tr></table></figure><p>æˆ–</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs shell"><span class="hljs-meta">$</span><span class="bash"> wget -qO- https://raw.githubusercontent.com/nvm-sh/nvm/v0.34.0/install.sh | bash</span><br></code></pre></td></tr></table></figure><p>æ­¤å®‰è£è…³æœ¬æœƒå°‡ nvm repo clone åˆ° <code>~/.nvm</code>ï¼Œä¸¦ä¸”å°‡ source line æ–°å¢è‡³ä½ çš„ profile è¨­å®š ( <code>~/.bash_profile</code>ã€<code>~/.zshrc</code>ã€<code>~/.profile</code> æˆ– <code>~/.bashrc</code> )ï¼š</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs bash"><span class="hljs-built_in">export</span> NVM_DIR=<span class="hljs-string">"<span class="hljs-variable">$HOME</span>/.nvm"</span><br>[ -s <span class="hljs-string">"<span class="hljs-variable">$NVM_DIR</span>/nvm.sh"</span> ] &amp;&amp; \. <span class="hljs-string">"<span class="hljs-variable">$NVM_DIR</span>/nvm.sh"</span>  <span class="hljs-comment"># This loads nvm</span><br>[ -s <span class="hljs-string">"<span class="hljs-variable">$NVM_DIR</span>/bash_completion"</span> ] &amp;&amp; \. <span class="hljs-string">"<span class="hljs-variable">$NVM_DIR</span>/bash_completion"</span>  <span class="hljs-comment"># This loads nvm bash_completion</span><br></code></pre></td></tr></table></figure><p>å¦‚æœåœ¨ Linux åŸ·è¡Œå®‰è£è…³æœ¬å¾Œï¼ŒåŸ·è¡Œä¸‹é¢æŒ‡ä»¤æœƒé¡¯ç¤ºä»¥ä¸‹è¨Šæ¯æˆ–æ²’æœ‰ä»»ä½•è¨Šæ¯æ™‚ï¼Œå»ºè­°é‡é–‹ä¸€å€‹æ–°çš„çµ‚ç«¯æ©Ÿ (terminal) å†é‡æ–°åŸ·è¡Œä¸€æ¬¡ <code>nvm</code> æŒ‡ä»¤ï¼š</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs shell"><span class="hljs-meta">$</span><span class="bash"> <span class="hljs-built_in">command</span> -v nvm</span><br>nvm: command not found<br></code></pre></td></tr></table></figure><p>å¦‚æœé‚„æ˜¯ç„¡æ³•ä½¿ç”¨ nvmï¼Œå¯åŸ·è¡Œä¸‹é¢æŒ‡ä»¤ç«‹å³æ‡‰ç”¨ ZSH çš„è¨­å®šï¼š</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs shell"><span class="hljs-meta">$</span><span class="bash"> <span class="hljs-built_in">source</span> .zshrc</span><br></code></pre></td></tr></table></figure><div class="warning"><p>æ³¨æ„ï¼š</p><ul><li>ä½¿ç”¨ <code>nvm</code> æ™‚ï¼Œä¸éœ€è¦ <code>sudo</code> å³å¯ä½¿ç”¨ <code>npm -g</code> å…¨åŸŸå®‰è£æ¨¡çµ„ï¼Œæ‰€ä»¥èˆ‡å…¶åŸ·è¡Œ <code>sudo npm i -g</code>ï¼Œä¸å¦‚åŸ·è¡Œ <code>npm i -g</code></li><li>è‹¥ä½ æœ‰ <code>~/.npmrc</code>ï¼Œè«‹ç¢ºä¿è£¡é¢ä¸åŒ…å«ä»»ä½• <code>prefix</code> çš„è¨­å®š (å› ç‚ºèˆ‡ <code>nvm</code> ä¸ç›¸å®¹)</li><li>ä½ å¯ä»¥ (ä½†ä¸æ‡‰è©²) ä¿ç•™ä»¥å‰åœ¨ â€œç³»çµ±â€ å®‰è£çš„ Node.jsï¼Œä½† <code>nvm</code> åªå°ä½ çš„ä½¿ç”¨è€…å¸³æˆ¶ (ç”¨æ–¼å®‰è£ <code>nvm</code> çš„ä½¿ç”¨è€…å¸³æˆ¶) å¯ç”¨ã€‚å¯èƒ½æœƒå°è‡´ç‰ˆæœ¬ä¸ matchï¼Œå› ç‚ºå…¶ä»–ä½¿ç”¨è€…æœƒä½¿ç”¨ <code>/usr/local/lib/node_modules/*</code>ï¼Œè€Œä½¿ç”¨è€…å¸³æˆ¶æœƒä½¿ç”¨ <code>~/.nvm/versions/node/vX.X.X/lib/node_modules/*</code></li></ul></div><h2 id="versionï¼šç¢ºèª-NVM-æ˜¯å¦å®‰è£æˆåŠŸ"><a class="header-anchor" href="#versionï¼šç¢ºèª-NVM-æ˜¯å¦å®‰è£æˆåŠŸ"></a><code>--version</code>ï¼šç¢ºèª NVM æ˜¯å¦å®‰è£æˆåŠŸ</h2><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs shell"><span class="hljs-meta">$</span><span class="bash"> nvm --version</span><br>0.34.0<br></code></pre></td></tr></table></figure><h2 id="installï¼šåˆ©ç”¨-NVM-å®‰è£-Node-js"><a class="header-anchor" href="#installï¼šåˆ©ç”¨-NVM-å®‰è£-Node-js"></a><code>install</code>ï¼šåˆ©ç”¨ NVM å®‰è£ Node.js</h2><p>å®‰è£ NVM å¾Œï¼Œå…¶å¯¦é‚„æ²’å®‰è£ Node ç’°å¢ƒï¼š</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs shell"><span class="hljs-meta">$</span><span class="bash"> node  </span><br>zsh: command not found: node<br></code></pre></td></tr></table></figure><p>å¦‚æœåŸ·è¡Œä¸‹é¢æŒ‡ä»¤ï¼Œæœƒæé†’ä½ éœ€è¦åŸ·è¡Œ <code>install</code> æŒ‡ä»¤æ‰èƒ½å®‰è£ Node.jsï¼š</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><code class="hljs shell"><span class="hljs-meta">$</span><span class="bash"> nvm use node</span><br>N/A: version "node -&gt; N/A" is not yet installed.<br><br>You need to run "nvm install node" to install it before using it.<br></code></pre></td></tr></table></figure><p>å®‰è£æœ€æ–°ç‰ˆçš„ Node.jsï¼š</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><code class="hljs shell"><span class="hljs-meta">$</span><span class="bash"> nvm install node</span><br>Downloading and installing node v12.8.1...<br>Downloading https://nodejs.org/dist/v12.8.1/node-v12.8.1-linux-x64.tar.xz...<br><span class="hljs-meta">#</span><span class="bash"><span class="hljs-comment">################################################################################################### 100.0%</span></span><br>Computing checksum with sha256sum<br>Checksums matched!<br>Now using node v12.8.1 (npm v6.10.2)<br>Creating default alias: default -&gt; node (-&gt; v12.8.1)<br></code></pre></td></tr></table></figure><p>å¦‚æœè¦æŒ‡å®šå®‰è£ç‰ˆæœ¬ï¼Œå¯ä»¥ç›´æ¥æŒ‡å®šç‰ˆæœ¬è™Ÿï¼š</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs shell"><span class="hljs-meta">$</span><span class="bash"> nvm install 8.9.1</span><br></code></pre></td></tr></table></figure><p>å®‰è£çš„ç¬¬ä¸€å€‹ç‰ˆæœ¬çš„ Node.js æœƒæˆå“¡ nvm çš„é è¨­ç‰ˆæœ¬ï¼Œæ–°çš„ shell å°±æœƒä»¥é è¨­ç‰ˆæœ¬çš„ Node.js ä¾†ä½¿ç”¨ (ä¾‹å¦‚ï¼š<code>nvm alias default</code>)ã€‚</p><p>æŸ¥çœ‹ç›®å‰å®‰è£ Node.js çš„ç‰ˆæœ¬ï¼š</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs shell"><span class="hljs-meta">$</span><span class="bash"> node -v</span><br>v12.8.1<br></code></pre></td></tr></table></figure><h2 id="ls-remoteï¼šå¯Ÿçœ‹å¯ç”¨çš„å®‰è£ç‰ˆæœ¬"><a class="header-anchor" href="#ls-remoteï¼šå¯Ÿçœ‹å¯ç”¨çš„å®‰è£ç‰ˆæœ¬"></a><code>ls-remote</code>ï¼šå¯Ÿçœ‹å¯ç”¨çš„å®‰è£ç‰ˆæœ¬</h2><p>å¯ä»¥çœ‹ç›®å‰æœ‰å“ªäº›å¯ç”¨ç‰ˆæœ¬å¯å®‰è£ï¼Œåœ¨ç‰ˆæœ¬è™Ÿå‰é¢çš„ <code>-&gt;</code> ç®­é ­ç¬¦è™Ÿä»£è¡¨ç›®å‰ nvm æ­£åœ¨ä½¿ç”¨çš„ Node.js ç‰ˆæœ¬ï¼š</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><code class="hljs shell"><span class="hljs-meta">$</span><span class="bash"> nvm ls-remote</span><br>...<br>       v10.16.1   (LTS: Dubnium)<br>       v10.16.2   (LTS: Dubnium)<br>       v10.16.3   (Latest LTS: Dubnium)<br>...<br>        v12.7.0<br>        v12.8.0<br><span class="hljs-meta">-&gt;</span><span class="bash">      v12.8.1</span><br></code></pre></td></tr></table></figure><p>ä¸éå‰›å‰›çš„ <code>ls-remote</code> æŒ‡ä»¤æœƒæŠŠæ‰€æœ‰å¯ç”¨çš„ç‰ˆæœ¬éƒ½åˆ—å‡ºä¾†ï¼Œä½†é€šå¸¸æœƒé¸æ“‡å®‰è£ LTS (Long-term supportï¼Œé•·æœŸæ”¯æ´) ç‰ˆï¼Œæ‰€ä»¥åªè¦åŠ ä¸Š <code>-lts</code> åƒæ•¸å°±å¯ä»¥æŒ‡åˆ—å‡ºå¯ç”¨çš„ LTS ç‰ˆï¼š</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><code class="hljs shell"><span class="hljs-meta">$</span><span class="bash"> nvm ls-remote --lts</span><br>...<br>       v10.16.1   (LTS: Dubnium)<br>       v10.16.2   (LTS: Dubnium)<br>       v10.16.3   (Latest LTS: Dubnium)<br></code></pre></td></tr></table></figure><p>å¦‚æœç‰ˆæœ¬è™Ÿçš„æ–‡å­—æœ‰ç‰¹æ®Šé¡è‰² (ä¸æ˜¯ç™½è‰²å­—)ï¼Œå‰‡ä»£è¡¨è©²ç‰ˆæœ¬çš„ Node.js æœ‰é€é nvm å®‰è£éï¼Œä¾‹å¦‚ï¼šæˆ‘çš„é›»è…¦å°±å®‰è£äº† <code>v10.16.3</code> å’Œ <code>v12.8.1</code>ï¼š</p><p><img src="../images/nvm/nvm-ls-remote.png" alt=""></p><h2 id="lsï¼šæŸ¥çœ‹ç›®å‰å®‰è£äº†å“ªäº›ç‰ˆæœ¬"><a class="header-anchor" href="#lsï¼šæŸ¥çœ‹ç›®å‰å®‰è£äº†å“ªäº›ç‰ˆæœ¬"></a><code>ls</code>ï¼šæŸ¥çœ‹ç›®å‰å®‰è£äº†å“ªäº›ç‰ˆæœ¬</h2><p><code>ls</code> æŒ‡ä»¤å¯ä»¥æŸ¥çœ‹ç›®å‰å®‰è£äº†å“ªäº›ç‰ˆæœ¬ï¼š</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><code class="hljs shell"><span class="hljs-meta">$</span><span class="bash"> nvm ls</span><br>       v10.16.3<br><span class="hljs-meta">-&gt;</span><span class="bash">      v12.8.1</span><br>default -&gt; node (-&gt; v12.8.1)<br>node -&gt; stable (-&gt; v12.8.1) (default)<br>stable -&gt; 12.8 (-&gt; v12.8.1) (default)<br>iojs -&gt; N/A (default)<br>unstable -&gt; N/A (default)<br>lts/* -&gt; lts/dubnium (-&gt; N/A)<br>lts/argon -&gt; v4.9.1 (-&gt; N/A)<br>lts/boron -&gt; v6.17.1 (-&gt; N/A)<br>lts/carbon -&gt; v8.16.1 (-&gt; N/A)<br>lts/dubnium -&gt; v10.16.3<br></code></pre></td></tr></table></figure><h2 id="useï¼šåˆ‡æ›-Node-js-ç‰ˆæœ¬"><a class="header-anchor" href="#useï¼šåˆ‡æ›-Node-js-ç‰ˆæœ¬"></a><code>use</code>ï¼šåˆ‡æ› Node.js ç‰ˆæœ¬</h2><p>å¦‚æœè¦ä½¿ç”¨ nvm åˆ‡æ›æ­£åœ¨ä½¿ç”¨çš„ Node.js ç‰ˆæœ¬ï¼Œå¯ç”¨ <code>use</code> æŒ‡ä»¤ï¼š</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs shell"><span class="hljs-meta">$</span><span class="bash"> nvm use v10.6.3</span><br>Now using node v10.16.3 (npm v6.9.0)<br></code></pre></td></tr></table></figure><p>å¦‚æœåˆ‡æ›çš„ç›®æ¨™ç‰ˆæœ¬é‚„æ²’å®‰è£ï¼Œnvm æœƒæé†’ä½ è¦å®‰è£ï¼š</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><code class="hljs shell"><span class="hljs-meta">$</span><span class="bash"> nvm use lts/carbon </span><br>N/A: version "lts/carbon -&gt; N/A" is not yet installed.<br><br>You need to run "nvm install lts/carbon" to install it before using it.<br></code></pre></td></tr></table></figure><p>é€é nvm å®‰è£ Node.js æ™‚ï¼Œnvm æœƒå°‡ä¸åŒçš„ Node.js ç‰ˆæœ¬å„²å­˜åœ¨ <code>~/.nvm/versions/node/vX.X.X</code>ï¼Œç„¶å¾Œå†ä¿®æ”¹ <code>$PATH</code>ï¼Œå°‡æŒ‡å®šç‰ˆæœ¬çš„ Node.js è·¯å¾‘åŠ å…¥ï¼š</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><code class="hljs shell"><span class="hljs-meta">$</span><span class="bash"> nvm current</span><br>v10.16.3<br><span class="hljs-meta">$</span><span class="bash"> <span class="hljs-built_in">echo</span> <span class="hljs-variable">$PATH</span>             </span><br>/home/titan/.nvm/versions/node/v10.16.3/bin:/usr/local/sbin:/usr/local/bin:/usr/sbin:/usr/bin:/sbin:/bin<br><br><span class="hljs-meta">$</span><span class="bash"> use v12.13.1</span><br><span class="hljs-meta">$</span><span class="bash"> nvm current</span><br>v12.13.1<br><span class="hljs-meta">$</span><span class="bash"> <span class="hljs-built_in">echo</span> <span class="hljs-variable">$PATH</span>             </span><br>/home/titan/.nvm/versions/node/v12.13.1/bin:/usr/local/sbin:/usr/local/bin:/usr/sbin:/usr/bin:/sbin:/bin<br></code></pre></td></tr></table></figure><p>åœ¨ nvm çš„å„å€‹ Node.js ç‰ˆæœ¬å®‰è£çš„å…¨åŸŸå¥—ä»¶éƒ½æœƒåœ¨å„è‡ªç‰ˆæœ¬çš„ç›®éŒ„å…§å®‰è£ï¼Œæ‰€ä»¥åœ¨åˆ‡æ›è‡³æ–°å®‰è£çš„ Node.js ç‰ˆæœ¬å¾Œéœ€è¦é‡æ–°å®‰è£ï¼Œä¹Ÿå› ç‚ºå¦‚æ­¤ï¼Œä¸åŒç‰ˆæœ¬é–“çš„å¥—ä»¶å°±ä¸æœƒæœ‰è¡çªå•é¡Œã€‚</p><h2 id="currentï¼šå¯Ÿçœ‹ç›®å‰ä½¿ç”¨ç‰ˆæœ¬"><a class="header-anchor" href="#currentï¼šå¯Ÿçœ‹ç›®å‰ä½¿ç”¨ç‰ˆæœ¬"></a><code>current</code>ï¼šå¯Ÿçœ‹ç›®å‰ä½¿ç”¨ç‰ˆæœ¬</h2><p>å¦‚æœå¿˜è¨˜è‡ªå·±åˆ‡æ›åˆ°å“ªå€‹ç‰ˆæœ¬ï¼Œå¯ä»¥ç”¨ <code>current</code> æŒ‡ä»¤ï¼š</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs shell"><span class="hljs-meta">$</span><span class="bash"> nvm current</span><br>v10.6.3<br></code></pre></td></tr></table></figure><h2 id="runï¼šç›´æ¥åŸ·è¡Œ-Node-js"><a class="header-anchor" href="#runï¼šç›´æ¥åŸ·è¡Œ-Node-js"></a><code>run</code>ï¼šç›´æ¥åŸ·è¡Œ Node.js</h2><p>å¦‚æœè¦ç›´æ¥åŸ·è¡Œ Node.jsï¼Œå¯ä»¥ä½¿ç”¨ä¸‹é¢æŒ‡ä»¤ï¼š</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><code class="hljs shell"><span class="hljs-meta">$</span><span class="bash"> nvm run node</span><br>Running node v12.8.1 (npm v6.10.2)<br>Welcome to Node.js v12.8.1.<br>Type ".help" for more information.<br><span class="hljs-meta">&gt;</span><br></code></pre></td></tr></table></figure><h2 id="execï¼šæŒ‡å®šè¦åŸ·è¡Œçš„-Node-js-ç‰ˆæœ¬"><a class="header-anchor" href="#execï¼šæŒ‡å®šè¦åŸ·è¡Œçš„-Node-js-ç‰ˆæœ¬"></a><code>exec</code>ï¼šæŒ‡å®šè¦åŸ·è¡Œçš„ Node.js ç‰ˆæœ¬</h2><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><code class="hljs shell"><span class="hljs-meta">$</span><span class="bash"> nvm <span class="hljs-built_in">exec</span> 12.8.1 node</span><br>Running node v12.8.1 (npm v6.10.2)<br>Welcome to Node.js v12.8.1.<br>Type ".help" for more information.<br><span class="hljs-meta">&gt;</span><br></code></pre></td></tr></table></figure><h2 id="whichï¼šå¯Ÿçœ‹-Node-js-çš„å®‰è£è·¯å¾‘"><a class="header-anchor" href="#whichï¼šå¯Ÿçœ‹-Node-js-çš„å®‰è£è·¯å¾‘"></a><code>which</code>ï¼šå¯Ÿçœ‹ Node.js çš„å®‰è£è·¯å¾‘</h2><p>åŸ·è¡Œä¸‹é¢æŒ‡ä»¤å¯ä»¥æŸ¥çœ‹ç‰¹å®šç‰ˆæœ¬çš„ Node.js çš„å®‰è£è·¯å¾‘ï¼š</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs shell"><span class="hljs-meta">$</span><span class="bash"> nvm <span class="hljs-built_in">which</span> 12.8.1</span><br>/home/titan/.nvm/versions/node/v12.8.1/bin/node<br></code></pre></td></tr></table></figure><h2 id="alias"><a class="header-anchor" href="#alias"></a>alias</h2><p>å¦‚ä¸‹åœ–æœ‰äº›ç‰ˆæœ¬çš„æ–‡å­—æ˜¯ç´…è‰²æˆ–æ˜¯é¡¯ç¤º <code>N/A</code>ï¼Œå°±ä»£è¡¨è©²ç‰ˆæœ¬æœªåœ¨é›»è…¦å®‰è£ï¼š</p><p><img src="../images/nvm/nvm-ls.png" alt=""></p><p>é è¨­ alias å¯ä»¥å–ä»£ç‰ˆæœ¬è™Ÿï¼š</p><ul><li><code>node</code>ï¼šå®‰è£æœ€æ–°ç‰ˆçš„ Node.js</li><li><code>iojs</code>ï¼šå®‰è£æœ€æ–°ç‰ˆçš„ io.js</li><li><code>stable</code>ï¼šæ­¤ alias å·²æ£„ç”¨ï¼Œåƒ…é©ç”¨æ–¼ v0.12 ä»¥åŠæ›´èˆŠç‰ˆï¼Œç›®å‰æ”¹ç‚º <code>node</code> alias</li><li><code>unstable</code>ï¼šæ­¤ alias ç‚º v0.11ï¼Œæœ€å¾Œä¸€å€‹ â€œunstableâ€ (ä¸ç©©å®š) Node releaseï¼Œåœ¨ v1.0 ä¹‹å¾Œçš„ç‰ˆæœ¬éƒ½æ˜¯ç©©å®šç‰ˆ (in SemVer, versions communicate breakage, not stability)</li></ul><p>å¯åœ¨ä¸‹é¢é€™äº›æŒ‡ä»¤ä½¿ç”¨ä»¥ä¸Šé è¨­åˆ¥åï¼š</p><ul><li><code>nvm install</code></li><li><code>nvm use</code></li><li><code>nvm run</code></li><li><code>nvm exec</code></li><li><code>nvm which</code></li><li>â€¦ ç­‰</li></ul><h2 id="aliasï¼šå¯Ÿçœ‹åˆ¥åã€è¨­å®šåˆ¥å"><a class="header-anchor" href="#aliasï¼šå¯Ÿçœ‹åˆ¥åã€è¨­å®šåˆ¥å"></a><code>alias</code>ï¼šå¯Ÿçœ‹åˆ¥åã€è¨­å®šåˆ¥å</h2><h3 id="å¯Ÿçœ‹åˆ¥å"><a class="header-anchor" href="#å¯Ÿçœ‹åˆ¥å"></a>å¯Ÿçœ‹åˆ¥å</h3><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><code class="hljs shell"><span class="hljs-meta">$</span><span class="bash"> nvm <span class="hljs-built_in">alias</span>                                                                    * ?</span><br>default -&gt; v10.16.3<br>node -&gt; stable (-&gt; v12.8.1) (default)<br>stable -&gt; 12.8 (-&gt; v12.8.1) (default)<br>iojs -&gt; N/A (default)<br>unstable -&gt; N/A (default)<br>lts/* -&gt; lts/erbium (-&gt; N/A)<br>lts/argon -&gt; v4.9.1 (-&gt; N/A)<br>lts/boron -&gt; v6.17.1 (-&gt; N/A)<br>lts/carbon -&gt; v8.16.2 (-&gt; N/A)<br>lts/dubnium -&gt; v10.17.0 (-&gt; N/A)<br>lts/erbium -&gt; v12.13.0 (-&gt; N/A)<br></code></pre></td></tr></table></figure><h3 id="è¨­å®šåˆ¥å"><a class="header-anchor" href="#è¨­å®šåˆ¥å"></a>è¨­å®šåˆ¥å</h3><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs shell"><span class="hljs-meta">$</span><span class="bash"> nvm <span class="hljs-built_in">alias</span> titan-test v10.15.3                                                  * ?</span><br>titan-test -&gt; v10.15.3<br></code></pre></td></tr></table></figure><p>æ¥è‘—ç”¨ <code>nvm alias</code> æŒ‡ä»¤å°±æœƒçœ‹åˆ°å‰›å‰›æ–°å¢çš„åˆ¥åæ‰€å°æ‡‰çš„ Node.js ç‰ˆæœ¬ï¼š</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><code class="hljs shell"><span class="hljs-meta">$</span><span class="bash"> nvm <span class="hljs-built_in">alias</span>                                                                    * ?</span><br>titan-test -&gt; v10.15.3<br>default -&gt; v10.16.3<br>node -&gt; stable (-&gt; v12.8.1) (default)<br>stable -&gt; 12.8 (-&gt; v12.8.1) (default)<br>iojs -&gt; N/A (default)<br>unstable -&gt; N/A (default)<br>lts/* -&gt; lts/erbium (-&gt; N/A)<br>lts/argon -&gt; v4.9.1 (-&gt; N/A)<br>lts/boron -&gt; v6.17.1 (-&gt; N/A)<br>lts/carbon -&gt; v8.16.2 (-&gt; N/A)<br>lts/dubnium -&gt; v10.17.0 (-&gt; N/A)<br>lts/erbium -&gt; v12.13.0 (-&gt; N/A)<br></code></pre></td></tr></table></figure><h2 id="è³‡æ–™ä¾†æº"><a class="header-anchor" href="#è³‡æ–™ä¾†æº"></a>è³‡æ–™ä¾†æº</h2><ul><li><a href="https://github.com/nvm-sh/nvm#install--update-script" target="_blank" rel="noopener">nvm-sh/nvm: Node Version Manager</a></li></ul>]]></content>
    
    <summary type="html">
    
      &lt;p&gt;&lt;img src=&quot;../images/cover/node.jpg&quot; alt=&quot;&quot;&gt;&lt;/p&gt;&lt;p&gt;nvm æ˜¯ Node.js çš„ç‰ˆæœ¬ç®¡ç†å™¨ (version manager)ï¼Œå¯åœ¨åŒä¸€å°ä¸»æ©Ÿä¸Šå®‰è£å¤šå€‹ç‰ˆæœ¬çš„ Node.js ç’°å¢ƒï¼Œå› ç‚ºä¸åŒå°ˆæ¡ˆå¯èƒ½æœƒä½¿ç”¨ä¸åŒçš„ Node.js ç‰ˆæœ¬ï¼Œé‚£å°±éœ€è¦é€éä¸€å€‹ç‰ˆæœ¬ç®¡ç†å™¨ä¾†åˆ‡æ›ä¸åŒçš„ Node.js ç‰ˆæœ¬ã€‚&lt;/p&gt;
    
    </summary>
    
    
      <category term="Web Dev" scheme="https://titangene.github.io/categories/web-dev/"/>
    
    
      <category term="Node.js" scheme="https://titangene.github.io/tags/node-js/"/>
    
      <category term="w3HexSchool" scheme="https://titangene.github.io/tags/w3hexschool/"/>
    
      <category term="version manager" scheme="https://titangene.github.io/tags/version-manager/"/>
    
      <category term="JavaScript" scheme="https://titangene.github.io/tags/javascript/"/>
    
      <category term="CLI" scheme="https://titangene.github.io/tags/cli/"/>
    
  </entry>
  
  <entry>
    <title>æ·ºå…¥ Gitï¼šdetached HEAD</title>
    <link href="https://titangene.github.io/article/git-detached-head.html"/>
    <id>https://titangene.github.io/article/git-detached-head.html</id>
    <published>2020-04-12T15:54:32.000Z</published>
    <updated>2020-04-12T15:55:04.000Z</updated>
    
    <content type="html"><![CDATA[<p><img src="../images/cover/git.jpg" alt=""></p><p>åœ¨ Git çš„ä¸–ç•Œä¸­ï¼Œæƒ³å›åˆ°éå»ï¼Œä¹Ÿè¨±ä½ æœƒç”¨ <code>git checkout</code> è·³è‡³æŸå€‹éå»çš„ commitï¼Œä½† Git æœƒæé†’ä½ æ­£åœ¨ã€Œdetached HEADã€ç‹€æ…‹ã€‚é‚£ detached <code>HEAD</code> æ˜¯ä»€éº¼ï¼Ÿå®ƒèƒ½åšä»€éº¼ï¼Ÿè¦æ€éº¼é›¢é–‹ detached <code>HEAD</code> ç‹€æ…‹ï¼Ÿ</p><a id="more"></a><h2 id="å‰è¨€"><a class="header-anchor" href="#å‰è¨€"></a>å‰è¨€</h2><p>åœ¨ä¹‹å‰çš„ <a href="https://titangene.github.io/article/git-head-ref.html">æ·±å…¥ Gitï¼š<code>HEAD</code> refs</a> æœ‰è«‡åˆ° <code>HEAD</code> é€šå¸¸æœƒæŒ‡å‘ç•¶å‰åˆ†æ”¯ï¼Œè€Œç•¶å‰åˆ†æ”¯é€šå¸¸æœƒæŒ‡å‘è©²åˆ†æ”¯é ‚ç«¯çš„ commit (ä¹Ÿå°±æ˜¯è©²åˆ†æ”¯æœ€æ–°çš„ commit)ã€‚ä¸éå†æŸäº›æƒ…æ³ä¸‹ï¼Œæœƒç™¼ç”Ÿ <code>HEAD</code> ä¸æ˜¯æŒ‡å‘åˆ†æ”¯ï¼Œè€Œæ˜¯æŒ‡å‘æŸå€‹ commitï¼Œè€Œé€™å€‹ç‹€æ…‹çš„ <code>HEAD</code> å°±è¢«ç¨±ç‚ºã€Œdetached HEADã€ã€‚</p><p>ä¸‹é¢æœƒç”¨ä»¥ä¸‹ Git æ­·å²ç´€éŒ„ä½œç‚ºç¯„ä¾‹ä¾†èªªæ˜ detached <code>HEAD</code>ã€‚æœ¬å°ˆæ¡ˆå…§æœ‰å››å€‹æª”æ¡ˆï¼Œåˆ†åˆ¥æ˜¯ <code>a</code>ã€<code>b</code>ã€<code>c</code> å’Œ <code>d</code>ï¼Œæˆ‘ç‚ºæ¯å€‹æª”æ¡ˆåˆ†åˆ¥å»ºç«‹äº†ä¸€å€‹ commitï¼š</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><code class="hljs shell"><span class="hljs-meta">$</span><span class="bash"> ls</span><br>a  b  c  d<br><br><span class="hljs-meta">$</span><span class="bash"> git <span class="hljs-built_in">log</span> --oneline --graph --decorate</span><br>* 71e5770 (HEAD -&gt; master, origin/master) feat: d<br>* c3a31ea feat: c<br>* b757c26 feat: b<br>* 3b7be17 feat: a<br></code></pre></td></tr></table></figure><h2 id="è·¯äººç”²ç™¼ç”Ÿçš„æƒ…å¢ƒ"><a class="header-anchor" href="#è·¯äººç”²ç™¼ç”Ÿçš„æƒ…å¢ƒ"></a>è·¯äººç”²ç™¼ç”Ÿçš„æƒ…å¢ƒ</h2><p>ä¸‹é¢æ˜¯è·¯äººç”²ç™¼ç”Ÿçš„æƒ…å¢ƒï¼Œè®“æˆ‘å€‘ä¾†çœ‹é€™å€‹æƒ…å¢ƒç™¼ç”Ÿäº†ä»€éº¼ï¼Ÿ</p><p>ç¾åœ¨ <code>HEAD</code> æŒ‡å‘ <code>master</code> åˆ†æ”¯ï¼Œè€Œ <code>master</code> åˆ†æ”¯æŒ‡å‘åç‚º <code>e2f2a4</code> çš„ commitï¼š</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><code class="hljs shell"><span class="hljs-meta">$</span><span class="bash"> git <span class="hljs-built_in">log</span> --oneline --graph --decorate</span><br>* 71e5770 (HEAD -&gt; master, origin/master) feat: d<br>* c3a31ea feat: c<br>* b757c26 feat: b<br>* 3b7be17 feat: a<br><br><span class="hljs-meta">$</span><span class="bash"> cat .git/HEAD</span><br>ref: refs/heads/master<br><span class="hljs-meta">$</span><span class="bash"> cat .git/refs/heads/master</span><br>71e57702f208a7c463a2b5cd069ea47cdbed9eba<br></code></pre></td></tr></table></figure><p>è·¯äººç”²å¯èƒ½æƒ³å›åˆ°éå»çš„ commitï¼Œæ–¼æ˜¯ä½¿ç”¨äº† <code>git checkout &lt;commit&gt;</code> è·³è‡³æŒ‡å®šçš„ commitï¼Œå‡è¨­è¦ checkout è‡³åç‚º <code>b757c26</code> çš„ commit å°±æœƒçœ‹åˆ°ä»¥ä¸‹è¨Šæ¯ï¼š</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><code class="hljs shell"><span class="hljs-meta">$</span><span class="bash"> git checkout b757c26</span><br>Note: checking out 'b757c26'.<br><br>You are in 'detached HEAD' state. You can look around, make experimental<br>changes and commit them, and you can discard any commits you make in this<br>state without impacting any branches by performing another checkout.<br><br>If you want to create a new branch to retain commits you create, you may<br>do so (now or later) by using -b with the checkout command again. Example:<br><br>  git checkout -b &lt;new-branch-name&gt;<br><br>HEAD is now at b757c26 feat: b<br></code></pre></td></tr></table></figure><div class="warning"><p>å‡è¨­è·¯äººç”²å¾ˆå°‘æ³¨æ„çœ‹ Git æä¾›çš„è¨Šæ¯ï¼Œæ‰€ä»¥å¿½ç•¥äº†ã€Œdetached HEADã€çš„æé†’è¨Šæ¯ã€‚</p></div><p>è·¯äººç”²åªæƒ³ç¢ºå®šè‡ªå·±æ˜¯ä¸æ˜¯å›åˆ°éå»ï¼Œæ–¼æ˜¯åŸ·è¡Œ <code>git log</code> ä¾†å¯Ÿçœ‹ï¼Œçš„ç¢ºçœ‹åˆ° <code>HEAD</code> æŒ‡å‘ <code>b757c26</code> é€™å€‹ commitï¼š</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs shell"><span class="hljs-meta">$</span><span class="bash"> git <span class="hljs-built_in">log</span> --oneline --graph --decorate</span><br>* b757c26 (HEAD) feat: b<br>* 3b7be17 feat: a<br></code></pre></td></tr></table></figure><p>æ‰€ä»¥å¿ƒæ»¿æ„è¶³çš„é–‹å§‹åŸºæ–¼ <code>7e347a4</code> é€™å€‹ commit é–‹å§‹å»ºç«‹å…©å€‹æ–°çš„ commitï¼š</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><code class="hljs shell"><span class="hljs-meta">$</span><span class="bash"> <span class="hljs-built_in">echo</span> <span class="hljs-string">"test1"</span> &gt; test1</span><br><span class="hljs-meta">$</span><span class="bash"> git add test1</span><br><span class="hljs-meta">$</span><span class="bash"> git commit -m <span class="hljs-string">"feat: test1"</span></span><br>[detached HEAD 3936d06] feat: test1<br> 1 file changed, 0 insertions(+), 0 deletions(-)<br> create mode 100644 test1<br><br><span class="hljs-meta">$</span><span class="bash"> <span class="hljs-built_in">echo</span> <span class="hljs-string">"test2"</span> &gt; test2</span><br><span class="hljs-meta">$</span><span class="bash"> git add test2</span><br><span class="hljs-meta">$</span><span class="bash"> git commit -m <span class="hljs-string">"feat: test2"</span></span><br>[detached HEAD 845992a] feat: test2<br> 1 file changed, 1 insertion(+)<br> create mode 100644 test2<br></code></pre></td></tr></table></figure><p>æ‰€ä»¥ç¾åœ¨ <code>git log</code> è®Šæˆé€™æ¨£ï¼š</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><code class="hljs shell"><span class="hljs-meta">$</span><span class="bash"> git <span class="hljs-built_in">log</span> --oneline --graph --decorate</span><br>* 845992a (HEAD) feat: test2<br>* 9fd0924 feat: test1<br>* b757c26 feat: b<br>* 3b7be17 feat: a<br></code></pre></td></tr></table></figure><p>ç•¶è·¯äººç”²å»ºç«‹å®Œ commit å¾Œï¼Œçªç„¶æƒ³å›åˆ°ä¹‹å‰çš„ <code>master</code> åˆ†æ”¯ï¼Œæ‰€ä»¥åŸ·è¡Œ <code>git checkout master</code>ï¼š</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><code class="hljs shell"><span class="hljs-meta">$</span><span class="bash"> git checkout master</span><br>Warning: you are leaving 2 commits behind, not connected to<br>any of your branches:<br><br>  845992a feat: test2<br>  9fd0924 feat: test1<br><br>If you want to keep them by creating a new branch, this may be a good time<br>to do so with:<br><br> git branch &lt;new-branch-name&gt; 845992a<br><br>Switched to branch 'master'<br>Your branch is up to date with 'origin/master'.<br></code></pre></td></tr></table></figure><p>å›åˆ° <code>master</code> åˆ†æ”¯å¾Œï¼Œè·¯äººç”²çœ‹ <code>git log</code> è®Šæˆä¸‹é¢é€™æ¨£é¦¬ä¸Šå‚»çœ¼ï¼Œå¿ƒæƒ³ï¼šã€Œå‰›å‰›çš„é‚£å…©å€‹ commit å‘¢ï¼Ÿæ€éº¼ä¸è¦‹äº†ï¼æ€éº¼è¾¦å•Šï¼é‚„æ‰¾çš„å›ä¾†å—ï¼Ÿã€ï¼š</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><code class="hljs shell"><span class="hljs-meta">$</span><span class="bash"> git <span class="hljs-built_in">log</span> --oneline --graph --decorate</span><br>* 71e5770 (HEAD -&gt; master, origin/master) feat: d<br>* c3a31ea feat: c<br>* b757c26 feat: b<br>* 3b7be17 feat: a<br></code></pre></td></tr></table></figure><p>å¥½ï¼Œçœ‹åˆ°é€™å€‹æ•…äº‹ï¼Œä½ æ‡‰è©²æœƒç™¼ç¾ï¼Œå…¶å¯¦ Git ä¸€ç›´ä¸åœçš„åœ¨è¼¸å‡ºè¨Šæ¯æé†’ä½ ï¼š</p><ul><li>åœ¨ checkout è‡³æŸå€‹ commit æ™‚ï¼Œæœƒæé†’ä½ æ­£åœ¨ã€Œdetached HEADã€ç‹€æ…‹</li><li>åœ¨ã€Œdetached HEADã€ç‹€æ…‹å»ºç«‹ commit æ™‚ï¼Œæœƒåƒé€™æ¨£æé†’ä½ ï¼š<code>[detached HEAD 845992a] feat: test2</code></li><li>åœ¨ã€Œdetached HEADã€ç‹€æ…‹å»ºç«‹ commit å¾Œï¼Œcheckout å›åˆ†æ”¯æ™‚ï¼Œæœƒåƒé€™æ¨£æé†’ä½ ï¼š<code>Warning: you are leaving 2 commits behind</code></li></ul><p>æ‰€ä»¥çœ‹è¼¸å‡ºè¨Šæ¯å¾ˆé‡è¦ï¼</p><div class="info"><p>æˆ‘æ›¾ç¶“å°±æ˜¯é‚£å€‹ä¸çœ‹è¼¸å‡ºè¨Šæ¯çš„è·¯äººç”² XD</p></div><h2 id="æ­¤ç‹€æ…‹æœ‰ä½•ç”¨"><a class="header-anchor" href="#æ­¤ç‹€æ…‹æœ‰ä½•ç”¨"></a>æ­¤ç‹€æ…‹æœ‰ä½•ç”¨</h2><p>é‚£ã€Œdetached HEADã€ç‹€æ…‹åˆ°åº•èƒ½åšä»€éº¼ï¼Ÿ</p><p>å¦‚æœåœ¨ detached <code>HEAD</code> ç‹€æ…‹æ™‚å»ºç«‹çš„ commit æ˜¯å¯¦é©—æ€§çš„ï¼Œé‚£çš„ç¢ºå¯ä»¥ç›´æ¥ checkout è‡³ä»»ä½•åˆ†æ”¯ï¼ŒæŠŠé‚£äº› commit éƒ½ä¸Ÿæ£„ (ä½† Git ä¸æœƒé¦¬ä¸Šåˆªé™¤ï¼Œæœƒè‡ªå‹•ç­‰åˆ° Git GC ä¾†å›æ”¶ï¼Œæ‰€ä»¥é‚„æ•‘çš„å›ä¾†)ï¼Œé€™ä»£è¡¨ä½ æ”¾æ£„äº†åœ¨ detached <code>HEAD</code> ç‹€æ…‹ä¸‹æ‰€åšçš„ä»»ä½• commitï¼Œè€Œä¸”é€™äº›æ“ä½œéƒ½ä¸æœƒå½±éŸ¿ä»»ä½•åˆ†æ”¯ã€‚</p><p>é‚£å¦‚æœæ˜¯åƒè·¯äººç”²çš„æƒ…å¢ƒé‚£æ¨£ï¼Œä½ æƒ³ä¿ç•™é‚£äº› commitï¼Œé‚£å¯ä»¥åœ¨è©² commit ä¸Šå»ºç«‹ refï¼Œè®“è©² ref æŒ‡å‘è©² commitï¼Œref å¯ä»¥æ˜¯åˆ†æ”¯æˆ– tagã€‚</p><p>å»ºç«‹ ref æœ‰å¾ˆå¤šç¨®æ–¹å¼ï¼Œä¸‹é¢æœƒä»‹ç´¹å¹¾ç¨®è™•ç†çš„æ–¹å¼ã€‚</p><h2 id="è³‡æ–™ä¾†æº"><a class="header-anchor" href="#è³‡æ–™ä¾†æº"></a>è³‡æ–™ä¾†æº</h2><ul><li><a href="https://git-scm.com/docs/git-checkout" target="_blank" rel="noopener">Git - git-checkout Documentation</a></li><li><a href="https://git-scm.com/book/en/v2/Git-Branching-Remote-Branches" target="_blank" rel="noopener">Git Branching - Remote Branches | Pro Git, 2/e</a></li></ul>]]></content>
    
    <summary type="html">
    
      &lt;p&gt;&lt;img src=&quot;../images/cover/git.jpg&quot; alt=&quot;&quot;&gt;&lt;/p&gt;&lt;p&gt;åœ¨ Git çš„ä¸–ç•Œä¸­ï¼Œæƒ³å›åˆ°éå»ï¼Œä¹Ÿè¨±ä½ æœƒç”¨ &lt;code&gt;git checkout&lt;/code&gt; è·³è‡³æŸå€‹éå»çš„ commitï¼Œä½† Git æœƒæé†’ä½ æ­£åœ¨ã€Œdetached HEADã€ç‹€æ…‹ã€‚é‚£ detached &lt;code&gt;HEAD&lt;/code&gt; æ˜¯ä»€éº¼ï¼Ÿå®ƒèƒ½åšä»€éº¼ï¼Ÿè¦æ€éº¼é›¢é–‹ detached &lt;code&gt;HEAD&lt;/code&gt; ç‹€æ…‹ï¼Ÿ&lt;/p&gt;
    
    </summary>
    
    
      <category term="Git" scheme="https://titangene.github.io/categories/git/"/>
    
    
      <category term="w3HexSchool" scheme="https://titangene.github.io/tags/w3hexschool/"/>
    
      <category term="æ·±å…¥ Git" scheme="https://titangene.github.io/tags/%E6%B7%B1%E5%85%A5-git/"/>
    
  </entry>
  
  <entry>
    <title>æ·±å…¥ Gitï¼šGit ç‰©ä»¶å„²å­˜ - tag ç‰©ä»¶</title>
    <link href="https://titangene.github.io/article/git-tag-object.html"/>
    <id>https://titangene.github.io/article/git-tag-object.html</id>
    <published>2020-04-05T15:40:46.000Z</published>
    <updated>2020-04-05T17:12:26.000Z</updated>
    
    <content type="html"><![CDATA[<p><img src="../images/cover/git.jpg" alt=""></p><p>æœ¬ç¯‡å°‡æ·±å…¥æ¢è¨ Git tag æ˜¯ä»€éº¼ï¼Ÿå¦‚ä½•å»ºç«‹ tagï¼ŸGit æ˜¯å¦‚ä½•å„²å­˜ tagï¼Ÿèˆ‡ commit å’Œåˆ†æ”¯çš„å·®åˆ¥åœ¨å“ªï¼Ÿ</p><a id="more"></a><h1 id="Git-tag"><a class="header-anchor" href="#Git-tag"></a>Git tag</h1><p>Git tag å¸¸ç”¨æ–¼æ¨™è¨˜æŸå€‹ç‰ˆæœ¬è™Ÿç¢¼ï¼Œä¾‹å¦‚ï¼š<code>v0.5</code>ã€<code>v1.0.1</code>ã€<code>9.1.0-rc.2</code>ã€<code>v2.6.0-beta.3</code>ã€‚</p><p>åœ¨ Git ä¸­æœ‰å…©ç¨®é¡å‹çš„ tagï¼šlightweight tag (è¼•é‡æ¨™ç±¤) å’Œ annotated tag (è¨»è§£æ¨™ç±¤)ã€‚</p><p>å…ˆä»‹ç´¹å…©è€…çš„å…±é€šé»ï¼š</p><ul><li>æä¾›æ›´ friendlier çš„åç¨±çš„æ¨™è¨˜</li><li>éƒ½æœƒæŒ‡å‘æŸå€‹ Git ç‰©ä»¶ (é€šå¸¸ç‚º commit ç‰©ä»¶ï¼Œä½†ä¹Ÿå¯ä»¥æ˜¯å…¶ä»–ç‰©ä»¶ï¼Œä¹Ÿå°±æ˜¯ tree ç‰©ä»¶ã€blob ç‰©ä»¶ï¼Œç”šè‡³æ˜¯å…¶ä»– tag ç‰©ä»¶)<ul><li>åªæ˜¯ lightweight tag æ˜¯ç›´æ¥æŒ‡å‘æŸ Git ç‰©ä»¶</li><li>è€Œ annotated tag å‰‡æ˜¯é€é tag ç‰©ä»¶ï¼Œé–“æ¥æŒ‡å‘æŸ Git ç‰©ä»¶</li></ul></li><li>ä¸æœƒæ”¹è®Š tag æ‰€æŒ‡å‘çš„ç‰©ä»¶ (é™¤éç”¨ <code>git tag -f</code> æ›¿æ›ç¾æœ‰ tag)</li></ul><p>æ¥è‘—æœƒèªªæ˜å„è‡ªçš„ç‰¹æ€§ã€è¦å¦‚ä½•å»ºç«‹ lightweight tag å’Œ annotated tagï¼Œä»¥åŠåœ¨ Git ä¸­æ˜¯å¦‚ä½•å„²å­˜é€™äº› tag çš„ã€‚</p><p>ä¸‹é¢æœƒç”¨ä»¥ä¸‹ Git æ­·å²ç´€éŒ„çš„ç¯„ä¾‹ä¾†èªªæ˜ï¼š</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><code class="hljs shell"><span class="hljs-meta">$</span><span class="bash"> git <span class="hljs-built_in">log</span> --oneline --decorate</span><br>32aa934 (HEAD -&gt; master) feat: c<br>9b6d639 feat: b<br>d835d6b feat: a<br></code></pre></td></tr></table></figure><h2 id="lightweight-tag-è¼•é‡æ¨™ç±¤"><a class="header-anchor" href="#lightweight-tag-è¼•é‡æ¨™ç±¤"></a>lightweight tag (è¼•é‡æ¨™ç±¤)</h2><ul><li>å¾ˆåƒä¸æœƒç§»å‹•çš„åˆ†æ”¯ï¼Œtag åªæœƒæŒ‡å‘ä¸€å€‹ç‰¹å®šçš„ Git ç‰©ä»¶</li><li>è‹¥åªä½œç‚ºæš«æ™‚çš„æ¨™ç±¤ï¼Œä¸”ä¸æƒ³ä¿ç•™é¡å¤–è³‡è¨Šï¼Œå¯ç”¨ lightweight tag</li></ul><h3 id="å»ºç«‹-lightweight-tag"><a class="header-anchor" href="#å»ºç«‹-lightweight-tag"></a>å»ºç«‹ lightweight tag</h3><p>å»ºç«‹ lightweight tag æ™‚ï¼Œä¸è¦æŒ‡å®š <code>-a</code>ã€<code>-s</code> æˆ– <code>-m</code> option (å»ºç«‹ annotated tag æ™‚æ‰æœƒç”¨åˆ°ï¼Œå¾Œé¢æœƒèªªæ˜)ï¼š</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs shell"><span class="hljs-meta">$</span><span class="bash"> git tag &lt;tagname&gt; [&lt;commit&gt; | &lt;object&gt;]</span><br></code></pre></td></tr></table></figure><p>ä¾‹å¦‚ï¼š</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs shell"><span class="hljs-meta">$</span><span class="bash"> git tag v1.0-lw</span><br></code></pre></td></tr></table></figure><p>ä¹Ÿå¯ä»¥æŒ‡å®šæŸå€‹ commitï¼š</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs shell"><span class="hljs-meta">$</span><span class="bash"> git tag v0.2-lw 9b6d639</span><br></code></pre></td></tr></table></figure><h3 id="å¯Ÿçœ‹-lightweight-tag"><a class="header-anchor" href="#å¯Ÿçœ‹-lightweight-tag"></a>å¯Ÿçœ‹ lightweight tag</h3><p>è‹¥è¦é€é <code>git show</code> æŒ‡ä»¤å¯Ÿçœ‹ lightweight tagï¼Œå°±ä¸æœƒçœ‹åˆ°è©²æ¨™ç±¤çš„é¡å¤–è³‡è¨Šï¼Œåªæœƒé¡¯ç¤ºæ¨™ç±¤æ‰€åœ¨çš„ commit è³‡è¨Šï¼š</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><code class="hljs shell"><span class="hljs-meta">$</span><span class="bash"> git show v1.0-lw</span><br>commit 32aa934a24212ef22cc373e7838c30618952003d (HEAD -&gt; master, tag: v1.0-lw)<br>Author: titangene &lt;titangene.tw@gmail.com&gt;<br>Date:   Sun Apr 5 21:36:25 2020 +0800<br><br>    feat: c<br><br>diff --git a/c b/c<br>new file mode 100644<br>index 0000000..f2ad6c7<br>--- /dev/null<br>+++ b/c<br>@@ -0,0 +1 @@<br>+c<br></code></pre></td></tr></table></figure><h3 id="lightweight-tag-å­˜åœ¨å“ªï¼Ÿ"><a class="header-anchor" href="#lightweight-tag-å­˜åœ¨å“ªï¼Ÿ"></a>lightweight tag å­˜åœ¨å“ªï¼Ÿ</h3><p>Git å°‡ lightweight tag å­˜åœ¨ <code>.git/refs/tag</code> ç›®éŒ„å…§ï¼š</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><code class="hljs shell"><span class="hljs-meta">$</span><span class="bash"> tree .git/refs/tags/</span><br>.git/refs/tags/<br>â”œâ”€â”€ v0.2-lw<br>â””â”€â”€ v1.0-lw<br><br>0 directories, 2 files<br></code></pre></td></tr></table></figure><p>tag ref çš„å…§å®¹å°±æ˜¯è©² tag æŒ‡å‘çš„ commit ç‰©ä»¶ (ä¹Ÿå°±æ˜¯è©² commit SHA-1 å€¼)ï¼š</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs shell"><span class="hljs-meta">$</span><span class="bash"> cat .git/refs/tags/v1.0-lw</span><br>32aa934a24212ef22cc373e7838c30618952003d<br></code></pre></td></tr></table></figure><p>ä½¿ç”¨ <code>git cat-file</code> ä¾†ç¢ºå®šæ­¤ SHA-1 å€¼çœŸçš„æ˜¯ commit ç‰©ä»¶ï¼š</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><code class="hljs shell"><span class="hljs-meta">$</span><span class="bash"> git cat-file -t 32aa93</span><br>commit<br><span class="hljs-meta">$</span><span class="bash"> git cat-file -p 32aa93</span><br>tree 04a59185a0c5f4047e4fd3fa87b0c84e671b00ee<br>parent 9b6d6398e5e020a76f9a0f8d620e676a1decc78a<br>author titangene &lt;titangene.tw@gmail.com&gt; 1586093785 +0800<br>committer titangene &lt;titangene.tw@gmail.com&gt; 1586093785 +0800<br><br>feat: c<br></code></pre></td></tr></table></figure><h3 id="ä½¿ç”¨åº•å±¤æŒ‡ä»¤å»ºç«‹-lightweight-tag"><a class="header-anchor" href="#ä½¿ç”¨åº•å±¤æŒ‡ä»¤å»ºç«‹-lightweight-tag"></a>ä½¿ç”¨åº•å±¤æŒ‡ä»¤å»ºç«‹ lightweight tag</h3><p>ä½¿ç”¨ <code>git update-ref</code> åº•å±¤æŒ‡ä»¤å»ºç«‹ lightweight tag çš„ refï¼š</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs shell"><span class="hljs-meta">$</span><span class="bash"> git update-ref refs/tags/v0.1-lw d835d6bf85258f2fe93c582f60f3f148900e0d7f</span><br></code></pre></td></tr></table></figure><p>å¯Ÿçœ‹è©² tag ref çš„ç¢ºæ˜¯æŒ‡å‘å‰›å‰›æŒ‡å®šçš„ SHA-1 å€¼ï¼š</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs shell"><span class="hljs-meta">$</span><span class="bash"> cat .git/refs/tags/v0.1-lw </span><br>d835d6bf85258f2fe93c582f60f3f148900e0d7f<br></code></pre></td></tr></table></figure><h2 id="annotated-tag-è¨»è§£æ¨™ç±¤"><a class="header-anchor" href="#annotated-tag-è¨»è§£æ¨™ç±¤"></a>annotated tag (è¨»è§£æ¨™ç±¤)</h2><ul><li>æœƒåœ¨ Git çš„è³‡æ–™åº«ä¸­å„²å­˜æˆå®Œæ•´çš„ç‰©ä»¶ã€‚å®ƒå€‘å°‡è¢«è¨ˆç®—æ ¡é©—ç¢¼ (checksummed)</li><li>åŒ…å«ï¼š<ul><li>å»ºç«‹æ¨™ç±¤çš„äºº (tagger) çš„åå­—ã€é›»å­éƒµä»¶å’Œå»ºç«‹æ—¥æœŸ</li><li>ç´€éŒ„ä¸€å€‹æ¨™ç±¤è¨Šæ¯ (tagging message)</li><li>æŒ‡æ¨™ (ä¹Ÿå°±æ˜¯ Git ç‰©ä»¶)</li></ul></li><li>å¯ä»¥ç°½å (signed) åŠé€é GNU Privacy Guard (GPG) é©—è­‰</li><li>è‹¥æƒ³ç´€éŒ„èˆ‡ tag æœ‰é—œçš„è³‡è¨Š (ä¾‹å¦‚ï¼šå»ºç«‹ tag çš„äººã€æ™‚é–“)ï¼Œå»ºè­°ä½¿ç”¨ annotated tag</li></ul><h3 id="å»ºç«‹-annotated-tag"><a class="header-anchor" href="#å»ºç«‹-annotated-tag"></a>å»ºç«‹ annotated tag</h3><p>å»ºç«‹ annotated tag æ™‚ï¼Œå¯åŒæ™‚æŒ‡å®šä»¥ä¸‹ optionï¼š</p><ul><li><code>-a</code>ï¼Œ<code>--annotate</code>ï¼šè£½ä½œä¸€å€‹ unsignedã€annotated tag ç‰©ä»¶ (æœªç°½åä¸”å¸¶æœ‰è¨»è§£çš„æ¨™ç±¤ç‰©ä»¶)</li><li><code>-m &lt;msg&gt;</code>ï¼Œ<code>--message=&lt;msg&gt;</code>ï¼š<ul><li>æŒ‡å®šæ¨™ç±¤è¨Šæ¯ï¼Œæ­¤è¨Šæ¯æœƒå’Œæ­¤æ¨™ç±¤ä¸€èµ·å„²å­˜</li><li>è‹¥ä½ æ²’æœ‰ç‚ºæ¨™ç±¤æŒ‡å®šè¨Šæ¯ï¼ŒGit å°±æœƒé–‹å•Ÿç·¨è¼¯å™¨è®“ä½ è¼¸å…¥ (å¾ˆåƒ <code>git commit</code> æ²’æœ‰åŠ ä¸Š <code>-m</code> option é‚£æ¨£)</li><li>è‹¥åŠ ä¸Šå¤šçµ„ <code>-m</code> optionï¼Œæœƒå°‡é€™äº›å€¼ä¸²è¯æˆæ®µè½</li><li>å¦‚æœä½¿ç”¨ <code>-m</code> option ä½†æ²’æœ‰åŠ ä¸Š <code>-a</code>ã€<code>-s</code> æˆ– <code>-u &lt;keyid&gt;</code>ï¼Œå‰‡ä»£è¡¨æ˜¯ <code>-a</code> (ä¹Ÿå°±æ˜¯å»ºç«‹ annotated tag)</li></ul></li></ul><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs shell"><span class="hljs-meta">$</span><span class="bash"> git tag -a &lt;tagname&gt; -m &lt;msg&gt; [&lt;commit&gt; | &lt;object&gt;]</span><br></code></pre></td></tr></table></figure><p>ä¾‹å¦‚ï¼š</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs shell"><span class="hljs-meta">$</span><span class="bash"> git tag -a v1.0 -m <span class="hljs-string">"version 1.0"</span></span><br></code></pre></td></tr></table></figure><p>ä¹Ÿå¯ä»¥æŒ‡å®šæŸå€‹ commitï¼š</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs shell"><span class="hljs-meta">$</span><span class="bash"> git tag -a v0.1 -m <span class="hljs-string">"version 0.1"</span> d835d6b</span><br></code></pre></td></tr></table></figure><h3 id="å¯Ÿçœ‹-annotated-tag-è³‡è¨Š"><a class="header-anchor" href="#å¯Ÿçœ‹-annotated-tag-è³‡è¨Š"></a>å¯Ÿçœ‹ annotated tag è³‡è¨Š</h3><p>ä½¿ç”¨ <code>git show</code> æŒ‡ä»¤å¯æŸ¥çœ‹æ¨™ç±¤è³‡è¨Šï¼Œä»¥åŠæ­¤æ¨™ç±¤æ‰€æ¨™è¨˜çš„ commit è³‡è¨Šï¼š</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><code class="hljs shell"><span class="hljs-meta">$</span><span class="bash"> git show v0.1</span><br>tag v0.1<br>Tagger: titangene &lt;titangene.tw@gmail.com&gt;<br>Date:   Sun Apr 5 21:39:01 2020 +0800<br><br>version 0.1<br><br>commit d835d6bf85258f2fe93c582f60f3f148900e0d7f (tag: v0.1)<br>Author: titangene &lt;titangene.tw@gmail.com&gt;<br>Date:   Sun Apr 5 21:36:18 2020 +0800<br><br>    feat: a<br><br>diff --git a/a b/a<br>new file mode 100644<br>index 0000000..7898192<br>--- /dev/null<br>+++ b/a<br>@@ -0,0 +1 @@<br>+a<br></code></pre></td></tr></table></figure><p>ä»¥ä¸Šé¢æ¨™ç±¤è³‡è¨Šç‚ºä¾‹ï¼ŒåŒ…å«ï¼š</p><ul><li>æ¨™ç±¤åç¨±ï¼š<code>v0.1</code></li><li>å»ºç«‹æ¨™ç±¤çš„äºº (tagger) çš„åå­—ã€é›»å­éƒµä»¶ï¼š<code>Tagger: titangene &lt;titangene.tw@gmail.com&gt;</code></li><li>æ¨™ç±¤å»ºç«‹æ—¥æœŸï¼š<code>Date: Sun Apr 5 21:39:01 2020 +0800</code></li><li>æ¨™ç±¤è¨Šæ¯ï¼š<code>version 0.1</code></li><li>æŒ‡æ¨™ï¼šåœ¨ <code>git show</code> æ²’æœ‰æä¾›ï¼Œä¸‹é¢æœƒæåˆ°</li></ul><h3 id="annotated-tag-å­˜åœ¨å“ªï¼Ÿ"><a class="header-anchor" href="#annotated-tag-å­˜åœ¨å“ªï¼Ÿ"></a>annotated tag å­˜åœ¨å“ªï¼Ÿ</h3><p>Git ä¹Ÿå°‡ annotated tag å­˜åœ¨ <code>.git/refs/tag</code> ç›®éŒ„å…§ï¼š</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><code class="hljs shell"><span class="hljs-meta">$</span><span class="bash"> tree .git/refs/tags/</span><br>.git/refs/tags/<br>â”œâ”€â”€ v0.1<br>â”œâ”€â”€ v0.1-lw<br>â”œâ”€â”€ v0.2-lw<br>â”œâ”€â”€ v1.0<br>â””â”€â”€ v1.0-lw<br><br>0 directories, 5 files<br></code></pre></td></tr></table></figure><p>tag ref çš„å…§å®¹å°±æ˜¯è©² tag æŒ‡å‘çš„ commit ç‰©ä»¶ (ä¹Ÿå°±æ˜¯è©² commit SHA-1 å€¼)ï¼š</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs shell"><span class="hljs-meta">$</span><span class="bash"> cat .git/refs/tags/v0.1</span><br>530097c078c2fa4c16a532443170a40179599a69<br></code></pre></td></tr></table></figure><p>ä½¿ç”¨ <code>git cat-file</code> ä¾†ç¢ºå®šæ­¤ SHA-1 å€¼æ™‚ï¼Œæœƒç™¼ç¾è·Ÿå‰›å‰›ä»‹ç´¹çš„ lightweight tag ä¸ä¸€æ¨£ï¼Œlightweight tag æœƒç›´æ¥æŒ‡å‘ commit ç‰©ä»¶ï¼Œè€Œ annotated tag å‰‡æ˜¯æŒ‡å‘ tag ç‰©ä»¶ï¼š</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><code class="hljs shell"><span class="hljs-meta">$</span><span class="bash"> git cat-file -t 530097</span><br>tag<br><span class="hljs-meta">$</span><span class="bash"> git cat-file -p 530097</span><br>object d835d6bf85258f2fe93c582f60f3f148900e0d7f<br>type commit<br>tag v0.1<br>tagger titangene &lt;titangene.tw@gmail.com&gt; 1586093941 +0800<br><br>version 0.1<br></code></pre></td></tr></table></figure><p>è€Œé€™å€‹ tag ç‰©ä»¶æ‰æ˜¯çœŸæ­£æŒ‡å‘ commit ç‰©ä»¶çš„ refã€‚</p><p>å†æ¬¡ä½¿ç”¨ <code>git cat-file</code> æŒ‡ä»¤ï¼Œå°±èƒ½ç¢ºå®š tag ç‰©ä»¶çš„ç¢ºæ˜¯æŒ‡å‘ <code>d835d6</code> é€™å€‹ commit ç‰©ä»¶ï¼š</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><code class="hljs shell"><span class="hljs-meta">$</span><span class="bash"> git cat-file -t d835d6</span><br>commit<br><span class="hljs-meta">$</span><span class="bash"> git cat-file -p d835d6</span><br>tree aaff74984cccd156a469afa7d9ab10e4777beb24<br>author titangene &lt;titangene.tw@gmail.com&gt; 1586093778 +0800<br>committer titangene &lt;titangene.tw@gmail.com&gt; 1586093778 +0800<br><br>feat: a<br></code></pre></td></tr></table></figure><h3 id="ä½¿ç”¨åº•å±¤æŒ‡ä»¤å»ºç«‹-annotated-tag"><a class="header-anchor" href="#ä½¿ç”¨åº•å±¤æŒ‡ä»¤å»ºç«‹-annotated-tag"></a>ä½¿ç”¨åº•å±¤æŒ‡ä»¤å»ºç«‹ annotated tag</h3><p>å»ºç«‹ annotated tag ä¸»è¦æœ‰å…©å€‹æ­¥é©Ÿï¼š</p><ol><li>å»ºç«‹ tag ç‰©ä»¶</li><li>å»ºç«‹ tag refï¼Œæ­¤ tag ref æœƒæŒ‡å‘å‰›å‰›å»ºç«‹çš„ tag ç‰©ä»¶</li></ol><p>æˆ‘ä¹‹å‰åœ¨ <a href="https://titangene.github.io/article/git--blob-object.html#hash-object-%E8%A8%88%E7%AE%97%E7%89%A9%E4%BB%B6%E5%90%8D%E7%A8%B1%E7%9A%84%E6%BC%94%E7%AE%97%E6%B3%95">æ·±å…¥ Gitï¼šGit ç‰©ä»¶å„²å­˜ - blob ç‰©ä»¶</a> é€™ç¯‡æœ‰æåˆ°å»ºç«‹ Git ç‰©ä»¶çš„åº•å±¤æŒ‡ä»¤ <code>git hash-object</code>ï¼Œä»¥åŠé€™å€‹åº•å±¤æŒ‡ä»¤çš„åŸç†ã€‚</p><p>ä½†æ˜¯åœ¨ä½¿ç”¨ <code>git hash-object</code> ä¹‹å‰ï¼Œå¿…é ˆè¦å…ˆæº–å‚™å¥½é€™å€‹æŒ‡ä»¤ä¸Šçš„ <code>--stdin</code> option è¦å¾ stdin (standard inputï¼Œæ¨™æº–è¼¸å…¥) è®€å–çš„å…§å®¹ï¼Œå…§å®¹æ ¼å¼å¦‚ä¸‹ï¼š</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><code class="hljs plain">object &lt;object-sha1&gt;<br>type &lt;object-type&gt;<br>tag &lt;tag-name&gt;<br>tagger &lt;tagger-name&gt; &lt;&lt;tagger-email&gt;&gt; &lt;timestamp&gt;<br><br>&lt;tag-message&gt;<br></code></pre></td></tr></table></figure><p>å…§å®¹ç¯„ä¾‹å¦‚ä¸‹ (æˆ‘å…ˆéš¨æ„å°‡ä»¥ä¸‹å…§å®¹å„²å­˜åœ¨ä¸€å€‹æª”æ¡ˆå…§ï¼Œä»»æ„æª”åéƒ½å¯ä»¥ï¼Œå› ç‚ºé‡é»æ˜¯æª”æ¡ˆçš„å…§å®¹)ï¼š</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><code class="hljs shell"><span class="hljs-meta">$</span><span class="bash"> vim my-tag.txt</span><br><span class="hljs-meta">$</span><span class="bash"> cat my-tag.txt</span><br>object 61780798228d17af2d34fce4cfbdf35556832472<br>type blob<br>tag file-b<br>tagger titangene &lt;titangene.tw@gmail.com&gt; 1586097930 +0800<br><br>file b<br></code></pre></td></tr></table></figure><p>å› ç‚ºé€™æ¬¡è¦å»ºç«‹çš„æ˜¯ tag ç‰©ä»¶ï¼Œæ‰€ä»¥éœ€è¦åœ¨ <code>git hash-object</code> æŒ‡ä»¤ä¸ŠåŠ ä¸Š <code>-t</code> optionï¼Œä¸¦ä¸”æŒ‡å®š <code>tag</code>ï¼Œä»£è¡¨è¦å»ºç«‹ tag ç‰©ä»¶ï¼š</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs shell"><span class="hljs-meta">$</span><span class="bash"> git <span class="hljs-built_in">hash</span>-object -t tag -w --stdin &lt; my-tag.txt</span><br>8785f7a44e2af5628544ecb0aa9dccf2adfa37ff<br></code></pre></td></tr></table></figure><p>é€™é‚Šè¼¸å‡ºçš„ <code>8785f7</code> å°±æ˜¯å‰›å‰›å»ºç«‹çš„ tag ç‰©ä»¶çš„ SHA-1 å€¼ï¼Œæˆ‘å€‘ç”¨ <code>git cat-file</code> ä¾†é©—è­‰ä¸€ä¸‹ï¼š</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><code class="hljs shell"><span class="hljs-meta">$</span><span class="bash"> git cat-file -t 8785f7</span><br>tag<br><span class="hljs-meta">$</span><span class="bash"> git cat-file -p 8785f7</span><br>object 61780798228d17af2d34fce4cfbdf35556832472<br>type blob<br>tag file-b<br>tagger titangene &lt;titangene.tw@gmail.com&gt; 1586097930 +0800<br><br>file b<br></code></pre></td></tr></table></figure><p>æ¥è‘—è™•ç†ç¬¬äºŒæ­¥é©Ÿï¼Œä½¿ç”¨ <code>git update-ref</code> åº•å±¤æŒ‡ä»¤å»ºç«‹ annotated tag çš„ refï¼š</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs shell"><span class="hljs-meta">$</span><span class="bash"> git update-ref refs/tags/file-b 8785f7a44e2af5628544ecb0aa9dccf2adfa37ff</span><br></code></pre></td></tr></table></figure><p>å¯Ÿçœ‹è©² tag ref çš„ç¢ºæ˜¯æŒ‡å‘å‰›å‰›æŒ‡å®šçš„ SHA-1 å€¼ (åœ¨é€™é‚Šå°±æ˜¯ tag ç‰©ä»¶)ï¼š</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs shell"><span class="hljs-meta">$</span><span class="bash"> cat .git/refs/tags/file-b  </span><br>8785f7a44e2af5628544ecb0aa9dccf2adfa37ff<br></code></pre></td></tr></table></figure><h2 id="åœ¨-git-log-å¯Ÿçœ‹-tag"><a class="header-anchor" href="#åœ¨-git-log-å¯Ÿçœ‹-tag"></a>åœ¨ <code>git log</code> å¯Ÿçœ‹ tag</h2><p>ä½¿ç”¨ <code>git log</code> å¯Ÿçœ‹å‰›å‰›å»ºç«‹çš„ tag éƒ½è²¼ä¸Šå“ªå€‹ commit ä¸Šé¢ (ä¹Ÿå°±æ˜¯é‚£äº› tag éƒ½æŒ‡å‘å“ªå€‹ commit)ï¼š</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><code class="hljs shell"><span class="hljs-meta">$</span><span class="bash"> git <span class="hljs-built_in">log</span> --oneline --decorate</span><br>32aa934 (HEAD -&gt; master, tag: v1.0-lw, tag: v1.0) feat: c<br>9b6d639 (tag: v0.2-lw) feat: b<br>d835d6b (tag: v0.1-lw, tag: v0.1) feat: a<br></code></pre></td></tr></table></figure><p>å¦å¤–æä¸€ä¸‹ (é›–ç„¶ä¸Šé¢æœ‰ä»‹ç´¹åˆ°)ï¼Œä¸ç®¡æ˜¯ lightweight tag é‚„æ˜¯ annotated tagï¼Œå¦‚æœæ˜¯æŒ‡å‘ commit ç‰©ä»¶ä¹‹å¤–çš„å…¶ä»– Git ç‰©ä»¶ (ä¹Ÿå°±æ˜¯ blob ç‰©ä»¶æˆ– tree ç‰©ä»¶ï¼Œç”šè‡³æ˜¯å…¶ä»– tag ç‰©ä»¶)ï¼Œéƒ½ç„¡æ³•åœ¨ <code>git log</code> çš„è¼¸å‡ºå¯Ÿçœ‹ï¼Œåªèƒ½é€é <code>git show</code> æˆ–æ˜¯é€é <code>cat</code> å’Œ <code>git cat-file</code> æŒ‡ä»¤ä¾†å¯Ÿçœ‹è©² tag æ˜¯æŒ‡å‘å“ªå€‹ Git ç‰©ä»¶ã€‚</p><p>ä¸‹é¢ä»¥ annotated tag ç‚ºä¾‹ï¼Œé€éé€™äº›æŒ‡ä»¤ä¾†æ‰¾åˆ°åç‚º <code>file-b</code> çš„ tag æŒ‡å‘ SHA-1 å€¼ç‚º <code>8785f7</code> çš„ tag ç‰©ä»¶ï¼Œè€Œè©² tag ç‰©ä»¶æ˜¯æŒ‡å‘ SHA-1 å€¼ç‚º <code>617807</code> çš„ blob ç‰©ä»¶ï¼š</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><code class="hljs shell"><span class="hljs-meta">$</span><span class="bash"> git tag -a file-c -m <span class="hljs-string">"file c"</span> f2ad6c</span><br><br><span class="hljs-meta">$</span><span class="bash"> cat .git/refs/tags/file-c</span><br>febbaa9a5276f0321d72232c4bc3aa561bfc38c5<br><br><span class="hljs-meta">$</span><span class="bash"> git cat-file -t febbaa</span><br>tag<br><span class="hljs-meta">$</span><span class="bash"> git cat-file -p febbaa</span><br>object f2ad6c76f0115a6ba5b00456a849810e7ec0af20<br>type blob<br>tag file-c<br>tagger titangene &lt;titangene.tw@gmail.com&gt; 1586100520 +0800<br><br>file c<br></code></pre></td></tr></table></figure><h2 id="å¯Ÿçœ‹æ‰€æœ‰-tag"><a class="header-anchor" href="#å¯Ÿçœ‹æ‰€æœ‰-tag"></a>å¯Ÿçœ‹æ‰€æœ‰ tag</h2><p>åŸ·è¡Œ <code>git tag</code> æŒ‡ä»¤å¯ä»¥å¯Ÿçœ‹æ‰€æœ‰å»ºç«‹çš„ tagï¼š</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><code class="hljs shell"><span class="hljs-meta">$</span><span class="bash"> git tag</span><br>file-b<br>file-c<br>v0.1<br>v0.1-lw<br>v0.2-lw<br>v1.0<br>v1.0-lw<br></code></pre></td></tr></table></figure><h1 id="commit-vs-tag"><a class="header-anchor" href="#commit-vs-tag"></a>commit vs tag</h1><ul><li>commit ç‰©ä»¶ç´€éŒ„çš„æŒ‡æ¨™åªèƒ½æ˜¯ tree ç‰©ä»¶ï¼Œä¸èƒ½æ˜¯å…¶ä»– Git ç‰©ä»¶</li><li>tag ç‰©ä»¶é€šå¸¸ç´€éŒ„çš„æŒ‡æ¨™æ˜¯ commit ç‰©ä»¶ï¼Œç•¶ç„¶ä¹Ÿå¯ä»¥æ˜¯å…¶ä»– Git ç‰©ä»¶ï¼ŒåŒ…æ‹¬ tree ç‰©ä»¶ã€blob ç‰©ä»¶ï¼Œç”šè‡³æ˜¯å…¶ä»– tag ç‰©ä»¶</li></ul><h1 id="åˆ†æ”¯-vs-tag"><a class="header-anchor" href="#åˆ†æ”¯-vs-tag"></a>åˆ†æ”¯ vs tag</h1><p>é‚£åˆ†æ”¯å’Œ tag éƒ½å¯ä»¥æŒ‡å‘ commit ç‰©ä»¶ï¼Œé‚£ä»–å€‘æœ‰ä½•å·®åˆ¥ï¼Ÿ</p><ul><li>åˆ†æ”¯ï¼šåœ¨æäº¤æ–°çš„ commit æ™‚ï¼Œæœƒå°‡åˆ†æ”¯æŒ‡å‘è©²åˆ†æ”¯çš„æœ«ç«¯ï¼Œä¹Ÿå°±æ˜¯æ–°çš„ commit ç‰©ä»¶</li><li>lightweight tag å’Œ annotated tag é€™å…©ç¨® tag éƒ½æ˜¯æ°¸é ä¸æœƒæ”¹è®Š tag æ‰€æŒ‡å‘çš„ç‰©ä»¶ï¼Œåªæ˜¯æä¾›æ›´ friendlier çš„åç¨±çš„æ¨™è¨˜è€Œå·²<ul><li>lightweight tagï¼šå¾ˆåƒä¸æœƒç§»å‹•çš„åˆ†æ”¯ï¼Œæ­¤ tag ref åªæœƒæŒ‡å‘ä¸€å€‹ç‰¹å®šçš„ Git ç‰©ä»¶</li><li>annotated tagï¼šæ­¤ tag ref æœƒæŒ‡å‘ tag ç‰©ä»¶ï¼Œè€Œ tag ç‰©ä»¶æœƒæŒ‡å‘ä¸€å€‹ç‰¹å®šçš„ Git ç‰©ä»¶</li></ul></li></ul><p>è³‡æ–™ä¾†æºï¼š</p><ul><li><a href="https://git-scm.com/book/zh-tw/v2/Git-Internals-Git-References" target="_blank" rel="noopener">Git Internals - Git References | Pro Git, 2/e</a></li><li><a href="https://git-scm.com/book/zh-tw/v2/Git-%E5%9F%BA%E7%A4%8E-%E6%A8%99%E7%B1%A4" target="_blank" rel="noopener">Git åŸºç¤ - æ¨™ç±¤ | Pro Git, 2/e</a></li><li><a href="https://stackoverflow.com/questions/10986615/what-is-the-format-of-a-git-tag-object-and-how-to-calculate-its-sha" target="_blank" rel="noopener">hash - What is the format of a git tag object and how to calculate its SHA? - Stack Overflow</a></li></ul>]]></content>
    
    <summary type="html">
    
      &lt;p&gt;&lt;img src=&quot;../images/cover/git.jpg&quot; alt=&quot;&quot;&gt;&lt;/p&gt;&lt;p&gt;æœ¬ç¯‡å°‡æ·±å…¥æ¢è¨ Git tag æ˜¯ä»€éº¼ï¼Ÿå¦‚ä½•å»ºç«‹ tagï¼ŸGit æ˜¯å¦‚ä½•å„²å­˜ tagï¼Ÿèˆ‡ commit å’Œåˆ†æ”¯çš„å·®åˆ¥åœ¨å“ªï¼Ÿ&lt;/p&gt;
    
    </summary>
    
    
      <category term="Git" scheme="https://titangene.github.io/categories/git/"/>
    
    
      <category term="w3HexSchool" scheme="https://titangene.github.io/tags/w3hexschool/"/>
    
      <category term="æ·±å…¥ Git" scheme="https://titangene.github.io/tags/%E6%B7%B1%E5%85%A5-git/"/>
    
  </entry>
  
  <entry>
    <title>æ·±å…¥ Gitï¼šHEAD refs</title>
    <link href="https://titangene.github.io/article/git-head-ref.html"/>
    <id>https://titangene.github.io/article/git-head-ref.html</id>
    <published>2020-03-29T15:55:33.000Z</published>
    <updated>2020-03-29T15:57:32.000Z</updated>
    
    <content type="html"><![CDATA[<p><img src="../images/cover/git.jpg" alt=""></p><p>æœ¬ç¯‡å°‡æ·±å…¥æ¢è¨ Git <code>HEAD</code> æ˜¯ä»€éº¼ï¼Ÿå„²å­˜åœ¨ repo çš„å“ªè£¡ï¼Ÿä»¥åŠè·Ÿ <code>git branch</code> å’Œ <code>git checkout</code> ä¹‹é–“çš„é—œä¿‚ã€‚</p><a id="more"></a><p>ä¸Šæ¬¡æåˆ°çš„ <a href="https://titangene.github.io/article/git-branch-ref.html">Git åˆ†æ”¯ ref</a>ï¼Œå¯ç”¨ä¾†ç´€éŒ„ä¸åŒçš„å·¥ä½œéç¨‹ï¼Œä¾‹å¦‚æœ€å¸¸è¦‹çš„ <code>master</code> å’Œ <code>develop</code> åˆ†æ”¯ï¼Œ<code>master</code> åˆ†æ”¯é€šå¸¸ç”¨ä¾†ç´€éŒ„ç™¼ä½ˆçš„ç‰ˆæœ¬ï¼Œè€Œ <code>develop</code> åˆ†æ”¯é€šå¸¸ç”¨ä¾†ç´€éŒ„æ­£åœ¨é–‹ç™¼çš„ç‰ˆæœ¬ã€‚</p><p>é‚£ Git æ˜¯å¦‚ä½•çŸ¥é“ä½ æ­£åœ¨å“ªä¸€å€‹åˆ†æ”¯ï¼Ÿå…¶å¯¦æ˜¯é€é <code>HEAD</code> æª”æ¡ˆä¾†ç´€éŒ„çš„ã€‚é€™å€‹æª”æ¡ˆé€šå¸¸æœƒæ”¾åœ¨ <code>.git</code> è·¯å¾‘åº•ä¸‹ã€‚</p><p>é€šå¸¸ <code>HEAD</code> æª”æ¡ˆæ˜¯å°ç•¶å‰æ‰€åœ¨åˆ†æ”¯çš„ symbolic reference <sup class="footnote-ref"><a href="#fn1" id="fnref1">[1]</a></sup>ï¼Œä¹Ÿå°±æ˜¯ç´€éŒ„ä½ æ­£åœ¨å“ªä¸€å€‹åˆ†æ”¯çš„æª”æ¡ˆï¼š</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs shell"><span class="hljs-meta">$</span><span class="bash"> cat .git/HEAD</span><br>ref: refs/heads/master<br></code></pre></td></tr></table></figure><p>å¦‚æœåŸ·è¡Œ <code>git checkout</code> ä¾†åˆ‡æ›åˆ†æ”¯ï¼ŒGit å°±æœƒæ›´æ–° <code>HEAD</code> æª”æ¡ˆï¼š</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><code class="hljs shell"><span class="hljs-meta">$</span><span class="bash"> git checkout</span><br>Switched to branch 'test'<br><span class="hljs-meta">$</span><span class="bash"> cat .git/HEAD</span><br>ref: refs/heads/test<br></code></pre></td></tr></table></figure><p>åœ¨åŸ·è¡Œ <code>git commit</code> æ™‚ï¼Œç‚ºä½•ç•¶å‰æ‰€åœ¨çš„åˆ†æ”¯æœƒä¸€ç›´æŒ‡å‘æœ€æ–°çš„ commitï¼Ÿé€™æ˜¯å› ç‚º <code>HEAD</code> æœƒæŒ‡å‘ç•¶å‰åˆ†æ”¯ï¼Œè€Œç•¶å‰åˆ†æ”¯æœƒæŒ‡å‘è©²åˆ†æ”¯çš„æœ«ç«¯ï¼Œä¹Ÿå°±æ˜¯èªªï¼Œç•¶åŸ·è¡Œ <code>git commit</code> æ™‚ï¼ŒGit æœƒå»ºç«‹æ–°çš„ <a href="https://titangene.github.io/article/git-commit-object.html">commit ç‰©ä»¶</a>ï¼Œè€Œåˆ†æ”¯æœƒè¢«æ›´æ–°æˆæŒ‡å‘è©²åˆ†æ”¯çš„æœ«ç«¯ (ä¹Ÿå°±æ˜¯æ–°çš„ commit ç‰©ä»¶)ã€‚</p><p>é€šå¸¸ <code>HEAD</code> æœƒæŒ‡å‘ç•¶å‰åˆ†æ”¯ï¼Œè‹¥ <code>HEAD</code> æª”æ¡ˆçš„å…§å®¹ç‚º Git ç‰©ä»¶çš„ SHA-1 å€¼æ™‚ï¼Œå‰‡ä»£è¡¨ <a href="https://git-scm.com/docs/git-checkout#_detached_head" target="_blank" rel="noopener">detached HEAD</a> ç‹€æ…‹ã€‚é€™ç¨®æƒ…æ³æœƒåœ¨ä½ ä½¿ç”¨ <code>git checkout</code> åˆ‡æ›è‡³ tagã€commit æˆ–é ç«¯åˆ†æ”¯æ™‚ç™¼ç”Ÿã€‚åœ¨æ­¤ç‹€æ…‹ä¸‹ï¼Œæ²’æœ‰åˆ†æ”¯æœƒèˆ‡ working tree é—œè¯ã€‚</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><code class="hljs shell"><span class="hljs-meta">$</span><span class="bash"> git checkout 665439e            </span><br>Note: checking out '665439e'.<br><br>You are in 'detached HEAD' state. You can look around, make experimental<br>changes and commit them, and you can discard any commits you make in this<br>state without impacting any branches by performing another checkout.<br><br>If you want to create a new branch to retain commits you create, you may<br>do so (now or later) by using -b with the checkout command again. Example:<br><br>  git checkout -b &lt;new-branch-name&gt;<br><br>HEAD is now at 665439e feat: a<br></code></pre></td></tr></table></figure><h2 id="æ‰‹å‹•ç·¨è¼¯-HEAD-æª”æ¡ˆæ¨¡æ“¬-checkout-åˆ†æ”¯"><a class="header-anchor" href="#æ‰‹å‹•ç·¨è¼¯-HEAD-æª”æ¡ˆæ¨¡æ“¬-checkout-åˆ†æ”¯"></a>æ‰‹å‹•ç·¨è¼¯ <code>HEAD</code> æª”æ¡ˆæ¨¡æ“¬ checkout åˆ†æ”¯</h2><p>æˆ‘å€‘ä¾†æ‰‹å‹•ç·¨è¼¯æ­¤ <code>HEAD</code> æª”æ¡ˆï¼Œé©—è­‰æ”¹è®Š <code>HEAD</code> æª”æ¡ˆçš„å…§å®¹å°±ç­‰åŒæ–¼åœ¨ <code>git checkout</code> è‡³æŸå€‹åˆ†æ”¯ã€‚</p><p>å‡è¨­ç›®å‰æ­£åœ¨ <code>test</code> åˆ†æ”¯ï¼Œç„¶å¾Œå°‡ <code>HEAD</code> æª”æ¡ˆçš„å…§å®¹å¾ <code>ref: refs/heads/test</code> è®Šæˆ <code>ref: refs/heads/master</code>ï¼š</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><code class="hljs shell"><span class="hljs-meta">$</span><span class="bash"> git branch</span><br>* test<br>  master<br><br><span class="hljs-meta">$</span><span class="bash"> cat .git/HEAD</span><br>ref: refs/heads/test<br><br><span class="hljs-meta">$</span><span class="bash"> <span class="hljs-built_in">echo</span> <span class="hljs-string">"ref: refs/heads/master"</span> &gt; .git/HEAD</span><br></code></pre></td></tr></table></figure><p>ç„¶å¾Œç”¨ <code>git branch</code> å°±èƒ½é©—è­‰ç¾åœ¨å·²ç¶“ã€Œ<code>checkout</code>ã€è‡³ <code>master</code> åˆ†æ”¯ï¼š</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs shell"><span class="hljs-meta">$</span><span class="bash"> git branch</span><br>  test<br>* master<br></code></pre></td></tr></table></figure><h2 id="ä½¿ç”¨-symbolic-ref-åº•å±¤æŒ‡ä»¤"><a class="header-anchor" href="#ä½¿ç”¨-symbolic-ref-åº•å±¤æŒ‡ä»¤"></a>ä½¿ç”¨ <code>symbolic-ref</code> åº•å±¤æŒ‡ä»¤</h2><p>é›–ç„¶å‰›å‰›æœ‰æåˆ°å¯ä»¥æ‰‹å‹•ç·¨è¼¯ <code>HEAD</code> æª”æ¡ˆï¼Œä½†å»ºè­°ä½¿ç”¨ Git æä¾›çš„åº•å±¤æŒ‡ä»¤ <a href="https://git-scm.com/docs/git-symbolic-ref" target="_blank" rel="noopener"><code>git symbolic-ref</code></a> ä¾†ç·¨è¼¯å’Œè®€å– <code>HEAD</code> æª”æ¡ˆï¼š</p><p>è®€å– <code>HEAD</code> æª”æ¡ˆ (å¯Ÿçœ‹ç•¶å‰æ‰€åœ¨åˆ†æ”¯)ï¼š</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs shell"><span class="hljs-meta">$</span><span class="bash"> git symbolic-ref HEAD</span><br>refs/heads/master<br></code></pre></td></tr></table></figure><p>åŠ ä¸Š <code>--short</code> option æœƒåªé¡¯ç¤ºåˆ†æ”¯åç¨±ï¼Œä¸æœƒé¡¯ç¤ºåˆ†æ”¯ ref çš„è·¯å¾‘ï¼š</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs shell"><span class="hljs-meta">$</span><span class="bash"> git symbolic-ref HEAD --short</span><br>master<br></code></pre></td></tr></table></figure><p>è¨­å®š <code>HEAD</code> æª”æ¡ˆ (ç­‰åŒæ–¼ <code>git checkout &lt;branch&gt;</code> )ï¼š</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs shell"><span class="hljs-meta">$</span><span class="bash"> git symbolic-ref HEAD refs/heads/<span class="hljs-built_in">test</span></span><br><span class="hljs-meta">$</span><span class="bash"> cat .git/HEAD</span><br>ref: refs/heads/test<br></code></pre></td></tr></table></figure><p>ä¸€å®šè¦ç”¨ <code>refs/</code> ç‚ºé–‹é ­çš„ ref æ‰èƒ½è¨­å®š <code>HEAD</code> æª”æ¡ˆï¼Œè¦ä¸ç„¶æœƒå ±éŒ¯ï¼š</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs shell"><span class="hljs-meta">$</span><span class="bash"> git symbolic-ref HEAD <span class="hljs-built_in">test</span></span><br>fatal: Refusing to point HEAD outside of refs/<br></code></pre></td></tr></table></figure><p>è³‡æ–™ä¾†æºï¼š</p><ul><li><a href="https://git-scm.com/book/en/v2/Git-Internals-Git-References" target="_blank" rel="noopener">Git Internals - Git References | Pro Git, 2/e</a></li></ul><hr class="footnotes-sep"><section class="footnotes"><ol class="footnotes-list"><li id="fn1" class="footnote-item"><p><a href="https://git-scm.com/docs/gitglossary#def_symref" target="_blank" rel="noopener">Git - gitglossary Documentation</a> <a href="#fnref1" class="footnote-backref">â†©ï¸</a></p></li></ol></section>]]></content>
    
    <summary type="html">
    
      &lt;p&gt;&lt;img src=&quot;../images/cover/git.jpg&quot; alt=&quot;&quot;&gt;&lt;/p&gt;&lt;p&gt;æœ¬ç¯‡å°‡æ·±å…¥æ¢è¨ Git &lt;code&gt;HEAD&lt;/code&gt; æ˜¯ä»€éº¼ï¼Ÿå„²å­˜åœ¨ repo çš„å“ªè£¡ï¼Ÿä»¥åŠè·Ÿ &lt;code&gt;git branch&lt;/code&gt; å’Œ &lt;code&gt;git checkout&lt;/code&gt; ä¹‹é–“çš„é—œä¿‚ã€‚&lt;/p&gt;
    
    </summary>
    
    
      <category term="Git" scheme="https://titangene.github.io/categories/git/"/>
    
    
      <category term="w3HexSchool" scheme="https://titangene.github.io/tags/w3hexschool/"/>
    
      <category term="æ·±å…¥ Git" scheme="https://titangene.github.io/tags/%E6%B7%B1%E5%85%A5-git/"/>
    
  </entry>
  
  <entry>
    <title>æ·±å…¥ Gitï¼šåˆ†æ”¯ refs</title>
    <link href="https://titangene.github.io/article/git-branch-ref.html"/>
    <id>https://titangene.github.io/article/git-branch-ref.html</id>
    <published>2020-03-22T10:49:50.000Z</published>
    <updated>2020-03-29T14:33:30.000Z</updated>
    
    <content type="html"><![CDATA[<p><img src="../images/cover/git.jpg" alt=""></p><p>æœ¬ç¯‡å°‡æ·±å…¥æ¢è¨ Git åˆ†æ”¯åˆ°åº•æ˜¯ä»€éº¼ï¼Ÿå»ºç«‹åˆ†æ”¯æ™‚åˆ°åº•å»ºç«‹äº†ä»€éº¼ï¼Ÿå¦‚ä½•ç´€éŒ„åˆ†æ”¯è¦æŒ‡å‘å“ªå€‹ commitï¼Ÿ</p><a id="more"></a><p>Git åƒè€ƒ (references æˆ– refs) éƒ½å­˜åœ¨ <code>.git/refs</code> ç›®éŒ„å…§ï¼Œç›®éŒ„çµæ§‹å¦‚ä¸‹ï¼š</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><code class="hljs shell"><span class="hljs-meta">$</span><span class="bash"> tree .git/refs/</span><br>.git/refs/<br>â”œâ”€â”€ heads<br>â””â”€â”€ tags<br><br>2 directories, 0 files<br></code></pre></td></tr></table></figure><p>å› ç‚ºã€Œ<a href="https://titangene.github.io/tags/%E6%B7%B1%E5%85%A5-git/">æ·±å…¥ Git</a>ã€æ­¤æ–‡ç« ç³»åˆ—éƒ½æ˜¯æ¢è¨å¦‚ä½•ç”¨ Git çš„åº•å±¤æŒ‡ä»¤ä¾†æ¨¡æ“¬ Git é«˜éšæŒ‡ä»¤çš„æ“ä½œã€‚åœ¨ä¹‹å‰å»ºç«‹ <a href="https://titangene.github.io/article/git--blob-object.html">blob</a>ã€<a href="https://titangene.github.io/article/git-tree-object.html">tree</a> å’Œ <a href="https://titangene.github.io/article/git-commit-object.html">commit</a> ç‰©ä»¶æ™‚ï¼Œéƒ½é‚„æ²’å»ºç«‹ Git refsï¼Œæ‰€ä»¥ <code>.git/refs</code> ç›®éŒ„å…§çš„è³‡æ–™å¤¾ä¸­ï¼Œæ‰æ²’æœ‰å…¶ä»–ç´€éŒ„æŒ‡æ¨™çš„æª”æ¡ˆã€‚</p><p>è‹¥ç”¨å¹³å¸¸ä½¿ç”¨çš„é«˜éšæŒ‡ä»¤å°±æœƒå¹«ä½ å»ºç«‹å¾ˆå¤š Git refsï¼Œç›®éŒ„å¯èƒ½åƒä¸‹é¢é€™æ¨£ï¼š</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><code class="hljs shell"><span class="hljs-meta">$</span><span class="bash"> tree .git/refs/</span><br>.git/refs/<br>â”œâ”€â”€ heads<br>â”‚   â”œâ”€â”€ develop<br>â”‚   â””â”€â”€ master<br>â”œâ”€â”€ original<br>â”‚   â””â”€â”€ refs<br>â”‚       â””â”€â”€ heads<br>â”‚           â””â”€â”€ master<br>â”œâ”€â”€ remotes<br>â”‚   â””â”€â”€ origin<br>â”‚       â”œâ”€â”€ develop<br>â”‚       â””â”€â”€ master<br>â””â”€â”€ tags<br>    â””â”€â”€ v1.0<br></code></pre></td></tr></table></figure><p>é‚£æˆ‘å€‘å°±é–‹å§‹è©¦è‘—åˆ©ç”¨åº•å±¤æŒ‡ä»¤ä¾†æ‰‹å‹•å»ºç«‹ Git refs å§ï¼</p><h2 id="å»ºç«‹åˆ†æ”¯-ref"><a class="header-anchor" href="#å»ºç«‹åˆ†æ”¯-ref"></a>å»ºç«‹åˆ†æ”¯ ref</h2><p>è‹¥æ²’æœ‰ Git refsï¼Œå°±è¦åƒé€™æ¨£æŒ‡å®š commit çš„ SHA-1 å€¼æ‰èƒ½çœ‹åˆ°æ­·å²ç´€éŒ„ï¼š</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs shell"><span class="hljs-meta">$</span><span class="bash"> git <span class="hljs-built_in">log</span> --oneline --decorate 200c91</span><br>200c91c second commit<br>9079eb3 first commit<br></code></pre></td></tr></table></figure><p>è‹¥æœ‰ä¸€å€‹æŒ‡æ¨™æŒ‡å‘è©² commit çš„ SHA-1 å€¼å°±ä¸ç”¨å†è¨˜ä½äº†ï¼Œçœå¾ˆå¤šéº»ç…©ã€‚</p><p>è€Œ <code>master</code> å°±æ˜¯æœ€å¸¸è¦‹çš„æŒ‡æ¨™ï¼Œè¦å»ºç«‹åˆ†æ”¯çš„æŒ‡æ¨™å…¶å¯¦å¾ˆç°¡å–®ï¼Œåªè¦åœ¨ <code>.git/refs/heads</code> ç›®éŒ„å…§ï¼Œå»ºç«‹è©²åˆ†æ”¯åç¨±çš„æª”æ¡ˆï¼Œè€Œæª”æ¡ˆå…§å®¹å°±æ˜¯ä½ è¦æŒ‡å®šçš„ commit SHA-1 å€¼ï¼Œä¾‹å¦‚ï¼šæˆ‘è¦å°‡ <code>master</code> åˆ†æ”¯æŒ‡å‘ <code>200c91</code> é€™å€‹ commit ä¸Šï¼Œå¯åŸ·è¡Œä»¥ä¸‹æŒ‡ä»¤å»ºç«‹åˆ†æ”¯ refï¼š</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs shell"><span class="hljs-meta">$</span><span class="bash"> <span class="hljs-built_in">echo</span> 200c91c4acb82e529fb8205ea786a17cc10008b6 &gt; .git/refs/heads/master</span><br></code></pre></td></tr></table></figure><p>å»ºç«‹åˆ†æ”¯å¾Œï¼Œå°±å¯ä»¥ä½¿ç”¨å‰›å‰›å»ºç«‹çš„ head ref (åˆ†æ”¯é ‚ç«¯çš„ commit çš„ named referenceï¼Œé€šå¸¸å„²å­˜åœ¨ <code>.git/refs/heads</code> ç›®éŒ„ä¸­) <sup class="footnote-ref"><a href="#fn1" id="fnref1">[1]</a></sup> ä¾†å¯Ÿçœ‹æ­·å²ç´€éŒ„ï¼š</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs shell"><span class="hljs-meta">$</span><span class="bash"> git <span class="hljs-built_in">log</span> --oneline --decorate master</span><br>200c91c (HEAD -&gt; master) second commit<br>9079eb3 first commit<br></code></pre></td></tr></table></figure><p>ä¸éï¼Œä¸å»ºè­°ä½ è‡ªå·±ç·¨è¼¯ ref æª”æ¡ˆã€‚Git æä¾› <code>git update-ref</code> é€™å€‹åº•å±¤æŒ‡ä»¤å¯è®“ä½ æ›´æ–° ref (å¯ä¸ç”¨è¼¸å…¥å®Œæ•´çš„ commit SHA-1 å€¼ï¼Œå› ç‚º Git æœƒè‡ªå‹•æ‰¾åˆ°å°æ‡‰çš„ Git ç‰©ä»¶)ï¼š</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs shell"><span class="hljs-meta">$</span><span class="bash"> git update-ref refs/heads/master 200c91</span><br></code></pre></td></tr></table></figure><p>å‰›å‰›å»ºç«‹çš„ head ref å°±æ˜¯åˆ†æ”¯ã€‚åˆ†æ”¯åªæ˜¯ä¸€å€‹æŒ‡æ¨™ (ä¸æ˜¯åƒæ¨¹çš„åˆ†å²”æ¨¹æ)ï¼Œç”¨ä¾†ç´€éŒ„æ­£åœ¨é–‹ç™¼çš„åˆ†æ”¯çš„æœ€æ–° commit (æˆ– head) çš„ SHA-1 å€¼ï¼š</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs shell"><span class="hljs-meta">$</span><span class="bash"> cat .git/refs/heads/master</span><br>200c91c4acb82e529fb8205ea786a17cc10008b6<br></code></pre></td></tr></table></figure><p>è¦å¯Ÿçœ‹æ­¤ repo æœ‰å“ªäº› Git refï¼Œå¯ç”¨ Git æä¾›çš„ <code>git show-ref</code> é€™å€‹åº•å±¤æŒ‡ä»¤ä¾†å¯Ÿçœ‹ï¼š</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs shell"><span class="hljs-meta">$</span><span class="bash"> git show-ref</span><br>200c91c4acb82e529fb8205ea786a17cc10008b6 refs/heads/master<br></code></pre></td></tr></table></figure><p>æ‰€ä»¥ä½ åœ¨åŸ·è¡Œ <code>git branch &lt;branch&gt;</code> æŒ‡ä»¤æ™‚ï¼ŒGit åŸºæœ¬ä¸ŠæœƒåŸ·è¡Œ <code>git update-ref</code> æŒ‡ä»¤ï¼Œå°‡ä½ ç•¶å‰æ‰€åœ¨åˆ†æ”¯çš„æœ€å¾Œä¸€å€‹ commit çš„ SHA-1 æ–°å¢è‡³ä½ æƒ³å»ºç«‹çš„æ–° reference (ä¹Ÿå°±æ˜¯åˆ†æ”¯ ref)ã€‚</p><p>è³‡æ–™ä¾†æºï¼š</p><ul><li><a href="https://git-scm.com/book/en/v2/Git-Internals-Git-References" target="_blank" rel="noopener">Git - Git References | Pro Git, 2/e</a></li></ul><hr class="footnotes-sep"><section class="footnotes"><ol class="footnotes-list"><li id="fn1" class="footnote-item"><p><a href="https://git-scm.com/docs/gitglossary#Documentation/gitglossary.txt-aiddefheadahead" target="_blank" rel="noopener">Git - gitglossary Documentation</a> <a href="#fnref1" class="footnote-backref">â†©ï¸</a></p></li></ol></section>]]></content>
    
    <summary type="html">
    
      &lt;p&gt;&lt;img src=&quot;../images/cover/git.jpg&quot; alt=&quot;&quot;&gt;&lt;/p&gt;&lt;p&gt;æœ¬ç¯‡å°‡æ·±å…¥æ¢è¨ Git åˆ†æ”¯åˆ°åº•æ˜¯ä»€éº¼ï¼Ÿå»ºç«‹åˆ†æ”¯æ™‚åˆ°åº•å»ºç«‹äº†ä»€éº¼ï¼Ÿå¦‚ä½•ç´€éŒ„åˆ†æ”¯è¦æŒ‡å‘å“ªå€‹ commitï¼Ÿ&lt;/p&gt;
    
    </summary>
    
    
      <category term="Git" scheme="https://titangene.github.io/categories/git/"/>
    
    
      <category term="w3HexSchool" scheme="https://titangene.github.io/tags/w3hexschool/"/>
    
      <category term="æ·±å…¥ Git" scheme="https://titangene.github.io/tags/%E6%B7%B1%E5%85%A5-git/"/>
    
  </entry>
  
  <entry>
    <title>æ·±å…¥ Gitï¼šGit ç‰©ä»¶å„²å­˜ - commit ç‰©ä»¶</title>
    <link href="https://titangene.github.io/article/git-commit-object.html"/>
    <id>https://titangene.github.io/article/git-commit-object.html</id>
    <published>2020-03-15T15:58:26.000Z</published>
    <updated>2020-03-22T15:51:58.000Z</updated>
    
    <content type="html"><![CDATA[<p><img src="../images/cover/git.jpg" alt=""></p><p>æœ¬ç¯‡å°‡æ·±å…¥æ¢è¨ Git å¦‚ä½•é‹ä½œï¼Œåœ¨åŸ·è¡Œ <code>git commit</code> æ™‚ï¼ŒGit æœƒå¦‚ä½•å»ºç«‹å’Œå„²å­˜ commit ç‰©ä»¶ã€‚</p><a id="more"></a><p>tree ç‰©ä»¶æœƒæŒ‡å‘è¿½è¹¤å°ˆæ¡ˆçš„ä¸åŒ snapshotï¼Œè‹¥è¦å–å¾—é€™äº› snapshot å°±æœƒé‡åˆ°ä¸€äº›å•é¡Œï¼š</p><ul><li>å¿…é ˆè¨˜å¾—é€™äº› tree ç‰©ä»¶çš„ SHA-1 å€¼ (éº»ç…©)</li><li>snapshot æ˜¯èª°å„²å­˜çš„</li><li>snapshot æ˜¯ä½•æ™‚å„²å­˜çš„</li><li>ç‚ºä½•è¦å„²å­˜ snapshot</li></ul><p>ä»¥ä¸Šé€™äº›å°±æ˜¯ commit ç‰©ä»¶ç‚ºä½ å„²å­˜çš„è³‡è¨Šã€‚</p><h2 id="æº–å‚™"><a class="header-anchor" href="#æº–å‚™"></a>æº–å‚™</h2><p>ä¸‹é¢æœƒä»¥é€™å€‹æª”æ¡ˆçµæ§‹ç‚ºç¯„ä¾‹ï¼š</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><code class="hljs shell"><span class="hljs-meta">$</span><span class="bash"> mkdir demo</span><br><span class="hljs-meta">$</span><span class="bash"> <span class="hljs-built_in">cd</span> demo</span><br><span class="hljs-meta">$</span><span class="bash"> git init</span><br>Initialized empty Git repository in /home/titan/project/demo/.git/<br><span class="hljs-meta">$</span><span class="bash"> mkdir styles</span><br><span class="hljs-meta">$</span><span class="bash"> <span class="hljs-built_in">echo</span> <span class="hljs-string">"index"</span> &gt; index.html</span><br><span class="hljs-meta">$</span><span class="bash"> <span class="hljs-built_in">echo</span> <span class="hljs-string">"# README"</span> &gt; README.md</span><br><span class="hljs-meta">$</span><span class="bash"> <span class="hljs-built_in">echo</span> <span class="hljs-string">"/* style */"</span> &gt; styles/main.css</span><br><br><span class="hljs-meta">$</span><span class="bash"> tree      </span><br>.<br>â”œâ”€â”€ index.html<br>â”œâ”€â”€ README.md<br>â””â”€â”€ styles<br>    â””â”€â”€ main.css<br><br>1 directories, 3 files<br></code></pre></td></tr></table></figure><h2 id="å°‡ç¬¬ä¸€å€‹æª”æ¡ˆåŠ å…¥-indexï¼Œä¸¦å»ºç«‹-tree-ç‰©ä»¶"><a class="header-anchor" href="#å°‡ç¬¬ä¸€å€‹æª”æ¡ˆåŠ å…¥-indexï¼Œä¸¦å»ºç«‹-tree-ç‰©ä»¶"></a>å°‡ç¬¬ä¸€å€‹æª”æ¡ˆåŠ å…¥ indexï¼Œä¸¦å»ºç«‹ tree ç‰©ä»¶</h2><p>å…ˆå°‡ <code>index.html</code> åŠ å…¥ indexï¼Œæ¥è‘—å°‡ index å¯«è‡³ tree ç‰©ä»¶ä¸­ï¼š</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><code class="hljs shell"><span class="hljs-meta">$</span><span class="bash"> cat index.html</span><br>index<br><span class="hljs-meta">$</span><span class="bash"> git add index.html</span><br><span class="hljs-meta">$</span><span class="bash"> git write-tree</span><br>2dce93ea08ed9059be0a838c6bcf62b7b5c28907<br></code></pre></td></tr></table></figure><div class="info"><p>è¨»ï¼š<code>git add</code> çœ‹èµ·ä¾†åªæ˜¯å°‡æª”æ¡ˆåŠ å…¥ indexï¼Œä½†åœ¨ Git çš„é‹ä½œåŸç†å…¶å¯¦åšäº†å¾ˆå¤šæ­¥é©Ÿï¼Œè©³æƒ…å¯åƒé–±æˆ‘ä¹‹å‰å¯«çš„é€™å¹¾ç¯‡ï¼Œæœ¬ç¯‡å°±ä¸å†é‡è¤‡èªªæ˜é€™äº›å…§å®¹ï¼š</p><ul><li><a href="https://titangene.github.io/article/git--blob-object.html">æ·±å…¥ Gitï¼šGit ç‰©ä»¶å„²å­˜ - blob ç‰©ä»¶</a></li><li><a href="https://titangene.github.io/article/git-tree-object.html">æ·±å…¥ Gitï¼šGit ç‰©ä»¶å„²å­˜ - tree ç‰©ä»¶</a></li><li><a href="https://titangene.github.io/article/git-index.html">æ·±å…¥ Gitï¼šindex æª”æ¡ˆ</a></li></ul></div><p>æ­¤æ™‚åœ¨ <code>.git/object</code> ç›®éŒ„å…§ï¼Œå·²ç¶“æœ‰å…©å€‹ Git ç‰©ä»¶ï¼Œåˆ†åˆ¥ç‚ºï¼š</p><ul><li><code>9015a7</code> blob ç‰©ä»¶ï¼šé€é <code>index.html</code> æ­¤æª”æ¡ˆç”¢ç”Ÿçš„</li><li><code>2dce93</code> tree ç‰©ä»¶ï¼šå°æ‡‰åˆ°å°ˆæ¡ˆæ ¹ç›®éŒ„</li></ul><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><code class="hljs shell"><span class="hljs-meta">$</span><span class="bash"> tree .git/objects</span><br>.git/objects<br>â”œâ”€â”€ 2d<br>â”‚   â””â”€â”€ ce93ea08ed9059be0a838c6bcf62b7b5c28907<br>â”œâ”€â”€ 90<br>â”‚   â””â”€â”€ 15a7a32ca0681be64471d3ac2f8c1f24c1040d<br>â”œâ”€â”€ info<br>â””â”€â”€ pack<br><br>4 directories, 2 files<br><br><span class="hljs-meta">$</span><span class="bash"> git cat-file -t 9015a7</span><br>blob<br><span class="hljs-meta">$</span><span class="bash"> git cat-file -p 9015a7    </span><br>index<br><br><span class="hljs-meta">$</span><span class="bash"> git cat-file -t 2dce93</span><br>tree<br><span class="hljs-meta">$</span><span class="bash"> git cat-file -p 2dce93</span><br>100644 blob 9015a7a32ca0681be64471d3ac2f8c1f24c1040dindex.html<br></code></pre></td></tr></table></figure><h2 id="å»ºç«‹ç¬¬ä¸€å€‹-commit-ç‰©ä»¶"><a class="header-anchor" href="#å»ºç«‹ç¬¬ä¸€å€‹-commit-ç‰©ä»¶"></a>å»ºç«‹ç¬¬ä¸€å€‹ commit ç‰©ä»¶</h2><p>è¦å»ºç«‹ commit ç‰©ä»¶éœ€ä½¿ç”¨ <code>git commit-tree</code> æŒ‡ä»¤ï¼ŒæŒ‡å®šä¸€å€‹ tree ç‰©ä»¶çš„ SHA-1 å€¼ä»¥åŠå‰ä¸€å€‹ commit ç‰©ä»¶ (ç¬¬ä¸€å€‹ commit ä¸éœ€è¦)ã€‚</p><p>ä¸‹é¢ä½¿ç”¨å‰›å‰›å»ºç«‹çš„ <code>2dce93</code> çš„ tree ç‰©ä»¶ä¾†å»ºç«‹ commit ç‰©ä»¶ï¼Œä¸¦ä¸”æä¾› commit è¨Šæ¯ï¼š</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs shell"><span class="hljs-meta">$</span><span class="bash"> <span class="hljs-built_in">echo</span> <span class="hljs-string">'first commit'</span> | git commit-tree 2dce93</span><br>9079eb3c74f72f1409dc47ef5d7c8763dbd128f6<br></code></pre></td></tr></table></figure><p>commit ç‰©ä»¶æœƒæ ¹æ“šå»ºç«‹çš„æ™‚é–“å’Œä½œè€…çš„è³‡è¨Šè€Œå»ºç«‹ä¸åŒçš„ SHA-1 å€¼ã€‚ä½¿ç”¨ <code>git cat-file</code> æŒ‡ä»¤å¯Ÿçœ‹å‰›å‰›å»ºç«‹çš„ commit ç‰©ä»¶ï¼š</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><code class="hljs shell"><span class="hljs-meta">$</span><span class="bash"> git cat-file -t 9079eb</span><br>commit<br><span class="hljs-meta">$</span><span class="bash"> git cat-file -p 9079eb</span><br>tree 2dce93ea08ed9059be0a838c6bcf62b7b5c28907<br>author titangene &lt;titangene.tw@gmail.com&gt; 1584281436 +0800<br>committer titangene &lt;titangene.tw@gmail.com&gt; 1584281436 +0800<br><br>first commit<br></code></pre></td></tr></table></figure><p>commit ç‰©ä»¶çš„æ ¼å¼åŒ…å«ä»¥ä¸‹å…§å®¹ï¼š</p><ul><li>å°ˆæ¡ˆ snapshot çš„é ‚å±¤ treeï¼šä¹Ÿå°±æ˜¯å°ˆæ¡ˆæ ¹ç›®éŒ„å°æ‡‰çš„ tree ç‰©ä»¶</li><li>author/committer è¨Šæ¯ï¼šä½¿ç”¨ <code>user.name</code> å’Œ <code>user.email</code> çš„é…ç½®å’Œ timestamp<ul><li>author å°±æ˜¯ç·¨è¼¯æª”æ¡ˆå…§å®¹çš„äºº</li><li>committer å°±æ˜¯ commit çš„äºº</li><li>é€šå¸¸ author å’Œ committer æœƒæ˜¯åŒä¸€å€‹äºº</li><li>è‹¥é€é email ä¾†ç™¼é€ patchï¼Œå°±å¯èƒ½ç™¼ç”Ÿ author å’Œ committer æ˜¯ä¸åŒäºº <sup class="footnote-ref"><a href="#fn1" id="fnref1">[1]</a></sup> <sup class="footnote-ref"><a href="#fn2" id="fnref2">[2]</a></sup></li></ul></li><li>ä¸€å€‹ç©ºè¡Œ (blank line)</li><li>commit è¨Šæ¯</li></ul><h3 id="å°‡å¦å¤–å…©å€‹æª”æ¡ˆåŠ å…¥-indexï¼Œä¸¦å»ºç«‹-tree-ç‰©ä»¶"><a class="header-anchor" href="#å°‡å¦å¤–å…©å€‹æª”æ¡ˆåŠ å…¥-indexï¼Œä¸¦å»ºç«‹-tree-ç‰©ä»¶"></a>å°‡å¦å¤–å…©å€‹æª”æ¡ˆåŠ å…¥ indexï¼Œä¸¦å»ºç«‹ tree ç‰©ä»¶</h3><p>æ¥è‘—å°‡ <code>README.md</code> å’Œ <code>styles/main.css</code> åŠ å…¥ indexï¼Œæ¥è‘—å†å°‡ index å¯«è‡³ tree ç‰©ä»¶ä¸­ï¼š</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><code class="hljs shell"><span class="hljs-meta">$</span><span class="bash"> cat README.md</span><br><span class="hljs-meta">#</span><span class="bash"> README</span><br><span class="hljs-meta">$</span><span class="bash"> git add README.md</span><br><br><span class="hljs-meta">$</span><span class="bash"> cat styles/main.css</span><br>/* style */<br><span class="hljs-meta">$</span><span class="bash"> git add styles/main.css</span><br><br><span class="hljs-meta">$</span><span class="bash"> git write-tree</span><br>563b8123edfdfd28aeb8bd6cde392a4be9adba2d<br></code></pre></td></tr></table></figure><p>æ­¤æ™‚åœ¨ <code>.git/object</code> ç›®éŒ„å…§ï¼Œå¤šäº† 4 å€‹ Git ç‰©ä»¶ï¼Œåˆ†åˆ¥ç‚ºï¼š</p><ul><li><code>7e5960</code> blob ç‰©ä»¶ï¼šé€é <code>README.md</code> æ­¤æª”æ¡ˆç”¢ç”Ÿçš„</li><li><code>202479</code> blob ç‰©ä»¶ï¼šé€é <code>styles/main.css</code> æ­¤æª”æ¡ˆç”¢ç”Ÿçš„</li><li><code>0bb8d2</code> tree ç‰©ä»¶ï¼šå°æ‡‰åˆ° <code>styles</code> ç›®éŒ„</li><li><code>563b81</code> tree ç‰©ä»¶ï¼šå°æ‡‰åˆ°å°ˆæ¡ˆæ ¹ç›®éŒ„</li></ul><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br></pre></td><td class="code"><pre><code class="hljs shell"><span class="hljs-meta">$</span><span class="bash"> tree .git/objects</span><br>.git/objects<br>â”œâ”€â”€ 0b<br>â”‚   â””â”€â”€ b8d2a25db76aec1c38bc948ba579959d443790<br>â”œâ”€â”€ 20<br>â”‚   â””â”€â”€ 2479c888bf25f40895164be873c63f556a1b76<br>â”œâ”€â”€ 2d<br>â”‚   â””â”€â”€ ce93ea08ed9059be0a838c6bcf62b7b5c28907<br>â”œâ”€â”€ 56<br>â”‚   â””â”€â”€ 3b8123edfdfd28aeb8bd6cde392a4be9adba2d<br>â”œâ”€â”€ 7e<br>â”‚   â””â”€â”€ 59600739c96546163833214c36459e324bad0a<br>â”œâ”€â”€ 90<br>â”‚   â”œâ”€â”€ 15a7a32ca0681be64471d3ac2f8c1f24c1040d<br>â”‚   â””â”€â”€ 79eb3c74f72f1409dc47ef5d7c8763dbd128f6<br>â”œâ”€â”€ info<br>â””â”€â”€ pack<br><br>8 directories, 7 files<br><br><span class="hljs-meta">$</span><span class="bash"> git cat-file -t 7e5960</span><br>blob<br><span class="hljs-meta">$</span><span class="bash"> git cat-file -p 7e5960</span><br><span class="hljs-meta">#</span><span class="bash"> README</span><br><br><span class="hljs-meta">$</span><span class="bash"> git cat-file -t 202479</span><br>blob<br><span class="hljs-meta">$</span><span class="bash"> git cat-file -p 202479</span><br>/* style */<br><br><span class="hljs-meta">$</span><span class="bash"> git cat-file -t 0bb8d2</span><br>tree<br><span class="hljs-meta">$</span><span class="bash"> git cat-file -p 0bb8d2</span><br>100644 blob 202479c888bf25f40895164be873c63f556a1b76main.css<br><br><span class="hljs-meta">$</span><span class="bash"> git cat-file -t 563b81</span><br>tree<br><span class="hljs-meta">$</span><span class="bash"> git cat-file -p 563b81</span><br>100644 blob 7e59600739c96546163833214c36459e324bad0aREADME.md<br>100644 blob 9015a7a32ca0681be64471d3ac2f8c1f24c1040dindex.html<br>040000 tree 0bb8d2a25db76aec1c38bc948ba579959d443790styles<br></code></pre></td></tr></table></figure><h2 id="å»ºç«‹ç¬¬äºŒå€‹-commit-ç‰©ä»¶"><a class="header-anchor" href="#å»ºç«‹ç¬¬äºŒå€‹-commit-ç‰©ä»¶"></a>å»ºç«‹ç¬¬äºŒå€‹ commit ç‰©ä»¶</h2><p>æ¥è‘—ä½¿ç”¨å‰›å‰›å»ºç«‹çš„ <code>563b81</code> çš„ tree ç‰©ä»¶ä¾†å»ºç«‹ç¬¬äºŒå€‹ commitï¼Œä¸¦ä¸”æä¾› commit è¨Šæ¯å’ŒæŒ‡å®šå‰ä¸€å€‹ commit (ä¹Ÿå°±æ˜¯ parent commit)ï¼š</p><ul><li><code>-p &lt;parent&gt;</code>ï¼šæŒ‡å®š parent commit çš„ IDï¼Œåœ¨æ­¤ç¯„ä¾‹æ˜¯ç¬¬ä¸€å€‹ commit ç‰©ä»¶çš„ SHA-1 å€¼</li></ul><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs shell"><span class="hljs-meta">$</span><span class="bash"> <span class="hljs-built_in">echo</span> <span class="hljs-string">'second commit'</span> | git commit-tree 563b81 -p 9079eb</span><br>200c91c4acb82e529fb8205ea786a17cc10008b6<br></code></pre></td></tr></table></figure><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><code class="hljs shell"><span class="hljs-meta">$</span><span class="bash"> git cat-file -t 200c91</span><br>commit<br><span class="hljs-meta">$</span><span class="bash"> git cat-file -p 200c91</span><br>tree 563b8123edfdfd28aeb8bd6cde392a4be9adba2d<br>parent 9079eb3c74f72f1409dc47ef5d7c8763dbd128f6<br>author titangene &lt;titangene.tw@gmail.com&gt; 1584285257 +0800<br>committer titangene &lt;titangene.tw@gmail.com&gt; 1584285257 +0800<br><br>second commit<br></code></pre></td></tr></table></figure><h2 id="ç·¨è¼¯æª”æ¡ˆå¾ŒåŠ å…¥-indexï¼Œä¸¦å»ºç«‹-tree-ç‰©ä»¶"><a class="header-anchor" href="#ç·¨è¼¯æª”æ¡ˆå¾ŒåŠ å…¥-indexï¼Œä¸¦å»ºç«‹-tree-ç‰©ä»¶"></a>ç·¨è¼¯æª”æ¡ˆå¾ŒåŠ å…¥ indexï¼Œä¸¦å»ºç«‹ tree ç‰©ä»¶</h2><p>æ¥è‘—ç·¨è¼¯ <code>index.html</code> å¾Œï¼Œå°‡è®Šæ›´åŠ å…¥ indexï¼Œæ¥è‘—å†å°‡ index å¯«è‡³ tree ç‰©ä»¶ä¸­ï¼š</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><code class="hljs shell"><span class="hljs-meta">$</span><span class="bash"> cat index.html</span><br>index<br><span class="hljs-meta">$</span><span class="bash"> <span class="hljs-built_in">echo</span> <span class="hljs-string">'index v2'</span> &gt; index.html</span><br><span class="hljs-meta">$</span><span class="bash"> git add index.html</span><br><br><span class="hljs-meta">$</span><span class="bash"> git write-tree</span><br>bdaf4c7dc919738d7d59a27ef2ef3d5ff3107ae6<br></code></pre></td></tr></table></figure><p>æ­¤æ™‚åœ¨ <code>.git/object</code> ç›®éŒ„å…§ï¼Œå¤šäº† 2 å€‹ Git ç‰©ä»¶ï¼Œåˆ†åˆ¥ç‚ºï¼š</p><ul><li><code>b2e53d</code> blob ç‰©ä»¶ï¼šé€é <code>index.html</code> æ­¤æª”æ¡ˆç”¢ç”Ÿçš„</li><li><code>bdaf4c</code> tree ç‰©ä»¶ï¼šå°æ‡‰åˆ°å°ˆæ¡ˆæ ¹ç›®éŒ„</li></ul><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><code class="hljs shell"><span class="hljs-meta">$</span><span class="bash"> git cat-file -t b2e53d</span><br>blob<br><span class="hljs-meta">$</span><span class="bash"> git cat-file -p b2e53d</span><br>index v2<br><br><span class="hljs-meta">$</span><span class="bash"> git cat-file -t bdaf4c</span><br>tree<br><span class="hljs-meta">$</span><span class="bash"> git cat-file -p bdaf4c</span><br>100644 blob 7e59600739c96546163833214c36459e324bad0a    README.md<br>100644 blob b2e53d55f22bdb2eafcdfaff9b1b37829309ae50    index.html<br>040000 tree 0bb8d2a25db76aec1c38bc948ba579959d443790    styles<br></code></pre></td></tr></table></figure><h2 id="å»ºç«‹ç¬¬ä¸‰å€‹-commit-ç‰©ä»¶"><a class="header-anchor" href="#å»ºç«‹ç¬¬ä¸‰å€‹-commit-ç‰©ä»¶"></a>å»ºç«‹ç¬¬ä¸‰å€‹ commit ç‰©ä»¶</h2><p>æ¥è‘—ä½¿ç”¨å‰›å‰›å»ºç«‹çš„ <code>bdaf4c</code> çš„ tree ç‰©ä»¶ä¾†å»ºç«‹ç¬¬ä¸‰å€‹ commitï¼Œä¸¦ä¸”æä¾› commit è¨Šæ¯å’ŒæŒ‡å®šå‰ä¸€å€‹ commit (ä¹Ÿå°±æ˜¯ parent commit)ï¼š</p><ul><li><code>-p &lt;parent&gt;</code>ï¼šæŒ‡å®š parent commit çš„ IDï¼Œåœ¨æ­¤ç¯„ä¾‹æ˜¯ç¬¬ä¸€å€‹ commit ç‰©ä»¶çš„ SHA-1 å€¼</li></ul><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs shell"><span class="hljs-meta">$</span><span class="bash"> <span class="hljs-built_in">echo</span> <span class="hljs-string">'third commit'</span> | git commit-tree bdaf4c -p 200c91</span><br>64fd0be6f2b66bc48d26c7c77cab62fab1477072<br></code></pre></td></tr></table></figure><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><code class="hljs shell"><span class="hljs-meta">$</span><span class="bash"> git cat-file -t 64fd0b</span><br>commit<br><span class="hljs-meta">$</span><span class="bash"> git cat-file -p 64fd0b</span><br>tree bdaf4c7dc919738d7d59a27ef2ef3d5ff3107ae6<br>parent 200c91c4acb82e529fb8205ea786a17cc10008b6<br>author titangene &lt;titangene.tw@gmail.com&gt; 1584892171 +0800<br>committer titangene &lt;titangene.tw@gmail.com&gt; 1584892171 +0800<br><br>third commit<br></code></pre></td></tr></table></figure><h2 id="å¯Ÿçœ‹æ­·å²ç´€éŒ„"><a class="header-anchor" href="#å¯Ÿçœ‹æ­·å²ç´€éŒ„"></a>å¯Ÿçœ‹æ­·å²ç´€éŒ„</h2><p>ä¸éåˆ°ç›®å‰ç‚ºæ­¢ï¼Œéƒ½é‚„ç„¡æ³•é€é <code>git log</code> æŒ‡ä»¤ä¾†å¯Ÿçœ‹å‰›å‰›å»ºç«‹çš„ commit æ­·å²ç´€éŒ„ï¼Œé€™æ˜¯å› ç‚ºæˆ‘å€‘å¾ä¸€é–‹å§‹å°±æ˜¯ä½¿ç”¨åº•å±¤æŒ‡ä»¤ (plumbing æŒ‡ä»¤) ä¾†æ¨¡æ“¬å¹³å¸¸æˆ‘å€‘åœ¨ç”¨çš„æŒ‡ä»¤ (porcelain æŒ‡ä»¤)ï¼Œè€Œåœ¨éç¨‹ä¸­éƒ½æ²’æœ‰å»ºç«‹ <code>master</code> åˆ†æ”¯ï¼š</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs shell"><span class="hljs-meta">$</span><span class="bash"> git <span class="hljs-built_in">log</span></span><br>fatal: your current branch 'master' does not have any commits yet<br></code></pre></td></tr></table></figure><p>ä½†æˆ‘å€‘å¯åœ¨ <code>git log</code> æŒ‡ä»¤ä¸Šï¼Œå¦å¤–æŒ‡å®šæœ€å¾Œä¸€å€‹å»ºç«‹çš„ commit ç‰©ä»¶ï¼Œé€™æ¨£å°±èƒ½çœ‹åˆ°å‰›å‰›å»ºç«‹çš„ Git æ­·å²ç´€éŒ„äº†ï¼š</p><ul><li><code>--stat</code>ï¼šé¡¯ç¤ºæ¯å€‹ commit çš„ diff è³‡è¨Š (diffstat)</li></ul><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br></pre></td><td class="code"><pre><code class="hljs shell"><span class="hljs-meta">$</span><span class="bash"> git <span class="hljs-built_in">log</span> --<span class="hljs-built_in">stat</span> 64fd0b</span><br>commit 64fd0be6f2b66bc48d26c7c77cab62fab1477072<br>Author: titangene &lt;titangene.tw@gmail.com&gt;<br>Date:   Sun Mar 22 23:49:31 2020 +0800<br><br>    third commit<br><br> index.html | 2 +-<br> 1 file changed, 1 insertion(+), 1 deletion(-)<br><br>commit 200c91c4acb82e529fb8205ea786a17cc10008b6 (HEAD -&gt; master)<br>Author: titangene &lt;titangene.tw@gmail.com&gt;<br>Date:   Sun Mar 15 23:14:17 2020 +0800<br><br>    second commit<br><br> README.md       | 1 +<br> styles/main.css | 1 +<br> 2 files changed, 2 insertions(+)<br><br>commit 9079eb3c74f72f1409dc47ef5d7c8763dbd128f6<br>Author: titangene &lt;titangene.tw@gmail.com&gt;<br>Date:   Sun Mar 15 22:10:36 2020 +0800<br><br>    first commit<br><br> index.html | 1 +<br> 1 file changed, 1 insertion(+)<br></code></pre></td></tr></table></figure><h2 id="Git-ç‰©ä»¶é—œè¯åœ–"><a class="header-anchor" href="#Git-ç‰©ä»¶é—œè¯åœ–"></a>Git ç‰©ä»¶é—œè¯åœ–</h2><p>ä»¥ä¸Šé€™äº›å°±æ˜¯ Git åœ¨åŸ·è¡Œ <code>git add</code> å’Œ <code>git commit</code> æŒ‡ä»¤æ™‚æ‰€åšçš„äº‹æƒ…ï¼š</p><ol><li>å„²å­˜å·²è®Šæ›´æª”æ¡ˆçš„ blob ç‰©ä»¶</li><li>æ›´æ–° index</li><li>åˆ©ç”¨ index å»ºç«‹ tree ç‰©ä»¶</li><li>å»ºç«‹æŒ‡å‘é ‚å±¤ tree å’Œ parent commit çš„ commit ç‰©ä»¶</li></ol><p>é€™äº›ç‰©ä»¶éƒ½å­˜åœ¨ <code>.git/objects</code> ç›®éŒ„å…§ã€‚</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><code class="hljs shell"><span class="hljs-meta">$</span><span class="bash"> find .git/objects -<span class="hljs-built_in">type</span> f</span><br>.git/objects/2d/ce93ea08ed9059be0a838c6bcf62b7b5c28907 # Tree: ./ dir v1<br>.git/objects/20/0c91c4acb82e529fb8205ea786a17cc10008b6 # Commit: second commit<br>.git/objects/20/2479c888bf25f40895164be873c63f556a1b76 # Blob: main.css<br>.git/objects/7e/59600739c96546163833214c36459e324bad0a # Blob: README.md<br>.git/objects/0b/b8d2a25db76aec1c38bc948ba579959d443790 # Tree: styles dir<br>.git/objects/90/79eb3c74f72f1409dc47ef5d7c8763dbd128f6 # Commit: first commit<br>.git/objects/90/15a7a32ca0681be64471d3ac2f8c1f24c1040d # Blob: index.html<br>.git/objects/56/3b8123edfdfd28aeb8bd6cde392a4be9adba2d # Tree: ./ dir v2<br></code></pre></td></tr></table></figure><p>ä¸‹åœ–æ˜¯é€™äº› Git ç‰©ä»¶çš„é—œè¯åœ–ï¼š</p><p><img src="../images/git-commit-object/object-DAG.png" alt=""></p><div class="info"><p>é›–ç„¶çœ‹èµ·ä¾†å¾ˆåƒç›®éŒ„å’Œå­ç›®éŒ„çš„é—œä¿‚ï¼Œä½†åœ¨ Git ä¸­æ˜¯æ²’æœ‰å±¤ç´šé—œä¿‚çš„ï¼Œcommit ç‰©ä»¶å½¢æˆ<a href="https://zh.m.wikipedia.org/wiki/%E6%9C%89%E5%90%91%E6%97%A0%E7%8E%AF%E5%9B%BE" target="_blank" rel="noopener">æœ‰å‘ç„¡ç’°åœ– (directed acyclic graphï¼ŒDAG)</a>ï¼Œcommit ç‰©ä»¶æœ‰ parent commit (æœ‰å‘)ï¼Œä¸¦ä¸” commit ç‰©ä»¶çš„åœ–æ˜¯ç„¡ç’°çš„ (å¾é–‹å§‹åˆ°çµæŸä¸æœƒæ˜¯åŒä¸€å€‹ç‰©ä»¶) <sup class="footnote-ref"><a href="#fn3" id="fnref3">[3]</a></sup>ã€‚</p></div><p>è³‡æ–™ä¾†æºï¼š<a href="https://git-scm.com/book/zh-tw/v2/Git-Internals-Git-Objects#r_tree_objects" target="_blank" rel="noopener">10.2 Git Internals - Git Objects | Pro Git, 2/e</a></p><hr class="footnotes-sep"><section class="footnotes"><ol class="footnotes-list"><li id="fn1" class="footnote-item"><p><a href="https://git-scm.com/book/en/v2/Git-Basics-Viewing-the-Commit-History" target="_blank" rel="noopener">Git - Viewing the Commit History</a> <a href="#fnref1" class="footnote-backref">â†©ï¸</a></p></li><li id="fn2" class="footnote-item"><p><a href="https://git-scm.com/book/en/v2/Distributed-Git-Maintaining-a-Project#_git_am" target="_blank" rel="noopener">Git - Maintaining a Project</a> <a href="#fnref2" class="footnote-backref">â†©ï¸</a></p></li><li id="fn3" class="footnote-item"><p><a href="https://git-scm.com/docs/gitglossary#Documentation/gitglossary.txt-aiddefDAGaDAG" target="_blank" rel="noopener">Git - gitglossary Documentation</a> <a href="#fnref3" class="footnote-backref">â†©ï¸</a></p></li></ol></section>]]></content>
    
    <summary type="html">
    
      &lt;p&gt;&lt;img src=&quot;../images/cover/git.jpg&quot; alt=&quot;&quot;&gt;&lt;/p&gt;&lt;p&gt;æœ¬ç¯‡å°‡æ·±å…¥æ¢è¨ Git å¦‚ä½•é‹ä½œï¼Œåœ¨åŸ·è¡Œ &lt;code&gt;git commit&lt;/code&gt; æ™‚ï¼ŒGit æœƒå¦‚ä½•å»ºç«‹å’Œå„²å­˜ commit ç‰©ä»¶ã€‚&lt;/p&gt;
    
    </summary>
    
    
      <category term="Git" scheme="https://titangene.github.io/categories/git/"/>
    
    
      <category term="w3HexSchool" scheme="https://titangene.github.io/tags/w3hexschool/"/>
    
      <category term="æ·±å…¥ Git" scheme="https://titangene.github.io/tags/%E6%B7%B1%E5%85%A5-git/"/>
    
  </entry>
  
  <entry>
    <title>æ·±å…¥ Gitï¼šindex æª”æ¡ˆ</title>
    <link href="https://titangene.github.io/article/git-index.html"/>
    <id>https://titangene.github.io/article/git-index.html</id>
    <published>2020-03-08T15:56:40.000Z</published>
    <updated>2020-03-08T18:41:13.000Z</updated>
    
    <content type="html"><![CDATA[<p><img src="../images/cover/git.jpg" alt=""></p><p><code>git add</code> æœƒå°‡æª”æ¡ˆåŠ å…¥ indexï¼Œç©¶ç«Ÿ index åˆ°åº•å­˜åœ¨å“ªï¼Ÿå…¶å¯¦ï¼Œé€šå¸¸æœƒæ”¾åœ¨ <code>.git/index</code>ï¼Œæœ¬ç¯‡å°‡æ·±å…¥æ¢è¨æ­¤æª”æ¡ˆå¼å¦‚ä½•ç´€éŒ„æœ‰å“ªäº›æª”æ¡ˆè¢«åŠ å…¥ indexã€‚</p><a id="more"></a><p>index æ˜¯ä¸€å€‹äºŒé€²ä½æª”æ¡ˆï¼Œé€šå¸¸æ”¾åœ¨ <code>.git/index</code>ï¼Œå…¶ä¸­åŒ…å«è·¯å¾‘åç¨±çš„æ’åºåˆ—è¡¨ã€æ¯å€‹è·¯å¾‘åç¨±çš„æ¬Šé™å’Œ blob ç‰©ä»¶çš„ SHA-1 å€¼ã€‚è€Œ <code>git ls-files</code> æŒ‡ä»¤å¯é¡¯ç¤º index çš„å…§å®¹ã€‚</p><h2 id="é€é-git-ls-files-ä¾†èªè­˜-index"><a class="header-anchor" href="#é€é-git-ls-files-ä¾†èªè­˜-index"></a>é€é <code>git ls-files</code> ä¾†èªè­˜ index</h2><p>ä½¿ç”¨ <code>git ls-files</code> åº•å±¤æŒ‡ä»¤ä¾†å¯Ÿçœ‹ index æª”æ¡ˆï¼Œä½†æŒ‡ä»¤é è¨­åªæœƒé¡¯ç¤ºæœ‰å“ªäº›æª”åï¼Œæ‰€ä»¥åŠ ä¸Šä¸€äº›é¸é …ï¼š</p><ul><li><code>-c</code>ï¼Œ<code>--cached</code>ï¼šé è¨­é¸é …ï¼Œåªåœ¨è¼¸å‡ºé¡¯ç¤ºå·²æš«å­˜çš„æª”æ¡ˆ</li><li><code>-s</code>ï¼Œ<code>--stage</code>ï¼šåœ¨è¼¸å‡ºä¸­é¡¯ç¤º stage å…§å®¹çš„ mode bitã€ç‰©ä»¶åç¨±å’Œ stage number</li></ul><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs shell"><span class="hljs-meta">$</span><span class="bash"> git ls-files -s</span><br>100644 9015a7a32ca0681be64471d3ac2f8c1f24c1040d 0index.html<br></code></pre></td></tr></table></figure><p>å¾ä¸Šé¢è¼¸å‡ºå¯å¾—çŸ¥ï¼š</p><ul><li><code>index.html</code> çš„ file mode bits ç‚º <code>100644</code>ï¼Œä»£è¡¨æ˜¯ regular non-executable file</li><li><code>index.html</code> çš„ blob ç‰©ä»¶åç¨±ç‚º <code>9015a7...</code></li><li>stage number åœ¨åˆä½µè¡çªè™•ç†æ™‚æœƒç”¨åˆ°</li><li>æª”æ¡ˆåç¨±</li></ul><p>file mode bits (6 ä½æ•¸) æ˜¯æª”æ¡ˆæ¬Šé™çš„å…«é€²ä½è¡¨ç¤ºæ³•ï¼Œä¹Ÿå¯ä»¥æ˜¯ä»¥äºŒé€²ä½çš„æ–¹å¼è®€å–ã€‚é€™é‚Šçš„ <code>100644</code> ( <code>0b1000000110100100</code> ) ä»£è¡¨æª”æ¡ˆæ˜¯ regular non-executable fileï¼Œæª”æ¡ˆæ“æœ‰è€…å¯ä»¥è®€å¯«ï¼Œæª”æ¡ˆç¾¤çµ„ä¸­çš„å…¶ä»–ä½¿ç”¨è€…å¯ä»¥è®€å–ï¼Œè€Œå…¶ä»–ä½¿ç”¨è€…ä¹Ÿå¯ä»¥è®€å–ã€‚</p><p>é€™é¡ä¼¼ Unix çš„æª”æ¡ˆå±¬æ€§ <sup class="footnote-ref"><a href="#fn1" id="fnref1">[1]</a></sup>ï¼Œç”¨ä¾†è¡¨ç¤ºè©²æª”æ¡ˆçš„é¡å‹ (æª”æ¡ˆã€ç›®éŒ„ã€link) å’Œæ¬Šé™ (å¯è®€ã€å¯å¯«ã€å¯åŸ·è¡Œ)ï¼Œä»¥ä¸‹æ˜¯å¸¸è¦‹çš„ (ç”¨äºŒé€²ä½å’Œå…«é€²ä½è¡¨ç¤º) <sup class="footnote-ref"><a href="#fn2" id="fnref2">[2]</a></sup> <sup class="footnote-ref"><a href="#fn3" id="fnref3">[3]</a></sup>ï¼š</p><ul><li><code>0100000000000000</code> ( <code>040000</code> )ï¼šDirectory</li><li><code>1000000110100100</code> ( <code>100644</code> )ï¼šRegular non-executable file</li><li><code>1000000110110100</code> ( <code>100664</code> )ï¼šRegular non-executable group-writeable file</li><li><code>1000000111101101</code> ( <code>100755</code> )ï¼šRegular executable file</li><li><code>1010000000000000</code> ( <code>120000</code> )ï¼šSymbolic link</li><li><code>1110000000000000</code> ( <code>160000</code> )ï¼šGitlink</li></ul><div class="info"><p>è¨»ï¼šäºŒé€²ä½è¡¨ç¤ºæ³• <sup class="footnote-ref"><a href="#fn4" id="fnref4">[4]</a></sup></p><ul><li>å‰ 4-bitï¼šç‰©ä»¶ type<ul><li><code>1000</code>ï¼šregular file</li><li><code>1010</code>ï¼šsymbolic link</li><li><code>1110</code>ï¼šgitlink</li></ul></li><li>ä¸­é–“ 3-bitï¼šæ²’æœ‰ä½¿ç”¨</li><li>å¾Œé¢ 9-bitï¼šunix æ¬Šé™<ul><li>regular file åªèƒ½ç”¨ <code>0755</code> å’Œ <code>0644</code></li><li>symbolic link å’Œ gitlink åœ¨æ­¤ field ä¸­çš„å€¼ç‚º <code>0</code></li></ul></li></ul><p>blob ç‰©ä»¶åªå° <code>100644</code>ã€<code>100664</code> å’Œ <code>100755</code> é€™ä¸‰ç¨® mode æœ‰æ•ˆã€‚</p></div><p>åœ¨ <code>git add</code> æŒ‡ä»¤æœŸé–“æ²’æœ‰çœŸæ­£ä½¿ç”¨ä¸åŒçš„ stage numberï¼Œç”¨æ–¼è™•ç†åˆä½µè¡çªï¼š</p><ul><li><code>0</code>ï¼šnormalï¼Œç„¡è¡çªï¼Œä¸€åˆ‡æ­£å¸¸</li><li><code>1</code>ï¼šbaseï¼Œå…±åŒ ancestor ç‰ˆæœ¬</li><li><code>2</code>ï¼šoursï¼Œç›®æ¨™ ( <code>HEAD</code> ) ç‰ˆæœ¬</li><li><code>3</code>ï¼štherisï¼Œè¢«åˆä½µçš„ç‰ˆæœ¬</li></ul><h2 id="git-index-å…§éƒ¨"><a class="header-anchor" href="#git-index-å…§éƒ¨"></a><code>.git/index</code> å…§éƒ¨</h2><p>å° Git index æª”æ¡ˆ <code>.git/index</code> é€²è¡Œä½å…ƒè½‰å„² (bits dump)ï¼š</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br></pre></td><td class="code"><pre><code class="hljs shell"><span class="hljs-meta">$</span><span class="bash"> xxd -b -c 4 .git/index</span><br>00000000: 01000100 01001001 01010010 01000011  DIRC<br>00000004: 00000000 00000000 00000000 00000010  ....<br>00000008: 00000000 00000000 00000000 00000001  ....<br>0000000c: 01011110 01011011 11000111 10010001  ^[..<br>00000010: 00101111 00001011 00100011 00101010  /.#*<br>00000014: 01011110 01011011 11000111 10010001  ^[..<br>00000018: 00100111 00101111 10101000 11100000  '/..<br>0000001c: 00000000 00000000 00001000 00000100  ....<br>00000020: 00000000 10111000 00001101 01001111  ...O<br>00000024: 00000000 00000000 10000001 10100100  ....<br>00000028: 00000000 00000000 00000011 11101000  ....<br>0000002c: 00000000 00000000 00000011 11101000  ....<br>00000030: 00000000 00000000 00000000 00001011  ....<br>00000034: 10111011 11011110 11111001 00101010  ...*<br>00000038: 11101111 00001111 11101100 11111000  ....<br>0000003c: 00100111 00000100 01110000 10100110  '.p.<br>00000040: 00011111 11101000 10010101 00101010  ...*<br>00000044: 01101010 11111101 01011011 10011010  j.[.<br>00000048: 00000000 00001010 01101001 01101110  ..in<br>0000004c: 01100100 01100101 01111000 00101110  dex.<br>00000050: 01101000 01110100 01101101 01101100  html<br>00000054: 00000000 00000000 00000000 00000000  ....<br>00000058: 00000000 00000000 00000000 00000000  ....<br>0000005c: 00101000 01000001 00101101 00100001  (A-!<br>00000060: 00011010 10000111 01011011 00010011  ..[.<br>00000064: 01101111 01010010 10010111 01110010  oR.r<br>00000068: 11001010 01001100 01110011 11110011  .Ls.<br>0000006c: 10110011 11001100 00110011 00001000  ..3.<br></code></pre></td></tr></table></figure><p>æˆ–ä»¥åå…­é€²ä½è½‰å„² (hex dump) ç‰ˆæœ¬ï¼š</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><code class="hljs shell"><span class="hljs-meta">$</span><span class="bash"> xxd .git/index     </span><br>00000000: 4449 5243 0000 0002 0000 0001 5e5b c791  DIRC........^[..<br>00000010: 2f0b 232a 5e5b c791 272f a8e0 0000 0804  /.#*^[..'/......<br>00000020: 00b8 0d4f 0000 81a4 0000 03e8 0000 03e8  ...O............<br>00000030: 0000 000b bbde f92a ef0f ecf8 2704 70a6  .......*....'.p.<br>00000040: 1fe8 952a 6afd 5b9a 000a 696e 6465 782e  ...*j.[...index.<br>00000050: 6874 6d6c 0000 0000 0000 0000 2841 2d21  html........(A-!<br>00000060: 1a87 5b13 6f52 9772 ca4c 73f3 b3cc 3308  ..[.oR.r.Ls...3.<br></code></pre></td></tr></table></figure><p>index æª”æ¡ˆåŒ…å«ä»¥ä¸‹è³‡è¨Šï¼š</p><ul><li>12-byte header</li><li>å¤šå€‹æ’åºçš„ index entries</li><li>Extensionsï¼Œå®ƒå€‘é€šéç°½å (signature) ä¾†è­˜åˆ¥</li><li>æ­¤ checksum å’Œä¹‹å‰çš„ index æª”æ¡ˆå…§å®¹çš„ 160-bit SHA-1</li></ul><h3 id="Header"><a class="header-anchor" href="#Header"></a>Header</h3><p>index ä»¥ 12-byte çš„ header é–‹é ­ï¼š</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs plain">hex: 4449 5243 0000 0002 0000 0001<br></code></pre></td></tr></table></figure><p>ç”±ä»£è¡¨ â€œDirCacheâ€ çš„ 4-btye ç°½å â€œDIRCâ€ ( <code>0x44495243</code> ) çµ„æˆ<br>4-byte æ˜¯ Git index æ ¼å¼çš„ç•¶å‰ç‰ˆæœ¬è™Ÿ â€œ2â€ ( <code>0x00000002</code> )<br>32-bit çš„ index entries â€œ1â€ ( <code>0x00000001</code> )</p><h3 id="Index-Entry"><a class="header-anchor" href="#Index-Entry"></a>Index Entry</h3><p>åœ¨ <code>index.html</code> æ­¤ index entry ä¸­åŒ…æ‹¬ï¼š</p><h4 id="64-bit-ctime"><a class="header-anchor" href="#64-bit-ctime"></a>64-bit ctime</h4><p>ctime æ˜¯ change timeï¼Œä¹Ÿå°±æ˜¯æª”æ¡ˆçš„ metadata åœ¨æœ€å¾Œä¿®æ”¹çš„æ™‚é–“</p><ul><li>å‰é¢ 32-bitï¼šctime seconds</li><li>å¾Œé¢ 32-bitï¼šctime nanosecond fractions</li></ul><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs plain">hex: 5e5b c791 2f0b 232a<br></code></pre></td></tr></table></figure><p>å¯ç”¨ <code>stat</code> æŒ‡ä»¤ä¾†å–å¾— <code>index.html</code> çš„æœ€å¾Œä¿®æ”¹æ™‚é–“ï¼š</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs shell"><span class="hljs-meta">$</span><span class="bash"> <span class="hljs-built_in">stat</span> -c <span class="hljs-string">'ctime: %z (%Z)'</span> index.html</span><br>ctime: 2020-03-01 22:32:49.789259050 +0800 (1583073169)<br></code></pre></td></tr></table></figure><p>ç„¶å¾Œç”¨ä¸‹é¢æŒ‡ä»¤é©—è­‰ï¼š</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><code class="hljs shell"><span class="hljs-meta">$</span><span class="bash"> <span class="hljs-built_in">printf</span> <span class="hljs-string">'%x'</span> 1583073169</span><br><span class="hljs-meta">5e5bc791%</span><br><span class="hljs-meta">$</span><span class="bash"> <span class="hljs-built_in">printf</span> <span class="hljs-string">'%x'</span> 789259050</span><br><span class="hljs-meta">2f0b232a%</span><br></code></pre></td></tr></table></figure><h4 id="64-bit-mtime"><a class="header-anchor" href="#64-bit-mtime"></a>64-bit mtime</h4><p>mtime æ˜¯ modify timeï¼Œä¹Ÿå°±æ˜¯æª”æ¡ˆçš„è³‡æ–™åœ¨æœ€å¾Œä¿®æ”¹çš„æ™‚é–“</p><ul><li>å‰é¢ 32-bitï¼šmtime seconds</li><li>å¾Œé¢ 32-bitï¼šmtime nanosecond fractions</li></ul><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs plain">hex: 5e5b c791 272f a8e0<br></code></pre></td></tr></table></figure><p>å¯ç”¨ <code>stat</code> æŒ‡ä»¤ä¾†å–å¾— <code>index.html</code> çš„æœ€å¾Œä¿®æ”¹æ™‚é–“ï¼š</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs shell"><span class="hljs-meta">$</span><span class="bash"> <span class="hljs-built_in">stat</span> -c <span class="hljs-string">'mtime: %y (%Y)'</span> index.html</span><br>mtime: 2020-03-01 22:32:49.657434848 +0800 (1583073169)<br></code></pre></td></tr></table></figure><p>ç„¶å¾Œç”¨ä¸‹é¢æŒ‡ä»¤é©—è­‰ï¼š</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><code class="hljs shell"><span class="hljs-meta">$</span><span class="bash"> <span class="hljs-built_in">printf</span> <span class="hljs-string">'%x'</span> 1583073169</span><br><span class="hljs-meta">5e5bc791%</span><br><span class="hljs-meta">$</span><span class="bash"> <span class="hljs-built_in">printf</span> <span class="hljs-string">'%x'</span> 657434848</span><br><span class="hljs-meta">272fa8e0%</span><br></code></pre></td></tr></table></figure><h4 id="32-bit-dev"><a class="header-anchor" href="#32-bit-dev"></a>32-bit dev</h4><p>æª”æ¡ˆæ‰€åœ¨çš„è£ç½®ï¼š</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs plain">hex: 0000 0804<br></code></pre></td></tr></table></figure><p>å¯ç”¨ <code>stat</code> æŒ‡ä»¤ä¾†å–å¾— <code>index.html</code> æª”æ¡ˆæ‰€åœ¨çš„è£ç½®ï¼š</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs shell"><span class="hljs-meta">$</span><span class="bash"> <span class="hljs-built_in">stat</span> -c <span class="hljs-string">'%D'</span> index.html</span><br>804<br></code></pre></td></tr></table></figure><h4 id="32-bit-ino"><a class="header-anchor" href="#32-bit-ino"></a>32-bit ino</h4><p>æª”æ¡ˆ inode numberï¼š</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs plain">hex: 00b8 0d4f<br></code></pre></td></tr></table></figure><p>å¯ç”¨ <code>stat</code> æŒ‡ä»¤ä¾†å–å¾— <code>index.html</code> æª”æ¡ˆæ‰€åœ¨çš„è£ç½®ï¼š</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs shell"><span class="hljs-meta">$</span><span class="bash"> <span class="hljs-built_in">stat</span> -c <span class="hljs-string">'%i'</span> index.html</span><br>12062031<br></code></pre></td></tr></table></figure><p>ç„¶å¾Œç”¨ä¸‹é¢æŒ‡ä»¤é©—è­‰ï¼š</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs shell"><span class="hljs-meta">$</span><span class="bash"> <span class="hljs-built_in">printf</span> <span class="hljs-string">'%x'</span> 12062031</span><br><span class="hljs-meta">b80d4f%</span><br></code></pre></td></tr></table></figure><h4 id="32-bit-mode"><a class="header-anchor" href="#32-bit-mode"></a>32-bit mode</h4><p>æª”æ¡ˆæ¬Šé™ä»¥åå…­é€²ä½è¡¨ç¤º</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs plain">hex: 0000 81a4<br>bin: 00000000 00000000 10000001 10100100<br></code></pre></td></tr></table></figure><p>å¯ç”¨ <code>stat</code> æŒ‡ä»¤ä¾†å–å¾— <code>index.html</code> æª”æ¡ˆçš„æ¬Šé™ï¼š</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs shell"><span class="hljs-meta">$</span><span class="bash"> <span class="hljs-built_in">stat</span> -c <span class="hljs-string">'%f'</span> index.html</span><br>81a4<br></code></pre></td></tr></table></figure><h4 id="32-bit-uid"><a class="header-anchor" href="#32-bit-uid"></a>32-bit uid</h4><p>ç•¶å‰ä½¿ç”¨è€…çš„ user identifier</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs plain">hex: 0000 03e8<br></code></pre></td></tr></table></figure><p>å¯ç”¨ <code>stat</code> æŒ‡ä»¤ä¾†å–å¾— <code>index.html</code> æª”æ¡ˆçš„ uidï¼š</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs shell"><span class="hljs-meta">$</span><span class="bash"> <span class="hljs-built_in">stat</span> -c <span class="hljs-string">'%u'</span> index.html</span><br>1000<br></code></pre></td></tr></table></figure><p>ç„¶å¾Œç”¨ä¸‹é¢æŒ‡ä»¤é©—è­‰ï¼š</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs shell"><span class="hljs-meta">$</span><span class="bash"> <span class="hljs-built_in">printf</span> <span class="hljs-string">'%x'</span> 1000</span><br><span class="hljs-meta">3e8%</span><br></code></pre></td></tr></table></figure><h4 id="32-bit-gid"><a class="header-anchor" href="#32-bit-gid"></a>32-bit gid</h4><p>ç•¶å‰ä½¿ç”¨è€…çš„ group identifier</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs plain">hex: 0000 03e8<br></code></pre></td></tr></table></figure><p>å¯ç”¨ <code>stat</code> æŒ‡ä»¤ä¾†å–å¾— <code>index.html</code> æª”æ¡ˆçš„ gidï¼š</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs shell"><span class="hljs-meta">$</span><span class="bash"> <span class="hljs-built_in">stat</span> -c <span class="hljs-string">'%g'</span> index.html</span><br>1000<br></code></pre></td></tr></table></figure><p>ç„¶å¾Œç”¨ä¸‹é¢æŒ‡ä»¤é©—è­‰ï¼š</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs shell"><span class="hljs-meta">$</span><span class="bash"> <span class="hljs-built_in">printf</span> <span class="hljs-string">'%x'</span> 1000</span><br><span class="hljs-meta">3e8%</span><br></code></pre></td></tr></table></figure><h4 id="32-bit-file-size"><a class="header-anchor" href="#32-bit-file-size"></a>32-bit file size</h4><p>æª”æ¡ˆå¤§å°</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs plain">hex: 0000 000b<br></code></pre></td></tr></table></figure><p>å¯ç”¨ <code>stat</code> æŒ‡ä»¤ä¾†å–å¾— <code>index.html</code> æª”æ¡ˆçš„å¤§å°ï¼š</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs shell"><span class="hljs-meta">$</span><span class="bash"> <span class="hljs-built_in">stat</span> -c <span class="hljs-string">'%s'</span> index.html</span><br>11<br></code></pre></td></tr></table></figure><p>ç„¶å¾Œç”¨ä¸‹é¢æŒ‡ä»¤é©—è­‰ï¼š</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs shell"><span class="hljs-meta">$</span><span class="bash"> <span class="hljs-built_in">printf</span> <span class="hljs-string">'%x'</span> 11</span><br><span class="hljs-meta">b%</span><br></code></pre></td></tr></table></figure><h4 id="160-bit-SHA-1-Object-ID"><a class="header-anchor" href="#160-bit-SHA-1-Object-ID"></a>160-bit SHA-1 Object ID</h4><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs plain">hex: bbde f92a ef0f ecf8 2704<br>     70a6 1fe8 952a 6afd 5b9a<br></code></pre></td></tr></table></figure><p>å¯ç”¨ <code>git hash-object</code> æŒ‡ä»¤ä¾†å–å¾— <code>index.html</code> æª”æ¡ˆçš„ blob ç‰©ä»¶ IDï¼š</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs shell"><span class="hljs-meta">$</span><span class="bash"> git <span class="hljs-built_in">hash</span>-object index.html</span><br>bbdef92aef0fecf8270470a61fe8952a6afd5b9a<br></code></pre></td></tr></table></figure><h4 id="16-bit-â€˜flagsâ€™-field"><a class="header-anchor" href="#16-bit-â€˜flagsâ€™-field"></a>16-bit â€˜flagsâ€™ field</h4><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs plain">hex: 000a<br></code></pre></td></tr></table></figure><p>åˆ†ç‚ºï¼š</p><ul><li>1-bitï¼šassume-valid flag</li><li>1-bitï¼šextended flag (åœ¨ç‰ˆæœ¬ 2 ä¸­å¿…é ˆç‚ºé›¶)</li><li>2-bitï¼šstage (åˆä½µæœŸé–“)</li><li>å¦‚æœ length å°æ–¼ 0xFFFï¼Œå‰‡ç‚º 12-bit name lengthï¼›å¦å‰‡ï¼Œå°‡ 0xFFF å„²å­˜åœ¨æ­¤ field ä¸­</li></ul><h4 id="16-bit-field"><a class="header-anchor" href="#16-bit-field"></a>16-bit field</h4><p>(ç‰ˆæœ¬ 3 æˆ–æ›´æ–°ç‰ˆ) ç•¶å‰é¢çš„ 16-bit field çš„ â€œextended flagâ€ ç‚º 1 æ™‚é©ç”¨</p><ul><li>1-bitï¼šç‚ºæœªä¾†ä¿ç•™</li><li>1-bitï¼šskip-worktree flag (ç”¨æ–¼ sparse checkout)</li><li>1-bitï¼šintent-to-add flag (ç”¨æ–¼ <code>git add -N</code> )</li><li>13-bitï¼šæœªä½¿ç”¨ï¼Œå¿…é ˆç‚ºé›¶</li></ul><p>å¿½ç•¥æ­¤éƒ¨ä»½ï¼Œå› ç‚ºæˆ‘ç›®å‰ä½¿ç”¨çš„ Git çš„ç‰ˆæœ¬ç‚º 2ï¼š</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs shell"><span class="hljs-meta">$</span><span class="bash"> git --version</span><br>git version 2.17.1<br></code></pre></td></tr></table></figure><h4 id="æª”æ¡ˆè·¯å¾‘"><a class="header-anchor" href="#æª”æ¡ˆè·¯å¾‘"></a>æª”æ¡ˆè·¯å¾‘</h4><ul><li>ç›¸å°æ–¼ top level ç›®éŒ„ (ä¸åŒ…å«æ–œç·š) çš„ entry è·¯å¾‘åç¨± (å¯è®Šé•·åº¦)</li><li><code>/</code> ä½œç‚ºè·¯å¾‘åˆ†éš”å­—å…ƒ</li><li>ä¸å…è¨±ä½¿ç”¨ç‰¹æ®Šè·¯å¾‘å…ƒä»¶ <code>.</code>ã€<code>..</code> å’Œ <code>.git</code></li><li>ä¸å…è¨±ä½¿ç”¨æ–œç·š</li><li>ç¢ºåˆ‡çš„ç·¨ç¢¼ä¸ç¢ºå®šï¼Œä½† <code>.</code> å’Œ <code>/</code> å­—å…ƒæœƒä»¥ 7-bit ASCII ç·¨ç¢¼ï¼Œä¸¦ä¸”ç·¨ç¢¼ä¸èƒ½åŒ…å« NUL byte (UNIX è·¯å¾‘åç¨±)</li></ul><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs plain">hex: 696e 6465 782e 6874 6d6c<br></code></pre></td></tr></table></figure><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs shell"><span class="hljs-meta">$</span><span class="bash"> <span class="hljs-built_in">printf</span> <span class="hljs-string">'index.html'</span> | xxd</span><br>00000000: 696e 6465 782e 6874 6d6c                 index.html<br></code></pre></td></tr></table></figure><h4 id="1-8-NUL-byte"><a class="header-anchor" href="#1-8-NUL-byte"></a>1-8 NUL byte</h4><p>ä½¿ç”¨ 1-8 NUL byte å°‡ entry å¡«å……ç‚º 8 byte çš„å€æ•¸ï¼ŒåŒæ™‚ä¿æŒåç¨± NUL-terminated</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs plain">hex: 0000 0000 0000 0000<br></code></pre></td></tr></table></figure><h3 id="Extensions"><a class="header-anchor" href="#Extensions"></a>Extensions</h3><p>å¿½ç•¥æ­¤éƒ¨ä»½ï¼Œå› æœ¬ç¯„ä¾‹çš„ index ç„¡ extensionsã€‚</p><h3 id="SHA-1-Index-Checksum"><a class="header-anchor" href="#SHA-1-Index-Checksum"></a>SHA-1 Index Checksum</h3><p>åœ¨ index æª”æ¡ˆå…§å®¹çš„æœ€å¾Œ 160-bit æ˜¯ index checksumï¼Œæ˜¯ç”±é€™ 160-bit ä¹‹å‰çš„ index æª”æ¡ˆå…§å®¹é€é SHA-1 è¨ˆç®—çš„</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs plain">hex: 2841 2d21 1a87 5b13 6f52<br>     9772 ca4c 73f3 b3cc 3308<br></code></pre></td></tr></table></figure><p>ç”¨ä¸‹é¢æŒ‡ä»¤é©—è­‰ï¼š</p><ul><li><code>head -c</code>ï¼šåˆ—å°æª”æ¡ˆçš„å‰å¹¾å€‹ byte</li></ul><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs shell"><span class="hljs-meta">$</span><span class="bash"> cat .git/index | head -c92 | sha1sum </span><br>28412d211a875b136f529772ca4c73f3b3cc3308  -<br></code></pre></td></tr></table></figure><p>å¦‚æœ index æå£ï¼Œå°±èƒ½é€éæ­¤ SHA-1 Index Checksum ä¾†ç¢ºèªï¼Œä¸¦æœƒèªªæ˜ index æª”æ¡ˆå·²æå£ï¼š</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs shell"><span class="hljs-meta">$</span><span class="bash"> git status</span><br>error: bad index file sha1 signature<br>fatal: index file corrupt<br></code></pre></td></tr></table></figure><hr class="footnotes-sep"><section class="footnotes"><ol class="footnotes-list"><li id="fn1" class="footnote-item"><p><a href="http://linux.vbird.org/linux_basic/0210filepermission.php#filepermission_perm" target="_blank" rel="noopener">é³¥å“¥çš„ Linux ç§æˆ¿èœ â€“ ç¬¬äº”ç« ã€Linux çš„æª”æ¡ˆæ¬Šé™èˆ‡ç›®éŒ„é…ç½®</a> <a href="#fnref1" class="footnote-backref">â†©ï¸</a></p></li><li id="fn2" class="footnote-item"><p><a href="https://stackoverflow.com/questions/737673/how-to-read-the-mode-field-of-git-ls-trees-output" target="_blank" rel="noopener">file permissions - How to read the mode field of git-ls-treeâ€™s output - Stack Overflow</a> <a href="#fnref2" class="footnote-backref">â†©ï¸</a></p></li><li id="fn3" class="footnote-item"><p><a href="https://github.com/doggy8088/Learn-Git-in-30-days/blob/master/zh-tw/09.md" target="_blank" rel="noopener">30 å¤©ç²¾é€š Git ç‰ˆæœ¬æ§ç®¡ ç¬¬ 09 å¤©ï¼šæ¯”å°æª”æ¡ˆèˆ‡ç‰ˆæœ¬å·®ç•° by ä¿å“¥</a> <a href="#fnref3" class="footnote-backref">â†©ï¸</a></p></li><li id="fn4" class="footnote-item"><p><a href="https://github.com/git/git/blob/master/Documentation/technical/index-format.txt#L63" target="_blank" rel="noopener">git/index-format.txt at master Â· git/git</a> <a href="#fnref4" class="footnote-backref">â†©ï¸</a></p></li></ol></section>]]></content>
    
    <summary type="html">
    
      &lt;p&gt;&lt;img src=&quot;../images/cover/git.jpg&quot; alt=&quot;&quot;&gt;&lt;/p&gt;&lt;p&gt;&lt;code&gt;git add&lt;/code&gt; æœƒå°‡æª”æ¡ˆåŠ å…¥ indexï¼Œç©¶ç«Ÿ index åˆ°åº•å­˜åœ¨å“ªï¼Ÿå…¶å¯¦ï¼Œé€šå¸¸æœƒæ”¾åœ¨ &lt;code&gt;.git/index&lt;/code&gt;ï¼Œæœ¬ç¯‡å°‡æ·±å…¥æ¢è¨æ­¤æª”æ¡ˆå¼å¦‚ä½•ç´€éŒ„æœ‰å“ªäº›æª”æ¡ˆè¢«åŠ å…¥ indexã€‚&lt;/p&gt;
    
    </summary>
    
    
      <category term="Git" scheme="https://titangene.github.io/categories/git/"/>
    
    
      <category term="w3HexSchool" scheme="https://titangene.github.io/tags/w3hexschool/"/>
    
      <category term="æ·±å…¥ Git" scheme="https://titangene.github.io/tags/%E6%B7%B1%E5%85%A5-git/"/>
    
  </entry>
  
  <entry>
    <title>æ·±å…¥ Gitï¼šGit ç‰©ä»¶å„²å­˜ - tree ç‰©ä»¶</title>
    <link href="https://titangene.github.io/article/git-tree-object.html"/>
    <id>https://titangene.github.io/article/git-tree-object.html</id>
    <published>2020-03-01T15:58:39.000Z</published>
    <updated>2020-03-01T15:57:02.000Z</updated>
    
    <content type="html"><![CDATA[<p><img src="../images/cover/git.jpg" alt=""></p><p>æœ¬ç¯‡å°‡æ·±å…¥æ¢è¨ Git å¦‚ä½•é‹ä½œï¼ŒGit æ˜¯å¦‚ä½•å»ºç«‹å’Œå„²å­˜ tree ç‰©ä»¶ã€‚</p><a id="more"></a><p>ä¹‹å‰è¬›åˆ° blob ç‰©ä»¶æ˜¯ç”±æª”æ¡ˆå…§å®¹ä¾†ç”¢ç”Ÿçš„ï¼Œé‚£ Git æ˜¯å¦‚ä½•çŸ¥é“é€™äº›æª”æ¡ˆå…§å®¹æ˜¯åˆ†åˆ¥å­˜åœ¨å“ªå€‹ç›®éŒ„å…§çš„æª”æ¡ˆåç¨±ä¸­ï¼Ÿ</p><p>ç›®éŒ„åç¨±å’Œæª”æ¡ˆåç¨±å°±æ˜¯ç”± tree ç‰©ä»¶ä¾†ç®¡ç†ã€‚ä¸€å€‹ tree ç‰©ä»¶å¯ä»¥ç´€éŒ„åŒ…å«å“ªäº› blob ç‰©ä»¶ (ä¹Ÿå°±æ˜¯æª”æ¡ˆå…§å®¹)ï¼Œä»¥åŠè©² blob ç‰©ä»¶å°æ‡‰çš„æª”æ¡ˆåç¨±ï¼Œä»¥åŠå…¶ä»– tree ç‰©ä»¶å’Œå…¶å°æ‡‰çš„ç›®éŒ„åç¨±ã€‚ä¾‹å¦‚ï¼š</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs shell"><span class="hljs-meta">$</span><span class="bash"> git cat-file -p</span><br></code></pre></td></tr></table></figure><p>Git å„²å­˜å…§å®¹çš„æ–¹å¼é¡ä¼¼ Unix æª”æ¡ˆç³»çµ±ï¼Œæ‰€æœ‰å…§å®¹åœ¨ Git éƒ½å„²å­˜æˆ tree ç‰©ä»¶å’Œ blob ç‰©ä»¶ï¼Œtree ç‰©ä»¶å°æ‡‰æ–¼ Unix directory entries (ç›®éŒ„é …ç›®)ï¼Œè€Œ blob ç‰©ä»¶æ˜¯å°æ‡‰ inode (è¨˜éŒ„æª”æ¡ˆçš„æ¬Šé™èˆ‡ç›¸é—œå±¬æ€§) <sup class="footnote-ref"><a href="#fn1" id="fnref1">[1]</a></sup> æˆ–æª”æ¡ˆå…§å®¹ <sup class="footnote-ref"><a href="#fn2" id="fnref2">[2]</a></sup>ã€‚</p><p>æ¯å€‹ tree ç‰©ä»¶å¯åŒ…å«ä¸€å€‹æˆ–å¤šå€‹ tree entriesï¼Œæ¯å€‹ tree entry éƒ½åŒ…å«ä¸€å€‹æŒ‡å‘ blob ç‰©ä»¶æˆ– subtree çš„ SHA-1 æŒ‡æ¨™ (hash å€¼) ä»¥åŠé—œè¯æ¨¡å¼ (associated mode)ã€ç‰©ä»¶é¡å‹ã€æª”åã€‚ä¾‹å¦‚ï¼š</p><p>å…ˆå»ºç«‹ä¸€å€‹ commitï¼š</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><code class="hljs shell"><span class="hljs-meta">$</span><span class="bash"> git init</span><br>Initialized empty Git repository in /home/titan/project/demo/.git/<br><br><span class="hljs-meta">$</span><span class="bash"> mkdir styles</span><br><span class="hljs-meta">$</span><span class="bash"> touch index.html README.md styles/main.css</span><br><span class="hljs-meta">$</span><span class="bash"> git add .</span><br><span class="hljs-meta">$</span><span class="bash"> tree .git/objects</span><br>.git/objects<br>â”œâ”€â”€ e6<br>â”‚   â””â”€â”€ 9de29bb2d1d6434b8b29ae775ad8c2e48c5391<br>â”œâ”€â”€ info<br>â””â”€â”€ pack<br><br>3 directories, 1 file<br><br><span class="hljs-meta">$</span><span class="bash"> git commit -m <span class="hljs-string">"init"</span>   </span><br>[master (root-commit) 158f5a2] init<br> 3 files changed, 0 insertions(+), 0 deletions(-)<br> create mode 100644 README.md<br> create mode 100644 index.html<br> create mode 100644 styles/main.css<br></code></pre></td></tr></table></figure><p><code>master^{tree}</code> ä»£è¡¨ç”± <code>master</code> åˆ†æ”¯ä¸Šçš„æœ€å¾Œä¸€æ¬¡ commit æ‰€æŒ‡å‘çš„ tree ç‰©ä»¶ï¼š</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><code class="hljs shell"><span class="hljs-meta">$</span><span class="bash"> tree</span><br>.<br>â”œâ”€â”€ index.html<br>â”œâ”€â”€ README.md<br>â””â”€â”€ styles<br>    â””â”€â”€ main.css<br><br>1 directory, 3 files<br><br><span class="hljs-meta">$</span><span class="bash"> git cat-file -p master^&#123;tree&#125;</span><br>100644 blob e69de29bb2d1d6434b8b29ae775ad8c2e48c5391README.md<br>100644 blob e69de29bb2d1d6434b8b29ae775ad8c2e48c5391index.html<br>040000 tree c6d62294a2323c2047b43787d55a44ff8c94f565styles<br></code></pre></td></tr></table></figure><p><code>styles</code> å­ç›®éŒ„æ˜¯æŒ‡å‘å¦ä¸€å€‹åç‚º <code>c6d622</code> çš„ tree ç‰©ä»¶ï¼Œè€Œé€™å€‹ tree ç‰©ä»¶åˆæŒ‡å‘å¦ä¸€å€‹åç‚º <code>e69de2</code> çš„ blob ç‰©ä»¶ï¼š</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs shell"><span class="hljs-meta">$</span><span class="bash"> git cat-file -p c6d622</span><br>100644 blob e69de29bb2d1d6434b8b29ae775ad8c2e48c5391main.css<br></code></pre></td></tr></table></figure><h2 id="å»ºç«‹-index"><a class="header-anchor" href="#å»ºç«‹-index"></a>å»ºç«‹ index</h2><p>åˆå§‹åŒ– Git repoï¼š</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><code class="hljs shell"><span class="hljs-meta">$</span><span class="bash"> git init</span><br>Initialized empty Git repository in /home/titan/project/git/pro-git/.git/<br><span class="hljs-meta">$</span><span class="bash"> tree .git        </span><br>.git<br>â”œâ”€â”€ branches<br>â”œâ”€â”€ config<br>â”œâ”€â”€ description<br>â”œâ”€â”€ HEAD<br>â”œâ”€â”€ hooks<br>â”‚   â””â”€â”€ ...<br>â”œâ”€â”€ info<br>â”‚   â””â”€â”€ exclude<br>â”œâ”€â”€ objects<br>â”‚   â”œâ”€â”€ info<br>â”‚   â””â”€â”€ pack<br>â””â”€â”€ refs<br>    â”œâ”€â”€ heads<br>    â””â”€â”€ tags<br><br>9 directories, 15 files<br></code></pre></td></tr></table></figure><p>å»ºç«‹å°ˆæ¡ˆéœ€è¦çš„æª”æ¡ˆï¼š</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><code class="hljs shell"><span class="hljs-meta">$</span><span class="bash"> mkdir styles</span><br><span class="hljs-meta">$</span><span class="bash"> touch index.html README.md styles/main.css</span><br><span class="hljs-meta">$</span><span class="bash"> tree</span><br>.<br>â”œâ”€â”€ index.html<br>â”œâ”€â”€ README.md<br>â””â”€â”€ styles<br>    â””â”€â”€ main.css<br><br>1 directory, 3 files<br></code></pre></td></tr></table></figure><p>ç¾åœ¨ Git é‚„æœªè¿½è¹¤é€™äº›æª”æ¡ˆï¼š</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><code class="hljs shell"><span class="hljs-meta">$</span><span class="bash"> git status                      </span><br>On branch master<br><br>No commits yet<br><br>Untracked files:<br>  (use "git add &lt;file&gt;..." to include in what will be committed)<br><br>README.md<br>index.html<br>styles/<br><br>nothing added to commit but untracked files present (use "git add" to track)<br></code></pre></td></tr></table></figure><p>å»ºç«‹ blob ç‰©ä»¶ï¼š</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><code class="hljs shell"><span class="hljs-meta">$</span><span class="bash"> git <span class="hljs-built_in">hash</span>-object -w index.html</span><br>9015a7a32ca0681be64471d3ac2f8c1f24c1040d<br><span class="hljs-meta">$</span><span class="bash"> tree .git/objects            </span><br>.git/objects<br>â”œâ”€â”€ 90<br>â”‚   â””â”€â”€ 15a7a32ca0681be64471d3ac2f8c1f24c1040d<br>â”œâ”€â”€ info<br>â””â”€â”€ pack<br><br>3 directories, 1 file<br></code></pre></td></tr></table></figure><p>åœ¨å°‡ commit ä¹‹å‰ï¼ŒGit æœƒæ ¹æ“š staging area (é å­˜å€æˆ–ç¨±æš«å­˜å€) æˆ– index ä¾†å»ºç«‹ tree ç‰©ä»¶ï¼Œæ‰€ä»¥å¿…é ˆåœ¨å»ºç«‹ tree ç‰©ä»¶ä¹‹å‰ï¼Œå…ˆæš«å­˜ç‰©ä»¶ä¾†å»ºç«‹ indexã€‚</p><p>ä½¿ç”¨ <code>update-index</code> åº•å±¤æŒ‡ä»¤ä¾†ç‚ºå–®ä¸€æª”æ¡ˆå»ºç«‹ indexã€‚</p><p>å› ç‚º index ä¹‹å‰æ²’æœ‰è©²æª”æ¡ˆï¼Œç”šè‡³é€£ index éƒ½é‚„æ²’å»ºç«‹ (ä¹Ÿå°±æ˜¯æ²’æœ‰ <code>.git/index</code> æª”æ¡ˆ)ï¼Œæ‰€ä»¥å¿…é ˆåŠ ä¸Š <code>--add</code> é¸é …ã€‚å¦å¤–ï¼Œå› ç‚ºè¦å¢åŠ çš„æª”æ¡ˆé‚„ä¸åœ¨å·¥ä½œç›®éŒ„ä¸­ï¼Œè€Œæ˜¯åœ¨è³‡æ–™åº« (ä¹Ÿå°±æ˜¯ <code>.git/object</code> ç›®éŒ„å…§) ä¸­ï¼Œæ‰€ä»¥éœ€è¦åŠ ä¸Š <code>--cacheinfo</code> é¸é …ï¼Œ<code>--cacheinfo</code> é¸é …å¾Œé¢å¿…é ˆæŒ‡å®šç›¸é—œ modeã€ç‰©ä»¶ SHA-1 å€¼ã€æª”åã€‚</p><div class="info"><p><code>git update-index</code> æŒ‡ä»¤ï¼šå°‡ working tree ä¸­çš„æª”æ¡ˆå…§å®¹è¨»å†Šè‡³ index</p><ul><li><code>--add</code>ï¼š<ul><li>å¦‚æœæŒ‡å®šçš„æª”æ¡ˆä¸åœ¨ index ä¸­ï¼Œå°±æœƒæ–°å¢è©²æª”æ¡ˆè‡³ index</li><li>é è¨­è¡Œç‚º (ä¹Ÿå°±æ˜¯ä¸åŠ ä¸Š <code>--add</code> é¸é …æ™‚) æœƒå¿½ç•¥æ–°æª”æ¡ˆ</li></ul></li><li><code>--cacheinfo &lt;mode&gt; &lt;object&gt; &lt;path&gt;</code> æˆ– <code>--cacheinfo &lt;mode&gt;,&lt;object&gt;,&lt;path&gt;</code>ï¼š<ul><li>å°‡æŒ‡å®šçš„è³‡è¨Šç›´æ¥æ’å…¥ index</li><li>ç”¨æ–¼è¨»å†Šä¸åœ¨ç•¶å‰å·¥ä½œç›®éŒ„ä¸­çš„æª”æ¡ˆã€‚å°æ–¼æœ€å° checkout åˆä½µå¾ˆæœ‰ç”¨</li><li>ç‚ºäº†å‘å¾Œç›¸å®¹ï¼Œé‚„å¯å°‡é€™ä¸‰å€‹åƒæ•¸ä½œç‚ºä¸‰å€‹å–®ç¨çš„åƒæ•¸æä¾›ï¼Œä½†æ˜¯é¼“å‹µæ–°çš„ä½¿ç”¨è€…ä½¿ç”¨å–®ä¸€åƒæ•¸å½¢å¼</li></ul></li></ul></div><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><code class="hljs shell"><span class="hljs-meta">$</span><span class="bash"> git update-index --add --cacheinfo \</span><br>    100644 9015a7a32ca0681be64471d3ac2f8c1f24c1040d index.html<br><br><span class="hljs-meta">$</span><span class="bash"> git status</span><br>On branch master<br><br>No commits yet<br><br>Changes to be committed:<br>  (use "git rm --cached &lt;file&gt;..." to unstage)<br><br>new file:   index.html<br><br>Untracked files:<br>  (use "git add &lt;file&gt;..." to include in what will be committed)<br><br>README.md<br>styles/<br></code></pre></td></tr></table></figure><p>é€™é‚ŠæŒ‡å®šçš„ <code>100644</code> æ˜¯ modeï¼Œä»£è¡¨æ˜¯å€‹æ™®é€šçš„æª”æ¡ˆã€‚é€™é¡ä¼¼ Unix çš„æª”æ¡ˆå±¬æ€§ <sup class="footnote-ref"><a href="#fn3" id="fnref3">[3]</a></sup>ï¼Œç”¨ä¾†è¡¨ç¤ºè©²æª”æ¡ˆçš„é¡å‹ (æª”æ¡ˆã€ç›®éŒ„ã€link) å’Œæ¬Šé™ (å¯è®€ã€å¯å¯«ã€å¯åŸ·è¡Œ)ï¼Œä»¥ä¸‹æ˜¯å¸¸è¦‹çš„ (ç”¨äºŒé€²ä½å’Œå…«é€²ä½è¡¨ç¤º) <sup class="footnote-ref"><a href="#fn4" id="fnref4">[4]</a></sup> <sup class="footnote-ref"><a href="#fn5" id="fnref5">[5]</a></sup>ï¼š</p><ul><li><code>0100000000000000</code> ( <code>040000</code> )ï¼šDirectory</li><li><code>1000000110100100</code> ( <code>100644</code> )ï¼šRegular non-executable file</li><li><code>1000000110110100</code> ( <code>100664</code> )ï¼šRegular non-executable group-writeable file</li><li><code>1000000111101101</code> ( <code>100755</code> )ï¼šRegular executable file</li><li><code>1010000000000000</code> ( <code>120000</code> )ï¼šSymbolic link</li><li><code>1110000000000000</code> ( <code>160000</code> )ï¼šGitlink</li></ul><div class="info"><p>è¨»ï¼š<code>.git/index</code> çš„äºŒé€²ä½è¡¨ç¤ºæ³• <sup class="footnote-ref"><a href="#fn6" id="fnref6">[6]</a></sup></p><ul><li>å‰ 4-bitï¼šç‰©ä»¶ type<ul><li><code>1000</code>ï¼šregular file</li><li><code>1010</code>ï¼šsymbolic link</li><li><code>1110</code>ï¼šgitlink</li></ul></li><li>ä¸­é–“ 3-bitï¼šæ²’æœ‰ä½¿ç”¨</li><li>å¾Œé¢ 9-bitï¼šunix æ¬Šé™<ul><li>regular file åªèƒ½ç”¨ <code>0755</code> å’Œ <code>0644</code></li><li>symbolic link å’Œ gitlink åœ¨æ­¤ field ä¸­çš„å€¼ç‚º <code>0</code></li></ul></li></ul><p>blob ç‰©ä»¶åªå° <code>100644</code>ã€<code>100664</code> å’Œ <code>100755</code> é€™ä¸‰ç¨® mode æœ‰æ•ˆã€‚</p></div><p>æ¥è‘—ä½¿ç”¨ <code>write-tree</code> æŒ‡ä»¤å°‡ index å¯«è‡³ tree ç‰©ä»¶ä¸­ã€‚ä¸éœ€è¦ä½¿ç”¨ <code>-w</code> é¸é …ï¼Œå¦‚æœè©² tree ç‰©ä»¶é‚„ä¸å­˜åœ¨ï¼Œå‰‡å‘¼å« <code>write-tree</code> æœƒæ ¹æ“š index çš„ç‹€æ…‹è‡ªå‹•å»ºç«‹ tree ç‰©ä»¶ï¼š</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><code class="hljs shell"><span class="hljs-meta">$</span><span class="bash"> git write-tree</span><br>2dce93ea08ed9059be0a838c6bcf62b7b5c28907<br><span class="hljs-meta">$</span><span class="bash"> git cat-file -p 2dce93</span><br>100644 blob 9015a7a32ca0681be64471d3ac2f8c1f24c1040dindex.html<br><span class="hljs-meta">$</span><span class="bash"> git cat-file -t 2dce93</span><br>tree<br></code></pre></td></tr></table></figure><p>å¦‚æœä½¿ç”¨ <code>index.html</code> çš„ç¬¬äºŒç‰ˆå’Œä¸€å€‹æ–°æª”æ¡ˆä¾†å»ºç«‹æ–°çš„ tree ç‰©ä»¶ï¼š</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><code class="hljs shell"><span class="hljs-meta">$</span><span class="bash"> <span class="hljs-built_in">echo</span> <span class="hljs-string">'text'</span> &gt;&gt; index.html</span><br><span class="hljs-meta">$</span><span class="bash"> cat index.html </span><br>index<br>text<br><span class="hljs-meta">$</span><span class="bash"> git update-index index.html</span><br><span class="hljs-meta">$</span><span class="bash"> git update-index --add README.md</span><br><span class="hljs-meta">$</span><span class="bash"> git status                           </span><br>On branch master<br><br>No commits yet<br><br>Changes to be committed:<br>  (use "git rm --cached &lt;file&gt;..." to unstage)<br><br>new file:   README.md<br>new file:   index.html<br><br>Untracked files:<br>  (use "git add &lt;file&gt;..." to include in what will be committed)<br><br>styles/<br></code></pre></td></tr></table></figure><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><code class="hljs shell"><span class="hljs-meta">$</span><span class="bash"> tree .git/objects      </span><br>.git/objects<br>â”œâ”€â”€ 2d<br>â”‚   â””â”€â”€ ce93ea08ed9059be0a838c6bcf62b7b5c28907<br>â”œâ”€â”€ 70<br>â”‚   â””â”€â”€ f702d2c1492a9989a64c8e68bedf7c81052898<br>â”œâ”€â”€ 7e<br>â”‚   â””â”€â”€ 59600739c96546163833214c36459e324bad0a<br>â”œâ”€â”€ 90<br>â”‚   â””â”€â”€ 15a7a32ca0681be64471d3ac2f8c1f24c1040d<br>â”œâ”€â”€ info<br>â””â”€â”€ pack<br><br>6 directories, 4 files<br><br><span class="hljs-meta">$</span><span class="bash"> git cat-file -p 70f702          </span><br>index<br>text<br><span class="hljs-meta">$</span><span class="bash"> git cat-file -p 7e5960</span><br><span class="hljs-meta">#</span><span class="bash"> README</span><br></code></pre></td></tr></table></figure><p>å»ºç«‹ tree ç‰©ä»¶ (å°‡ staging area çš„ç‹€æ…‹æˆ– index ç´€éŒ„åˆ°ä¸€å€‹ tree ç‰©ä»¶)ï¼š</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><code class="hljs shell"><span class="hljs-meta">$</span><span class="bash"> git write-tree</span><br>436d33ce00a9bbf0a1ce763b2c36330b6faf309b<br><span class="hljs-meta">$</span><span class="bash"> git cat-file -p 436d33      </span><br>100644 blob 7e59600739c96546163833214c36459e324bad0aREADME.md<br>100644 blob 70f702d2c1492a9989a64c8e68bedf7c81052898index.html<br></code></pre></td></tr></table></figure><hr class="footnotes-sep"><section class="footnotes"><ol class="footnotes-list"><li id="fn1" class="footnote-item"><p><a href="http://linux.vbird.org/linux_basic/0230filesystem.php" target="_blank" rel="noopener">é³¥å“¥çš„ Linux ç§æˆ¿èœ â€“ ç¬¬ä¸ƒç« ã€Linux ç£ç¢Ÿèˆ‡æª”æ¡ˆç³»çµ±ç®¡ç†</a> <a href="#fnref1" class="footnote-backref">â†©ï¸</a></p></li><li id="fn2" class="footnote-item"><p><a href="https://git-scm.com/book/zh-tw/v2/Git-Internals-Git-Objects" target="_blank" rel="noopener">Git - Git Objects</a> <a href="#fnref2" class="footnote-backref">â†©ï¸</a></p></li><li id="fn3" class="footnote-item"><p><a href="http://linux.vbird.org/linux_basic/0210filepermission.php#filepermission_perm" target="_blank" rel="noopener">é³¥å“¥çš„ Linux ç§æˆ¿èœ â€“ ç¬¬äº”ç« ã€Linux çš„æª”æ¡ˆæ¬Šé™èˆ‡ç›®éŒ„é…ç½®</a> <a href="#fnref3" class="footnote-backref">â†©ï¸</a></p></li><li id="fn4" class="footnote-item"><p><a href="https://stackoverflow.com/questions/737673/how-to-read-the-mode-field-of-git-ls-trees-output" target="_blank" rel="noopener">file permissions - How to read the mode field of git-ls-treeâ€™s output - Stack Overflow</a> <a href="#fnref4" class="footnote-backref">â†©ï¸</a></p></li><li id="fn5" class="footnote-item"><p><a href="https://github.com/doggy8088/Learn-Git-in-30-days/blob/master/zh-tw/09.md" target="_blank" rel="noopener">30 å¤©ç²¾é€š Git ç‰ˆæœ¬æ§ç®¡ ç¬¬ 09 å¤©ï¼šæ¯”å°æª”æ¡ˆèˆ‡ç‰ˆæœ¬å·®ç•° by ä¿å“¥</a> <a href="#fnref5" class="footnote-backref">â†©ï¸</a></p></li><li id="fn6" class="footnote-item"><p><a href="https://github.com/git/git/blob/master/Documentation/technical/index-format.txt#L63" target="_blank" rel="noopener">git/index-format.txt at master Â· git/git</a> <a href="#fnref6" class="footnote-backref">â†©ï¸</a></p></li></ol></section>]]></content>
    
    <summary type="html">
    
      &lt;p&gt;&lt;img src=&quot;../images/cover/git.jpg&quot; alt=&quot;&quot;&gt;&lt;/p&gt;&lt;p&gt;æœ¬ç¯‡å°‡æ·±å…¥æ¢è¨ Git å¦‚ä½•é‹ä½œï¼ŒGit æ˜¯å¦‚ä½•å»ºç«‹å’Œå„²å­˜ tree ç‰©ä»¶ã€‚&lt;/p&gt;
    
    </summary>
    
    
      <category term="Git" scheme="https://titangene.github.io/categories/git/"/>
    
    
      <category term="w3HexSchool" scheme="https://titangene.github.io/tags/w3hexschool/"/>
    
      <category term="æ·±å…¥ Git" scheme="https://titangene.github.io/tags/%E6%B7%B1%E5%85%A5-git/"/>
    
  </entry>
  
  <entry>
    <title>è™•ç† Git æ–·è¡Œå­—å…ƒçš„å•é¡Œ</title>
    <link href="https://titangene.github.io/article/git-auto-crlf.html"/>
    <id>https://titangene.github.io/article/git-auto-crlf.html</id>
    <published>2020-02-23T15:42:23.000Z</published>
    <updated>2020-04-26T11:39:05.000Z</updated>
    
    <content type="html"><![CDATA[<p><img src="../images/cover/git.jpg" alt=""></p><p>åœ¨ä½¿ç”¨ Git çš„éç¨‹ä¸­ï¼Œè‹¥åœ¨ä¸åŒä½œæ¥­ç³»çµ±ç·¨è¼¯åŒä¸€å€‹ repo çš„æª”æ¡ˆï¼Œå¯èƒ½å°±æœƒç™¼ç”Ÿæ–·è¡Œå­—å…ƒçš„å•é¡Œã€‚Git åœ¨ config æä¾›äº† <code>core.autocrlf</code> é¸é …ä¸¦ç”¨ <code>.gitAttributes</code> æª”æ¡ˆä¾†è™•ç†æ–·è¡Œå­—å…ƒçš„å•é¡Œã€‚</p><a id="more"></a><p>ä¹‹å‰æˆ‘åœ¨ Windows å»ºç«‹ä¸€å€‹å°ˆæ¡ˆï¼Œæ˜¯ç”¨ä¾†å°ˆé–€æ”¾ç”¨ Markdown æª”æ¡ˆçš„ç­†è¨˜ï¼Œè€Œä¸”æ˜¯ç”¨ Git ä¾†ä½œç‰ˆæœ¬æ§åˆ¶ã€‚ä½†æœ€è¿‘æˆ‘åœ¨é€™å°ç­†é›»å®‰è£å®Œé›™ç³»çµ± (Windows 10 å’Œ Ubuntu 18.04) å¾Œï¼Œæœ‰æ™‚å€™æœƒåœ¨ Ubuntu é–‹ç™¼ä¸¦å°‡éç¨‹å¯«æˆç­†è¨˜ï¼Œæ‰€ä»¥é€™å€‹ç­†è¨˜å°ˆæ¡ˆå°±æœƒéœ€è¦åœ¨ä¸åŒ OS ä¸‹ç·¨è¼¯ã€‚</p><p>ä¹Ÿå› ç‚ºä»¥ä¸Šéœ€æ±‚è®“æˆ‘å¤šå­¸ç¿’åˆ°ä¸åŒç³»çµ±å…¶å¯¦é è¨­ä½¿ç”¨çš„æ–‡å­—æª”æ¡ˆçš„æ–·è¡Œå­—å…ƒæ˜¯ä¸åŒçš„ï¼ŒWindows æ˜¯ä½¿ç”¨ CRLF ( <code>\r\n</code>ï¼Œ<code>0x0D 0x0A</code> )ï¼Œè€Œ Linux å‰‡æ˜¯ä½¿ç”¨ LF å­—å…ƒ ( <code>\n</code>ï¼Œ<code>0x0A</code> )ã€‚ä¹Ÿå› å¦‚æ­¤ï¼ŒWindows ä¸Šçš„æ¯å€‹æª”æ¡ˆçš„æ¯ä¸€è¡Œçµå°¾éƒ½æœƒæ¯” Liunx é‚„è¦å¤šä¸€å€‹å­—å…ƒï¼Œä¹Ÿå°±æ˜¯å¤šäº†å¾ˆå¤š CR ( <code>\r</code> ) å­—å…ƒã€‚</p><div class="info"><p>è¨»ï¼š</p><ul><li>CR æ˜¯ Carriage Return çš„æ„æ€ï¼Œä¹Ÿå°±æ˜¯ Enter å­—å…ƒ</li><li>LF æ˜¯ Line Feed çš„æ„æ€ï¼Œä¹Ÿå°±æ˜¯çœŸæ­£çš„æ›è¡Œå­—å…ƒ</li><li>macOS çš„æ–·è¡Œå­—å…ƒä¹Ÿæ˜¯ LF å­—å…ƒ ( <code>\n</code>ï¼Œ<code>0x0A</code> )</li></ul></div><p>é‚£ç‚ºä½•æœƒæåˆ°æ–·è¡Œå­—å…ƒï¼Ÿå› ç‚ºç•¶æˆ‘åŸ·è¡Œ <code>git status</code> æŒ‡ä»¤å¾Œï¼Œç™¼ç¾ç«Ÿç„¶æª”æ¡ˆæœ‰è¢«ä¿®æ”¹éï¼Œä½†æˆ‘é™¤äº†åˆ‡æ› OS ä¹‹å¤–ï¼Œæ ¹æœ¬æ²’æœ‰ä¿®æ”¹ç­†è¨˜å•Šï¼</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><code class="hljs shell"><span class="hljs-meta">$</span><span class="bash"> git status</span><br>On branch master<br>Your branch is up to date with 'origin/master'.<br><br>Changes not staged for commit:<br>  (use "git add &lt;file&gt;..." to update what will be committed)<br>  (use "git checkout -- &lt;file&gt;..." to discard changes in working directory)<br><br>        modified:   note.md<br><br>no changes added to commit (use "git add" and/or "git commit -a")<br></code></pre></td></tr></table></figure><p>å…¶å¯¦é€™è·Ÿå‰›å‰›æåˆ°çš„æ–·è¡Œå­—å…ƒæœ‰é—œã€‚å¦‚æœç”¨ <code>git diff</code> æŒ‡ä»¤å°±æœƒçœ‹åˆ°ç­†è¨˜å…§çš„æ¯è¡Œæ–‡å­—çš„çµå°¾éƒ½å¤šå‡ºäº† <code>^M</code> é€™å€‹æ±è¥¿ï¼Œè€Œä¸”æœ‰äº›ç·¨è¼¯å™¨ (ä¾‹å¦‚ï¼šVS Code) å¯èƒ½æœƒçœ‹ä¸å‡ºä¾†ï¼š</p><figure class="highlight diff"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><code class="hljs diff">$ git diff note.md<br>diff --git a/note.md b/note.md<br>index e27815a..6b5682e 100644<br><span class="hljs-comment">--- a/note.md</span><br><span class="hljs-comment">+++ b/note.md</span><br><span class="hljs-meta">@@ -1,5 +1,5 @@</span><br><span class="hljs-deletion">-Note</span><br><span class="hljs-deletion">-===</span><br><span class="hljs-deletion">-</span><br><span class="hljs-deletion">-something</span><br><span class="hljs-addition">+Note^M</span><br><span class="hljs-addition">+===^M</span><br><span class="hljs-addition">+^M</span><br><span class="hljs-addition">+something^M</span><br> This is the last line<br>\ No newline at end of file<br></code></pre></td></tr></table></figure><p>å…¶å¯¦ <code>^M</code> æ°å¥½æ˜¯ vim ç”¨ä¾†é¡¯ç¤º <code>0x0D</code> çš„æ–¹å¼ï¼Œè€Œ <code>0x0D</code> å°±æ˜¯å‰›å‰›æåˆ° Windows æª”æ¡ˆå…§çš„æ¯ä¸€è¡Œçµå°¾ï¼Œéƒ½æœƒæ¯” Linux å¤šå‡º CR ( <code>\r</code> ) é€™å€‹å­—å…ƒã€‚æ‰€ä»¥ <code>^M</code> å…¶å¯¦å°±ç­‰åŒæ–¼ CR ( <code>\r</code>ï¼Œ<code>0x0D</code> )ã€‚</p><div class="info"><p>è¨»ï¼š</p><ul><li><code>^M</code> å…¶ä¸­çš„ <code>^</code> ä»£è¡¨ Ctrlï¼Œæ‰€ä»¥ <code>^M</code> ä¹Ÿå°±ä»£è¡¨ <code>Ctrl + M</code> (ä¹Ÿå°±æ˜¯ Enter)</li><li><code>^M</code> é›–ç„¶çœ‹æ˜¯å…©å€‹å­—å…ƒï¼Œä½†åœ¨çµ‚ç«¯æ©Ÿä¸Šå¯¦éš›åªæœ‰ä¸€å€‹å­—å…ƒã€‚åœ¨å¤§éƒ¨åˆ†çš„çµ‚ç«¯æ©Ÿç³»çµ±ä¸­ï¼ŒåŒ…æ‹¬ Windows çš„ cmdã€Linux å’Œ FreeBSD éƒ½å¯ç”¨ Ctrl ä¾†è¡¨ç¤º <code>^</code> å­—å…ƒ (caret)</li><li><code>0x0D</code> æ˜¯ä»¥åå…­é€²ä½è¡¨ç¤ºçš„ 13ï¼Œè€Œ M æ­£å¥½æ˜¯è‹±æ–‡å­—æ¯ä¸­ç¬¬ 13 å€‹å­—æ¯</li></ul></div><p>ä¸éï¼Œå¦‚æœæœ‰å¤šå€‹æª”æ¡ˆçš„æ¯ä¸€è¡Œéƒ½è¦åˆªæ‰ <code>^M</code> å°±æœƒå¾ˆéº»ç…©ï¼Œæ‰€ä»¥ Git æä¾›ä¸€ç¨®è‡ªå‹•è½‰æ›æ–·è¡Œç¬¦è™Ÿçš„åŠŸèƒ½ï¼š<code>core.autocrlf</code>ã€‚</p><p>é‚£ Git çš„è‡ªå‹•è½‰æ›æ–·è¡Œç¬¦è™ŸåŠŸèƒ½åˆ°åº•åšäº†ä»€éº¼ï¼Ÿ</p><ul><li>ç•¶ä½ åŸ·è¡Œ <code>git add</code> å°‡æª”æ¡ˆåŠ å…¥ index æ™‚ï¼ŒGit å¯å°‡ CRLF è‡ªå‹•å‚³æˆ LFã€‚</li><li>ç•¶ä½ åŸ·è¡Œ <code>git checkout</code> å°‡ç¨‹å¼ç¢¼ checkout å‡ºæª”æ¡ˆç³»çµ±æ™‚ï¼ŒGit å¯å°‡ LF è‡ªå‹•è½‰æˆ CRLFã€‚</li></ul><p>å¦‚æœè¦åœ¨å…¨åŸŸè¨­å®šå¯åŸ·è¡Œä¸‹é¢æŒ‡ä»¤ä¾†è¨­å®šï¼š</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs shell"><span class="hljs-meta">$</span><span class="bash"> git config --global core.autocrlf <span class="hljs-literal">true</span></span><br></code></pre></td></tr></table></figure><p>å¦‚æœæ˜¯è¦åœ¨å„åˆ¥çš„ repo è¨­å®šï¼Œå°±éœ€è¦åœ¨ repo çš„æ ¹ç›®éŒ„ä¸‹å»ºç«‹ä¸€å€‹åç‚º <code>.gitattributes</code> çš„æª”æ¡ˆï¼Œç•¶é€™å€‹æª”æ¡ˆè¢« commit è‡³ repo æ™‚ï¼Œå°±æœƒè¦†è“‹ <code>core.autocrlf</code> çš„è¨­å®šï¼Œä»¥ç¢ºä¿ç®¡ç†æ­¤ repo çš„å”ä½œè€…çš„è¨­å®šä¸€è‡´ã€‚ä¸‹é¢æ˜¯ <code>.gitattributes</code> é€™å€‹æª”æ¡ˆçš„ç¯„ä¾‹æ¨¡æ¿ï¼š</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><code class="hljs plain"># Set the default behavior, in case people don&#39;t have core.autocrlf set.<br>* text&#x3D;auto<br><br># Explicitly declare text files you want to always be normalized and converted<br># to native line endings on checkout.<br>*.c text<br>*.h text<br><br># Declare files that will always have CRLF line endings on checkout.<br>*.sln text eol&#x3D;crlf<br><br># Denote all files that are truly binary and should not be modified.<br>*.png binary<br>*.jpg binary<br></code></pre></td></tr></table></figure><p>æ­¤æª”æ¡ˆçš„è¨­å®šæ ¼å¼ï¼š</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs plain">pattern attr1 attr2 ...<br></code></pre></td></tr></table></figure><p><code>pattern</code> å’Œå±¬æ€§çš„ä¸­é–“è¦ä»¥ç©ºæ ¼åˆ†éš”ã€‚ç•¶ <code>pattern</code> åŒ¹é…ç›¸é—œè·¯å¾‘æ™‚ï¼Œå¾Œé¢çš„å±¬æ€§çš„è¨­å®šæœƒæ‡‰ç”¨åœ¨é‚£äº›è·¯å¾‘ã€‚</p><p><code>text</code> é€™å€‹å±¬æ€§æ˜¯ç”¨æ–¼å•Ÿç”¨ä¸¦æ§åˆ¶è¡Œå°¾çš„æ­£è¦åŒ–ã€‚æ­£è¦åŒ–æ–‡å­—æª”å¾Œï¼Œè¡Œå°¾æœƒåœ¨ repo ä¸­è½‰æ›ç‚º LFã€‚å¦‚æœè¦æ§åˆ¶å·¥ä½œç›®éŒ„ä¸­ä½¿ç”¨çš„è¡Œå°¾æ¨£å¼ï¼Œè«‹é‡å°è©²æª”æ¡ˆè¨­å®š <code>eol</code> å±¬æ€§ ( <code>eol</code> å°± end-of-line çš„ç¸®å¯«)ï¼Œä¸¦ä¸”å°æ‰€æœ‰æ–‡å­—æª”è¨­å®š <code>core.eol</code> è®Šæ•¸ã€‚å¦‚æœå°‡ <code>core.autocrlf</code> è¨­ç‚º <code>true</code> æˆ– <code>input</code> æœƒè¦†è“‹ <code>core.eol</code> çš„è¨­å®šã€‚</p><blockquote><p>è©³æƒ…å¯åƒè€ƒ <a href="https://git-scm.com/docs/git-config" target="_blank" rel="noopener">Git - git-config Documentation</a> æ–‡ä»¶ä¸­å°æ–¼ <code>core.eol</code> è¨­å®šçš„å®šç¾©ã€‚</p></blockquote><p><code>text=auto</code>ï¼šè·¯å¾‘è¢«æ¨™è¨˜ç‚ºè‡ªå‹•è½‰æ›è¡Œå°¾ã€‚å¦‚æœ Git ç¢ºå®šè©²å…§å®¹ç‚ºæ–‡å­—ï¼Œé‚£è©²æª”æ¡ˆçš„è¡Œå°¾å°±æœƒåœ¨ checkin æ™‚è½‰æ›æˆ LFã€‚ç•¶ç”¨ CRLF commit æª”æ¡ˆæ™‚ï¼Œå‰‡ä¸æœƒé€²è¡Œè½‰æ›ã€‚</p><p>è³‡æ–™ä¾†æºï¼š</p><ul><li><a href="https://help.github.com/en/articles/configuring-git-to-handle-line-endings" target="_blank" rel="noopener">Configuring Git to handle line endings - GitHub Help</a></li><li><a href="https://blog.miniasp.com/post/2013/09/15/Git-for-Windows-Line-Ending-Conversion-Notes" target="_blank" rel="noopener">Git åœ¨ Windows å¹³å°è™•ç†æ–·è¡Œå­—å…ƒ (CRLF) çš„æ³¨æ„äº‹é … | The Will Will Web</a></li><li><a href="https://zh.wikipedia.org/wiki/ASCII" target="_blank" rel="noopener">ASCII - Wiki</a></li><li><a href="https://stackoverflow.com/questions/5843495/what-does-m-character-mean-in-vim" target="_blank" rel="noopener">unix - What does ^M character mean in Vim? - Stack Overflow</a></li><li><a href="https://git-scm.com/docs/gitattributes" target="_blank" rel="noopener">Git - gitattributes Documentation</a></li><li><a href="https://git-scm.com/book/en/v2/Customizing-Git-Git-Attributes" target="_blank" rel="noopener">Git - Git Attributes</a></li><li><a href="https://git-scm.com/book/en/v2/Customizing-Git-Git-Configuration" target="_blank" rel="noopener">Git - Git Configuration</a></li></ul>]]></content>
    
    <summary type="html">
    
      &lt;p&gt;&lt;img src=&quot;../images/cover/git.jpg&quot; alt=&quot;&quot;&gt;&lt;/p&gt;&lt;p&gt;åœ¨ä½¿ç”¨ Git çš„éç¨‹ä¸­ï¼Œè‹¥åœ¨ä¸åŒä½œæ¥­ç³»çµ±ç·¨è¼¯åŒä¸€å€‹ repo çš„æª”æ¡ˆï¼Œå¯èƒ½å°±æœƒç™¼ç”Ÿæ–·è¡Œå­—å…ƒçš„å•é¡Œã€‚Git åœ¨ config æä¾›äº† &lt;code&gt;core.autocrlf&lt;/code&gt; é¸é …ä¸¦ç”¨ &lt;code&gt;.gitAttributes&lt;/code&gt; æª”æ¡ˆä¾†è™•ç†æ–·è¡Œå­—å…ƒçš„å•é¡Œã€‚&lt;/p&gt;
    
    </summary>
    
    
      <category term="Git" scheme="https://titangene.github.io/categories/git/"/>
    
    
      <category term="w3HexSchool" scheme="https://titangene.github.io/tags/w3hexschool/"/>
    
  </entry>
  
  <entry>
    <title>æ·±å…¥ Gitï¼šGit ç‰©ä»¶å„²å­˜ - blob ç‰©ä»¶</title>
    <link href="https://titangene.github.io/article/git--blob-object.html"/>
    <id>https://titangene.github.io/article/git--blob-object.html</id>
    <published>2020-02-16T15:56:20.000Z</published>
    <updated>2020-03-16T03:20:40.000Z</updated>
    
    <content type="html"><![CDATA[<p><img src="../images/cover/git.jpg" alt=""></p><p>æœ¬ç¯‡å°‡æ·±å…¥æ¢è¨ Git å¦‚ä½•é‹ä½œï¼Œåœ¨åŸ·è¡Œ <code>git add</code> å°‡æª”æ¡ˆåŠ å…¥ index æ™‚ï¼ŒGit æœƒå¦‚ä½•å»ºç«‹å’Œå„²å­˜ blob ç‰©ä»¶ã€‚</p><a id="more"></a><p>Git æ˜¯ä¸€å€‹ content-addressable (æŒ‰å…§å®¹å®šå€ï¼ŒæŒ‰æª”æ¡ˆå…§å®¹å®šä½) çš„æª”æ¡ˆç³»çµ±ï¼Œé€™ä»£è¡¨ Git çš„æ ¸å¿ƒæ˜¯ä¸€å€‹ key-value data store (è³‡æ–™å„²å­˜) <sup class="footnote-ref"><a href="#fn1" id="fnref1">[1]</a></sup>ã€‚æˆ‘å€‘åªè¦æä¾›æª”æ¡ˆå…§å®¹ï¼ŒGit å°±æœƒé€éä¸€äº›æ¼”ç®—æ³•è¨ˆç®—æˆ keyï¼Œæœªä¾†å°±å¯é€éè©² key ä¾†æª¢ç´¢å‡ºå°æ‡‰çš„å…§å®¹ã€‚</p><p>Git æœ‰å››ç¨® type (é¡å‹) çš„ç‰©ä»¶ï¼šblobã€treeã€commit å’Œ tagã€‚</p><p>ä¸‹é¢æœƒä½¿ç”¨ <code>git hash-object</code> é€™å€‹åº•å±¤æŒ‡ä»¤ä¾†ä»‹ç´¹ç‰©ä»¶åç¨±æ˜¯å¦‚ä½•ç”¢ç”Ÿçš„ã€‚</p><h2 id="æ‰‹å‹•å»ºç«‹-blob-ç‰©ä»¶"><a class="header-anchor" href="#æ‰‹å‹•å»ºç«‹-blob-ç‰©ä»¶"></a>æ‰‹å‹•å»ºç«‹ blob ç‰©ä»¶</h2><p>é¦–å…ˆï¼Œå…ˆåŸ·è¡Œ <code>git init</code> åˆå§‹åŒ– repoï¼š</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs shell"><span class="hljs-meta">$</span><span class="bash"> git init</span><br>Initialized empty Git repository in /home/titan/project/git-demo/.git/<br></code></pre></td></tr></table></figure><p>åˆå§‹åŒ–æ–°çš„ repo æ™‚ï¼ŒGit æœƒåœ¨ <code>.git</code> ç›®éŒ„ä¸­åˆå§‹åŒ– <code>objects</code> ç›®éŒ„ï¼Œä¸¦åœ¨è£¡é¢å»ºç«‹ <code>pack</code> å’Œ <code>info</code> å­å±¤çš„ç©ºç›®éŒ„ï¼š</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><code class="hljs shell"><span class="hljs-meta">$</span><span class="bash"> tree .git/objects</span><br>.git/objects<br>â”œâ”€â”€ info<br>â””â”€â”€ pack<br></code></pre></td></tr></table></figure><p>ä½¿ç”¨åº•å±¤æŒ‡ä»¤ <code>hash-object</code> å°‡è³‡æ–™å„²å­˜è‡³ <code>.git</code> ç›®éŒ„ä¸­ï¼Œä¸¦ç²å¾—å°æ‡‰çš„ key (ä¹Ÿå°±æ˜¯ç‰©ä»¶åç¨±ï¼Œæˆ–ç¨± SHA-1 å€¼)ã€‚ä¸‹é¢æ˜¯ <code>hash-object</code> çš„ optionï¼š</p><ul><li><code>-w</code>ï¼š<ul><li>å°‡ç‰©ä»¶å¯«å…¥è‡³ç‰©ä»¶è³‡æ–™åº« (ä¹Ÿå°±æ˜¯ <code>.git/objects</code> ç›®éŒ„å…§)ï¼Œä¸¦è¼¸å‡ºè©²ç‰©ä»¶çš„ key (ä¹Ÿå°±æ˜¯ SHA-1 checksum)</li><li>è‹¥ä¸ç”¨æ­¤ optionï¼Œå°±åªæœƒè¼¸å‡º keyï¼Œä¸æœƒå„²å­˜ç‰©ä»¶</li></ul></li><li><code>--stdin</code>ï¼š<ul><li>å¾ stdin (standard inputï¼Œæ¨™æº–è¼¸å…¥) è®€å–å…§å®¹</li><li>è‹¥ä¸ç”¨æ­¤ optionï¼Œ<code>hash-object</code> æŒ‡ä»¤é è¨­æœƒå¾æª”æ¡ˆä¸­è®€å–ï¼Œæ‰€ä»¥å¿…é ˆåœ¨ <code>hash-object</code> æŒ‡ä»¤ä¹‹å¾ŒåŠ ä¸ŠæŒ‡å®šçš„æª”æ¡ˆè·¯å¾‘<ul><li>ä¾‹å¦‚ï¼š<code>git hash-object README.md</code></li></ul></li></ul></li></ul><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs shell"><span class="hljs-meta">$</span><span class="bash"> <span class="hljs-built_in">echo</span> <span class="hljs-string">'test content'</span> | git <span class="hljs-built_in">hash</span>-object -w --stdin</span><br>d670460b4b4aece5915caf5c68d12f560a9fe3e4<br></code></pre></td></tr></table></figure><p><code>hash-object</code> æŒ‡ä»¤æœƒè¼¸å‡º 40 å€‹å­—å…ƒçš„ checksum hashï¼Œé€™æ˜¯å€‹ SHA-1 hash (å¾Œé¢æœƒä»‹ç´¹ <a href="#SHA-1">SHA-1</a>)ï¼Œæ˜¯ç”±å„²å­˜çš„å…§å®¹å’Œ header è³‡è¨Šæ‰€è¨ˆç®—å‡ºä¾†çš„ checksumã€‚</p><p>åœ¨ Git çš„å„²å­˜æ–¹å¼æ˜¯ä¸€ä»½å…§å®¹å°±å­˜æˆä¸€å€‹æª”æ¡ˆï¼Œéƒ½æ”¾åœ¨ <code>.git/objects</code> ç›®éŒ„å…§ï¼Œå­ç›®éŒ„ç‚º SHA-1 çš„å‰ 2 å€‹å­—å…ƒï¼Œæª”åç‚ºå‰©é¤˜çš„ 38 å€‹å­—å…ƒã€‚</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><code class="hljs shell"><span class="hljs-meta">$</span><span class="bash"> tree .git/objects</span><br>.git/objects<br>â”œâ”€â”€ d6<br>â”‚   â””â”€â”€ 70460b4b4aece5915caf5c68d12f560a9fe3e4<br>â”œâ”€â”€ info<br>â””â”€â”€ pack<br></code></pre></td></tr></table></figure><h2 id="ä½¿ç”¨-cat-file-æŒ‡ä»¤å¯Ÿçœ‹ç‰©ä»¶è³‡è¨Š"><a class="header-anchor" href="#ä½¿ç”¨-cat-file-æŒ‡ä»¤å¯Ÿçœ‹ç‰©ä»¶è³‡è¨Š"></a>ä½¿ç”¨ <code>cat-file</code> æŒ‡ä»¤å¯Ÿçœ‹ç‰©ä»¶è³‡è¨Š</h2><p>ä½¿ç”¨ <code>cat-file</code> æŒ‡ä»¤å–å¾—ç‰©ä»¶çš„å…§å®¹ï¼Œå¯ç”¨æ–¼æª¢æŸ¥ç‰©ä»¶ã€‚ä½¿ç”¨ <code>-p</code> option æ‰¾å‡ºå…§å®¹çš„ type ä¸¦è¼¸å‡ºè©²å…§å®¹ï¼š</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs shell"><span class="hljs-meta">$</span><span class="bash"> git cat-file -p d67046</span><br>test content<br></code></pre></td></tr></table></figure><p>ä½¿ç”¨ <code>-t</code> option å¯ç²å¾—è©²ç‰©ä»¶çš„ typeï¼š</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs shell"><span class="hljs-meta">$</span><span class="bash"> git cat-file -t d67046</span><br>blob<br></code></pre></td></tr></table></figure><p>å‰›å‰›å»ºç«‹çš„ <code>d67046</code> å°±æ˜¯ Git çš„ blob ç‰©ä»¶ã€‚</p><h2 id="è®Šæ›´æª”æ¡ˆå…§å®¹å¾Œå†æ¬¡å»ºç«‹-blob-ç‰©ä»¶"><a class="header-anchor" href="#è®Šæ›´æª”æ¡ˆå…§å®¹å¾Œå†æ¬¡å»ºç«‹-blob-ç‰©ä»¶"></a>è®Šæ›´æª”æ¡ˆå…§å®¹å¾Œå†æ¬¡å»ºç«‹ blob ç‰©ä»¶</h2><p>é‚£å¦‚æœè®Šæ›´æª”æ¡ˆå…§å®¹å¾Œï¼Œå†å»ºç«‹ blob ç‰©ä»¶åˆæœƒå¦‚ä½•ï¼Ÿçœ‹ä¸‹é¢ç¯„ä¾‹ï¼š</p><p>å…ˆå»ºç«‹ä¸€å€‹å…¨æ–°çš„å°ˆæ¡ˆï¼Œä¸¦ä½¿ç”¨ <code>git init</code> åˆå§‹åŒ– Git repoï¼š</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><code class="hljs shell"><span class="hljs-meta">$</span><span class="bash"> mkdir git-demo-2</span><br><span class="hljs-meta">$</span><span class="bash"> <span class="hljs-built_in">cd</span> git-demo-2</span><br><span class="hljs-meta">$</span><span class="bash"> git init</span><br>Initialized empty Git repository in /home/titan/project/git-demo-2/.git/<br></code></pre></td></tr></table></figure><p>æ¥è‘—å»ºç«‹ä¸€å€‹åç‚º <code>test.txt</code> çš„æª”æ¡ˆï¼Œå…§å®¹ç‚º <code>v1</code>ï¼Œä½¿ç”¨ <code>git hash-object</code> å»ºç«‹çš„ blob ç‰©ä»¶ç‚º <code>626799</code>ï¼Œå¾Œä¾†å°‡å…§å®¹ä¿®æ”¹ç‚º <code>v2</code>ï¼Œå†æ¬¡å»ºç«‹çš„ blob ç‰©ä»¶ç‚º <code>8c1384</code>ï¼š</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><code class="hljs shell"><span class="hljs-meta">$</span><span class="bash"> <span class="hljs-built_in">echo</span> <span class="hljs-string">'v1'</span> &gt; test.txt</span><br><span class="hljs-meta">$</span><span class="bash"> git <span class="hljs-built_in">hash</span>-object -w test.txt</span><br>626799f0f85326a8c1fc522db584e86cdfccd51f<br><br><span class="hljs-meta">$</span><span class="bash"> git cat-file -t 626799</span><br>blob<br><br><span class="hljs-meta">$</span><span class="bash"> <span class="hljs-built_in">echo</span> <span class="hljs-string">'v2'</span> &gt; test.txt</span><br><span class="hljs-meta">$</span><span class="bash"> git <span class="hljs-built_in">hash</span>-object -w test.txt</span><br>8c1384d825dbbe41309b7dc18ee7991a9085c46e<br><br><span class="hljs-meta">$</span><span class="bash"> git cat-file -t 8c1384</span><br>blob<br></code></pre></td></tr></table></figure><p>å¯ä»¥çœ‹åˆ°ç•¶æª”æ¡ˆå…§å®¹ä¸åŒæ™‚ï¼Œå°±å¯ä»¥ç”¢ç”Ÿä¸åŒçš„ blob ç‰©ä»¶ï¼š</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><code class="hljs shell"><span class="hljs-meta">$</span><span class="bash"> tree .git/objects</span><br>.git/objects<br>â”œâ”€â”€ 62<br>â”‚   â””â”€â”€ 6799f0f85326a8c1fc522db584e86cdfccd51f<br>â”œâ”€â”€ 8c<br>â”‚   â””â”€â”€ 1384d825dbbe41309b7dc18ee7991a9085c46e<br>â”œâ”€â”€ info<br>â””â”€â”€ pack<br></code></pre></td></tr></table></figure><h2 id="å»ºç«‹å…§å®¹ç›¸åŒï¼Œä½†æª”åä¸åŒçš„æª”æ¡ˆ"><a class="header-anchor" href="#å»ºç«‹å…§å®¹ç›¸åŒï¼Œä½†æª”åä¸åŒçš„æª”æ¡ˆ"></a>å»ºç«‹å…§å®¹ç›¸åŒï¼Œä½†æª”åä¸åŒçš„æª”æ¡ˆ</h2><p>ç•¶ä½ å»ºç«‹æª”æ¡ˆå…§å®¹ç›¸åŒï¼Œä½†æª”åä¸åŒçš„æª”æ¡ˆæ™‚ï¼Œåœ¨ repo å…§ä¹Ÿåªæœƒå­˜ä¸€ä»½ï¼Œå› ç‚ºç‰©ä»¶çš„åç¨±æ˜¯ç”±æª”æ¡ˆå…§å®¹ä¾†æ±ºå®šçš„ï¼Œè€Œä¸æ˜¯ä¾æª”åæ±ºå®šã€‚</p><p>ä¸éï¼Œ<code>git hash-object</code> æŒ‡ä»¤é‚„æ˜¯æœƒé‡æ–°ç”¢ç”ŸåŒä¸€å€‹ blob ç‰©ä»¶ (å› ç‚ºè©²ç‰©ä»¶çš„æª”æ¡ˆæ™‚é–“è¢«æ›´æ–°äº†)ã€‚ç¯„ä¾‹å¦‚ä¸‹ï¼š</p><p>åœ¨å»ºç«‹ <code>other-test.txt</code> æª”æ¡ˆä¹‹å‰ï¼Œ<code>.git/objects/8c/6799f...</code> çš„æª”æ¡ˆæ™‚é–“æ˜¯ <code>23:38</code>ï¼š</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br></pre></td><td class="code"><pre><code class="hljs shell"><span class="hljs-meta">$</span><span class="bash"> tree .git/objects</span><br>.git/objects<br>â”œâ”€â”€ 62<br>â”‚   â””â”€â”€ 6799f0f85326a8c1fc522db584e86cdfccd51f<br>â”œâ”€â”€ 8c<br>â”‚   â””â”€â”€ 1384d825dbbe41309b7dc18ee7991a9085c46e<br>â”œâ”€â”€ info<br>â””â”€â”€ pack<br><br><span class="hljs-meta">$</span><span class="bash"> ls -lR .git/objects</span><br>.git/objects:<br>ç¸½è¨ˆ 16<br>drwxr-xr-x 2 titan titan 4096  2æœˆ 16 23:39 62<br>drwxr-xr-x 2 titan titan 4096  2æœˆ 16 23:40 8c<br>drwxr-xr-x 2 titan titan 4096  2æœˆ 16 23:39 info<br>drwxr-xr-x 2 titan titan 4096  2æœˆ 16 23:39 pack<br><br>.git/objects/62:<br>ç¸½è¨ˆ 4<br>-r--r--r-- 1 titan titan 18  2æœˆ 16 23:38 6799f0f85326a8c1fc522db584e86cdfccd51f<br><br>.git/objects/8c:<br>ç¸½è¨ˆ 4<br>-r--r--r-- 1 titan titan 18  2æœˆ 16 23:39 1384d825dbbe41309b7dc18ee7991a9085c46e<br><br>...<br></code></pre></td></tr></table></figure><p>åœ¨å»ºç«‹ <code>other-test.txt</code> æª”æ¡ˆä¹‹å¾Œï¼Œ<code>.git/objects/8c/6799f...</code> çš„æª”æ¡ˆæ™‚é–“è®Šæˆ <code>23:40</code>ï¼š</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br></pre></td><td class="code"><pre><code class="hljs shell"><span class="hljs-meta">$</span><span class="bash"> <span class="hljs-built_in">echo</span> <span class="hljs-string">'v2'</span> &gt; other-test.txt</span><br><span class="hljs-meta">$</span><span class="bash"> git <span class="hljs-built_in">hash</span>-object -w other-test.txt</span><br>8c1384d825dbbe41309b7dc18ee7991a9085c46e<br><br><span class="hljs-meta">$</span><span class="bash"> tree .git/objects</span><br>.git/objects<br>â”œâ”€â”€ 62<br>â”‚   â””â”€â”€ 6799f0f85326a8c1fc522db584e86cdfccd51f<br>â”œâ”€â”€ 8c<br>â”‚   â””â”€â”€ 1384d825dbbe41309b7dc18ee7991a9085c46e<br>â”œâ”€â”€ info<br>â””â”€â”€ pack<br><br><span class="hljs-meta">$</span><span class="bash"> ls -lR .git/objects</span><br>.git/objects:<br>ç¸½è¨ˆ 16<br>drwxr-xr-x 2 titan titan 4096  2æœˆ 16 23:39 62<br>drwxr-xr-x 2 titan titan 4096  2æœˆ 16 23:40 8c<br>drwxr-xr-x 2 titan titan 4096  2æœˆ 16 23:39 info<br>drwxr-xr-x 2 titan titan 4096  2æœˆ 16 23:39 pack<br><br>.git/objects/62:<br>ç¸½è¨ˆ 4<br>-r--r--r-- 1 titan titan 18  2æœˆ 16 23:40 6799f0f85326a8c1fc522db584e86cdfccd51f<br><br>.git/objects/8c:<br>ç¸½è¨ˆ 4<br>-r--r--r-- 1 titan titan 18  2æœˆ 16 23:39 1384d825dbbe41309b7dc18ee7991a9085c46e<br><br>...<br></code></pre></td></tr></table></figure><h2 id="hash-object-è¨ˆç®—ç‰©ä»¶åç¨±çš„æ¼”ç®—æ³•"><a class="header-anchor" href="#hash-object-è¨ˆç®—ç‰©ä»¶åç¨±çš„æ¼”ç®—æ³•"></a><code>hash-object</code> è¨ˆç®—ç‰©ä»¶åç¨±çš„æ¼”ç®—æ³•</h2><p>é‚£ Git çš„ç‰©ä»¶åç¨± (ä¹Ÿå°±æ˜¯ SHA-1) æ˜¯å¦‚ä½•è¨ˆç®—çš„ï¼Ÿä¸åŒçš„ Git ç‰©ä»¶æœ‰ä¸åŒçš„è¨ˆç®—æ–¹å¼ï¼Œé€™é‚Šå…ˆèªªæ˜ blob ç‰©ä»¶çš„éƒ¨ä»½ã€‚</p><p>Git ç‰©ä»¶éƒ½æ˜¯ä½¿ç”¨ <a href="https://www.zlib.net/" target="_blank" rel="noopener">zlib</a> å£“ç¸®ï¼Œç‰©ä»¶åç¨±çš„ SHA-1 hash å€¼å°±æ˜¯ header åŠ ä¸Šæª”æ¡ˆå…§å®¹ï¼Œæ¼”ç®—æ³•å¦‚ä¸‹ <sup class="footnote-ref"><a href="#fn2" id="fnref2">[2]</a></sup>ï¼š</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs plain">&lt;type&gt; &lt;content_length&gt;\0&lt;content&gt;<br></code></pre></td></tr></table></figure><p>å‰é¢çš„ <code>&lt;type&gt; &lt;content_length&gt;\0</code> ä»£è¡¨ headerï¼Œè€Œ <code>&lt;content&gt;</code> ä»£è¡¨æª”æ¡ˆå…§å®¹ã€‚ä¸‹é¢èˆ‰å€‹ä¾‹å­ï¼š</p><p>å»ºç«‹åç‚º <code>hello.txt</code> çš„æª”æ¡ˆï¼Œæª”æ¡ˆå…§å®¹ç‚º <code>hello</code>ï¼š</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs shell"><span class="hljs-meta">$</span><span class="bash"> <span class="hljs-built_in">echo</span> <span class="hljs-string">"hello"</span> &gt; hello.txt</span><br></code></pre></td></tr></table></figure><p>ä½¿ç”¨ <code>cat</code> æŒ‡ä»¤ä¸¦åŠ ä¸Š <code>-A</code> é¸é …å¯Ÿçœ‹æª”æ¡ˆå…§å®¹ï¼š</p><ul><li><code>-A</code>ï¼šç›¸ç•¶æ–¼ <code>-vET</code> æ•´åˆé¸é …</li><li><code>-E</code>ï¼šå°‡çµå°¾çš„æ–·è¡Œå­—å…ƒä»¥ <code>$</code> é¡¯ç¤º</li><li><code>-T</code>ï¼šå°‡ TAB å­—å…ƒä»¥ <code>^I</code> é¡¯ç¤º</li><li><code>-v</code>ï¼šé™¤äº†æ›è¡ŒåŠ TAB å­—å…ƒå¤–ï¼Œä½¿ç”¨ <code>^</code> åŠ <code>M-</code> è¡¨ç¤ºæ³•é¡¯ç¤ºå­—å…ƒ (åˆ—å‡ºä¸€äº›çœ‹ä¸å‡ºä¾†çš„ç‰¹æ®Šå­—å…ƒ)</li></ul><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs shell"><span class="hljs-meta">$</span><span class="bash"> cat -A hello.txt</span><br><span class="hljs-meta">hello%</span><br></code></pre></td></tr></table></figure><p>æª”æ¡ˆå…§å®¹çš„çµå°¾ <code>%</code> ä»£è¡¨ LF (line Feedï¼Œ<code>\n</code> )ï¼Œæˆ‘æ˜¯åœ¨ Linux å»ºç«‹ <code>hello.txt</code> æ­¤æª”æ¡ˆçš„ï¼Œè€Œ Linux çš„æ›è¡Œå­—å…ƒæ˜¯ä½¿ç”¨ LF å­—å…ƒï¼Œæ‰€ä»¥åœ¨æ¯ä¸€è¡Œçš„çµå°¾æ‰æœƒå¤šäº† LF é€™å€‹å­—å…ƒã€‚</p><p>æ‰€ä»¥ä¾ç…§ä¸Šé¢å»ºç«‹ç‰©ä»¶åç¨±çš„æ¼”ç®—æ³•å°±æœƒåƒé€™æ¨£ï¼Œä¸‹é¢åˆ†åˆ¥ä»£è¡¨ï¼š</p><ul><li><code>blob</code>ï¼šè¦å»ºç«‹çš„ç‰©ä»¶æ˜¯ blob ç‰©ä»¶</li><li><code>6</code>ï¼šæª”æ¡ˆå…§å®¹é•·åº¦</li><li><code>\0</code>ï¼šNull çµæŸå­—å…ƒ</li><li><code>hello\n</code>ï¼šæª”æ¡ˆå…§å®¹</li></ul><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs shell">blob 6\0hello\n<br></code></pre></td></tr></table></figure><p>æ‰€ä»¥å¦‚æœä½¿ç”¨ä»¥ä¸‹æŒ‡ä»¤å°±èƒ½ç®—å‡ºæ­¤ blob ç‰©ä»¶çš„ SHA-1 hash å€¼ï¼š</p><ul><li><code>echo</code> çš„ <code>-n</code> é¸é …ï¼šä¸è¼¸å‡ºçµå°¾çš„æ›è¡Œå­—å…ƒ (trailing newline)</li><li><code>sha1sum</code>ï¼šè¨ˆç®— SHA-1 å€¼</li></ul><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs shell"><span class="hljs-meta">$</span><span class="bash"> <span class="hljs-built_in">echo</span> -n <span class="hljs-string">"blob 6\0hello\n"</span> | sha1sum </span><br>ce013625030ba8dba906f756967f9e9ca394464a<br></code></pre></td></tr></table></figure><h2 id="å¯¦ä½œ-Git-ç‰©ä»¶åç¨±æ¼”ç®—æ³•"><a class="header-anchor" href="#å¯¦ä½œ-Git-ç‰©ä»¶åç¨±æ¼”ç®—æ³•"></a>å¯¦ä½œ Git ç‰©ä»¶åç¨±æ¼”ç®—æ³•</h2><p>å¦‚æœç”¨ Python å¯¦ä½œæ­¤æ¼”ç®—æ³•ï¼š</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><code class="hljs python"><span class="hljs-keyword">import</span> os<br><span class="hljs-keyword">import</span> zlib<br><span class="hljs-keyword">from</span> hashlib <span class="hljs-keyword">import</span> sha1<br><br>content = <span class="hljs-string">'hello\n'</span><br>header = <span class="hljs-string">'blob &#123;&#125;\0'</span>.format(len(content))<br>store = header + content<br>hash = sha1(store.encode(<span class="hljs-string">'utf-8'</span>)).hexdigest()<br><br>zlib_content = zlib.compress(store.encode(<span class="hljs-string">'utf-8'</span>))<br><br>path = <span class="hljs-string">'.git/objects/&#123;&#125;/&#123;&#125;'</span>.format(hash[:<span class="hljs-number">2</span>], hash[<span class="hljs-number">2</span>:])<br>os.makedirs(os.path.dirname(path), exist_ok=<span class="hljs-literal">True</span>)<br><span class="hljs-keyword">with</span> open(path, <span class="hljs-string">'wb+'</span>) <span class="hljs-keyword">as</span> file:<br>    file.write(zlib_content)<br></code></pre></td></tr></table></figure><p>é©—è­‰å‰›å‰›å¯¦ä½œçš„ blob ç‰©ä»¶æ˜¯å¦æœ‰æ•ˆï¼š</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs shell"><span class="hljs-meta">$</span><span class="bash"> git cat-file -p ce0136</span><br>hello<br></code></pre></td></tr></table></figure><p>çœ‹åˆ°æª”æ¡ˆå…§å®¹å°±ä»£è¡¨å¯¦ä½œæˆåŠŸ ğŸ˜ƒã€‚</p><h2 id="é©—è­‰-Git-ç‰©ä»¶"><a class="header-anchor" href="#é©—è­‰-Git-ç‰©ä»¶"></a>é©—è­‰ Git ç‰©ä»¶</h2><p>Git ç‰©ä»¶åç¨±å¯ä»¥ç”¨ä¾†æª¢æŸ¥ç‰©ä»¶çš„ type å’Œç‰©ä»¶å…§å®¹æ˜¯å¦ä¸€è‡´ï¼Œå¦‚æœ Git ç‰©ä»¶çš„æª”æ¡ˆåç¨±æˆ–å…§å®¹è¢«æƒ¡æ„ä¿®æ”¹ï¼Œå°±å¯ä»¥å¾ˆå®¹æ˜“çš„ç™¼ç¾æœ‰éŒ¯èª¤ã€‚</p><p>Git å¯ç”¨ <code>git fsck</code> æŒ‡ä»¤ä¾†å¦‚ä½•é©—è­‰è³‡æ–™åº«ä¸­çš„ç‰©ä»¶æ˜¯å¦æœ‰æ•ˆï¼Œå¦‚æœé©—è­‰æˆåŠŸå°±æœƒåƒé€™æ¨£è¼¸å‡ºï¼š</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs shell"><span class="hljs-meta">$</span><span class="bash"> git fsck</span><br>Checking object directories: 100% (256/256), done.<br></code></pre></td></tr></table></figure><p>å‡è¨­æˆ‘æƒ¡æ„ä¿®æ”¹å‰›å‰›å»ºç«‹çš„ blob ç‰©ä»¶ï¼Œä½¿ç”¨ <code>git fsck</code> æŒ‡ä»¤å°±æœƒå‘ŠçŸ¥è©²ç‰©ä»¶æœ‰å•é¡Œï¼š</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><code class="hljs shell"><span class="hljs-meta">$</span><span class="bash"> vim .git/objects/ce/013625030ba8dba906f756967f9e9ca394464a</span><br><span class="hljs-meta">$</span><span class="bash"> git fsck                                                  </span><br>error: inflate: data stream error (incorrect header check)<br>error: unable to unpack header of .git/objects/ce/013625030ba8dba906f756967f9e9ca394464a<br>error: ce013625030ba8dba906f756967f9e9ca394464a: object corrupt or missing: .git/objects/ce/013625030ba8dba906f756967f9e9ca394464a<br>Checking object directories: 100% (256/256), done.<br>missing blob ce013625030ba8dba906f756967f9e9ca394464a<br></code></pre></td></tr></table></figure><h2 id="SHA-1"><a class="header-anchor" href="#SHA-1"></a>SHA-1</h2><p>SHA-1 (Secure Hash Algorithm 1) æ˜¯ä¸€ç¨® hash (é›œæ¹Š) æ¼”ç®—æ³•ï¼Œå®ƒå¯ç”Ÿæˆ 160 bit (20 byte) çš„ hash å€¼ï¼Œé€šå¸¸ä»¥ 40 å€‹åå…­é€²ä½ (hex) çš„æ•¸å­—è¡¨ç¤º <sup class="footnote-ref"><a href="#fn3" id="fnref3">[3]</a></sup>ã€‚</p><p>hash æ¼”ç®—æ³•çš„ç‰¹æ€§ <sup class="footnote-ref"><a href="#fn4" id="fnref4">[4]</a></sup>ï¼š</p><ul><li>çµ¦å®šè¨Šæ¯å¾ˆå®¹æ˜“è¨ˆç®—å‡º hash å€¼</li><li>å¾ˆé›£ç”¨å·²çŸ¥çš„ hash å€¼æ¨ç®—å‡ºåŸå§‹è¨Šæ¯</li><li>å¾ˆé›£ä¿®æ”¹è¨Šæ¯è€Œ hash å€¼ä¸è®Š</li><li>å¾ˆé›£è®“ä¸åŒçš„è¨Šæ¯æœ‰ç›¸åŒçš„ hash å€¼</li></ul><p>æ‰€ä»¥ Git æœ‰ä»¥ä¸‹å„ªé» <sup class="footnote-ref"><a href="#fn5" id="fnref5">[5]</a></sup>ï¼š</p><ul><li>Git å¯é€éæ¯”è¼ƒç‰©ä»¶åç¨± (ä¹Ÿå°±æ˜¯ SHA-1) ä¾†å¿«é€Ÿç¢ºå®šå…©å€‹ç‰©ä»¶æ˜¯å¦ç›¸åŒ</li><li>åœ¨æ¯å€‹ repo ä¸­éƒ½ä»¥ç›¸åŒçš„æ–¹å¼è¨ˆç®—ç‰©ä»¶åç¨±ï¼Œæ‰€ä»¥å„²å­˜åœ¨ä¸åŒ repo å…§çš„ç›¸åŒå…§å®¹æœƒä»¥ç›¸åŒçš„åç¨±ä¾†å„²å­˜</li><li>å¯ä»¥é€éæª¢æŸ¥ç‰©ä»¶åç¨±ä¾†ç¢ºèªå…¶å…§å®¹çš„ SHA-1 hash å€¼ï¼ŒGit å¯åœ¨è®€å–ç‰©ä»¶æ™‚æª¢æŸ¥éŒ¯èª¤</li></ul><hr class="footnotes-sep"><section class="footnotes"><ol class="footnotes-list"><li id="fn1" class="footnote-item"><p><a href="https://git-scm.com/book/zh-tw/v2/Git-Internals-Git-Objects" target="_blank" rel="noopener">Git Internals - Git Objects | Pro Git 2/e</a> <a href="#fnref1" class="footnote-backref">â†©ï¸</a></p></li><li id="fn2" class="footnote-item"><p><a href="https://git-scm.com/docs/user-manual#object-details" target="_blank" rel="noopener">Git - user-manual Documentation</a> <a href="#fnref2" class="footnote-backref">â†©ï¸</a></p></li><li id="fn3" class="footnote-item"><p><a href="https://zh.wikipedia.org/wiki/SHA-1" target="_blank" rel="noopener">SHA-1 - Wiki</a> <a href="#fnref3" class="footnote-backref">â†©ï¸</a></p></li><li id="fn4" class="footnote-item"><p><a href="https://zh.wikipedia.org/wiki/%E5%AF%86%E7%A2%BC%E9%9B%9C%E6%B9%8A%E5%87%BD%E6%95%B8" target="_blank" rel="noopener">å¯†ç¢¼é›œæ¹Šå‡½å¼ - Wiki</a> <a href="#fnref4" class="footnote-backref">â†©ï¸</a></p></li><li id="fn5" class="footnote-item"><p><a href="https://git-scm.com/docs/user-manual#the-object-database" target="_blank" rel="noopener">Git - user-manual Documentation</a> <a href="#fnref5" class="footnote-backref">â†©ï¸</a></p></li></ol></section>]]></content>
    
    <summary type="html">
    
      &lt;p&gt;&lt;img src=&quot;../images/cover/git.jpg&quot; alt=&quot;&quot;&gt;&lt;/p&gt;&lt;p&gt;æœ¬ç¯‡å°‡æ·±å…¥æ¢è¨ Git å¦‚ä½•é‹ä½œï¼Œåœ¨åŸ·è¡Œ &lt;code&gt;git add&lt;/code&gt; å°‡æª”æ¡ˆåŠ å…¥ index æ™‚ï¼ŒGit æœƒå¦‚ä½•å»ºç«‹å’Œå„²å­˜ blob ç‰©ä»¶ã€‚&lt;/p&gt;
    
    </summary>
    
    
      <category term="Git" scheme="https://titangene.github.io/categories/git/"/>
    
    
      <category term="w3HexSchool" scheme="https://titangene.github.io/tags/w3hexschool/"/>
    
      <category term="æ·±å…¥ Git" scheme="https://titangene.github.io/tags/%E6%B7%B1%E5%85%A5-git/"/>
    
  </entry>
  
  <entry>
    <title>Git - åˆªé™¤é ç«¯åˆ†æ”¯ (ä»¥ GitHubã€GitLab ç‚ºä¾‹)</title>
    <link href="https://titangene.github.io/article/git-delete-remote-branch.html"/>
    <id>https://titangene.github.io/article/git-delete-remote-branch.html</id>
    <published>2020-02-09T15:45:52.000Z</published>
    <updated>2020-02-09T15:43:21.000Z</updated>
    
    <content type="html"><![CDATA[<p><img src="../images/cover/git.jpg" alt=""></p><p>æœ¬ç¯‡å°‡ä»‹ç´¹å¦‚ä½•åˆªé™¤ GitHub æˆ– GitLab çš„é ç«¯åˆ†æ”¯ï¼Œä»¥åŠé€éæ˜¯å¦å¯åˆªé™¤é ç«¯ <code>master</code> åˆ†æ”¯ (é›–ç„¶é€šå¸¸ä¸æœƒé€™æ¨£åš)ï¼Œä»¥äº†è§£å¦‚ä½•åœ¨ GitHub å’Œ GitLab ä¿®æ”¹é è¨­åˆ†æ”¯ã€‚</p><a id="more"></a><p>å¦‚æœæŸåˆ†æ”¯å·²åˆä½µè‡³é ç«¯çš„ <code>master</code> åˆ†æ”¯ (æˆ–ç©©å®šç‰ˆçš„åˆ†æ”¯) æ™‚ï¼Œå¯åœ¨ <code>git push</code> æŒ‡ä»¤åŠ ä¸Š <code>--delete</code> æˆ– <code>-d</code> é¸é …ä¾†åˆªé™¤é ç«¯åˆ†æ”¯ <sup class="footnote-ref"><a href="#fn1" id="fnref1">[1]</a></sup>ï¼š</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs shell"><span class="hljs-meta">$</span><span class="bash"> git push &lt;remote&gt; --delete &lt;remoteBranchName&gt;</span><br><span class="hljs-meta">$</span><span class="bash"> git push &lt;remote&gt; -d &lt;remoteBranchName&gt;</span><br></code></pre></td></tr></table></figure><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs shell"><span class="hljs-meta">$</span><span class="bash"> git push origin --delete dev</span><br>To github.com:titangene/git-demo.git<br> - [deleted]         dev<br></code></pre></td></tr></table></figure><p>æˆ–æ˜¯åœ¨ ref (åœ¨é€™é‚ŠæŒ‡çš„æ˜¯ä¸‹é¢æŒ‡ä»¤ä¸­çš„ <code>&lt;remoteBranchName&gt;</code> ) ä¹‹å‰åŠ ä¸Šå†’è™Ÿ ( <code>:</code> ) ä¹Ÿå¯ä»¥åˆªé™¤é ç«¯åˆ†æ”¯ï¼š</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs shell"><span class="hljs-meta">$</span><span class="bash"> git push &lt;remote&gt; :&lt;remoteBranchName&gt;</span><br></code></pre></td></tr></table></figure><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs shell"><span class="hljs-meta">$</span><span class="bash"> git push origin :dev</span><br>To github.com:titangene/git-demo.git<br> - [deleted]         dev<br></code></pre></td></tr></table></figure><p>æ­¤æŒ‡ä»¤æ˜¯åœ¨ <code>origin</code> repo ä¸­æ‰¾åˆ°èˆ‡ <code>dev</code> match çš„ ref (ä¾‹å¦‚ï¼š<code>refs/heads/dev</code> )ï¼Œç„¶å¾Œå°‡è©²é ç«¯åˆ†æ”¯åˆªé™¤ <sup class="footnote-ref"><a href="#fn2" id="fnref2">[2]</a></sup>ï¼Œå…¶å¯¦å°±æ˜¯åˆªé™¤é ç«¯ server ä¸Šçš„åˆ†æ”¯æŒ‡æ¨™ã€‚Git Server æœƒå°‡è³‡æ–™ä¿ç•™ä¸€æ®µæ™‚é–“ï¼Œç›´åˆ°åŸ·è¡Œ GC (garbage collectionï¼Œåƒåœ¾å›æ”¶) ç‚ºæ­¢ã€‚æ‰€ä»¥å¦‚æœèª¤åˆªäº†åˆ†æ”¯éƒ½å¾ˆå®¹æ˜“æ¢å¾©ã€‚</p><h2 id="åˆªé™¤å¤šå€‹é ç«¯åˆ†æ”¯"><a class="header-anchor" href="#åˆªé™¤å¤šå€‹é ç«¯åˆ†æ”¯"></a>åˆªé™¤å¤šå€‹é ç«¯åˆ†æ”¯</h2><p>å¦‚æœè¦åˆªé™¤å¤šå€‹é ç«¯åˆ†æ”¯ï¼Œå¯ç›´æ¥å°‡å¤šå€‹æŒ‡å®šé ç«¯åˆ†æ”¯åŠ åœ¨å¾Œé¢ï¼š</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><code class="hljs shell"><span class="hljs-meta">$</span><span class="bash"> git push origin -d feature master</span><br>To github.com:titangene/git-demo.git<br> - [deleted]         feature<br> - [deleted]         master<br></code></pre></td></tr></table></figure><h2 id="ç„¡æ³•åˆªé™¤çš„é ç«¯åˆ†æ”¯"><a class="header-anchor" href="#ç„¡æ³•åˆªé™¤çš„é ç«¯åˆ†æ”¯"></a>ç„¡æ³•åˆªé™¤çš„é ç«¯åˆ†æ”¯</h2><p>é€šå¸¸é è¨­æœƒç„¡æ³•åˆªé™¤é ç«¯çš„ <code>master</code> åˆ†æ”¯ï¼Œå› ç‚ºé ç«¯é€šå¸¸æœƒå°‡ <code>master</code> åˆ†æ”¯ä½œç‚ºé è¨­åˆ†æ”¯ï¼š</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><code class="hljs shell"><span class="hljs-meta">$</span><span class="bash"> git push origin -d master</span><br>To github.com:titangene/git-demo.git<br> ! [remote rejected] master (refusing to delete the current branch: refs/heads/master)<br>error: failed to push some refs to 'git@github.com:titangene/git-demo.git'<br></code></pre></td></tr></table></figure><p>é è¨­æ˜¯ç„¡æ³•åˆªé™¤ GitHub å’Œ GitLab é ç«¯ repo çš„ <code>master</code> åˆ†æ”¯ã€‚</p><h2 id="åˆªé™¤-GitHub-çš„é ç«¯åˆ†æ”¯"><a class="header-anchor" href="#åˆªé™¤-GitHub-çš„é ç«¯åˆ†æ”¯"></a>åˆªé™¤ GitHub çš„é ç«¯åˆ†æ”¯</h2><p>å¦‚æœè¦åˆªé™¤ GitHub é ç«¯ repo çš„ <code>master</code> åˆ†æ”¯ï¼Œåªè¦å°‡è©² repo çš„é è¨­åˆ†æ”¯æ”¹æˆå…¶ä»–åˆ†æ”¯ï¼Œé€™æ¨£å°±å¯ä»¥åˆªæ‰äº†ã€‚</p><p>åœ¨ repo çš„ã€ŒSettings &gt; Branches &gt; Default branch &gt; å°‡é è¨­åˆ†æ”¯æ”¹ç‚ºå…¶ä»–åˆ†æ”¯ &gt; Updateã€ï¼Œå¦‚åœ–ï¼š</p><p><img src="../images/git-delete-remote-branch/2020-02-09-23-30-43.png" alt=""></p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs shell"><span class="hljs-meta">$</span><span class="bash"> git push origin -d master</span><br>To github.com:titangene/git-demo.git<br> - [deleted]         master<br></code></pre></td></tr></table></figure><h2 id="åˆªé™¤-GitLab-çš„é ç«¯åˆ†æ”¯"><a class="header-anchor" href="#åˆªé™¤-GitLab-çš„é ç«¯åˆ†æ”¯"></a>åˆªé™¤ GitLab çš„é ç«¯åˆ†æ”¯</h2><p>åˆªé™¤ GitLab é ç«¯ repo çš„ <code>master</code> åˆ†æ”¯æ™‚ï¼Œæœƒç™¼ç”Ÿä»¥ä¸‹éŒ¯èª¤ï¼ŒéŒ¯èª¤è¨Šæ¯ä¸­ç›´æ¥èªªæ˜ <code>master</code> åˆ†æ”¯æ˜¯é è¨­åˆ†æ”¯ï¼Œæ‰€ä»¥ç„¡æ³•åˆªé™¤ï¼š</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><code class="hljs shell"><span class="hljs-meta">$</span><span class="bash"> git push gitlab -d master</span><br>remote: GitLab: The default branch of a project cannot be deleted.<br>To gitlab.com:titangene/git-demo.git<br> ! [remote rejected] master (pre-receive hook declined)<br>error: failed to push some refs to 'git@gitlab.com:titangene/git-demo.git'<br></code></pre></td></tr></table></figure><p>åœ¨ repo çš„ã€ŒSettings &gt; Repository &gt; Default branch &gt; å°‡é è¨­åˆ†æ”¯æ”¹ç‚ºå…¶ä»–åˆ†æ”¯ &gt; Save changesã€ï¼Œå¦‚åœ–ï¼š</p><p><img src="../images/git-delete-remote-branch/2020-02-09-23-28-47.png" alt=""></p><p>é‚£å¦‚æœå°‡é è¨­åˆ†æ”¯æ”¹æˆå…¶ä»–åˆ†æ”¯å‘¢ï¼Ÿçµæœé‚„æ˜¯ä¸èƒ½åˆªé™¤ï¼š</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><code class="hljs shell"><span class="hljs-meta">$</span><span class="bash"> git push gitlab -d master</span><br>remote: GitLab: You can only delete protected branches using the web interface.<br>To gitlab.com:titangene/git-demo.git<br> ! [remote rejected] master (pre-receive hook declined)<br>error: failed to push some refs to 'git@gitlab.com:titangene/git-demo.git'<br></code></pre></td></tr></table></figure><p>å…¶å¯¦åŸå› ä¹Ÿå¯«åœ¨éŒ¯èª¤è¨Šæ¯å…§ï¼Œå› ç‚º GitLab æœƒé è¨­å°‡ repo çš„ <code>master</code> åˆ†æ”¯è¨­ç‚ºå—ä¿è­·çš„åˆ†æ”¯ (protected branch) <sup class="footnote-ref"><a href="#fn3" id="fnref3">[3]</a></sup> <sup class="footnote-ref"><a href="#fn4" id="fnref4">[4]</a></sup>ï¼Œæ‰€ä»¥æ‰ä¸èƒ½åˆªé™¤ã€‚</p><p>å¦‚æœè¦åˆªé™¤å—ä¿è­·çš„åˆ†æ”¯ï¼Œé‚£å°±è®“ä»–ä¸å—ä¿è­·å°±å¯ä»¥å›‰ XDã€‚</p><p>åœ¨ repo çš„ã€ŒSettings &gt; Repository &gt; Protected Branches &gt; Unprotect <code>master</code> åˆ†æ”¯ã€ï¼Œå¦‚åœ–ï¼š</p><p><img src="../images/git-delete-remote-branch/2020-02-09-23-30-32.png" alt=""></p><p>è¨­å®šå¾Œå°±å¯ä»¥åˆªé™¤ <code>master</code> åˆ†æ”¯äº†ï¼š</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs shell"><span class="hljs-meta">$</span><span class="bash"> git push gitlab -d master</span><br>To gitlab.com:titangene/git-demo.git<br> - [deleted]         master<br></code></pre></td></tr></table></figure><h2 id="å¯Ÿçœ‹æ˜¯å¦åˆªé™¤é ç«¯åˆ†æ”¯"><a class="header-anchor" href="#å¯Ÿçœ‹æ˜¯å¦åˆªé™¤é ç«¯åˆ†æ”¯"></a>å¯Ÿçœ‹æ˜¯å¦åˆªé™¤é ç«¯åˆ†æ”¯</h2><p>å¦å¤–ï¼Œå¦‚æœç”¨ <code>git branch -vv</code> å¯ä»¥çœ‹åˆ°è©²åˆ†æ”¯å·²è¢«åˆªé™¤ (è¼¸å‡ºè¨Šæ¯ä¸­çš„ <code>gone</code> )ï¼š</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs shell"><span class="hljs-meta">$</span><span class="bash"> git branch -vv</span><br>* dev    44fdaf6 [origin/dev: gone] feat: d<br>  master 49135dc [origin/master] feat: b<br></code></pre></td></tr></table></figure><hr class="footnotes-sep"><section class="footnotes"><ol class="footnotes-list"><li id="fn1" class="footnote-item"><p><a href="https://git-scm.com/book/en/v2/Git-Branching-Remote-Branches#_delete_branches" target="_blank" rel="noopener">Git - Remote Branches | Pro Git, 2/e</a> <a href="#fnref1" class="footnote-backref">â†©ï¸</a></p></li><li id="fn2" class="footnote-item"><p><a href="https://git-scm.com/docs/git-push#Documentation/git-push.txt-codegitpushoriginexperimentalcode" target="_blank" rel="noopener">Git - git-push Documentation</a> <a href="#fnref2" class="footnote-backref">â†©ï¸</a></p></li><li id="fn3" class="footnote-item"><p><a href="https://gitlab.com/help/user/permissions" target="_blank" rel="noopener">Permissions Â· User Â· Help Â· GitLab</a> <a href="#fnref3" class="footnote-backref">â†©ï¸</a></p></li><li id="fn4" class="footnote-item"><p><a href="https://gitlab.com/help/user/project/protected_branches" target="_blank" rel="noopener">Protected branches Â· Project Â· User Â· Help Â· GitLab</a> <a href="#fnref4" class="footnote-backref">â†©ï¸</a></p></li></ol></section>]]></content>
    
    <summary type="html">
    
      &lt;p&gt;&lt;img src=&quot;../images/cover/git.jpg&quot; alt=&quot;&quot;&gt;&lt;/p&gt;&lt;p&gt;æœ¬ç¯‡å°‡ä»‹ç´¹å¦‚ä½•åˆªé™¤ GitHub æˆ– GitLab çš„é ç«¯åˆ†æ”¯ï¼Œä»¥åŠé€éæ˜¯å¦å¯åˆªé™¤é ç«¯ &lt;code&gt;master&lt;/code&gt; åˆ†æ”¯ (é›–ç„¶é€šå¸¸ä¸æœƒé€™æ¨£åš)ï¼Œä»¥äº†è§£å¦‚ä½•åœ¨ GitHub å’Œ GitLab ä¿®æ”¹é è¨­åˆ†æ”¯ã€‚&lt;/p&gt;
    
    </summary>
    
    
      <category term="Git" scheme="https://titangene.github.io/categories/git/"/>
    
    
      <category term="w3HexSchool" scheme="https://titangene.github.io/tags/w3hexschool/"/>
    
      <category term="GitHub" scheme="https://titangene.github.io/tags/github/"/>
    
      <category term="GitLab" scheme="https://titangene.github.io/tags/gitlab/"/>
    
      <category term="Branch" scheme="https://titangene.github.io/tags/branch/"/>
    
      <category term="Remote" scheme="https://titangene.github.io/tags/remote/"/>
    
  </entry>
  
  <entry>
    <title>é‡æ–°èªè­˜ CSS - ç¸½çµ &amp; ç³»åˆ—ç›®éŒ„</title>
    <link href="https://titangene.github.io/article/css-series-catalog.html"/>
    <id>https://titangene.github.io/article/css-series-catalog.html</id>
    <published>2019-10-15T13:20:42.000Z</published>
    <updated>2020-02-09T16:03:34.000Z</updated>
    
    <content type="html"><![CDATA[<p><img src="../images/cover/css.png" alt=""></p><p>çµ‚æ–¼ä¾†åˆ°éµäººè³½çš„æœ€å¾Œä¸€å¤©ï¼æœ¬ç¯‡å°ã€Œé‡æ–°èªè­˜ CSSã€æ­¤ç³»åˆ—åšå€‹ç¸½çµï¼Œä¸¦æ•´ç†æ­¤ç³»åˆ—ä¸­çš„æ¯ç¯‡æ–‡ç« å¯å°æ‡‰åˆ°å“ªäº› CSS Specã€‚</p><a id="more"></a><h2 id="å‰è¨€"><a class="header-anchor" href="#å‰è¨€"></a>å‰è¨€</h2><blockquote><p>ã€Œé‡æ–°èªè­˜ CSSã€é€™å€‹ç³»åˆ—åç¨±çš„ç”±ä¾†å°±å¦‚å…¶åï¼Œæˆ‘æƒ³è¦é‡æ–°èªè­˜å®ƒã€‚é›–ç„¶ä»¥å‰å°±æœ‰å­¸é CSSï¼Œä½†é€™æ¬¡æƒ³å¾ CSS Spec ä¸­å­¸åˆ°æœ€åŸå§‹çš„å®šç¾©å’Œå…§å®¹ï¼Œæ›´åŠ äº†è§£ CSS çš„åŸç†ï¼Œè®“æˆ‘åœ¨åˆ‡ç‰ˆçš„æ™‚å€™å¯ä»¥æ›´åŠ ç¢ºå®šè‡ªå·±åœ¨åšä»€éº¼ï¼Œæˆ‘è¸©åˆ°çš„é›·åªæ˜¯å› ç‚ºæˆ‘ä¸å¤ äº†è§£å®ƒæ‰æœƒç‚¸é–‹ã€‚</p><p>åœ¨é€™ 30 å¤©çš„å…§å®¹ä¸­ï¼Œæœƒå°‡ Spec å…§çœ‹åˆ°çš„è³‡æ–™æ•´ç†æˆé€™å€‹ç³»åˆ—ï¼Œä¹Ÿå¸Œæœ›æ­£åœ¨å­¸ CSS çš„å„ä½å¯ä»¥æ›´åŠ äº†è§£å®ƒã€‚å¦å¤–æˆ‘ä¹ŸæœƒåŒæ™‚å°‡æ–‡ç« ç™¼è‡³æˆ‘çš„ Blogï¼Œå¦‚æœæƒ³ç›´æ¥çœ‹æ–‡å…§çš„ç¨‹å¼ç¢¼ Demo ç•«é¢ï¼Œå¯ä»¥åˆ°æˆ‘çš„ Blog ä¾†çœ‹ ğŸ˜ƒã€‚</p><p>æœ¬æ–‡åŒæ­¥ç™¼è¡¨æ–¼ iT é‚¦å¹«å¿™ï¼š<a href="https://ithelp.ithome.com.tw/articles/10228321" target="_blank" rel="noopener">é‡æ–°èªè­˜ CSS - ç¸½çµ &amp; ç³»åˆ—ç›®éŒ„</a></p><p>ã€Œé‡æ–°èªè­˜ CSSã€ç³»åˆ—æ–‡ç« ç™¼æ–‡æ–¼ï¼š</p><ul><li><a href="https://ithelp.ithome.com.tw/users/20117586/ironman/2617" target="_blank" rel="noopener">iT é‚¦å¹«å¿™</a></li><li><a href="https://titangene.github.io/tags/it-%E9%90%B5%E4%BA%BA%E8%B3%BD/">Titangene Blog</a></li></ul></blockquote><p>å°±å¦‚å‰è¨€æ‰€èªªï¼Œç¶“éé€™æ¬¡çš„éµäººè³½ï¼Œé€éçœ‹ spec ä¾†å­¸ç¿’ CSS çš„çœŸå¯¦é¢è²Œï¼Œè€Œä¸æ˜¯æœªç¶“é©—è­‰æˆ–è‡ªè¡Œè…¦è£œä¾†åˆ‡ç‰ˆï¼Œè®“è‡ªå·±èƒ½çœŸæ­£çš„ã€Œé‡æ–°èªè­˜ CSSã€ã€‚</p><p>é€™å€‹æœˆä»¥ä¾†éƒ½æ˜¯ç•¶å¤©çœ‹ spec ç•¶å¤©å¯«æ–‡ï¼Œæ‰€ä»¥æ¯å¤©éƒ½æœ‰éµäººè³½çš„æ„Ÿè¦ºã€‚èµ·åˆçœ‹ spec çš„æ™‚å€™ï¼Œè…¦ä¸­å¤©æ—‹åœ°è½‰ï¼Œå¥½å¤šä»¥å‰é‡ä¾†æ²’çœ‹éçš„å°ˆæœ‰åè©ï¼Œé‚„å¥½æœ‰<a href="https://ithelp.ithome.com.tw/2020ironman/signup/team/78" target="_blank" rel="noopener">å¥½æƒ³å·¥ä½œå®¤</a>çš„å¤¥ä¼´è·Ÿæˆ‘ä¸€èµ·è¨è«– specï¼ŒåŠ å¿«æˆ‘ç†è§£çš„é€Ÿåº¦ã€‚</p><p>æˆ‘ç¬¬ä¸€æ¬¡å¯«é€£çºŒé€™éº¼å¤šå¤©çš„æ–‡ç« ï¼Œé›–ç„¶æ²’æœ‰åƒä»¥å‰åƒåŠ éµäººè³½çš„å‰è¼©å€‘èªªçš„é‚£æ¨£ï¼šã€Œåˆ°å¾Œé¢å¹¾å¤©å°±æœƒä¸çŸ¥é“è¦å¯«ä»€éº¼äº†ã€ï¼Œæ‰€ä»¥å»ºè­°æˆ‘åœ¨é–‹è³½å‰ï¼Œäº‹å…ˆè¦åŠƒå¥½é€™ 30 å¤©è¦å¯«ä»€éº¼ã€‚ä¸éæˆ‘ä¹Ÿæ²’æœ‰ç‰¹åˆ¥äº‹å…ˆå®‰æ’å¯«æ–‡çš„é †åºï¼Œå› ç‚ºæˆ‘åŸæœ¬å°±é è¨ˆæœƒæŒ‰ç…§ <a href="https://www.w3.org/TR/CSS22/Overview.html#minitoc" target="_blank" rel="noopener">CSS 2.2</a> çš„å¤§ç¶±ä¾†å•ƒ specï¼Œæ‰€ä»¥æˆ‘ä¸æ€•æ²’æœ‰ä¸»é¡Œå¯ä»¥å¯«ï¼Œåªæ€•è‡ªå·±ç†è§£çš„é€Ÿåº¦è·Ÿä¸ä¸Šç™¼æ–‡çš„é€Ÿåº¦ QQï¼Œé‚„å¥½æœ€å¾ŒæˆåŠŸå®Œè³½ ğŸ˜„ã€‚</p><p>é›–ç„¶éµäººå®Œè³½äº†ï¼Œä½†é€™åªæ˜¯æˆ‘å­¸ç¿’æ—…ç¨‹çš„é–‹å§‹ï¼Œå¦‚æœæœªä¾†é‚„æœ‰å¾ŒçºŒçš„å­¸ç¿’ç´€éŒ„ï¼Œéƒ½æœƒåˆ†äº«åœ¨æˆ‘çš„ blogã€Œ<a href="https://titangene.github.io/">Titangene Blog</a>ã€ï¼Œæ­¡è¿å¤§å®¶ä¾†å…‰é¡§ã€‚å¦‚æœæƒ³çŸ¥é“æˆ‘ä¹‹å‰å¯«éå“ªäº›å°ˆæ¡ˆï¼Œå¯ä»¥åˆ°æˆ‘çš„ <a href="https://github.com/titangene" target="_blank" rel="noopener">Githubï¼štitangene</a> çœ‹çœ‹ã€‚</p><p>ä¸‹é¢æ˜¯æˆ‘å°æ–¼é€™æ¬¡ç³»åˆ—ã€Œé‡æ–°èªè­˜ CSSã€çš„æ•´ç†ï¼Œè®“å¤§å®¶å¯ä»¥æ›´å¿«çŸ¥é“å“ªäº›å…§å®¹å¯ä»¥å°æ‡‰åˆ°å“ªäº› specã€‚</p><h2 id="ç°¡ä»‹"><a class="header-anchor" href="#ç°¡ä»‹"></a>ç°¡ä»‹</h2><p>ç°¡ä»‹ CSSï¼Œä¸¦èªªæ˜å¦‚ä½•åœ¨ HTML ä½¿ç”¨ CSSã€‚ç³»åˆ—å¦‚ä¸‹ï¼š</p><ul><li><a href="https://titangene.github.io/article/css-introduction.html">é‡æ–°èªè­˜ CSS - CSS ç°¡ä»‹</a></li></ul><blockquote><p>å°æ‡‰ spec çš„ä»¥ä¸‹å¹¾ç¯‡ï¼š</p><ul><li><a href="https://www.w3.org/TR/html401/present/styles.html" target="_blank" rel="noopener">HTM 4.01 - 14. Style Sheets</a></li><li><a href="https://html.spec.whatwg.org/multipage/semantics.html#the-link-element" target="_blank" rel="noopener">HTML Living Standard - 4.2.4. The link element</a></li></ul></blockquote><h2 id="Selector"><a class="header-anchor" href="#Selector"></a>Selector</h2><p>Selector æ˜¯å¯« CSS æ™‚ï¼Œå¿…é ˆæŒæ¡çš„æ±è¥¿ï¼Œç†Ÿæ‚‰ selector æ‰æœƒé¸åˆ°æ­£ç¢ºçš„å…ƒç´ ã€‚è€Œæ­¤ç³»åˆ—æ˜¯ä¾æ“š <a href="https://www.w3.org/TR/selectors-3/" target="_blank" rel="noopener">Selectors Level 3</a> çš„åˆ†é¡ä¾†å„åˆ¥ä»‹ç´¹çš„ã€‚ç³»åˆ—å¦‚ä¸‹ï¼š</p><ul><li><a href="https://titangene.github.io/article/css-selector-1.html">é‡æ–°èªè­˜ CSS - Simple Selector &amp; Groups of selector</a></li><li><a href="https://titangene.github.io/article/css-attribute-selector.html">é‡æ–°èªè­˜ CSS - Attribute selector (å±¬æ€§é¸æ“‡å™¨)</a></li><li><a href="https://titangene.github.io/article/css-selector-pseudo-class-1.html">é‡æ–°èªè­˜ CSS - Pseudo-class (å½é¡) (1)</a></li><li><a href="https://titangene.github.io/article/css-selector-pseudo-class-2.html">é‡æ–°èªè­˜ CSS - Pseudo-class (å½é¡) (2)</a></li><li><a href="https://titangene.github.io/article/css-selector-pseudo-element.html">é‡æ–°èªè­˜ CSS - Pseudo-element (å½å…ƒç´ )</a></li></ul><blockquote><p>å°æ‡‰ spec çš„ä»¥ä¸‹å¹¾ç¯‡ï¼š</p><ul><li><a href="https://www.w3.org/TR/CSS22/selector.html" target="_blank" rel="noopener">CSS 2.2 - 5. Selectors</a></li><li><a href="https://www.w3.org/TR/CSS22/generate.html#before-after-content" target="_blank" rel="noopener">CSS 2.2 - 12.1. The :before and :after pseudo-elements</a></li><li><a href="https://www.w3.org/TR/selectors-3/" target="_blank" rel="noopener">Selectors Level 3</a></li><li><a href="https://www.w3.org/TR/selectors-4/" target="_blank" rel="noopener">Selectors Level 4</a></li><li><a href="https://www.w3.org/TR/css-pseudo-4/" target="_blank" rel="noopener">CSS Pseudo-Elements Module Level 4</a></li></ul></blockquote><h2 id="Values-Units"><a class="header-anchor" href="#Values-Units"></a>Values &amp; Units</h2><p>åœ¨é–‹å§‹èªè­˜ CSS å±¬æ€§ä¹‹å‰ï¼Œå¯ä»¥å…ˆèªè­˜å±¬æ€§æœ‰å“ªäº›å€¼å’Œå–®ä½å¯ä»¥ä½¿ç”¨ã€‚ç³»åˆ—å¦‚ä¸‹ï¼š</p><ul><li><a href="https://titangene.github.io/article/css-attribute-value.html">é‡æ–°èªè­˜ CSS - CSS å±¬æ€§å€¼</a></li></ul><blockquote><p>å°æ‡‰ spec çš„ä»¥ä¸‹å¹¾ç¯‡ï¼š</p><ul><li><a href="https://www.w3.org/TR/CSS22/syndata.html#values" target="_blank" rel="noopener">CSS 2.2 - 4.3. Values</a></li><li><a href="https://www.w3.org/TR/css-values-3/" target="_blank" rel="noopener">CSS Values and Units Module Level 3</a></li><li><a href="https://www.w3.org/TR/css-values-4/" target="_blank" rel="noopener">CSS Values and Units Module Level 4</a></li></ul></blockquote><h2 id="Assigning-property-values-Cascading-and-Inheritance"><a class="header-anchor" href="#Assigning-property-values-Cascading-and-Inheritance"></a>Assigning property values, Cascading, and Inheritance</h2><p>äº†è§£åœ¨ CSS ä¸­ï¼Œç¹¼æ‰¿å’Œæ¬Šé‡é€™äº›é‡è¦çš„è§€å¿µä¹‹å¾Œï¼Œæ¥è‘—å°±å¯ä»¥æ›´æ·±å…¥çš„äº†è§£ CSS æ˜¯å¦‚ä½•è™•ç†å±¬æ€§å€¼çš„ã€‚ç³»åˆ—å¦‚ä¸‹ï¼š</p><ul><li><a href="https://titangene.github.io/article/css-inheritance.html">é‡æ–°èªè­˜ CSS - Inheritance (ç¹¼æ‰¿)</a></li><li><a href="https://titangene.github.io/article/css-cascading-and-specificity.html">é‡æ–°èªè­˜ CSS - Cascading &amp; Specificity</a></li><li><a href="https://titangene.github.io/article/css-value-processing.html">é‡æ–°èªè­˜ CSS - CSS å¦‚ä½•è™•ç†å±¬æ€§å€¼</a></li></ul><blockquote><p>å°æ‡‰ spec çš„ä»¥ä¸‹å¹¾ç¯‡ï¼š</p><ul><li><a href="https://www.w3.org/TR/CSS22/cascade.html" target="_blank" rel="noopener">CSS 2.2 - 6. Assigning property values, Cascading, and Inheritance</a></li><li><a href="https://www.w3.org/TR/css-cascade-3/" target="_blank" rel="noopener">CSS Cascading and Inheritance Level 3</a></li><li><a href="https://www.w3.org/TR/css-cascade-4/" target="_blank" rel="noopener">CSS Cascading and Inheritance Level 4</a></li></ul></blockquote><h2 id="media-import-rules"><a class="header-anchor" href="#media-import-rules"></a><code>@media</code> &amp; <code>@import</code> rules</h2><p>å¼•å…¥å…¶ä»– CSS æª”æ¡ˆæˆ–åœ¨å¤šå€‹è£ç½®ã€è§£æåº¦ã€è¢å¹•å°ºå¯¸ä¸‹è¦æ‡‰ç”¨å“ªå€‹ style sheet (æ¨£å¼è¡¨)ï¼Œå°±éœ€è¦äº†è§£å¦‚ä½•ä½¿ç”¨ <code>@media</code> å’Œ <code>@import</code>ã€‚ç³»åˆ—å¦‚ä¸‹ï¼š</p><ul><li><a href="https://titangene.github.io/article/css-media-type.html">é‡æ–°èªè­˜ CSS - Media type</a></li><li><a href="https://titangene.github.io/article/css-media-query.html">é‡æ–°èªè­˜ CSS - Media query</a></li><li><a href="https://titangene.github.io/article/css-import.html">é‡æ–°èªè­˜ CSS - @import</a></li></ul><blockquote><p>å°æ‡‰ spec çš„ä»¥ä¸‹å¹¾ç¯‡ï¼š</p><ul><li><a href="https://www.w3.org/TR/CSS22/media.html" target="_blank" rel="noopener">CSS 2.2 - 7. Media types</a></li><li><a href="https://www.w3.org/TR/css3-mediaqueries/" target="_blank" rel="noopener">Media Queries</a></li><li><a href="https://www.w3.org/TR/mediaqueries/" target="_blank" rel="noopener">Media Queries Level 4</a></li><li><a href="https://www.w3.org/TR/CSS22/cascade.html#at-import" target="_blank" rel="noopener">CSS 2.2 - 6.3 The @import rule</a></li></ul></blockquote><h2 id="Box-model"><a class="header-anchor" href="#Box-model"></a>Box model</h2><p>Box model æ˜¯ç”¨ä¾†æè¿° document tree ä¸­çš„æ¯å€‹å…ƒç´ æ‰€ç”¢ç”Ÿçš„çŸ©å½¢æ¡†ã€‚ç³»åˆ—å¦‚ä¸‹ï¼š</p><ul><li><a href="https://titangene.github.io/article/css-box-model.html">é‡æ–°èªè­˜ CSS - Box model (å‰å‚³)</a></li><li><a href="https://titangene.github.io/article/css-border.html">é‡æ–°èªè­˜ CSS - Box modelï¼šborder</a></li><li><a href="https://titangene.github.io/article/css-box-sizing.html">é‡æ–°èªè­˜ CSS - box-sizing</a></li><li><a href="https://titangene.github.io/article/css-collapsing-margins.html">é‡æ–°èªè­˜ CSS - Collapsing margins</a></li></ul><blockquote><p>å°æ‡‰ spec çš„ä»¥ä¸‹å¹¾ç¯‡ï¼š</p><ul><li><a href="https://www.w3.org/TR/CSS22/box.html" target="_blank" rel="noopener">CSS 2.2 - 8. Box model</a></li><li><a href="https://www.w3.org/TR/css-box-3/" target="_blank" rel="noopener">CSS Box Model Module Level 3</a></li><li><a href="https://www.w3.org/TR/css-ui-3/#box-model" target="_blank" rel="noopener">CSS Basic User Interface Module Level 3 (CSS3 UI) - 3. Box Model addition</a></li><li><a href="https://www.w3.org/TR/css-backgrounds-3/#borders" target="_blank" rel="noopener">CSS Backgrounds and Borders Module Level 3 - 4. Borders</a></li></ul></blockquote><h2 id="Visual-formatting-model"><a class="header-anchor" href="#Visual-formatting-model"></a>Visual formatting model</h2><p>Visual formatting model æ˜¯ç”¨ä¾†æè¿° UA æœƒå¦‚ä½•è™•ç†è¦–è¦ºåª’é«” (visual media) çš„ document treeï¼Œdocument tree ä¸­çš„æ¯å€‹å…ƒç´ éƒ½æœƒæ ¹æ“š box model ä¾†ç”¢ç”Ÿ 0 å€‹æˆ–å¤šå€‹ boxã€‚è€Œé€™äº› box çš„ä½ç½®å’Œå¤§å°éƒ½æ˜¯ç›¸å°æ–¼ç¨±ç‚º containing block çš„çŸ©å½¢æ¡†çš„é‚Šç·£è¨ˆç®—çš„ã€‚ç³»åˆ—å¦‚ä¸‹ï¼š</p><ul><li><a href="https://titangene.github.io/article/css-containing-block.html">é‡æ–°èªè­˜ CSS - Containing block</a></li></ul><blockquote><p>å°æ‡‰ spec çš„ä»¥ä¸‹å¹¾ç¯‡ï¼š</p><ul><li><a href="https://www.w3.org/TR/CSS22/visuren.html#containing-block" target="_blank" rel="noopener">CSS 2.2 - 9.1.2. Containing blocks</a></li><li><a href="https://www.w3.org/TR/CSS22/visudet.html#containing-block-details" target="_blank" rel="noopener">CSS 2.2 - 10.1. Definition of â€œcontaining blockâ€</a></li></ul></blockquote><h3 id="Controlling-box-generation"><a class="header-anchor" href="#Controlling-box-generation"></a>Controlling box generation</h3><p>å…ƒç´ ç”¢ç”Ÿçš„ box çš„ typeï¼Œå¯ä»¥ä½¿ç”¨ <code>display</code> å±¬æ€§ä¾†æŒ‡å®šï¼Œè€Œ box çš„ type æœƒå½±éŸ¿ box åœ¨ visual formatting model ä¸­çš„è¡Œç‚ºã€‚ç³»åˆ—å¦‚ä¸‹ï¼š</p><ul><li><a href="https://titangene.github.io/article/css-box-generation-block-box.html">é‡æ–°èªè­˜ CSS - Visual formatting modelï¼šBox generation (block)</a></li><li><a href="https://titangene.github.io/article/css-box-generation-inline-box.html">é‡æ–°èªè­˜ CSS - Visual formatting modelï¼šBox generation (inline)</a></li><li><a href="https://titangene.github.io/article/css-display.html">é‡æ–°èªè­˜ CSS - display</a></li></ul><blockquote><p>å°æ‡‰ spec çš„ä»¥ä¸‹å¹¾ç¯‡ï¼š</p><ul><li><a href="https://www.w3.org/TR/CSS22/visuren.html#box-gen" target="_blank" rel="noopener">CSS 2.2 - 9.2. Controlling box generation</a></li><li><a href="https://www.w3.org/TR/css-display-3/" target="_blank" rel="noopener">CSS Display Module Level 3</a></li></ul></blockquote><h3 id="Formatting-context-Normal-flow"><a class="header-anchor" href="#Formatting-context-Normal-flow"></a>Formatting context &amp; Normal flow</h3><p>Normal flow ä¸­çš„ box å±¬æ–¼æŸç¨® formatting contextï¼Œå¯æ˜¯ block æˆ– inlineï¼Œä¸åŒçš„ box æœƒåƒèˆ‡ä¸åŒçš„ formatting contextã€‚block-level box æœƒåƒèˆ‡ BFCï¼Œinline-level box æœƒåƒèˆ‡ IFCã€‚ç³»åˆ—å¦‚ä¸‹ï¼š</p><ul><li><a href="https://titangene.github.io/article/css-formatting-context.html">é‡æ–°èªè­˜ CSS - formatting context &amp; independent formatting context</a></li><li><a href="https://titangene.github.io/article/css-bfc.html">é‡æ–°èªè­˜ CSS - Block formatting context (BFC)</a></li><li><a href="https://titangene.github.io/article/css-ifc.html">é‡æ–°èªè­˜ CSS - Inline formatting context (IFC)</a></li></ul><blockquote><p>å°æ‡‰ spec çš„ä»¥ä¸‹å¹¾ç¯‡ï¼š</p><ul><li><a href="https://www.w3.org/TR/CSS22/visuren.html#block-formatting" target="_blank" rel="noopener">CSS 2.2 - 9.4.1. Block formatting contexts</a></li><li><a href="https://www.w3.org/TR/CSS22/visuren.html#inline-formatting" target="_blank" rel="noopener">CSS 2.2 - 9.4.2. Inline formatting contexts</a></li><li><a href="https://www.w3.org/TR/css-display-3/" target="_blank" rel="noopener">CSS Display Module Level 3</a></li><li><a href="https://www.w3.org/TR/css-inline-3/" target="_blank" rel="noopener">CSS Inline Layout Module Level 3</a></li></ul></blockquote><h3 id="Positioning-schemes"><a class="header-anchor" href="#Positioning-schemes"></a>Positioning schemes</h3><p>åœ¨ CSS 2.2 ä¸­ï¼Œ<code>position</code> å’Œ <code>float</code> å±¬æ€§é€™äº›å®šä½æ–¹æ¡ˆéƒ½å¯ä»¥å° box é€²è¡Œä½ˆå±€ã€‚ç³»åˆ—å¦‚ä¸‹ï¼š</p><ul><li><a href="https://titangene.github.io/article/css-position.html">é‡æ–°èªè­˜ CSS - position</a></li><li><a href="https://titangene.github.io/article/css-float.html">é‡æ–°èªè­˜ CSS - float</a></li></ul><blockquote><p>å°æ‡‰ spec çš„ä»¥ä¸‹å¹¾ç¯‡ï¼š</p><ul><li><a href="https://www.w3.org/TR/CSS22/visuren.html#positioning-scheme" target="_blank" rel="noopener">CSS 2.2 - 9.3. Positioning schemes</a></li><li><a href="https://www.w3.org/TR/css-position-3/" target="_blank" rel="noopener">CSS Positioned Layout Module Level 3</a></li></ul></blockquote><h3 id="Layered-presentation"><a class="header-anchor" href="#Layered-presentation"></a>Layered presentation</h3><p>é™¤äº†æ°´å¹³å’Œå‚ç›´çš„ä½ç½®ä¹‹å¤–ï¼Œå¦‚æœæƒ³è®“ box å¯ä»¥æœ‰é¡ä¼¼åœ–å±¤çš„æ¦‚å¿µä¾†æ’ç‰ˆï¼Œå°±èƒ½ä½¿ç”¨ <code>z-index</code> å±¬æ€§ï¼Œé€™äº› box å¯ä»¥æ²¿è‘— z è»¸ä¾†æ’åˆ—ï¼Œè®“ä¸€å€‹ box å¯ä»¥ç–Šåœ¨å¦ä¸€å€‹ box çš„ä¸Šé¢ã€‚ç³»åˆ—å¦‚ä¸‹ï¼š</p><ul><li><a href="https://titangene.github.io/article/css-z-index-and-stacking-context.html">é‡æ–°èªè­˜ CSS - z-index &amp; stacking context</a></li></ul><blockquote><p>å°æ‡‰ spec çš„ä»¥ä¸‹å¹¾ç¯‡ï¼š</p><ul><li><a href="https://www.w3.org/TR/CSS22/visuren.html#layers" target="_blank" rel="noopener">CSS 2.2 - 9.9. Layered presentation</a></li></ul></blockquote><h2 id="Visual-effects"><a class="header-anchor" href="#Visual-effects"></a>Visual effects</h2><p>ç•¶ block box çš„å…§å®¹è¶…å‡º box çš„ content edge æ™‚ï¼Œå°±å¯èƒ½æœƒç™¼ç”Ÿ overflowã€‚ä½¿ç”¨ <code>overflow</code> å±¬æ€§å°±èƒ½æŒ‡å®šè¶…å‡ºçš„éƒ¨ä»½è¦å¦‚ä½•è™•ç† (ä¾‹å¦‚ï¼šæä¾›æ²å‹•æ©Ÿåˆ¶ä¾†è¨ªå•è¢«å‰ªè£çš„å…§å®¹)ã€‚è€Œ <code>visibility</code> å±¬æ€§å‰‡å¯ä»¥æŒ‡å®šæ˜¯å¦è¦ render ç”±å…ƒç´ ç”¢ç”Ÿçš„ boxï¼Œå¯ç”¨ä¾†é¡¯ç¤ºæˆ–éš±è— boxã€‚ç³»åˆ—å¦‚ä¸‹ï¼š</p><ul><li><a href="https://titangene.github.io/article/css-overflow.html">é‡æ–°èªè­˜ CSS - overflow</a></li><li><a href="https://titangene.github.io/article/css-visibility.html">é‡æ–°èªè­˜ CSS - visibility</a></li></ul><blockquote><p>å°æ‡‰ spec çš„ä»¥ä¸‹å¹¾ç¯‡ï¼š</p><ul><li><a href="https://www.w3.org/TR/CSS22/visufx.html" target="_blank" rel="noopener">CSS 2.2 - 11. Visual effects</a></li><li><a href="https://www.w3.org/TR/CSS22/tables.html#dynamic-effects" target="_blank" rel="noopener">CSS 2.2 - 17.5.5. Dynamic row and column effects</a></li></ul></blockquote>]]></content>
    
    <summary type="html">
    
      &lt;p&gt;&lt;img src=&quot;../images/cover/css.png&quot; alt=&quot;&quot;&gt;&lt;/p&gt;&lt;p&gt;çµ‚æ–¼ä¾†åˆ°éµäººè³½çš„æœ€å¾Œä¸€å¤©ï¼æœ¬ç¯‡å°ã€Œé‡æ–°èªè­˜ CSSã€æ­¤ç³»åˆ—åšå€‹ç¸½çµï¼Œä¸¦æ•´ç†æ­¤ç³»åˆ—ä¸­çš„æ¯ç¯‡æ–‡ç« å¯å°æ‡‰åˆ°å“ªäº› CSS Specã€‚&lt;/p&gt;
    
    </summary>
    
    
      <category term="CSS" scheme="https://titangene.github.io/categories/css/"/>
    
    
      <category term="IT éµäººè³½" scheme="https://titangene.github.io/tags/it-%E9%90%B5%E4%BA%BA%E8%B3%BD/"/>
    
  </entry>
  
  <entry>
    <title>é‡æ–°èªè­˜ CSS - z-index &amp; stacking context</title>
    <link href="https://titangene.github.io/article/css-z-index-and-stacking-context.html"/>
    <id>https://titangene.github.io/article/css-z-index-and-stacking-context.html</id>
    <published>2019-10-14T13:20:42.000Z</published>
    <updated>2020-02-09T15:01:57.000Z</updated>
    
    <content type="html"><![CDATA[<p><img src="../images/cover/css.png" alt=""></p><p>æœ¬ç¯‡å°‡ä»‹ç´¹ CSS çš„ <code>z-index</code> å±¬æ€§å’Œ stacking contextã€‚</p><a id="more"></a><h2 id="å‰è¨€"><a class="header-anchor" href="#å‰è¨€"></a>å‰è¨€</h2><blockquote><p>ã€Œé‡æ–°èªè­˜ CSSã€é€™å€‹ç³»åˆ—åç¨±çš„ç”±ä¾†å°±å¦‚å…¶åï¼Œæˆ‘æƒ³è¦é‡æ–°èªè­˜å®ƒã€‚é›–ç„¶ä»¥å‰å°±æœ‰å­¸é CSSï¼Œä½†é€™æ¬¡æƒ³å¾ CSS Spec ä¸­å­¸åˆ°æœ€åŸå§‹çš„å®šç¾©å’Œå…§å®¹ï¼Œæ›´åŠ äº†è§£ CSS çš„åŸç†ï¼Œè®“æˆ‘åœ¨åˆ‡ç‰ˆçš„æ™‚å€™å¯ä»¥æ›´åŠ ç¢ºå®šè‡ªå·±åœ¨åšä»€éº¼ï¼Œæˆ‘è¸©åˆ°çš„é›·åªæ˜¯å› ç‚ºæˆ‘ä¸å¤ äº†è§£å®ƒæ‰æœƒç‚¸é–‹ã€‚</p><p>åœ¨é€™ 30 å¤©çš„å…§å®¹ä¸­ï¼Œæœƒå°‡ Spec å…§çœ‹åˆ°çš„è³‡æ–™æ•´ç†æˆé€™å€‹ç³»åˆ—ï¼Œä¹Ÿå¸Œæœ›æ­£åœ¨å­¸ CSS çš„å„ä½å¯ä»¥æ›´åŠ äº†è§£å®ƒã€‚å¦å¤–æˆ‘ä¹ŸæœƒåŒæ™‚å°‡æ–‡ç« ç™¼è‡³æˆ‘çš„ Blogï¼Œå¦‚æœæƒ³ç›´æ¥çœ‹æ–‡å…§çš„ç¨‹å¼ç¢¼ Demo ç•«é¢ï¼Œå¯ä»¥åˆ°æˆ‘çš„ Blog ä¾†çœ‹ ğŸ˜ƒã€‚</p><p>æœ¬æ–‡åŒæ­¥ç™¼è¡¨æ–¼ iT é‚¦å¹«å¿™ï¼š<a href="https://ithelp.ithome.com.tw/articles/10228026" target="_blank" rel="noopener">é‡æ–°èªè­˜ CSS - z-index &amp; stacking context</a></p><p>ã€Œé‡æ–°èªè­˜ CSSã€ç³»åˆ—æ–‡ç« ç™¼æ–‡æ–¼ï¼š</p><ul><li><a href="https://ithelp.ithome.com.tw/users/20117586/ironman/2617" target="_blank" rel="noopener">iT é‚¦å¹«å¿™</a></li><li><a href="https://titangene.github.io/tags/it-%E9%90%B5%E4%BA%BA%E8%B3%BD/">Titangene Blog</a></li></ul></blockquote><p>å¾ CSS 2.1 é–‹å§‹ï¼Œæ¯å€‹ box åœ¨ä¸‰ç¶­ç©ºé–“ä¸Šéƒ½æœ‰ä¸€å€‹ä½ç½®ï¼Œé™¤äº†æ°´å¹³å’Œå‚ç›´çš„ä½ç½®ä¹‹å¤–ï¼Œé€™äº› box é‚„æœƒæ²¿è‘— z è»¸ä¾†æ’åˆ—ï¼Œè®“ä¸€å€‹ box å¯ä»¥ç–Šåœ¨å¦ä¸€å€‹ box çš„ä¸Šé¢ï¼Œé€™å€‹æ¦‚å¿µå°±é¡ä¼¼æ–¼åœ–å±¤ã€‚</p><p>ç•¶ä½¿ç”¨è€…é¢å°è¢å¹•æ™‚ï¼Œå…ƒç´ çš„ <code>z-index</code> å±¬æ€§è¨­å®šçš„æ•¸å€¼æ„ˆå¤§ï¼Œå‰‡è©²å…ƒç´ å°±æœƒæ„ˆé è¿‘ä½¿ç”¨è€…ã€‚</p><h2 id="z-index-å±¬æ€§"><a class="header-anchor" href="#z-index-å±¬æ€§"></a><code>z-index</code> å±¬æ€§</h2><p>ä¸‹é¢æ˜¯ <code>z-index</code> å±¬æ€§çš„å®šç¾©è¡¨ï¼š</p><p><img src="../images/css-z-index-and-stacking-context/2019-10-14-12-15-58.png" alt=""></p><ul><li>æ­¤å…ƒç´ çš„ initial value ç‚º <code>auto</code></li><li>åªé©ç”¨æ–¼å®šä½å…ƒç´ ï¼Œä¹Ÿå°±æ˜¯å…ƒç´ çš„ <code>position</code> å±¬æ€§ä¸ç‚ºé è¨­å€¼ <code>static</code>ï¼ŒåŒ…æ‹¬ï¼š<code>absolute</code>ã€<code>relative</code>ã€<code>fixed</code></li><li>æ­¤å…ƒç´ ç‚ºä¸å¯ç¹¼æ‰¿å±¬æ€§</li></ul><p><code>z-index</code> å±¬æ€§æ˜¯å° positioned box æŒ‡å®šäº†ï¼š</p><ul><li>ç•¶å‰ stacking context ä¸­ box çš„ stack level</li><li>è©² box æ˜¯å¦å»ºç«‹ stacking context</li></ul><p>ä¸‹é¢ä»‹ç´¹å„å±¬æ€§å€¼ï¼š</p><ul><li><code>&lt;integer&gt;</code>ï¼šè©²æ•´æ•¸æ˜¯ç•¶å‰ stacking context ä¸­ç”¢ç”Ÿçš„ box çš„ stack levelã€‚è©² box é‚„å»ºç«‹äº†ä¸€å€‹æ–°çš„ stacking context</li><li><code>auto</code>ï¼šç•¶å‰ stacking context ä¸­ç”¢ç”Ÿçš„ box çš„ stack level ç‚º 0ã€‚å¦‚æœè©² box å…·æœ‰ <code>position: fixed</code> æˆ–æ˜¯ rootï¼Œå‰‡å®ƒé‚„æœƒå»ºç«‹æ–°çš„ stacking context</li></ul><h2 id="stacking-context"><a class="header-anchor" href="#stacking-context"></a>stacking context</h2><blockquote><p>åŸæœ¬å…ƒç´ æœƒ in-flow ä¾†æ’åˆ—ï¼Œç•¶å…ƒç´ ä½¿ç”¨ <code>position</code> å±¬æ€§è¨­å®šæ’åˆ—çš„ä½ç½®æ™‚ï¼Œæœƒå¾åŸæœ¬çš„ä½ç½®ç§»è‡³æŒ‡å®šçš„ä½ç½®ï¼Œç”šè‡³æ˜¯ out-of-flowï¼Œæ­¤æ™‚å°±æœƒå»ºç«‹æ–°çš„ stacking context</p></blockquote><ul><li>render tree ç¹ªè£½ (painted) åˆ° canvas ä¸Šçš„é †åºæ˜¯æ ¹æ“š stacking context ä¾†æ±ºå®šçš„</li><li>æ¯å€‹ box éƒ½å±¬æ–¼ä¸€å€‹ stacking contextï¼Œä¸¦ä¸”æ¯å€‹å®šä½çš„ box éƒ½æœ‰ä¸€å€‹æ•´æ•¸çš„ stack level<ul><li>stack levelï¼šä»£è¡¨è©² box åœ¨ z è»¸ä¸Šç›¸å°æ–¼åŒä¸€å€‹ stacking context ä¸­å…¶ä»– stack level çš„ä½ç½®</li></ul></li><li>stack level è¼ƒé«˜çš„ box æœƒåœ¨ stack level è¼ƒä½çš„ box å‰é¢</li><li>box çš„ stack level å¯èƒ½ç‚ºè² æ•¸</li><li>åœ¨ stacking context ä¸­ï¼Œstack level ç›¸åŒçš„ box æœƒæ ¹æ“š document tree çš„é †åºä¾†å †ç–Š (stacked)ï¼Œä¹Ÿå°±æ˜¯è¶Šå¯«åœ¨ HTML å¾Œé¢çš„å…ƒç´ æœƒè“‹ä½å‰é¢çš„å…ƒç´ </li><li>stacking context å¯ä»¥åŒ…å«å…¶ä»– stacking context</li></ul><p>å¦‚ä»¥ä¸‹ç¯„ä¾‹ï¼š</p><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs html"><span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">class</span>=<span class="hljs-string">"box box1"</span>&gt;</span>box1<span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span><br><span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">class</span>=<span class="hljs-string">"box box2"</span>&gt;</span>box2<span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span><br></code></pre></td></tr></table></figure><figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><code class="hljs css"><span class="hljs-selector-class">.box</span> &#123;<br>  <span class="hljs-attribute">width</span>: <span class="hljs-number">100px</span>;<br>  <span class="hljs-attribute">height</span>: <span class="hljs-number">100px</span>;<br>  <span class="hljs-attribute">font-size</span>: <span class="hljs-number">36px</span>;<br>&#125;<br><span class="hljs-selector-class">.box1</span> &#123;<br>  <span class="hljs-attribute">background-color</span>: lightblue;<br>  <span class="hljs-attribute">margin</span>: <span class="hljs-number">0</span> <span class="hljs-number">0</span> -<span class="hljs-number">50px</span> <span class="hljs-number">50px</span>;<br>&#125;<br><span class="hljs-selector-class">.box2</span> &#123;<br>  <span class="hljs-attribute">background-color</span>: lightslategray;<br>&#125;<br></code></pre></td></tr></table></figure><p>Demoï¼š<a href="https://codepen.io/titangene/pen/OJJNJJY" target="_blank" rel="noopener">Codepen é€£çµ</a></p><p><code>.box2</code> å…ƒç´ åœ¨ <code>.box1</code> å…ƒç´ ä¹‹å¾Œï¼Œæ‰€ä»¥ <code>.box2</code> å…ƒç´ æœƒè“‹ä½ <code>.box1</code> å…ƒç´ ï¼š</p><p><img src="../images/css-z-index-and-stacking-context/2019-10-14-19-13-08.png" alt=""></p><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><code class="hljs html"><span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">id</span>=<span class="hljs-string">"div1"</span>&gt;</span><br>  <span class="hljs-tag">&lt;<span class="hljs-name">h2</span>&gt;</span>div #1<span class="hljs-tag">&lt;/<span class="hljs-name">h2</span>&gt;</span><br>  <span class="hljs-tag">&lt;<span class="hljs-name">code</span>&gt;</span>position: relative;<span class="hljs-tag">&lt;<span class="hljs-name">br</span>/&gt;</span>z-index: 5;<span class="hljs-tag">&lt;/<span class="hljs-name">code</span>&gt;</span><br><span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span><br><span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">id</span>=<span class="hljs-string">"div2"</span>&gt;</span><br>  <span class="hljs-tag">&lt;<span class="hljs-name">h2</span>&gt;</span>div #2<span class="hljs-tag">&lt;/<span class="hljs-name">h2</span>&gt;</span><br>  <span class="hljs-tag">&lt;<span class="hljs-name">code</span>&gt;</span>position: relative;<span class="hljs-tag">&lt;<span class="hljs-name">br</span>/&gt;</span>z-index: 2;<span class="hljs-tag">&lt;/<span class="hljs-name">code</span>&gt;</span><br><span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span><br><span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">id</span>=<span class="hljs-string">"div3"</span>&gt;</span><br>  <span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">id</span>=<span class="hljs-string">"div4"</span>&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">h2</span>&gt;</span>div #4<span class="hljs-tag">&lt;/<span class="hljs-name">h2</span>&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">code</span>&gt;</span>position: relative;<span class="hljs-tag">&lt;<span class="hljs-name">br</span>/&gt;</span>z-index: 6;<span class="hljs-tag">&lt;/<span class="hljs-name">code</span>&gt;</span><br>  <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span><br>  <span class="hljs-tag">&lt;<span class="hljs-name">h2</span>&gt;</span>div #3<span class="hljs-tag">&lt;/<span class="hljs-name">h2</span>&gt;</span><br>  <span class="hljs-tag">&lt;<span class="hljs-name">code</span>&gt;</span>position: absolute;<span class="hljs-tag">&lt;<span class="hljs-name">br</span>/&gt;</span>z-index: 4;<span class="hljs-tag">&lt;/<span class="hljs-name">code</span>&gt;</span><br>  <span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">id</span>=<span class="hljs-string">"div5"</span>&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">h2</span>&gt;</span>div #5<span class="hljs-tag">&lt;/<span class="hljs-name">h2</span>&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">code</span>&gt;</span>position: relative;<span class="hljs-tag">&lt;<span class="hljs-name">br</span>/&gt;</span>z-index: 1;<span class="hljs-tag">&lt;/<span class="hljs-name">code</span>&gt;</span><br>  <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span><br>  <span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">id</span>=<span class="hljs-string">"div6"</span>&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">h2</span>&gt;</span>div #6<span class="hljs-tag">&lt;/<span class="hljs-name">h2</span>&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">code</span>&gt;</span>position: absolute;<span class="hljs-tag">&lt;<span class="hljs-name">br</span>/&gt;</span>z-index: 3;<span class="hljs-tag">&lt;/<span class="hljs-name">code</span>&gt;</span><br>  <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span><br><span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span><br></code></pre></td></tr></table></figure><figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br></pre></td><td class="code"><pre><code class="hljs css">* &#123; <span class="hljs-attribute">margin</span>: <span class="hljs-number">0</span>; &#125;<br><span class="hljs-selector-tag">html</span> &#123; <span class="hljs-attribute">padding</span>: <span class="hljs-number">20px</span>; &#125;<br><span class="hljs-selector-tag">div</span> &#123;<br>  <span class="hljs-attribute">position</span>: relative;<br>  <span class="hljs-attribute">opacity</span>: <span class="hljs-number">0.7</span>;<br>&#125;<br><span class="hljs-selector-id">#div1</span>,<br><span class="hljs-selector-id">#div2</span> &#123;<br>  <span class="hljs-attribute">background-color</span>: <span class="hljs-number">#cfc</span>;<br>  <span class="hljs-attribute">padding</span>: <span class="hljs-number">10px</span>;<br>  <span class="hljs-attribute">border</span>: <span class="hljs-number">1px</span> dashed <span class="hljs-number">#696</span>;<br>&#125;<br><span class="hljs-selector-id">#div1</span> &#123;<br>  <span class="hljs-attribute">width</span>: <span class="hljs-number">160px</span>;<br>  <span class="hljs-attribute">height</span>: <span class="hljs-number">280px</span>;<br>  <span class="hljs-attribute">margin-bottom</span>: -<span class="hljs-number">220px</span>;<br>  <span class="hljs-attribute">left</span>: <span class="hljs-number">300px</span>;<br>  <span class="hljs-attribute">z-index</span>: <span class="hljs-number">5</span>;<br>&#125;<br><span class="hljs-selector-id">#div2</span> &#123;<br>  <span class="hljs-attribute">width</span>: <span class="hljs-number">500px</span>;<br>  <span class="hljs-attribute">padding-top</span>: <span class="hljs-number">240px</span>;<br>  <span class="hljs-attribute">z-index</span>: <span class="hljs-number">2</span>;<br>&#125;<br><span class="hljs-selector-id">#div3</span> &#123;<br>  <span class="hljs-attribute">background-color</span>: <span class="hljs-number">#fdd</span>;<br>  <span class="hljs-attribute">padding</span>: <span class="hljs-number">40px</span> <span class="hljs-number">20px</span> <span class="hljs-number">20px</span>;<br>  <span class="hljs-attribute">border</span>: <span class="hljs-number">1px</span> dashed <span class="hljs-number">#900</span>;<br>  <span class="hljs-attribute">position</span>: absolute;<br>  <span class="hljs-attribute">top</span>: <span class="hljs-number">40px</span>;<br>  <span class="hljs-attribute">left</span>: <span class="hljs-number">100px</span>;<br>  <span class="hljs-attribute">width</span>: <span class="hljs-number">340px</span>;<br>  <span class="hljs-attribute">z-index</span>: <span class="hljs-number">4</span>;<br>  <span class="hljs-attribute">opacity</span>: <span class="hljs-number">1</span>;<br>&#125;<br><span class="hljs-selector-id">#div4</span>,<br><span class="hljs-selector-id">#div5</span> &#123;<br>  <span class="hljs-attribute">background-color</span>: <span class="hljs-number">#ffc</span>;<br>  <span class="hljs-attribute">border</span>: <span class="hljs-number">1px</span> dashed <span class="hljs-number">#996</span>;<br>&#125;<br><span class="hljs-selector-id">#div4</span> &#123;<br>  <span class="hljs-attribute">padding</span>: <span class="hljs-number">25px</span> <span class="hljs-number">10px</span> <span class="hljs-number">5px</span>;<br>  <span class="hljs-attribute">margin-bottom</span>: <span class="hljs-number">15px</span>;<br>  <span class="hljs-attribute">z-index</span>: <span class="hljs-number">6</span>;<br>&#125;<br><span class="hljs-selector-id">#div5</span> &#123;<br>  <span class="hljs-attribute">padding</span>: <span class="hljs-number">5px</span> <span class="hljs-number">10px</span>;<br>  <span class="hljs-attribute">margin-top</span>: <span class="hljs-number">15px</span>;<br>  <span class="hljs-attribute">z-index</span>: <span class="hljs-number">1</span>;<br>&#125;<br><span class="hljs-selector-id">#div6</span> &#123;<br>  <span class="hljs-attribute">width</span>: <span class="hljs-number">180px</span>;<br>  <span class="hljs-attribute">background-color</span>: <span class="hljs-number">#ddf</span>;<br>  <span class="hljs-attribute">padding</span>: <span class="hljs-number">300px</span> <span class="hljs-number">20px</span> <span class="hljs-number">20px</span>;<br>  <span class="hljs-attribute">border</span>: <span class="hljs-number">1px</span> dashed <span class="hljs-number">#009</span>;<br>  <span class="hljs-attribute">position</span>: absolute;<br>  <span class="hljs-attribute">top</span>: <span class="hljs-number">20px</span>;<br>  <span class="hljs-attribute">left</span>: <span class="hljs-number">200px</span>;<br>  <span class="hljs-attribute">z-index</span>: <span class="hljs-number">3</span>;<br>&#125;<br></code></pre></td></tr></table></figure><p>Demoï¼š<a href="https://codepen.io/titangene/pen/KKKzwZe" target="_blank" rel="noopener">Codepen é€£çµ</a></p><p>ç¯„ä¾‹å¦‚åœ–ï¼š</p><p><img src="../images/css-z-index-and-stacking-context/2019-10-14-19-07-02.png" alt=""></p><iframe height="559" style="width:100%" scrolling="no" title="stacking context: z-index" src="https://codepen.io/titangene/embed/KKKzwZe?height=559&theme-id=dark&default-tab=css,result" frameborder="no" allowtransparency="true" allowfullscreen>See the Pen <a href="https://codepen.io/titangene/pen/KKKzwZe" target="_blank" rel="noopener">stacking context: z-index</a> by Titangene (<a href="https://codepen.io/titangene" target="_blank" rel="noopener">@titangene</a>) on <a href="https://codepen.io" target="_blank" rel="noopener">CodePen</a>.</iframe><p>è³‡æ–™ä¾†æºï¼š</p><ul><li><a href="https://www.w3.org/TR/CSS22/visuren.html#z-index" target="_blank" rel="noopener">CSS 2.2 - 9.9.1. Specifying the stack level: the <code>z-index</code> property</a></li><li><a href="https://developer.mozilla.org/en-US/docs/Web/CSS/CSS_Positioning/Understanding_z_index/The_stacking_context" target="_blank" rel="noopener">The stacking context - CSS: Cascading Style Sheets | MDN</a></li></ul><hr>]]></content>
    
    <summary type="html">
    
      &lt;p&gt;&lt;img src=&quot;../images/cover/css.png&quot; alt=&quot;&quot;&gt;&lt;/p&gt;&lt;p&gt;æœ¬ç¯‡å°‡ä»‹ç´¹ CSS çš„ &lt;code&gt;z-index&lt;/code&gt; å±¬æ€§å’Œ stacking contextã€‚&lt;/p&gt;
    
    </summary>
    
    
      <category term="CSS" scheme="https://titangene.github.io/categories/css/"/>
    
    
      <category term="IT éµäººè³½" scheme="https://titangene.github.io/tags/it-%E9%90%B5%E4%BA%BA%E8%B3%BD/"/>
    
  </entry>
  
  <entry>
    <title>é‡æ–°èªè­˜ CSS - visibility</title>
    <link href="https://titangene.github.io/article/css-visibility.html"/>
    <id>https://titangene.github.io/article/css-visibility.html</id>
    <published>2019-10-13T13:20:42.000Z</published>
    <updated>2020-02-09T14:59:05.000Z</updated>
    
    <content type="html"><![CDATA[<p><img src="../images/cover/css.png" alt=""></p><p>æœ¬ç¯‡å°‡ä»‹ç´¹ CSS çš„ <code>visibility</code> å±¬æ€§ã€‚</p><a id="more"></a><h2 id="å‰è¨€"><a class="header-anchor" href="#å‰è¨€"></a>å‰è¨€</h2><blockquote><p>ã€Œé‡æ–°èªè­˜ CSSã€é€™å€‹ç³»åˆ—åç¨±çš„ç”±ä¾†å°±å¦‚å…¶åï¼Œæˆ‘æƒ³è¦é‡æ–°èªè­˜å®ƒã€‚é›–ç„¶ä»¥å‰å°±æœ‰å­¸é CSSï¼Œä½†é€™æ¬¡æƒ³å¾ CSS Spec ä¸­å­¸åˆ°æœ€åŸå§‹çš„å®šç¾©å’Œå…§å®¹ï¼Œæ›´åŠ äº†è§£ CSS çš„åŸç†ï¼Œè®“æˆ‘åœ¨åˆ‡ç‰ˆçš„æ™‚å€™å¯ä»¥æ›´åŠ ç¢ºå®šè‡ªå·±åœ¨åšä»€éº¼ï¼Œæˆ‘è¸©åˆ°çš„é›·åªæ˜¯å› ç‚ºæˆ‘ä¸å¤ äº†è§£å®ƒæ‰æœƒç‚¸é–‹ã€‚</p><p>åœ¨é€™ 30 å¤©çš„å…§å®¹ä¸­ï¼Œæœƒå°‡ Spec å…§çœ‹åˆ°çš„è³‡æ–™æ•´ç†æˆé€™å€‹ç³»åˆ—ï¼Œä¹Ÿå¸Œæœ›æ­£åœ¨å­¸ CSS çš„å„ä½å¯ä»¥æ›´åŠ äº†è§£å®ƒã€‚å¦å¤–æˆ‘ä¹ŸæœƒåŒæ™‚å°‡æ–‡ç« ç™¼è‡³æˆ‘çš„ Blogï¼Œå¦‚æœæƒ³ç›´æ¥çœ‹æ–‡å…§çš„ç¨‹å¼ç¢¼ Demo ç•«é¢ï¼Œå¯ä»¥åˆ°æˆ‘çš„ Blog ä¾†çœ‹ ğŸ˜ƒã€‚</p><p>æœ¬æ–‡åŒæ­¥ç™¼è¡¨æ–¼ iT é‚¦å¹«å¿™ï¼š<a href="https://ithelp.ithome.com.tw/articles/10227785" target="_blank" rel="noopener">é‡æ–°èªè­˜ CSS - visibility</a></p><p>ã€Œé‡æ–°èªè­˜ CSSã€ç³»åˆ—æ–‡ç« ç™¼æ–‡æ–¼ï¼š</p><ul><li><a href="https://ithelp.ithome.com.tw/users/20117586/ironman/2617" target="_blank" rel="noopener">iT é‚¦å¹«å¿™</a></li><li><a href="https://titangene.github.io/tags/it-%E9%90%B5%E4%BA%BA%E8%B3%BD/">Titangene Blog</a></li></ul></blockquote><h2 id="visibility-å±¬æ€§"><a class="header-anchor" href="#visibility-å±¬æ€§"></a><code>visibility</code> å±¬æ€§</h2><p><code>visibility</code> å±¬æ€§æ˜¯ç”¨æ–¼æŒ‡å®šæ˜¯å¦ render ç”±å…ƒç´ ç”¢ç”Ÿçš„ boxï¼Œå¯ç”¨ä¾†é¡¯ç¤ºæˆ–éš±è— boxï¼Œè€Œç„¡éœ€æ›´æ”¹æ–‡ä»¶çš„ä½ˆå±€ã€‚</p><p>ä¸‹é¢æ˜¯ <code>visibility</code> å±¬æ€§çš„å®šç¾©è¡¨ï¼š</p><p><img src="../images/css-visibility/css-visibility-property.png" alt=""></p><ul><li>æ­¤å…ƒç´ çš„ initial value ç‚º <code>visible</code></li><li>é©ç”¨æ–¼æ‰€æœ‰å…ƒç´ </li><li>æ­¤å…ƒç´ ç‚ºå¯ç¹¼æ‰¿å±¬æ€§ï¼Œdescendant æœƒç¹¼æ‰¿çˆ¶å…ƒç´ çš„ <code>visibility</code> å±¬æ€§è¨­å®š</li></ul><p>ä¸‹é¢ä»‹ç´¹å„å±¬æ€§å€¼ï¼š</p><h3 id="visible"><a class="header-anchor" href="#visible"></a><code>visible</code></h3><ul><li><code>visibility</code> å±¬æ€§çš„ initial value</li><li>ç”¢ç”Ÿçš„ box æ˜¯å¯è¦‹çš„</li></ul><h3 id="hidden"><a class="header-anchor" href="#hidden"></a><code>hidden</code></h3><ul><li>ç”¢ç”Ÿçš„ box æ˜¯ä¸å¯è¦‹çš„ (å®Œå…¨é€æ˜ï¼Œä¸æœƒç¹ªè£½ (drawn) åœ¨ç•«é¢ä¸Š)</li><li>ä½†ä¸å¯è¦‹çš„ box é‚„æ˜¯æœƒå½±éŸ¿ä½ˆå±€</li><li>å¦‚æœå…ƒç´ çš„ descendant è¨­å®š <code>visibility: visible</code>ï¼Œå‰‡å®ƒå€‘å°‡æ˜¯å¯è¦‹çš„</li></ul><p>å¦‚ä»¥ä¸‹ç¯„ä¾‹ï¼Œ<code>.outer</code> å…ƒç´ è¨­å®š <code>visibility: hidden</code>ï¼Œè€Œ <code>.outer</code> å…ƒç´ æœ‰å…©å€‹ descendantï¼Œæ‰€æœ‰ descendant éƒ½æœƒç¹¼æ‰¿çˆ¶å…ƒç´  <code>.outer</code> çš„ <code>visibility</code> å±¬æ€§è¨­å®šï¼š</p><ul><li><code>.inner-hidden</code> å…ƒç´ ï¼šå› ç‚ºæ²’æœ‰åœ¨æ­¤å…ƒç´ è¨­å®š <code>visibility: visible</code>ï¼Œæ‰€ä»¥å…ƒç´ ç‚ºä¸å¯è¦‹çš„</li><li><code>.inner-visible</code> å…ƒç´ ï¼šä¹Ÿå°±æ˜¯ç•«é¢ä¸­çš„ç´…è‰²çŸ©å½¢ï¼Œå› ç‚ºæœ‰åœ¨æ­¤å…ƒç´ è¨­å®š <code>visibility: visible</code>ï¼Œæ‰€ä»¥å…ƒç´ å°±è®Šç‚ºå¯è¦‹çš„</li></ul><p>åœ¨ç´…è‰²çŸ©å½¢ä¸Šé¢æ‰€ç©ºå‡ºçš„ç©ºé–“ï¼Œå…¶å¯¦å°±æ˜¯ <code>.inner-hidden</code> å…ƒç´ ä½”ç”¨çš„ã€‚é›–ç„¶ <code>.inner-hidden</code> å…ƒç´ æ˜¯ä¸å¯è¦‹çš„ï¼Œä½†å®ƒåªæ˜¯è¢«éš±è—è€Œå·²ï¼Œå…ƒç´ æ‰€ç”¢ç”Ÿçš„ box ä¸æœƒå¾æ–‡ä»¶ä½ˆå±€ä¸­åˆªé™¤ï¼Œæ‰€ä»¥ box é‚„æ˜¯æœƒå½±éŸ¿ä½ˆå±€ã€‚</p><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><code class="hljs html"><span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">class</span>=<span class="hljs-string">"outer"</span>&gt;</span><br>  <span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">class</span>=<span class="hljs-string">"inner inner-hidden"</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span><br>  <span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">class</span>=<span class="hljs-string">"inner inner-visible"</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span><br><span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span><br></code></pre></td></tr></table></figure><figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><code class="hljs css"><span class="hljs-selector-tag">body</span> &#123;<br>  <span class="hljs-attribute">outline</span>: <span class="hljs-number">3px</span> solid;<br>&#125;<br><span class="hljs-selector-class">.outer</span> &#123;<br>  <span class="hljs-attribute">width</span>: <span class="hljs-number">100px</span>;<br>  <span class="hljs-attribute">background-color</span>: gray;<br>  <span class="hljs-attribute">visibility</span>: hidden;<br>&#125;<br><span class="hljs-selector-class">.inner</span> &#123;<br>  <span class="hljs-attribute">width</span>: <span class="hljs-number">60px</span>;<br>  <span class="hljs-attribute">height</span>: <span class="hljs-number">60px</span>;<br>  <span class="hljs-attribute">background-color</span>: red;<br>&#125;<br><span class="hljs-selector-class">.inner-visible</span> &#123;<br>  <span class="hljs-attribute">visibility</span>: visible;<br>&#125;<br></code></pre></td></tr></table></figure><p>Demoï¼š<a href="https://codepen.io/titangene/pen/Baajxbx" target="_blank" rel="noopener">Codepen é€£çµ</a></p><p><img src="../images/css-visibility/descendant-visibility-visible.png" alt=""></p><iframe height="382" style="width:100%" scrolling="no" title="descendant visibility: visible" src="https://codepen.io/titangene/embed/Baajxbx?height=382&theme-id=dark&default-tab=css,result" frameborder="no" allowtransparency="true" allowfullscreen>See the Pen <a href="https://codepen.io/titangene/pen/Baajxbx" target="_blank" rel="noopener">descendant visibility: visible</a> by Titangene (<a href="https://codepen.io/titangene" target="_blank" rel="noopener">@titangene</a>) on <a href="https://codepen.io" target="_blank" rel="noopener">CodePen</a>.</iframe><h3 id="collapse"><a class="header-anchor" href="#collapse"></a><code>collapse</code></h3><ul><li>åœ¨è¡¨æ ¼çš„ row æˆ– column (rowã€row groupã€column å’Œ column group å…ƒç´ ï¼Œä¹Ÿå°±æ˜¯åˆ†åˆ¥ç‚º HTML ä¸­çš„ <code>tr</code>ã€<code>tbody</code>ã€<code>col</code> å’Œ <code>colgroup</code> å…ƒç´ ) ä½¿ç”¨ <code>visibility: collapse</code> æ™‚ï¼š<ul><li>æœƒå°è‡´æ•´å€‹ row æˆ– column å¾é¡¯ç¤ºçµæœä¸­åˆªé™¤ï¼ŒåŸæœ¬ä½”ç”¨çš„ç©ºé–“æœƒè®“å…¶ä»–å…§å®¹ä½¿ç”¨ï¼Œä¹Ÿå°±æ˜¯èªªé¡¯ç¤ºçµæœå¾ˆåƒæ˜¯å°‡ <code>display: none</code> æ‡‰ç”¨åœ¨è¡¨æ ¼çš„ row æˆ– column ä¸€æ¨£</li><li>èˆ‡ collapsed column æˆ– row (åˆä½µæ¬„æˆ–åˆä½µåˆ—) ç›¸äº¤ (intersect) çš„ spanned row æˆ– column (è·¨æ¬„æˆ–è·¨åˆ—) çš„å…§å®¹æœƒè¢«è£åˆ‡æ‰ (clipped)</li><li>å¯ä»¥åœ¨ä¸å¼·åˆ¶é‡æ–°ä½ˆå±€ (re-layout) è¡¨æ ¼çš„æƒ…æ³ä¸‹ï¼Œä½¿ç”¨å‹•æ…‹æ•ˆæœä¾†åˆªé™¤è¡¨æ ¼çš„ row æˆ– column</li></ul></li><li>å° table cell (ä¹Ÿå°±æ˜¯ HTML ä¸­çš„ <code>td</code> æˆ– <code>th</code> å…ƒç´ ) ä½¿ç”¨ <code>visibility: collapse</code> æ™‚ï¼Œæ•ˆæœç›¸ç•¶æ–¼ <code>visibility: hidden</code></li><li>é™¤äº†ä¸Šè¿°ä»¥å¤–çš„å…¶ä»–å…ƒç´ ä½¿ç”¨ <code>visibility: collapse</code> æ™‚ï¼Œæ•ˆæœç›¸ç•¶æ–¼ <code>visibility: hidden</code></li></ul><p>ä¸‹é¢æ˜¯è¡¨æ ¼çš„ç¯„ä¾‹ï¼š</p><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><code class="hljs html"><span class="hljs-tag">&lt;<span class="hljs-name">table</span>&gt;</span><br>  <span class="hljs-tag">&lt;<span class="hljs-name">tr</span>&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">td</span>&gt;</span>1.1<span class="hljs-tag">&lt;/<span class="hljs-name">td</span>&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">td</span> <span class="hljs-attr">class</span>=<span class="hljs-string">"collapse"</span>&gt;</span>1.2<span class="hljs-tag">&lt;/<span class="hljs-name">td</span>&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">td</span>&gt;</span>1.3<span class="hljs-tag">&lt;/<span class="hljs-name">td</span>&gt;</span><br>  <span class="hljs-tag">&lt;/<span class="hljs-name">tr</span>&gt;</span><br>  <span class="hljs-tag">&lt;<span class="hljs-name">tr</span> <span class="hljs-attr">class</span>=<span class="hljs-string">"collapse"</span>&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">td</span>&gt;</span>2.1<span class="hljs-tag">&lt;/<span class="hljs-name">td</span>&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">td</span>&gt;</span>2.2<span class="hljs-tag">&lt;/<span class="hljs-name">td</span>&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">td</span>&gt;</span>2.3<span class="hljs-tag">&lt;/<span class="hljs-name">td</span>&gt;</span><br>  <span class="hljs-tag">&lt;/<span class="hljs-name">tr</span>&gt;</span><br>  <span class="hljs-tag">&lt;<span class="hljs-name">tr</span>&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">td</span>&gt;</span>3.1<span class="hljs-tag">&lt;/<span class="hljs-name">td</span>&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">td</span>&gt;</span>3.2<span class="hljs-tag">&lt;/<span class="hljs-name">td</span>&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">td</span>&gt;</span>3.3<span class="hljs-tag">&lt;/<span class="hljs-name">td</span>&gt;</span><br>  <span class="hljs-tag">&lt;/<span class="hljs-name">tr</span>&gt;</span><br><span class="hljs-tag">&lt;/<span class="hljs-name">table</span>&gt;</span><br></code></pre></td></tr></table></figure><figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><code class="hljs css"><span class="hljs-selector-tag">table</span>&#123;<br>  <span class="hljs-attribute">outline</span>: <span class="hljs-number">1px</span> solid;<br>  <span class="hljs-attribute">font-size</span>: <span class="hljs-number">24px</span>;<br>  <span class="hljs-attribute">padding</span>: <span class="hljs-number">10px</span>;<br>&#125;<br><span class="hljs-selector-tag">td</span> &#123;<br>  <span class="hljs-attribute">outline</span>: <span class="hljs-number">1px</span> solid red;<br>&#125;<br><span class="hljs-selector-class">.collapse</span> &#123;<br>  <span class="hljs-attribute">visibility</span>: collapse;<br>&#125;<br></code></pre></td></tr></table></figure><p>Demoï¼š<a href="https://codepen.io/titangene/pen/vYYLVmd" target="_blank" rel="noopener">Codepen é€£çµ</a></p><p>å¦‚ä¸‹åœ–ï¼Œæ­¤ç¯„ä¾‹ç‚º 3 x 3 çš„è¡¨æ ¼ï¼Œåœ¨æ²’æœ‰è¨­å®š <code>visibility: collapse</code> ä¹‹å‰ï¼Œè¡¨æ ¼åŸæœ¬é•·é€™æ¨£ï¼š</p><p><img src="../images/css-visibility/table-row-and-column-visibility-visable.png" alt=""></p><p>å¦‚æœå° <code>1.2</code> æ­¤ table cell å’Œç¬¬äºŒåˆ—è¨­å®š <code>visibility: collapse</code>ï¼š</p><ul><li><code>1.2</code> æ­¤ table cell åªæœƒè¢«éš±è—ï¼Œä¸æœƒåˆªé™¤åŸæœ¬ä½”ç”¨çš„ç©ºé–“</li><li>ç¬¬äºŒåˆ—æœƒè¢«éš±è—ï¼Œä¸¦ä¸”åˆªé™¤åŸæœ¬ä½”ç”¨çš„ç©ºé–“</li></ul><p><img src="../images/css-visibility/table-row-and-column-visibility-collapse.png" alt=""></p><iframe height="302" style="width:100%" scrolling="no" title="table row &amp; columnï¼švisibility: collapse" src="https://codepen.io/titangene/embed/vYYLVmd?height=302&theme-id=dark&default-tab=css,result" frameborder="no" allowtransparency="true" allowfullscreen>See the Pen <a href="https://codepen.io/titangene/pen/vYYLVmd" target="_blank" rel="noopener">table row &amp; columnï¼švisibility: collapse</a> by Titangene (<a href="https://codepen.io/titangene" target="_blank" rel="noopener">@titangene</a>) on <a href="https://codepen.io" target="_blank" rel="noopener">CodePen</a>.</iframe><h2 id="display-none-èˆ‡-visibility-hidden-çš„å·®ç•°"><a class="header-anchor" href="#display-none-èˆ‡-visibility-hidden-çš„å·®ç•°"></a><code>display: none</code> èˆ‡ <code>visibility: hidden</code> çš„å·®ç•°</h2><p><code>display: none</code> å’Œ <code>visibility: hidden</code> éƒ½æ˜¯å¯ä»¥éš±è—å…ƒç´ ï¼Œä½†å·®åˆ¥åœ¨æ–¼ï¼š</p><ul><li><code>display: none</code> æœƒå°‡å…ƒç´ æ‰€ç”¢ç”Ÿçš„ box å¾æ–‡ä»¶ä½ˆå±€ä¸­åˆªé™¤</li><li><code>visibility: hidden</code> ä¸æœƒå°‡å…ƒç´ æ‰€ç”¢ç”Ÿçš„ box å¾æ–‡ä»¶ä½ˆå±€ä¸­åˆªé™¤</li></ul><p>æ‰€ä»¥ï¼Œå¦‚æœå°‡å…ƒç´ è¨­å®š <code>display: none</code>ï¼Œå°±æœƒå½±éŸ¿åˆ°å…¶ä»–å…ƒç´ çš„ä½ˆå±€ï¼Œè€Œ <code>visibility: hidden</code> å°±ä¸æœƒï¼Œå› ç‚ºå°±åªæ˜¯ã€ŒçœŸæ­£ã€æ„ç¾©ä¸Šçš„éš±è—å…ƒç´ è€Œå·²ã€‚</p><h2 id="visibility-å±¬æ€§ç”¨æ–¼å‹•æ…‹æ•ˆæœ"><a class="header-anchor" href="#visibility-å±¬æ€§ç”¨æ–¼å‹•æ…‹æ•ˆæœ"></a><code>visibility</code> å±¬æ€§ç”¨æ–¼å‹•æ…‹æ•ˆæœ</h2><p>å¯ä»¥ä½¿ç”¨ JavaScript æ§åˆ¶å“ªå€‹å…ƒç´ è¦é¡¯ç¤ºæˆ–æ˜¯éš±è—ã€‚ä¸‹é¢æ˜¯ <code>visibility</code> å±¬æ€§çš„å‹•æ…‹æ•ˆæœç¯„ä¾‹ï¼š</p><p>Demoï¼š<a href="https://codepen.io/titangene/pen/dyyGeOo" target="_blank" rel="noopener">Codepen é€£çµ</a></p><p><img src="../images/css-visibility/dynamic-visibility.gif" alt=""></p><iframe height="293" style="width:100%" scrolling="no" title="dynamic visibility" src="https://codepen.io/titangene/embed/dyyGeOo?height=293&theme-id=dark&default-tab=css,result" frameborder="no" allowtransparency="true" allowfullscreen>See the Pen <a href="https://codepen.io/titangene/pen/dyyGeOo" target="_blank" rel="noopener">dynamic visibility</a> by Titangene (<a href="https://codepen.io/titangene" target="_blank" rel="noopener">@titangene</a>) on <a href="https://codepen.io" target="_blank" rel="noopener">CodePen</a>.</iframe><p>åœ¨ä¸€é–‹å§‹é€²å…¥ç¯„ä¾‹é é¢æ™‚ï¼Œ<code>A</code> å…ƒç´ æ˜¯ä½¿ç”¨ <code>visibility</code> çš„é è¨­å€¼ <code>visible</code>ï¼Œè€Œ <code>B</code> å…ƒç´ æ˜¯è¨­å®š <code>visibility: hidden</code> éš±è—å…ƒç´ ã€‚</p><p>åœ¨æ­¤ç¯„ä¾‹ä¸­ï¼Œ<code>A</code> å…ƒç´ å’Œ <code>B</code> å…ƒç´ éƒ½æ˜¯ä½¿ç”¨çµ•å°å®šä½ï¼Œä¸¦è¨­å®šåœ¨ç›¸åŒçš„ä½ç½®ï¼Œæ‰€ä»¥ç•¶è¦é¡¯ç¤ºä¸€å€‹å…ƒç´ ï¼Œä¸¦éš±è—å¦ä¸€å€‹å…ƒç´ æ™‚ï¼Œç•«é¢çš„å‹•æ…‹æ•ˆæœå°±å¾ˆåƒæ˜¯ä¸€å€‹å…ƒç´ æ›¿æ›æˆå¦ä¸€å€‹å…ƒç´ ã€‚CSS æ¨£å¼å¦‚ä¸‹ï¼š</p><figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><code class="hljs css"><span class="hljs-selector-class">.box</span> &#123;<br>  <span class="hljs-attribute">position</span>: absolute;<br>  <span class="hljs-attribute">top</span>: <span class="hljs-number">50px</span>;<br>  <span class="hljs-attribute">left</span>: <span class="hljs-number">10px</span>;<br>&#125;<br></code></pre></td></tr></table></figure><p>ç¯„ä¾‹ä¸­æœ‰å…©å€‹æŒ‰éˆ•ï¼š</p><ul><li>é»æ“Š A æŒ‰éˆ•æœƒé¡¯ç¤º <code>A</code> å…ƒç´  (ä¹Ÿå°±æ˜¯é¡¯ç¤º â€œName: Aâ€ )ï¼Œä¸¦éš±è— <code>B</code> å…ƒç´  (ä¹Ÿå°±æ˜¯éš±è— â€œName: Bâ€)</li><li>é»æ“Š B æŒ‰éˆ•æœƒé¡¯ç¤º <code>B</code> å…ƒç´  (ä¹Ÿå°±æ˜¯é¡¯ç¤º â€œName: Bâ€ )ï¼Œä¸¦éš±è— <code>A</code> å…ƒç´  (ä¹Ÿå°±æ˜¯éš±è— â€œName: Aâ€)</li></ul><p>é¡¯ç¤ºå…ƒç´ å…¶å¯¦å°±æ˜¯å°‡å…ƒç´ è¨­å®šæˆ <code>visibility: visible</code>ï¼Œåœ¨ JavaScript å¯ä»¥ä½¿ç”¨ä¸‹é¢ç¨‹å¼ç¢¼ä¾†è¨­å®šï¼š</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs javascript">element.style.visibility = <span class="hljs-string">'visible'</span><br></code></pre></td></tr></table></figure><p>éš±è—å…ƒç´ å‰‡æ˜¯å…ƒç´ è¨­å®šæˆ <code>visibility: hidden</code>ï¼Œåœ¨ JavaScript å¯ä»¥ä½¿ç”¨ä¸‹é¢ç¨‹å¼ç¢¼ä¾†è¨­å®šï¼š</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs javascript">element.style.visibility = <span class="hljs-string">'hidden'</span><br></code></pre></td></tr></table></figure><p>é€™æ¨£å°±å¯ä»¥å¯¦ä½œå‡º <code>A</code> å’Œ <code>B</code> å…ƒç´ åˆ‡æ›çš„å‹•æ…‹æ•ˆæœã€‚</p><p>æ­¤ç¯„ä¾‹çš„å®Œæ•´åŸå§‹ç¢¼å¦‚ä¸‹ï¼š</p><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><code class="hljs html"><span class="hljs-tag">&lt;<span class="hljs-name">div</span>&gt;</span><br>  <span class="hljs-tag">&lt;<span class="hljs-name">span</span>&gt;</span>choose one:<span class="hljs-tag">&lt;/<span class="hljs-name">span</span>&gt;</span><br>  <span class="hljs-tag">&lt;<span class="hljs-name">button</span> <span class="hljs-attr">class</span>=<span class="hljs-string">"buttonA"</span>&gt;</span>A<span class="hljs-tag">&lt;/<span class="hljs-name">button</span>&gt;</span><br>  <span class="hljs-tag">&lt;<span class="hljs-name">button</span> <span class="hljs-attr">class</span>=<span class="hljs-string">"buttonB"</span>&gt;</span>B<span class="hljs-tag">&lt;/<span class="hljs-name">button</span>&gt;</span><br><span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span><br><span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">id</span>=<span class="hljs-string">"A"</span> <span class="hljs-attr">class</span>=<span class="hljs-string">"box"</span>&gt;</span>Name: A<span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span><br><span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">id</span>=<span class="hljs-string">"B"</span> <span class="hljs-attr">class</span>=<span class="hljs-string">"box"</span>&gt;</span>Name: B<span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span><br></code></pre></td></tr></table></figure><figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><code class="hljs css"><span class="hljs-selector-tag">div</span>, <span class="hljs-selector-tag">button</span> &#123; <span class="hljs-attribute">font-size</span>: <span class="hljs-number">20px</span> &#125;<br><span class="hljs-selector-class">.box</span> &#123;<br>  <span class="hljs-attribute">position</span>: absolute;<br>  <span class="hljs-attribute">top</span>: <span class="hljs-number">50px</span>;<br>  <span class="hljs-attribute">left</span>: <span class="hljs-number">10px</span>;<br>&#125;<br><span class="hljs-selector-id">#B</span> &#123; <span class="hljs-attribute">visibility</span>: hidden; &#125;<br></code></pre></td></tr></table></figure><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><code class="hljs javascript"><span class="hljs-keyword">var</span> buttonA = <span class="hljs-built_in">document</span>.querySelector(<span class="hljs-string">'.buttonA'</span>);<br><span class="hljs-keyword">var</span> buttonB = <span class="hljs-built_in">document</span>.querySelector(<span class="hljs-string">'.buttonB'</span>);<br><br><span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">show</span>(<span class="hljs-params">elementIdName</span>) </span>&#123;<br>  <span class="hljs-keyword">var</span> element = <span class="hljs-built_in">document</span>.getElementById(elementIdName);<br>  element.style.visibility = <span class="hljs-string">'visible'</span>;<br>&#125;<br><span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">hide</span>(<span class="hljs-params">elementIdName</span>) </span>&#123;<br>  <span class="hljs-keyword">var</span> element = <span class="hljs-built_in">document</span>.getElementById(elementIdName);<br>  element.style.visibility = <span class="hljs-string">'hidden'</span>;<br>&#125;<br><br>buttonA.addEventListener(<span class="hljs-string">'click'</span>, <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"></span>) </span>&#123;<br>  show(<span class="hljs-string">'A'</span>);<br>  hide(<span class="hljs-string">'B'</span>);<br>&#125;);<br>buttonB.addEventListener(<span class="hljs-string">'click'</span>, <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"></span>) </span>&#123;<br>  show(<span class="hljs-string">'B'</span>);<br>  hide(<span class="hljs-string">'A'</span>);<br>&#125;);<br></code></pre></td></tr></table></figure><blockquote><p>JavaScript è·‘éŒ¯æ£šå•¦ XD</p></blockquote><p>è³‡æ–™ä¾†æºï¼š</p><ul><li><a href="https://www.w3.org/TR/CSS22/visufx.html#visibility" target="_blank" rel="noopener">CSS 2.2 - 11.2. Visibility: the <code>visibility</code> property</a></li><li><a href="https://www.w3.org/TR/CSS22/tables.html#dynamic-effects" target="_blank" rel="noopener">CSS 2.2 - 17.5.5. Dynamic row and column effects</a></li><li><a href="https://developer.mozilla.org/en-US/docs/Web/CSS/visibility" target="_blank" rel="noopener"><code>visibility</code> - CSS: Cascading Style Sheets | MDN</a></li></ul>]]></content>
    
    <summary type="html">
    
      &lt;p&gt;&lt;img src=&quot;../images/cover/css.png&quot; alt=&quot;&quot;&gt;&lt;/p&gt;&lt;p&gt;æœ¬ç¯‡å°‡ä»‹ç´¹ CSS çš„ &lt;code&gt;visibility&lt;/code&gt; å±¬æ€§ã€‚&lt;/p&gt;
    
    </summary>
    
    
      <category term="CSS" scheme="https://titangene.github.io/categories/css/"/>
    
    
      <category term="IT éµäººè³½" scheme="https://titangene.github.io/tags/it-%E9%90%B5%E4%BA%BA%E8%B3%BD/"/>
    
  </entry>
  
  <entry>
    <title>é‡æ–°èªè­˜ CSS - overflow</title>
    <link href="https://titangene.github.io/article/css-overflow.html"/>
    <id>https://titangene.github.io/article/css-overflow.html</id>
    <published>2019-10-12T13:20:42.000Z</published>
    <updated>2020-02-09T14:58:18.000Z</updated>
    
    <content type="html"><![CDATA[<p><img src="../images/cover/css.png" alt=""></p><p>æœ¬ç¯‡å°‡ä»‹ç´¹ CSS çš„ <code>overflow</code> å±¬æ€§ã€‚</p><a id="more"></a><h2 id="å‰è¨€"><a class="header-anchor" href="#å‰è¨€"></a>å‰è¨€</h2><blockquote><p>ã€Œé‡æ–°èªè­˜ CSSã€é€™å€‹ç³»åˆ—åç¨±çš„ç”±ä¾†å°±å¦‚å…¶åï¼Œæˆ‘æƒ³è¦é‡æ–°èªè­˜å®ƒã€‚é›–ç„¶ä»¥å‰å°±æœ‰å­¸é CSSï¼Œä½†é€™æ¬¡æƒ³å¾ CSS Spec ä¸­å­¸åˆ°æœ€åŸå§‹çš„å®šç¾©å’Œå…§å®¹ï¼Œæ›´åŠ äº†è§£ CSS çš„åŸç†ï¼Œè®“æˆ‘åœ¨åˆ‡ç‰ˆçš„æ™‚å€™å¯ä»¥æ›´åŠ ç¢ºå®šè‡ªå·±åœ¨åšä»€éº¼ï¼Œæˆ‘è¸©åˆ°çš„é›·åªæ˜¯å› ç‚ºæˆ‘ä¸å¤ äº†è§£å®ƒæ‰æœƒç‚¸é–‹ã€‚</p><p>åœ¨é€™ 30 å¤©çš„å…§å®¹ä¸­ï¼Œæœƒå°‡ Spec å…§çœ‹åˆ°çš„è³‡æ–™æ•´ç†æˆé€™å€‹ç³»åˆ—ï¼Œä¹Ÿå¸Œæœ›æ­£åœ¨å­¸ CSS çš„å„ä½å¯ä»¥æ›´åŠ äº†è§£å®ƒã€‚å¦å¤–æˆ‘ä¹ŸæœƒåŒæ™‚å°‡æ–‡ç« ç™¼è‡³æˆ‘çš„ Blogï¼Œå¦‚æœæƒ³ç›´æ¥çœ‹æ–‡å…§çš„ç¨‹å¼ç¢¼ Demo ç•«é¢ï¼Œå¯ä»¥åˆ°æˆ‘çš„ Blog ä¾†çœ‹ ğŸ˜ƒã€‚</p><p>æœ¬æ–‡åŒæ­¥ç™¼è¡¨æ–¼ iT é‚¦å¹«å¿™ï¼š<a href="https://ithelp.ithome.com.tw/articles/10227474" target="_blank" rel="noopener">é‡æ–°èªè­˜ CSS - overflow</a></p><p>ã€Œé‡æ–°èªè­˜ CSSã€ç³»åˆ—æ–‡ç« ç™¼æ–‡æ–¼ï¼š</p><ul><li><a href="https://ithelp.ithome.com.tw/users/20117586/ironman/2617" target="_blank" rel="noopener">iT é‚¦å¹«å¿™</a></li><li><a href="https://titangene.github.io/tags/it-%E9%90%B5%E4%BA%BA%E8%B3%BD/">Titangene Blog</a></li></ul></blockquote><h2 id="overflow-çš„æƒ…å¢ƒ"><a class="header-anchor" href="#overflow-çš„æƒ…å¢ƒ"></a>overflow çš„æƒ…å¢ƒ</h2><p>é€šå¸¸ block box çš„å…§å®¹åƒ…é™æ–¼ box çš„ content edgeã€‚åœ¨æŸäº›æƒ…æ³ä¸‹ï¼Œbox å¯èƒ½æœƒ overflow (æº¢å‡º)ï¼Œä»£è¡¨ box çš„éƒ¨åˆ†æˆ–å…¨éƒ¨å…§å®¹éƒ½ä½æ–¼ box çš„å¤–é¢ï¼Œä¾‹å¦‚ï¼š</p><ul><li>ä¸€è¡Œæ–‡å­—ä¸æ›è¡Œï¼Œå°è‡´ line box æ¯” block box é‚„è¦å¯¬</li><li>åœ¨ containing block è£¡é¢çš„ block-level box çš„å¯¬åº¦æ¯” containing block é‚„å¯¬ (ä¹Ÿå°±æ˜¯ç•¶å…ƒç´ çš„ <code>width</code> å±¬æ€§å€¼è¨­å®šå¤§æ–¼ containing block çš„å¯¬åº¦æ™‚æœƒç™¼ç”Ÿ)</li><li>å…ƒç´ è¨­å®š <code>height</code> å±¬æ€§å°‡ containing block çš„é«˜åº¦è¨­å®šæˆå°æ–¼å…ƒç´ çš„å…§å®¹é«˜åº¦ (ä¹Ÿå°±æ˜¯å…ƒç´ å…§å®¹çš„é«˜åº¦å¤§æ–¼ containing block çš„é«˜åº¦ï¼Œcontaining block çš„é«˜åº¦ç”± <code>height</code> å±¬æ€§æ±ºå®šï¼Œè€Œä¸æ˜¯å…§å®¹é«˜åº¦æ±ºå®š)</li><li>descendant box è¨­å®š <code>position: absolute</code> æ™‚è¶…å‡º containing block</li><li>descendant box å°‡ <code>margin</code> è¨­ç‚ºè² å€¼æ™‚è¶…å‡º containing block</li><li>è¨­å®š <code>text-indent</code> å±¬æ€§å°è‡´ç¬¬ä¸€è¡Œ text ç¸®æ’è¶…å‡º containing block</li></ul><p>ä¸‹é¢æ ¹æ“šä¸Šé¢é€™å¹¾å€‹ç‹€æ³åˆ†åˆ¥èˆ‰ä¾‹ï¼Œå¦‚ä»¥ä¸‹ç¯„ä¾‹ï¼š</p><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br></pre></td><td class="code"><pre><code class="hljs html"><span class="hljs-tag">&lt;<span class="hljs-name">h3</span>&gt;</span>ä¸€è¡Œæ–‡å­—ä¸æ›è¡Œ<span class="hljs-tag">&lt;/<span class="hljs-name">h3</span>&gt;</span><br><span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">class</span>=<span class="hljs-string">"containing-block"</span>&gt;</span><br>  <span class="hljs-tag">&lt;<span class="hljs-name">span</span> <span class="hljs-attr">class</span>=<span class="hljs-string">"inner not-wrap"</span>&gt;</span>Lorem ipsum dolor sit, amet consectetur elit.<span class="hljs-tag">&lt;/<span class="hljs-name">span</span>&gt;</span><br><span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span><br><br><span class="hljs-tag">&lt;<span class="hljs-name">h3</span>&gt;</span>è£¡é¢çš„ block-level box å¤ªå¯¬<span class="hljs-tag">&lt;/<span class="hljs-name">h3</span>&gt;</span><br><span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">class</span>=<span class="hljs-string">"containing-block"</span>&gt;</span><br>  <span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">class</span>=<span class="hljs-string">"inner box-too-wide"</span>&gt;</span>block-level box is too wide<span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span><br><span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span><br><br><span class="hljs-tag">&lt;<span class="hljs-name">h3</span>&gt;</span>å…§å®¹å¤ªé«˜<span class="hljs-tag">&lt;/<span class="hljs-name">h3</span>&gt;</span><br><span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">class</span>=<span class="hljs-string">"containing-block"</span>&gt;</span><br>  <span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">class</span>=<span class="hljs-string">"inner height-exceeds"</span>&gt;</span>element's height exceeds<span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span><br><span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span><br><br><span class="hljs-tag">&lt;<span class="hljs-name">h3</span>&gt;</span>çµ•å°å®šä½<span class="hljs-tag">&lt;/<span class="hljs-name">h3</span>&gt;</span><br><span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">class</span>=<span class="hljs-string">"containing-block"</span>&gt;</span><br>  <span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">class</span>=<span class="hljs-string">"inner absolute"</span>&gt;</span>absolute<span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span><br><span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span><br><br><span class="hljs-tag">&lt;<span class="hljs-name">h3</span>&gt;</span>margin è¨­ç‚ºè² å€¼<span class="hljs-tag">&lt;/<span class="hljs-name">h3</span>&gt;</span><br><span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">class</span>=<span class="hljs-string">"containing-block"</span>&gt;</span><br>  <span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">class</span>=<span class="hljs-string">"inner negative-margins"</span>&gt;</span>negative margins<span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span><br><span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span><br><br><span class="hljs-tag">&lt;<span class="hljs-name">h3</span>&gt;</span>text-indent å±¬æ€§è®“ç¬¬ä¸€è¡Œ text ç¸®æ’è¶…å‡º<span class="hljs-tag">&lt;/<span class="hljs-name">h3</span>&gt;</span><br><span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">class</span>=<span class="hljs-string">"containing-block"</span>&gt;</span><br>  <span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">class</span>=<span class="hljs-string">"inner text-indent"</span>&gt;</span>'text-indent' property<span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span><br><span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span><br></code></pre></td></tr></table></figure><figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br></pre></td><td class="code"><pre><code class="hljs css"><span class="hljs-selector-class">.containing-block</span> &#123;<br>  <span class="hljs-attribute">width</span>: <span class="hljs-number">200px</span>;<br>  <span class="hljs-attribute">height</span>: <span class="hljs-number">40px</span>;<br>  <span class="hljs-attribute">outline</span>: <span class="hljs-number">2px</span> solid;<br>  <span class="hljs-attribute">background-color</span>: lightgray;<br>&#125;<br><span class="hljs-selector-class">.inner</span> &#123;<br>  <span class="hljs-attribute">background-color</span>: <span class="hljs-number">#8bf</span>;<br>&#125;<br><span class="hljs-selector-class">.not-wrap</span> &#123;<br>  <span class="hljs-attribute">white-space</span>: nowrap;<br>&#125;<br><span class="hljs-selector-class">.box-too-wide</span> &#123;<br>  <span class="hljs-attribute">width</span>: <span class="hljs-number">250px</span>;<br>  <span class="hljs-attribute">height</span>: <span class="hljs-number">30px</span>;<br>&#125;<br><span class="hljs-selector-class">.height-exceeds</span> &#123;<br>  <span class="hljs-attribute">height</span>: <span class="hljs-number">60px</span>;<br>&#125;<br><span class="hljs-selector-class">.absolute</span> &#123;<br>  <span class="hljs-attribute">width</span>: <span class="hljs-number">60px</span>;<br>  <span class="hljs-attribute">height</span>: <span class="hljs-number">30px</span>;<br>  <span class="hljs-attribute">position</span>: absolute;<br>  <span class="hljs-attribute">left</span>: <span class="hljs-number">190px</span>;<br>&#125;<br><span class="hljs-selector-class">.negative-margins</span> &#123;<br>  <span class="hljs-attribute">margin-right</span>: -<span class="hljs-number">50px</span>;<br>&#125;<br><span class="hljs-selector-class">.text-indent</span> &#123;<br>  <span class="hljs-attribute">text-indent</span>: <span class="hljs-number">11.5rem</span>;<br>&#125;<br></code></pre></td></tr></table></figure><p>Demoï¼š<a href="https://codepen.io/titangene/pen/zYYrZOe" target="_blank" rel="noopener">Codepen é€£çµ</a></p><p><img src="../images/css-overflow/2019-10-12-20-31-01.png" alt=""></p><iframe height="731" style="width:100%" scrolling="no" title="overflow æƒ…å¢ƒ" src="https://codepen.io/titangene/embed/zYYrZOe?height=731&theme-id=dark&default-tab=css,result" frameborder="no" allowtransparency="true" allowfullscreen>See the Pen <a href="https://codepen.io/titangene/pen/zYYrZOe" target="_blank" rel="noopener">overflow æƒ…å¢ƒ</a> by Titangene (<a href="https://codepen.io/titangene" target="_blank" rel="noopener">@titangene</a>) on <a href="https://codepen.io" target="_blank" rel="noopener">CodePen</a>.</iframe><h2 id="overflow-å±¬æ€§"><a class="header-anchor" href="#overflow-å±¬æ€§"></a><code>overflow</code> å±¬æ€§</h2><p>ä¸‹é¢æ˜¯ <code>overflow</code> å±¬æ€§çš„å®šç¾©è¡¨ï¼š</p><p><img src="../images/css-overflow/2019-10-12-20-37-09.png" alt=""></p><p>æ­¤å±¬æ€§æŒ‡å®š block container å…ƒç´ çš„å…§å®¹ overflow å…ƒç´  box æ™‚æ˜¯å¦è¢«è£åˆ‡ã€‚å®ƒæœƒå½±éŸ¿æ‰€æœ‰å…ƒç´ å…§å®¹çš„è£åˆ‡ï¼Œä½†å…¶ containing block æ˜¯è©²å…ƒç´ çš„ viewport æˆ– ancestor çš„ä»»ä½• descendant å…ƒç´  (åŠå…¶å„è‡ªçš„å…§å®¹å’Œ descendant) é™¤å¤–ã€‚å€¼å…·æœ‰ä»¥ä¸‹å«ç¾©ï¼š</p><ul><li><code>visible</code>ï¼šå…§å®¹æ²’æœ‰è¢«è£åˆ‡ï¼Œä¹Ÿå°±æ˜¯å¯ä»¥åœ¨ block box å¤–å‘ˆç¾</li><li><code>hidden</code>ï¼šå…§å®¹è¢«è£åˆ‡ï¼Œä¸¦ä¸”ä¸æ‡‰æä¾›æ²å‹• UI ä¾†æŸ¥çœ‹è£åˆ‡å€åŸŸä¹‹å¤–çš„å…§å®¹</li><li><code>scroll</code>ï¼šå…§å®¹å·²è¢«è£åˆ‡ï¼Œä¸¦ä¸”å¦‚æœ UA ä½¿ç”¨è¢å¹•ä¸Šå¯è¦‹çš„æ²å‹•æ©Ÿåˆ¶ (ä¾‹å¦‚ï¼šscroll bar æˆ– panner)ï¼Œå‰‡ç„¡è«–è©²å…§å®¹æ˜¯å¦æœ‰å…§å®¹ï¼Œéƒ½æ‡‰åœ¨ box ä¸Šé¡¯ç¤ºè©²æ©Ÿåˆ¶è¢«è£åˆ‡ã€‚é€™é¿å…äº†æ»¾å‹•æ¢åœ¨å‹•æ…‹ç’°å¢ƒä¸­å‡ºç¾å’Œæ¶ˆå¤±çš„ä»»ä½•å•é¡Œã€‚æŒ‡å®šæ­¤å€¼ä¸”ç›®æ¨™ medium ç‚º <code>print</code> æ™‚ï¼Œå¯èƒ½æœƒåˆ—å°å‡º overflow çš„å…§å®¹ã€‚åœ¨ table box ä¸Šä½¿ç”¨æ™‚ï¼Œæ­¤å€¼èˆ‡ <code>visible</code> å…·æœ‰ç›¸åŒçš„å«ç¾©</li><li><code>auto</code>ï¼šæ­¤å€¼çš„è¡Œç‚ºå–æ±ºæ–¼ UAï¼Œä½†æ‡‰å°è‡´ç‚º overflow çš„ box æä¾›æ²å‹•æ©Ÿåˆ¶ã€‚åœ¨ table box ä¸Šä½¿ç”¨æ™‚ï¼Œæ­¤å€¼èˆ‡ <code>visible</code> å…·æœ‰ç›¸åŒçš„å«ç¾©</li></ul><p>è³‡æ–™ä¾†æºï¼š</p><ul><li><a href="https://ithelp.ithome.com.tw/articles/10224932" target="_blank" rel="noopener">è©±èªª Overflow æ˜¯ä»€éº¼å‘¢ï¼Ÿ - æ¯å¤©ä¾†é» CSS Specification - iT é‚¦å¹«å¿™</a></li><li><a href="https://www.w3.org/TR/CSS22/visufx.html" target="_blank" rel="noopener">CSS 2.2 - 11. Visual effects</a></li></ul>]]></content>
    
    <summary type="html">
    
      &lt;p&gt;&lt;img src=&quot;../images/cover/css.png&quot; alt=&quot;&quot;&gt;&lt;/p&gt;&lt;p&gt;æœ¬ç¯‡å°‡ä»‹ç´¹ CSS çš„ &lt;code&gt;overflow&lt;/code&gt; å±¬æ€§ã€‚&lt;/p&gt;
    
    </summary>
    
    
      <category term="CSS" scheme="https://titangene.github.io/categories/css/"/>
    
    
      <category term="IT éµäººè³½" scheme="https://titangene.github.io/tags/it-%E9%90%B5%E4%BA%BA%E8%B3%BD/"/>
    
  </entry>
  
</feed>
