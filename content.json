{"meta":{"title":"Titangene Blog","subtitle":null,"description":"åˆ©ç”¨ blog ç´€éŒ„å­¸ç¿’æ­·ç¨‹","author":"Titangene","url":"https://titangene.github.io"},"pages":[{"title":"Categories","date":"2018-10-22T14:40:00.000Z","updated":"2018-10-22T18:20:46.635Z","comments":false,"path":"categories/index.html","permalink":"https://titangene.github.io/categories/index.html","excerpt":"","text":""},{"title":"404 Not Found","date":"2018-10-22T14:40:00.000Z","updated":"2018-10-22T18:21:46.626Z","comments":false,"path":"error/index.html","permalink":"https://titangene.github.io/error/index.html","excerpt":"","text":"This page does not exist, click here to go back to home page.é é¢ä¸å­˜åœ¨ï¼Œé»æ­¤å›åˆ°é¦–é ã€‚"},{"title":"Tags","date":"2018-10-22T14:40:00.000Z","updated":"2018-10-22T18:22:54.477Z","comments":false,"path":"tags/index.html","permalink":"https://titangene.github.io/tags/index.html","excerpt":"","text":""}],"posts":[{"title":"é‡æ–°èªè­˜ CSS - CSS Selector (4)","slug":"css-selector-4","date":"2019-09-20T08:20:52.000Z","updated":"2019-09-21T00:27:26.967Z","comments":true,"path":"article/css-selector-4.html","link":"","permalink":"https://titangene.github.io/article/css-selector-4.html","excerpt":"Selector (é¸æ“‡å™¨) å¯ç”¨ä¾†é¸æ“‡ HTML å’Œ XML æ–‡ä»¶ä¸­çš„ç¯€é»ï¼Œä¸¦å°‡æ¨£å¼å±¬æ€§ç¶å®šåˆ°æ–‡ä»¶ (HTML å’Œ XML) ä¸­çš„å…ƒç´ ä¸Šã€‚ç•¶é¸æ“‡å™¨èˆ‡æŸå…ƒç´  match çš„æ™‚å€™ï¼Œå°±å¯ä»¥å°é¸åˆ°çš„å…ƒç´ é€²è¡Œ CSS æ¨£å¼è¨­å®šã€‚æœ¬ç¯‡æœƒä»‹ç´¹ structural pseudo-class (å½é¡)ï¼ŒåŒ…æ‹¬ :rootã€nth-childã€nth-of-type â€¦ç­‰ selectorã€‚","text":"Selector (é¸æ“‡å™¨) å¯ç”¨ä¾†é¸æ“‡ HTML å’Œ XML æ–‡ä»¶ä¸­çš„ç¯€é»ï¼Œä¸¦å°‡æ¨£å¼å±¬æ€§ç¶å®šåˆ°æ–‡ä»¶ (HTML å’Œ XML) ä¸­çš„å…ƒç´ ä¸Šã€‚ç•¶é¸æ“‡å™¨èˆ‡æŸå…ƒç´  match çš„æ™‚å€™ï¼Œå°±å¯ä»¥å°é¸åˆ°çš„å…ƒç´ é€²è¡Œ CSS æ¨£å¼è¨­å®šã€‚æœ¬ç¯‡æœƒä»‹ç´¹ structural pseudo-class (å½é¡)ï¼ŒåŒ…æ‹¬ :rootã€nth-childã€nth-of-type â€¦ç­‰ selectorã€‚å‰è¨€ã€Œé‡æ–°èªè­˜ CSSã€é€™å€‹ç³»åˆ—åç¨±çš„ç”±ä¾†å°±å¦‚å…¶åï¼Œæˆ‘æƒ³è¦é‡æ–°èªè­˜å®ƒã€‚é›–ç„¶ä»¥å‰å°±æœ‰å­¸é CSSï¼Œä½†é€™æ¬¡æƒ³å¾ CSS Spec ä¸­å­¸åˆ°æœ€åŸå§‹çš„å®šç¾©å’Œå…§å®¹ï¼Œæ›´åŠ äº†è§£ CSS çš„åŸç†ï¼Œè®“æˆ‘åœ¨åˆ‡ç‰ˆçš„æ™‚å€™å¯ä»¥æ›´åŠ ç¢ºå®šè‡ªå·±åœ¨åšä»€éº¼ï¼Œæˆ‘è¸©åˆ°çš„é›·åªæ˜¯å› ç‚ºæˆ‘ä¸å¤ äº†è§£å®ƒæ‰æœƒç‚¸é–‹ã€‚åœ¨é€™ 30 å¤©çš„å…§å®¹ä¸­ï¼Œæœƒå°‡ Spec å…§çœ‹åˆ°çš„è³‡æ–™æ•´ç†æˆé€™å€‹ç³»åˆ—ï¼Œä¹Ÿå¸Œæœ›æ­£åœ¨å­¸ CSS çš„å„ä½å¯ä»¥æ›´åŠ äº†è§£å®ƒã€‚å¦å¤–æˆ‘ä¹ŸæœƒåŒæ™‚å°‡æ–‡ç« ç™¼è‡³æˆ‘çš„ Blogï¼Œå¦‚æœæƒ³ç›´æ¥çœ‹æ–‡å…§çš„ç¨‹å¼ç¢¼ Demo ç•«é¢ï¼Œå¯ä»¥åˆ°æˆ‘çš„ Blog ä¾†çœ‹ ğŸ˜ƒã€‚æœ¬æ–‡åŒæ­¥ç™¼è¡¨æ–¼ iT é‚¦å¹«å¿™ï¼šé‡æ–°èªè­˜ CSS - CSS Selector (4)ã€Œé‡æ–°èªè­˜ CSSã€ç³»åˆ—æ–‡ç« ç™¼æ–‡æ–¼ï¼šiT é‚¦å¹«å¿™Titangene BlogStructural pseudo-classesç•¶ä½¿ç”¨ structural pseudo-class æ™‚ï¼Œå®ƒæœƒè¨ˆç®—å„ sibling å…ƒç´ çš„ä½ç½®ï¼šä¸è¨ˆç®— standalone (ç¨ç«‹) text å’Œå…¶ä»–éå…ƒç´ ç¯€é»index ç·¨è™Ÿå¾ 1 é–‹å§‹åªé©ç”¨æ–¼ document tree ä¸­çš„å…ƒç´ ï¼Œä¸æœƒ match åˆ° pseudo-element:root pseudo-class:root pseudo-class ä»£è¡¨æ–‡ä»¶çš„ root å…ƒç´ åœ¨ DOM æ–‡ä»¶ä¸­ï¼Œ:root pseudo-class èˆ‡ Document ç‰©ä»¶çš„ root å…ƒç´ æœƒ matchåœ¨ HTML ä¸­ï¼Œroot å…ƒç´ å°±æ˜¯ &lt;html&gt; å…ƒç´ Child-indexed Pseudo-classesæ­¤ pseudo-class æœƒæ ¹æ“š inclusive sibling ä¹‹é–“çš„ index ä¾†é¸æ“‡å…ƒç´ ã€‚é¸æ“‡ index ç‚ºå¤šå°‘çš„ sibling (å…„å¼Ÿï¼ŒåŒå±¤) å…ƒç´ ï¼Œå…ƒç´ çš„ç¬¬ä¸€å€‹å­å…ƒç´ çš„ index æ˜¯ 1ã€‚åªæœ‰é–‹é ­ç‚º nth çš„ Child-indexed Pseudo-classes å’Œ Typed Child-indexed Pseudo-classes éƒ½å¯ä»¥åœ¨ () æ‹¬è™Ÿè£¡é¢å¯ä»¥ä½¿ç”¨ä¸‹é¢é€™å¹¾ç¨®å€¼ï¼šan + bï¼šn å¯ä»¥æ˜¯ä»»ä½•â€‹â€‹æ­£æ•´æ•¸æˆ– 0 çš„æ•¸å€¼a å’Œ b çš„å€¼å¿…é ˆæ˜¯æ•´æ•¸ (æ­£æ•¸ã€è² æ•¸æˆ– 0)ç•¶ a å’Œ b éƒ½å¤§æ–¼ 0 æ™‚ï¼Œå¯ä»¥æ›´å¥½çš„å°‡ sibling å…ƒç´ åŠƒåˆ†ç‚ºå…ƒç´ ç¾¤çµ„ (groups of a elements)ï¼Œä¸¦é¸æ“‡æ¯å€‹ç¾¤çµ„çš„ç¬¬ b å€‹å…ƒç´ ï¼Œ ä¾‹å¦‚ï¼š3n + 1 å¯ä»¥ match åˆ°ç¬¬ 1ã€4ã€7â€¦ç­‰å­å…ƒç´ 0n + 5 ç­‰åŒæ–¼ 5ç•¶ a ç‚ºè² å€¼ï¼Œä¸” n &gt;= 0 æ™‚ï¼Œåªæœ‰ an + b ç‚ºæ­£å€¼æ‰å¯ä»¥ä»£è¡¨ document tree ä¸­çš„å…ƒç´ oddï¼šå¥‡æ•¸çš„æ‰€æœ‰ sibling å…ƒç´ ï¼Œç­‰åŒæ–¼ 2n + 1evenå¶æ•¸çš„æ‰€æœ‰ sibling å…ƒç´ ï¼Œç­‰åŒæ–¼ 2nèªæ³•è©³æƒ…å¯åƒé–± Selectors Level 3 çš„ã€Œ6.6.5.2. :nth-child() pseudo-classã€ç« ç¯€éƒ¨ä»½ã€‚Child-indexed Pseudo-classes æœ‰ä¸‹é¢é€™äº› selectorï¼š:nth-child(an+b)ï¼šé¸æ“‡æŒ‡å®š index çš„æ‰€æœ‰ sibling å…ƒç´ ï¼Œå¾ç¬¬ä¸€å€‹ sibling å…ƒç´ é–‹å§‹æ•¸:nth-last-child(an+b)ï¼šé¸æ“‡æŒ‡å®š index çš„æ‰€æœ‰ sibling å…ƒç´ ï¼Œå¾æœ€å¾Œä¸€å€‹ sibling å…ƒç´ é–‹å§‹æ•¸:first-child()ï¼šé¸æ“‡ sibling åˆ—è¡¨ä¸­çš„ç¬¬ä¸€å€‹å…ƒç´ ç­‰åŒæ–¼ :nth-child(1):last-child()ï¼šé¸æ“‡ sibling åˆ—è¡¨ä¸­çš„æœ€å¾Œä¸€å€‹å…ƒç´ ç­‰åŒæ–¼ :nth-last-child(1):only-child()ï¼šé¸æ“‡æ²’æœ‰ sibling çš„å…ƒç´ ç­‰åŒæ–¼ :first-child:last-child æˆ– :nth-child(1):nth-last-child(1)ï¼Œä½† specificity è¼ƒä½Typed Child-indexed Pseudo-classesæ­¤ pseudo-class é¡ä¼¼æ–¼ Child Index Pseudo-classesï¼Œä½†æ­¤ pseudo-class æ˜¯åŸºæ–¼ sibling åˆ—è¡¨ä¸­ç›¸åŒ type (tag åç¨±) çš„å…ƒç´ ä¹‹é–“çš„å…ƒç´  index ä¾†è§£æã€‚Typed Child-indexed Pseudo-classes æœ‰ä¸‹é¢é€™äº› selectorï¼š:nth-of-type(an+b)ï¼šé¸æ“‡æŒ‡å®š index çš„æ‰€æœ‰ç›¸åŒ type çš„ sibling å…ƒç´ ï¼Œå¾ç¬¬ä¸€å€‹ sibling å…ƒç´ é–‹å§‹æ•¸:nth-last-of-type(an+b)é¸æ“‡æŒ‡å®š index çš„æ‰€æœ‰ç›¸åŒ type çš„ sibling å…ƒç´ ï¼Œå¾æœ€å¾Œä¸€å€‹ sibling å…ƒç´ é–‹å§‹æ•¸:first-of-type()é¸æ“‡ sibling åˆ—è¡¨ä¸­çš„ç¬¬ä¸€å€‹ç›¸åŒ type çš„å…ƒç´ ç­‰åŒæ–¼ :nth-of-type(1):last-of-type()é¸æ“‡ sibling åˆ—è¡¨ä¸­çš„æœ€å¾Œä¸€å€‹ç›¸åŒ type çš„å…ƒç´ ç­‰åŒæ–¼ :nth-last-of-type(1):only-of-type()é¸æ“‡æ²’æœ‰ç›¸åŒ type çš„ sibling å…ƒç´ ç­‰åŒæ–¼ :first-of-type:last-of-type æˆ– :nth-of-type(1):nth-last-of-type(1)ï¼Œä½† specificity è¼ƒä½:nth-of-type() èˆ‡ :nth-child() çš„å·®ç•°ä¸‹é¢æ˜¯ :nth-of-type() å’Œ :nth-child() çš„ç¯„ä¾‹ï¼š123456789101112131415161718192021222324&lt;ul&gt; &lt;li&gt;1 (1 li)&lt;/li&gt; &lt;li&gt;2 (2 li)&lt;/li&gt; &lt;div&gt;3 (div)&lt;/div&gt; &lt;li&gt;4 (3 li) &lt;ul class=\"nested-list\"&gt; &lt;li&gt;4-1&lt;/li&gt; &lt;li&gt;4-2&lt;/li&gt; &lt;li&gt;4-3&lt;/li&gt; &lt;li&gt;4-4&lt;/li&gt; &lt;li&gt;4-5&lt;/li&gt; &lt;/ul&gt; &lt;/li&gt; &lt;li&gt;5 (4 li)&lt;/li&gt; &lt;li&gt;6 (5 li)&lt;/li&gt;&lt;/ul&gt;&lt;ul&gt; &lt;li&gt;1 (1 li)&lt;/li&gt; &lt;li&gt;2 (2 li)&lt;/li&gt; &lt;div&gt;3 (div)&lt;/div&gt; &lt;li&gt;4 (3 li)&lt;/li&gt; &lt;li&gt;5 (4 li)&lt;/li&gt; &lt;li&gt;6 (5 li)&lt;/li&gt;&lt;/ul&gt;12345678910div &#123; color: olive; &#125;li:nth-of-type(odd) &#123; margin: 2px; outline: 2px solid red;&#125;li:nth-child(odd) &#123; border: 2px solid blue;&#125;é€™å€‹ç¯„ä¾‹æœ‰å…©å€‹ ul å…ƒç´ ï¼Œè£¡é¢å„æœ‰äº”å€‹ li å…ƒç´ ï¼Œè€Œä¸”åœ¨èˆ‡ç¬¬äºŒå€‹ li å…ƒç´ åŒå±¤çš„å¾Œé¢åŠ ä¸Šä¸€å€‹ div å…ƒç´ ï¼Œé€™æ˜¯ç”¨ä¾†é©—è­‰ :nth-of-type() å’Œ :nth-child() çš„å·®ç•°ç”¨çš„ã€‚å¦å¤–ï¼Œåœ¨ç¬¬ä¸€å€‹ ul å…ƒç´ è£¡é¢é‚„æœ‰ä¸€å€‹å·¢ç‹€ &lt;ul class=&quot;nested-list&quot;&gt; å…ƒç´ ï¼Œå®ƒæ”¾åœ¨ç¬¬å››å€‹ li å…ƒç´ è£¡é¢ï¼Œé€™æ˜¯ç”¨ä¾†å·¢ç‹€çš„å…ƒç´ ä¹Ÿå¯ä»¥è¢« selector é¸åˆ°ã€‚æ¯å€‹å…ƒç´ çš„å‰é¢éƒ½æœ‰ä¸€å€‹ç·¨è™Ÿï¼Œä»£è¡¨åœ¨ sibling å…ƒç´ ä¹‹é–“çš„ indexã€‚è€Œå¾Œé¢çš„æ‹¬è™Ÿæ˜¯ç”¨ä¾†å‘Šè¨´ä½ å®ƒæ˜¯ li å…ƒç´ é‚„æ˜¯ div å…ƒç´ ï¼Œå¦‚æœæ˜¯ li å…ƒç´ å°±æœƒè¨»è¨˜æ˜¯ç¬¬å¹¾å€‹ li å…ƒç´ ã€‚ä¾‹å¦‚ï¼š4 (3 li) å°±ä»£è¡¨æ˜¯ç¬¬å››å€‹ sibling å…ƒç´ ï¼Œä¸¦ä¸”æ˜¯ç¬¬ä¸‰å€‹ li å…ƒç´ ã€‚å¯ä»¥çœ‹åˆ°é‚£äº›æœ‰ç´…è‰² outline çš„å…ƒç´ éƒ½æœ‰ match åˆ° li:nth-of-type(odd)ï¼Œå› ç‚ºæ­¤ pseudo-class æ˜¯ä»¥ of-type ç‚ºçµå°¾ï¼Œæ‰€ä»¥æ­¤ selector åªæœƒæ‰¾ç›¸åŒ type çš„ sibling å…ƒç´  (OSï¼šå°±å¾ˆåƒæ˜¯å¿½ç•¥äº† div å…ƒç´ çš„å­˜åœ¨)ã€‚åªè¦æ˜¯å¥‡æ•¸çš„ sibling å…ƒç´ éƒ½æœƒè¢«é¸èµ·ä¾†ï¼Œå¥—ç”¨ç´…è‰²çš„ outline æ¨£å¼ã€‚è€Œé‚£äº›æœ‰è—è‰² border çš„å…ƒç´ éƒ½æœ‰ match åˆ° li:nth-child(odd)ï¼Œå› ç‚ºæ­¤ pseudo-class æ˜¯ä»¥ child ç‚ºçµå°¾ï¼Œæ‰€ä»¥æ­¤ selector æœƒç›´æ¥æ‰¾æ˜¯ li çš„ sibling å…ƒç´ ï¼Œä¸¦ä¸”è¦æ˜¯å¥‡æ•¸çš„ sibling å…ƒç´ ã€‚ä¸éï¼Œç¬¬ä¸‰å€‹ sibling å…ƒç´ æ˜¯ div å…ƒç´ ï¼Œä¸æ˜¯ li å…ƒç´ ï¼Œå› æ­¤ li:nth-child(odd) å°±ä¸æœƒ match åˆ°æ­¤ div å…ƒç´ è€Œå·¢ç‹€ &lt;ul class=&quot;nested-list&quot;&gt; å…ƒç´ è£¡é¢åªæœ‰äº”å€‹ li å…ƒç´ ï¼Œæ²’æœ‰å…¶ä»– type çš„å…ƒç´ ï¼Œæ‰€ä»¥éƒ½æœƒé¸åˆ°å¥‡æ•¸çš„ sibling å…ƒç´  (å› ç‚ºæ²’æœ‰äº‚è·¯çš„å…ƒç´ )ã€‚See the Pen :nth-child &amp; :nth-of-type by Titangene (@titangene) on CodePen.The negation pseudo-class:not(X) æ˜¯ä¸€å€‹å‡½æ•¸ç¬¦è™Ÿï¼Œå¯å°‡ä¸€å€‹ simple selector (ä¸åŒ…æ‹¬ :not(X) æœ¬èº«) ä½œç‚ºåƒæ•¸ã€‚:not(X) ä»£è¡¨ä¸é¸æ“‡ match åˆ° X simple selector çš„å…ƒç´ ã€‚è¨»ï¼šä»¥ä¸‹é€™äº›éƒ½æ˜¯ simple selectorï¼štype selectorï¼šä¾‹å¦‚ divuniversal selectorï¼šä¾‹å¦‚ *attribute selectorï¼šä¾‹å¦‚ div[foo]class selectorï¼šä¾‹å¦‚ .myclassID selectorï¼šä¾‹å¦‚ #myidpseudo-classï¼šä¾‹å¦‚ a:hoverä¸èƒ½å·¢ç‹€ä½¿ç”¨ï¼Œæ‰€ä»¥ :not(:not(...)) æ˜¯ç„¡æ•ˆçš„ã€‚å¦å¤–è«‹æ³¨æ„ï¼Œå› ç‚º pseudo-element ä¸æ˜¯ simple selectorï¼Œæ‰€ä»¥ pseudo-element ä¸æ˜¯ :not() çš„æœ‰æ•ˆåƒæ•¸ã€‚ä¾‹å¦‚ï¼šmatch HTML æ–‡ä»¶ä¸­æ‰€æœ‰æœªè¢«ç¦ç”¨çš„ button å…ƒç´ ï¼š1button:not([disable])è¨»ï¼š[disable] æ˜¯ attribute selectorï¼Œè©³æƒ…è«‹åƒé–±æˆ‘å‰å¹¾å¤©å¯«çš„ã€Œé‡æ–°èªè­˜ CSS - CSS Selector (2)ã€ã€‚match é™¤äº† #titan å…ƒç´ ä¹‹å¤–çš„æ‰€æœ‰å…ƒç´ ï¼š1*:not(#titan)è¨»ï¼š#titan æ˜¯ ID selectorï¼Œè©³æƒ…è«‹åƒé–±æˆ‘å‰å¹¾å¤©å¯«çš„ã€Œé‡æ–°èªè­˜ CSS - CSS Selector (1)ã€ã€‚æœ€å¾Œä»Šå¤©ä»‹ç´¹ä¸€äº› structural pseudo-classï¼Œæ¥ä¸‹ä¾†å¹¾å¤©æœƒæ¥çºŒä»‹ç´¹å…¶ä»– selectorã€‚è³‡æ–™ä¾†æºï¼šCSS 2.2 Specification - SelectorsSelectors Level 3Selectors Level 4","categories":[{"name":"CSS","slug":"css","permalink":"https://titangene.github.io/categories/css/"}],"tags":[{"name":"IT éµäººè³½","slug":"it-éµäººè³½","permalink":"https://titangene.github.io/tags/it-éµäººè³½/"}]},{"title":"é‡æ–°èªè­˜ CSS - CSS Selector (3)","slug":"css-selector-3","date":"2019-09-19T08:20:52.000Z","updated":"2019-09-19T13:42:52.353Z","comments":true,"path":"article/css-selector-3.html","link":"","permalink":"https://titangene.github.io/article/css-selector-3.html","excerpt":"Selector (é¸æ“‡å™¨) å¯ç”¨ä¾†é¸æ“‡ HTML å’Œ XML æ–‡ä»¶ä¸­çš„ç¯€é»ï¼Œä¸¦å°‡æ¨£å¼å±¬æ€§ç¶å®šåˆ°æ–‡ä»¶ (HTML å’Œ XML) ä¸­çš„å…ƒç´ ä¸Šã€‚ç•¶é¸æ“‡å™¨èˆ‡æŸå…ƒç´  match çš„æ™‚å€™ï¼Œå°±å¯ä»¥å°é¸åˆ°çš„å…ƒç´ é€²è¡Œ CSS æ¨£å¼è¨­å®šã€‚æœ¬ç¯‡æœƒä»‹ç´¹ pseudo-class (å½é¡)ã€‚","text":"Selector (é¸æ“‡å™¨) å¯ç”¨ä¾†é¸æ“‡ HTML å’Œ XML æ–‡ä»¶ä¸­çš„ç¯€é»ï¼Œä¸¦å°‡æ¨£å¼å±¬æ€§ç¶å®šåˆ°æ–‡ä»¶ (HTML å’Œ XML) ä¸­çš„å…ƒç´ ä¸Šã€‚ç•¶é¸æ“‡å™¨èˆ‡æŸå…ƒç´  match çš„æ™‚å€™ï¼Œå°±å¯ä»¥å°é¸åˆ°çš„å…ƒç´ é€²è¡Œ CSS æ¨£å¼è¨­å®šã€‚æœ¬ç¯‡æœƒä»‹ç´¹ pseudo-class (å½é¡)ã€‚å‰è¨€ã€Œé‡æ–°èªè­˜ CSSã€é€™å€‹ç³»åˆ—åç¨±çš„ç”±ä¾†å°±å¦‚å…¶åï¼Œæˆ‘æƒ³è¦é‡æ–°èªè­˜å®ƒã€‚é›–ç„¶ä»¥å‰å°±æœ‰å­¸é CSSï¼Œä½†é€™æ¬¡æƒ³å¾ CSS Spec ä¸­å­¸åˆ°æœ€åŸå§‹çš„å®šç¾©å’Œå…§å®¹ï¼Œæ›´åŠ äº†è§£ CSS çš„åŸç†ï¼Œè®“æˆ‘åœ¨åˆ‡ç‰ˆçš„æ™‚å€™å¯ä»¥æ›´åŠ ç¢ºå®šè‡ªå·±åœ¨åšä»€éº¼ï¼Œæˆ‘è¸©åˆ°çš„é›·åªæ˜¯å› ç‚ºæˆ‘ä¸å¤ äº†è§£å®ƒæ‰æœƒç‚¸é–‹ã€‚åœ¨é€™ 30 å¤©çš„å…§å®¹ä¸­ï¼Œæœƒå°‡ Spec å…§çœ‹åˆ°çš„è³‡æ–™æ•´ç†æˆé€™å€‹ç³»åˆ—ï¼Œä¹Ÿå¸Œæœ›æ­£åœ¨å­¸ CSS çš„å„ä½å¯ä»¥æ›´åŠ äº†è§£å®ƒã€‚å¦å¤–æˆ‘ä¹ŸæœƒåŒæ™‚å°‡æ–‡ç« ç™¼è‡³æˆ‘çš„ Blogï¼Œå¦‚æœæƒ³ç›´æ¥çœ‹æ–‡å…§çš„ç¨‹å¼ç¢¼ Demo ç•«é¢ï¼Œå¯ä»¥åˆ°æˆ‘çš„ Blog ä¾†çœ‹ ğŸ˜ƒã€‚æœ¬æ–‡åŒæ­¥ç™¼è¡¨æ–¼ iT é‚¦å¹«å¿™ï¼šé‡æ–°èªè­˜ CSS - CSS Selector (3)ã€Œé‡æ–°èªè­˜ CSSã€ç³»åˆ—æ–‡ç« ç™¼æ–‡æ–¼ï¼šiT é‚¦å¹«å¿™Titangene BlogPseudo-classespseudo-class æ˜¯ä»¥ : ç‚ºé–‹é ­ï¼Œå¾Œé¢æ¥è‘— pseudo-class çš„åç¨±ï¼Œæœ‰äº›æœƒåœ¨å¾Œé¢åŠ ä¸Šæ‹¬è™Ÿ ()ï¼Œä¸¦åœ¨æ‹¬è™Ÿä¹‹é–“åŠ ä¸Šå€¼ã€‚ä¾‹å¦‚ï¼š:nth-child(2)ã€‚æ³¨æ„ï¼špseudo-class å’Œ pseudo-element ä¸ç›¸åŒpseudo-class æ˜¯ä»¥ : ç‚ºé–‹é ­pseudo-element æ˜¯ä»¥ :: ç‚ºé–‹é ­ï¼Œä½†ä¹Ÿå¯ä»¥ä»¥ : ç‚ºé–‹é ­ï¼Œå› ç‚ºåœ¨èˆŠç‰ˆçš„ W3C Spec ä¸­æ²’æœ‰å°‡ pseudo-class å’Œ pseudo-element å€åˆ†æˆ : å’Œ ::ã€‚å¦‚æœä½ å¯« pseudo-element æ˜¯ç”¨ :ï¼Œå¤§éƒ¨ä»½ç€è¦½å™¨ä¹Ÿé‚„æ˜¯æœƒæ”¯æ´é€™ç¨®èªæ³•ã€‚Dynamic pseudo-classesDynamic pseudo-classes ä¸æœƒå‡ºç¾åœ¨ document source æˆ– document tree ä¸­ã€‚Dynamic pseudo-classes åˆåˆ†ç‚ºï¼šlink pseudo-classesï¼š:link å’Œ :visiteduser action pseudo-classesï¼š:hoverã€:active å’Œ :focusThe link pseudo-classesï¼š:link å’Œ :visitedUA (User agentï¼Œå° HTML ä¾†èªªå°±æ˜¯ç€è¦½å™¨) ä»¥ä¸åŒçš„æ–¹å¼ä¾†é¡¯ç¤ºé€£çµæ˜¯å¦å·²è¨ªå•ï¼š:linkï¼šæœªè¨ªå•éçš„é€£çµ:visitedï¼šå·²è¨ªå•éçš„é€£çµä¸éï¼Œéäº†ä¸€æ®µæ™‚é–“ä¹‹å¾Œï¼ŒUA å¯ä»¥å°‡å·²è¨ªå•çš„é€£çµå¾ :visited è®Šå› :link çš„ç‹€æ…‹ã€‚12&lt;h3&gt;&lt;a href=\"https://titangene.github.io\"&gt;Titangene Blog&lt;/a&gt;&lt;/h3&gt;&lt;h3&gt;&lt;a href=\"https://titangene.github.io/article/css-selector-3.html\"&gt;é‡æ–°èªè­˜ CSS - CSS Selector (3)&lt;/a&gt;&lt;/h3&gt;12a:visited &#123; color: red; &#125;a:link &#123; color: green; &#125;Demoï¼šCodepen é€£çµSee the Pen link pseudo-class: :visited &amp; :link by Titangene (@titangene) on CodePen.The user action pseudo-classesï¼š:hoverã€:active å’Œ :focusç”¨æ–¼ response ä½¿ç”¨è€…çš„æ“ä½œï¼š:hoverï¼šç•¶ cursor (æ»‘é¼ æŒ‡æ¨™) hover åœ¨å…ƒç´ ä¸Šæ™‚ï¼Œvisual UA å°±å¯ä»¥æ‡‰ç”¨æ­¤ pseudo-classä¸æ”¯æ´ äº’å‹•å¼ media çš„ UA ä¸ç”¨æ”¯æ´æ­¤ pseudo-class:activeï¼šåœ¨ä½¿ç”¨è€…æŒ‰ä¸‹æ»‘é¼ æŒ‰éˆ•ä¸¦æ”¾é–‹å®ƒä¹‹é–“çš„æ™‚é–“æœƒæ‡‰ç”¨æ­¤ pseudo-classå¦‚æœæ»‘é¼ ä¸Šæœ‰å¤šå€‹æŒ‰éˆ•æ™‚ï¼Œ:active åªé©ç”¨æ–¼ä¸»è¦æˆ–ä¸»è¦ actived çš„æŒ‰éˆ• (é€šå¸¸ç‚ºæ»‘é¼ å·¦éµ) â€¦ç­‰:focusï¼šç•¶å…ƒç´ æœ‰ç„¦é»æ™‚æœƒæ‡‰ç”¨æ­¤ pseudo-classï¼Œä¾‹å¦‚ï¼šæŒ‰éµç›¤çš„ Tab éµæ‰€é¸åˆ°çš„å…ƒç´ 12&lt;h3&gt;&lt;a href=\"https://titangene.github.io\"&gt;Titangene Blog&lt;/a&gt;&lt;/h3&gt;&lt;h3&gt;&lt;a href=\"https://titangene.github.io/article/css-selector-3.html\"&gt;é‡æ–°èªè­˜ CSS - CSS Selector (3)&lt;/a&gt;&lt;/h3&gt;1234a &#123; color: black; &#125;a:hover &#123; color: red; &#125;a:focus &#123; color: gray; &#125;a:active &#123; color: purple; &#125;Demoï¼šCodepen é€£çµSee the Pen user action pseudo-class by Titangene (@titangene) on CodePen.ä¹Ÿå¯ä»¥ä¸€æ¬¡ä½¿ç”¨å¤šå€‹ dynamic pseudo-classï¼Œå¦‚ä¸‹ç¯„ä¾‹ï¼šåŒæ™‚æœ‰ :focus å’Œ :hover çš„ç‹€æ…‹åŒæ™‚æœ‰ :link å’Œ :active çš„ç‹€æ…‹12a:focus:hover &#123; color: teal; &#125;a:link:active &#123; color: fuchsia; &#125;The target pseudo-classesï¼š:targetæœ‰äº› URI çš„æœ€å¾Œæœƒä»¥ # (number sign) ç‚ºçµå°¾ï¼Œå¾Œé¢æœƒæ¥è‘— anchor identifier (ä¹Ÿç¨±ç‚º fragment identifier)ï¼Œä»£è¡¨è©² URI æ˜¯æŒ‡å‘è³‡æºä¸­çš„æŸå€‹ä½ç½®ã€‚é€šå¸¸å¸¶æœ‰ fragment identifier çš„ URL æœƒ link åˆ°æ–‡ä»¶ä¸­çš„æŸäº›å…ƒç´ ï¼Œè©²å…ƒç´ è¢«ç¨±ç‚º target å…ƒç´ ã€‚ä¾‹å¦‚ï¼šåœ¨ä¸‹é¢çš„ HTML æ–‡ä»¶ä¸­æœ‰åç‚º hello çš„ anchor (éŒ¨é») (ä¹Ÿå°±æ˜¯ &lt;a href=&quot;#hello&quot;&gt;Hello&lt;/a&gt; é€™å€‹é€£çµ)ï¼š1234&lt;h1&gt;&lt;a href=\"#hello\"&gt;Hello&lt;/a&gt;&lt;/h1&gt;&lt;div id=\"hello\"&gt; &lt;h2&gt;Target&lt;/h2&gt;&lt;/div&gt;1#hello:target &#123; color: red; &#125;Demoï¼šCodepen é€£çµå¦‚æœæ­¤ HTML çš„ URL ç‚ºï¼š1https://s.codepen.io/titangene/debug/jONegME/vWkRwRNmBvOMåœ¨é‚„æ²’é»æ“Š #hello éŒ¨é»æ™‚ï¼Œç•«é¢å¦‚ä¸‹ï¼šåªè¦é»æ“Š #hello éŒ¨é»å¾Œï¼Œä¸‹é¢çš„ â€œTargetâ€ æ–‡å­—å°±æœƒè®Šæˆç´…è‰² (ä¹Ÿå°±æ˜¯æœƒæ‡‰ç”¨ #hello:target çš„æ¨£å¼)ï¼Œç•«é¢å¦‚ä¸‹ï¼šä¸¦ä¸” URL çš„æœ€å¾ŒæœƒåŠ ä¸Š #helloï¼Œè€Œ #hello å°±æ˜¯ fragment identifierã€‚å‰›å‰›é»æ“Šçš„éŒ¨é»æœƒ link åˆ° target å…ƒç´ ï¼Œè€Œ target å…ƒç´ å°±æ˜¯ &lt;div id=&quot;hello&quot;&gt;ï¼Œæ‰€ä»¥ selector æ‰æœƒ match åˆ° #hello:targetã€‚See the Pen target pseudo-classes :target by Titangene (@titangene) on CodePen.åœ¨ MDN æœ‰ä¸€å€‹ç¯„ä¾‹ä¹Ÿè »æœ‰è¶£çš„ï¼Œå¯ä»¥ç”¨ :target pseudo-class ä¾†å¯¦ä½œ lightboxï¼šé‹ä½œåŸç†æ˜¯ç”¨ display: none å’Œ display: block ä¾†æ§åˆ¶ lightbox æ˜¯å¦é–‹å•Ÿï¼Œè§¸ç™¼çš„æ©Ÿåˆ¶å°±æ˜¯ç”¨å‰›å‰›ä»‹ç´¹çš„ :target pseudo-class ä¾†åšçš„ã€‚é€™å€‹ç¯„ä¾‹å¾ˆæœ‰è¶£ï¼Œä»¥å‰ç”¨ JavaScript æ‰èƒ½åšåˆ°çš„äº‹æƒ…ï¼Œæ²’æƒ³åˆ°ä¹Ÿèƒ½ç”¨ç´” CSS ä¾†å¯¦ä½œå‡ºä¾†ã€‚UI element states pseudo-classesåˆ†ç‚ºï¼š:enabledï¼šè™•æ–¼å•Ÿç”¨ç‹€æ…‹çš„ UI å…ƒç´ :disabledï¼šè™•æ–¼ç¦ç”¨ç‹€æ…‹çš„ UI å…ƒç´ :checkedï¼šé¸å– radio æˆ–å‹¾é¸ checkbox å…ƒç´ æ™‚æœƒæ‡‰ç”¨:enabled &amp; :disabled pseudo-classç›´æ¥çœ‹ç¯„ä¾‹ï¼š123456789101112131415&lt;form&gt; &lt;label for=\"enabledField\"&gt;enabled field:&lt;/label&gt; &lt;input type=\"text\" id=\"enabledField\" value=\"Lorem\"&gt; &lt;br&gt;&lt;br&gt; &lt;label for=\"disabledField\"&gt;disabled field:&lt;/label&gt; &lt;input type=\"text\" id=\"disabledField\" value=\"Lorem\" disabled&gt; &lt;br&gt;&lt;br&gt; &lt;label for=\"enabledCheckbox\"&gt;enabled checkbox:&lt;/label&gt; &lt;input type=\"checkbox\" id=\"enabledCheckbox\"&gt; &lt;br&gt;&lt;br&gt; &lt;label for=\"disabledCheckbox\"&gt;disabled checkbox:&lt;/label&gt; &lt;input type=\"checkbox\" id=\"disabledCheckbox\" disabled&gt; &lt;br&gt;&lt;br&gt; &lt;input type=\"button\" value=\"Submit\"&gt;&lt;/form&gt;12input:enabled &#123; outline: 3px solid red; &#125;input:disabled &#123; outline: 3px solid blue; &#125;Demoï¼šCodepen é€£çµåªè¦è¢«åŠ ä¸Š disabled å±¬æ€§çš„ input å…ƒç´ éƒ½ä»£è¡¨è©²å…ƒç´ è™•æ–¼ç¦ç”¨ç‹€æ…‹ï¼Œæ‰€ä»¥é€™äº›å…ƒç´ å°±æœƒå¥—ç”¨ input:disabled æ­¤ selector çš„æ¨£å¼ã€‚å…¶é¤˜çš„å…ƒç´ å‰‡æœƒå¥—ç”¨ input:enabled æ­¤ selector çš„æ¨£å¼ã€‚ä¸éè¦æ³¨æ„çš„äº‹å…ƒç´ æœ‰ç„¡å•Ÿç”¨ï¼Œè·Ÿä¸€äº›æœƒå½±éŸ¿ä½¿ç”¨è€…äº’å‹• UI å…ƒç´ çš„ CSS å±¬æ€§æ²’é—œä¿‚ï¼Œé€™äº›éƒ½ä¸æœƒå½±éŸ¿ selector æ˜¯å¦ match åˆ° :enabled æˆ– :disabledã€‚ä¾‹å¦‚ï¼šdisplay å’Œ visibility å±¬æ€§éƒ½æœƒè®“å…ƒç´ åœ¨ç•«é¢ä¸Šæ¶ˆå¤±ï¼Œä½†æ˜¯éƒ½ä¸æœƒå½±éŸ¿åˆ°å•Ÿç”¨æˆ–ç¦ç”¨çš„ç‹€æ…‹ã€‚display: none ä¸æœƒè®“å…ƒç´ å‡ºç¾åœ¨ formatting structure ä¸­ï¼Œå¾ˆåƒä¸åœ¨ç•«é¢ä¸Šï¼Œæœƒå®Œå…¨æ¶ˆå¤±visibility: hidden ç”Ÿæˆçš„ box æ˜¯çœ‹ä¸è¦‹çš„ï¼Œå®Œå…¨é€æ˜ï¼Œä¸æœƒ draw ä»»ä½•å…§å®¹ï¼Œä½†æœƒå½±éŸ¿ä½ˆå±€ï¼Œä¹Ÿå°±æ˜¯æœƒåœ¨ç•«é¢ä¸Šä½”ç”¨ç©ºé–“ï¼Œä½†æœƒçœ‹ä¸åˆ°å…ƒç´ çš„æ¨£å­See the Pen :enabled and :disabled pseudo-classes by Titangene (@titangene) on CodePen.:checked pseudo-classç›´æ¥çœ‹ç¯„ä¾‹ï¼š123456789&lt;input type=\"checkbox\" id=\"firstCheckbox\" checked&gt;&lt;label for=\"firstCheckbox\"&gt;First checkbox&lt;/label&gt;&lt;input type=\"checkbox\" id=\"secondCheckbox\"&gt;&lt;label for=\"secondCheckbox\"&gt;Second checkbox&lt;/label&gt;&lt;br&gt;&lt;input type=\"radio\" id=\"firstRadio\" checked&gt;&lt;label for=\"firstRadio\"&gt;First radio&lt;/label&gt;&lt;input type=\"radio\" id=\"secondRadio\"&gt;&lt;label for=\"secondRadio\"&gt;Second radio&lt;/label&gt;12input + label &#123; color: red; &#125;input:checked + label &#123; color: blue; &#125;Demoï¼šCodepen é€£çµSee the Pen :checked pseudo-class by Titangene (@titangene) on CodePen.æœ€å¾Œä»Šå¤©ä»‹ç´¹ä¸€äº› pseudo-classï¼Œæ¥ä¸‹ä¾†å¹¾å¤©æœƒæ¥çºŒä»‹ç´¹å…¶ä»– selectorã€‚è³‡æ–™ä¾†æºï¼šCSS 2.2 Specification - SelectorsSelectors Level 3Selectors Level 4:target - CSS | MDNAbout MDN by Mozilla Contributors is licensed under CC-BY-SA 2.5","categories":[{"name":"CSS","slug":"css","permalink":"https://titangene.github.io/categories/css/"}],"tags":[{"name":"IT éµäººè³½","slug":"it-éµäººè³½","permalink":"https://titangene.github.io/tags/it-éµäººè³½/"}]},{"title":"é‡æ–°èªè­˜ CSS - CSS Selector (2)","slug":"css-selector-2","date":"2019-09-18T08:20:52.000Z","updated":"2019-09-18T09:02:52.683Z","comments":true,"path":"article/css-selector-2.html","link":"","permalink":"https://titangene.github.io/article/css-selector-2.html","excerpt":"Selector (é¸æ“‡å™¨) å¯ç”¨ä¾†é¸æ“‡ HTML å’Œ XML æ–‡ä»¶ä¸­çš„ç¯€é»ï¼Œä¸¦å°‡æ¨£å¼å±¬æ€§ç¶å®šåˆ°æ–‡ä»¶ (HTML å’Œ XML) ä¸­çš„å…ƒç´ ä¸Šã€‚ç•¶é¸æ“‡å™¨èˆ‡æŸå…ƒç´  match çš„æ™‚å€™ï¼Œå°±å¯ä»¥å°é¸åˆ°çš„å…ƒç´ é€²è¡Œ CSS æ¨£å¼è¨­å®šã€‚æœ¬ç¯‡æœƒä»‹ç´¹ attribute selector (å±¬æ€§é¸æ“‡å™¨)ã€‚","text":"Selector (é¸æ“‡å™¨) å¯ç”¨ä¾†é¸æ“‡ HTML å’Œ XML æ–‡ä»¶ä¸­çš„ç¯€é»ï¼Œä¸¦å°‡æ¨£å¼å±¬æ€§ç¶å®šåˆ°æ–‡ä»¶ (HTML å’Œ XML) ä¸­çš„å…ƒç´ ä¸Šã€‚ç•¶é¸æ“‡å™¨èˆ‡æŸå…ƒç´  match çš„æ™‚å€™ï¼Œå°±å¯ä»¥å°é¸åˆ°çš„å…ƒç´ é€²è¡Œ CSS æ¨£å¼è¨­å®šã€‚æœ¬ç¯‡æœƒä»‹ç´¹ attribute selector (å±¬æ€§é¸æ“‡å™¨)ã€‚å‰è¨€ã€Œé‡æ–°èªè­˜ CSSã€é€™å€‹ç³»åˆ—åç¨±çš„ç”±ä¾†å°±å¦‚å…¶åï¼Œæˆ‘æƒ³è¦é‡æ–°èªè­˜å®ƒã€‚é›–ç„¶ä»¥å‰å°±æœ‰å­¸é CSSï¼Œä½†é€™æ¬¡æƒ³å¾ CSS Spec ä¸­å­¸åˆ°æœ€åŸå§‹çš„å®šç¾©å’Œå…§å®¹ï¼Œæ›´åŠ äº†è§£ CSS çš„åŸç†ï¼Œè®“æˆ‘åœ¨åˆ‡ç‰ˆçš„æ™‚å€™å¯ä»¥æ›´åŠ ç¢ºå®šè‡ªå·±åœ¨åšä»€éº¼ï¼Œæˆ‘è¸©åˆ°çš„é›·åªæ˜¯å› ç‚ºæˆ‘ä¸å¤ äº†è§£å®ƒæ‰æœƒç‚¸é–‹ã€‚åœ¨é€™ 30 å¤©çš„å…§å®¹ä¸­ï¼Œæœƒå°‡ Spec å…§çœ‹åˆ°çš„è³‡æ–™æ•´ç†æˆé€™å€‹ç³»åˆ—ï¼Œä¹Ÿå¸Œæœ›æ­£åœ¨å­¸ CSS çš„å„ä½å¯ä»¥æ›´åŠ äº†è§£å®ƒã€‚å¦å¤–æˆ‘ä¹ŸæœƒåŒæ™‚å°‡æ–‡ç« ç™¼è‡³æˆ‘çš„ Blogï¼Œå¦‚æœæƒ³ç›´æ¥çœ‹æ–‡å…§çš„ç¨‹å¼ç¢¼ Demo ç•«é¢ï¼Œå¯ä»¥åˆ°æˆ‘çš„ Blog ä¾†çœ‹ ğŸ˜ƒã€‚æœ¬æ–‡åŒæ­¥ç™¼è¡¨æ–¼ iT é‚¦å¹«å¿™ï¼šé‡æ–°èªè­˜ CSS - CSS Selector (2)ã€Œé‡æ–°èªè­˜ CSSã€ç³»åˆ—æ–‡ç« ç™¼æ–‡æ–¼ï¼šiT é‚¦å¹«å¿™Titangene BlogAttribute selectorSelector å…è¨±è¡¨ç¤ºå…ƒç´ çš„å±¬æ€§ã€‚ç•¶ selector ä½œç‚º expression (è¡¨é”å¼) ä¾† match å…ƒç´ æ™‚ï¼Œå¦‚æœè©²å…ƒç´ å…·æœ‰èˆ‡ attribute selector (å±¬æ€§é¸æ“‡å™¨) è¡¨ç¤ºçš„å±¬æ€§ match çš„å±¬æ€§ï¼Œå‰‡å¿…é ˆå°‡ attribute selector è¦–ç‚ºèˆ‡å…ƒç´  matchã€‚Attribute presence and value selectorCSS2 å¼•å…¥äº†å››å€‹ attribute selectorï¼š[att]ï¼šä»£è¡¨å…·æœ‰ att å±¬æ€§çš„å…ƒç´ ï¼Œç„¡è«–å±¬æ€§çš„å€¼ç‚ºä½•[att=val]ï¼šä»£è¡¨å…·æœ‰ att å±¬æ€§çš„å…ƒç´ ï¼Œä¸”è©²å±¬æ€§å€¼ç‚º val[att~=val]ï¼šä»£è¡¨å…·æœ‰ att å±¬æ€§çš„å…ƒç´ ï¼Œè©²å±¬æ€§çš„å€¼æ˜¯ä»¥ç©ºæ ¼åˆ†éš”çš„å–®è©åˆ—è¡¨ï¼Œå…¶ä¸­ä¸€å€‹æ­£å¥½æ˜¯ valå¦‚æœ val åŒ…å«ç©ºæ ¼ï¼Œå°±ä¸ä»£è¡¨ä»»ä½•å…§å®¹ (å› ç‚ºå–®å­—ä¹‹é–“æ˜¯ç”¨ç©ºæ ¼ä¾†åˆ†éš”)å¦‚æœ val æ˜¯ç©ºå­—ä¸²ï¼Œå°±ä¸ä»£è¡¨ä»»ä½•å…§å®¹[att|=val]ï¼šä»£è¡¨å…·æœ‰ att å±¬æ€§çš„å…ƒç´ ï¼Œä¸”è©²å±¬æ€§å€¼ç‚º val æˆ–ä»¥ val ç‚ºé–‹é ­ï¼Œå¾Œé¢æ¥è‘— - (ä¹Ÿå°±æ˜¯ä»¥ val- ç‚ºé–‹é ­)ç›´æ¥çœ‹ç¯„ä¾‹ï¼š1234567891011121314151617181920&lt;h1&gt;Titan&lt;/h1&gt;&lt;h1 title=\"hello\"&gt;Hello&lt;/h1&gt;&lt;h1 title=\"titan\"&gt;Titan&lt;/h1&gt;&lt;h2 title=\"hello\"&gt;Hello&lt;/h2&gt;&lt;h2 title=\"titan\"&gt;Titan&lt;/h2&gt;&lt;h1 class=\"highlight\"&gt;highlight Titan&lt;/h1&gt;&lt;h1 title=\"titan\" class=\"highlight\"&gt;highlight Titan&lt;/h1&gt;&lt;h1 class=\"text text-primary text-bold\"&gt;Text&lt;/h1&gt;&lt;h1 class=\"text-primary text\"&gt;Text&lt;/h1&gt;&lt;h2 class=\"text\"&gt;Text&lt;/h2&gt;&lt;h2 class=\"textPrimary\"&gt;Text&lt;/h2&gt;&lt;h2 class=\"text-primary\"&gt;Text&lt;/h2&gt;&lt;h1 class=\"alert\"&gt;Text&lt;/h1&gt;&lt;h1 class=\"alert-primary\"&gt;Text&lt;/h1&gt;123456h1[title] &#123; color: red; &#125;h2[title=\"titan\"] &#123; color: green; &#125;h1[title=\"titan\"][class=\"highlight\"] &#123; color: blue; &#125;h1[class~=\"text\"] &#123; color: purple; &#125;h2[class|=\"text\"] &#123; color: olive; &#125;h1[class=\"alert\"], h1[class=\"alert-primary\"] &#123; color: gray; &#125;h1[title]ï¼šå¸¶æœ‰ title å±¬æ€§çš„ h1 å…ƒç´ h2[title=&quot;titan&quot;]ï¼šå¸¶æœ‰ title å±¬æ€§çš„ h2 å…ƒç´ ï¼Œä¸¦ä¸”è©²å±¬æ€§å€¼ç‚º titanh1[title=&quot;titan&quot;][class=&quot;highlight&quot;]ï¼šå¸¶æœ‰ title å’Œ class å±¬æ€§çš„ h1 å…ƒç´ ï¼Œä¸¦ä¸” title çš„å±¬æ€§å€¼ç‚º titan ä»¥åŠ class å±¬æ€§å€¼ç‚º highlighth1[class~=&quot;text&quot;]ï¼šå¸¶æœ‰ class å±¬æ€§çš„ h1 å…ƒç´ ï¼Œä¸¦ä¸”è©²å±¬æ€§å€¼éœ€åŒ…å« texth2[class|=&quot;text&quot;]ï¼šå¸¶æœ‰ class å±¬æ€§çš„ h2 å…ƒç´ ï¼Œä¸¦ä¸”è©²å±¬æ€§å€¼ç‚ºéœ€ç‚º text æˆ–ä»¥ text- ç‚ºé–‹é ­h1[class=&quot;alert&quot;], h1[class=&quot;alert-primary&quot;]ï¼šå¸¶æœ‰ class å±¬æ€§çš„ h1 å…ƒç´ ï¼Œä¸¦ä¸”è©²å±¬æ€§å€¼ç‚º alertï¼Œä»¥åŠå¸¶æœ‰ class å±¬æ€§çš„ h1 å…ƒç´ ï¼Œä¸¦ä¸”è©²å±¬æ€§å€¼ç‚º alert-primaryè¨»ï¼š[title=&quot;titan&quot;] ä¸­çš„ title æ˜¯å±¬æ€§åç¨±ï¼Œtitan æ˜¯åç‚º title çš„å±¬æ€§å€¼ã€‚Demoï¼šCodepen é€£çµSee the Pen Attribute presence and value selectors by Titangene (@titangene) on CodePen.Substring matching attribute selectoråœ¨ Selectors Level 3 æä¾›äº†ä¸‰å€‹é¡å¤–çš„ attribute selectorï¼Œç”¨æ–¼ match å±¬æ€§å€¼ä¸­çš„å­å­—ä¸²ï¼š[att^=val]ï¼šä»£è¡¨å…·æœ‰ att å±¬æ€§çš„å…ƒç´ ï¼Œè©²å±¬æ€§å€¼ä»¥ val ç‚ºé–‹é ­ã€‚å¦‚æœ val æ˜¯ç©ºå­—ä¸²ï¼Œå‰‡ selector ä¸ä»£è¡¨ä»»ä½•å…§å®¹[att$=val]ï¼šä»£è¡¨å…·æœ‰ att å±¬æ€§çš„å…ƒç´ ï¼Œè©²å±¬æ€§å€¼ä»¥ val ç‚ºçµå°¾ã€‚å¦‚æœ val æ˜¯ç©ºå­—ä¸²ï¼Œå‰‡ selector ä¸ä»£è¡¨ä»»ä½•å…§å®¹[att*=val]ï¼šä»£è¡¨å…·æœ‰ att å±¬æ€§çš„å…ƒç´ ï¼Œè©²å±¬æ€§å€¼è‡³å°‘åŒ…å« val é€™å€‹å­å­—ä¸²ã€‚å¦‚æœ val æ˜¯ç©ºå­—ä¸²ï¼Œå‰‡ selector ä¸ä»£è¡¨ä»»ä½•å…§å®¹ç›´æ¥çœ‹ç¯„ä¾‹ï¼š12345678910&lt;h2 class=\"text\"&gt;Text&lt;/h2&gt;&lt;h2 class=\"textPrimary\"&gt;Text&lt;/h2&gt;&lt;h2 class=\"text-primary\"&gt;Text&lt;/h2&gt;&lt;h2&gt;&lt;a href=\"https://titangene.github.io/article/css-selector-2.html\"&gt;é‡æ–°èªè­˜ CSS - CSS Selector (2)&lt;/a&gt;&lt;/h2&gt;&lt;h2&gt;&lt;a href=\"https://titangene.github.io\"&gt;Titangene Blog&lt;/a&gt;&lt;/h2&gt;&lt;h2 class=\"my-alert\"&gt;Text&lt;/h2&gt;&lt;h2 class=\"myAlertPrimary\"&gt;Text&lt;/h2&gt;&lt;h2 class=\"my-alert-primary\"&gt;Text&lt;/h2&gt;123h2[class^=\"text\"] &#123; color: red; &#125;a[href$=\".html\"] &#123; color: gray; &#125;h2[class*=\"alert\"] &#123; color: green; &#125;h2[class^=&quot;text&quot;]ï¼šä»£è¡¨å…·æœ‰ class å±¬æ€§çš„å…ƒç´ ï¼Œè©²å±¬æ€§å€¼ä»¥ text ç‚ºé–‹é ­a[href$=&quot;.html&quot;]ï¼šä»£è¡¨å…·æœ‰ href å±¬æ€§çš„å…ƒç´ ï¼Œè©²å±¬æ€§å€¼ä»¥ .html ç‚ºçµå°¾ (ä¹Ÿå°±æ˜¯è©²é é¢ç‚º .html æª”)h2[class*=&quot;alert&quot;]ï¼šä»£è¡¨å…·æœ‰ class å±¬æ€§çš„å…ƒç´ ï¼Œè©²å±¬æ€§å€¼è‡³å°‘åŒ…å« alert é€™å€‹å­å­—ä¸²Demoï¼šCodepen é€£çµSee the Pen Substring matching attribute selectors by Titangene (@titangene) on CodePen.æœ€å¾Œä»Šå¤©ä»‹ç´¹ä¸€äº› attribute selectorï¼Œæ¥ä¸‹ä¾†å¹¾å¤©æœƒæ¥çºŒä»‹ç´¹å…¶ä»– selectorã€‚è³‡æ–™ä¾†æºï¼šCSS 2.2 Specification - SelectorsSelectors Level 3Selectors Level 4","categories":[{"name":"CSS","slug":"css","permalink":"https://titangene.github.io/categories/css/"}],"tags":[{"name":"IT éµäººè³½","slug":"it-éµäººè³½","permalink":"https://titangene.github.io/tags/it-éµäººè³½/"}]},{"title":"é‡æ–°èªè­˜ CSS - CSS Selector (1)","slug":"css-selector-1","date":"2019-09-17T10:20:52.000Z","updated":"2019-09-18T07:17:17.853Z","comments":true,"path":"article/css-selector-1.html","link":"","permalink":"https://titangene.github.io/article/css-selector-1.html","excerpt":"Selector (é¸æ“‡å™¨) å¯ç”¨ä¾†é¸æ“‡ HTML å’Œ XML æ–‡ä»¶ä¸­çš„ç¯€é»ï¼Œä¸¦å°‡æ¨£å¼å±¬æ€§ç¶å®šåˆ°æ–‡ä»¶ (HTML å’Œ XML) ä¸­çš„å…ƒç´ ä¸Šã€‚ç•¶é¸æ“‡å™¨èˆ‡æŸå…ƒç´  match çš„æ™‚å€™ï¼Œå°±å¯ä»¥å°é¸åˆ°çš„å…ƒç´ é€²è¡Œ CSS æ¨£å¼è¨­å®šã€‚","text":"Selector (é¸æ“‡å™¨) å¯ç”¨ä¾†é¸æ“‡ HTML å’Œ XML æ–‡ä»¶ä¸­çš„ç¯€é»ï¼Œä¸¦å°‡æ¨£å¼å±¬æ€§ç¶å®šåˆ°æ–‡ä»¶ (HTML å’Œ XML) ä¸­çš„å…ƒç´ ä¸Šã€‚ç•¶é¸æ“‡å™¨èˆ‡æŸå…ƒç´  match çš„æ™‚å€™ï¼Œå°±å¯ä»¥å°é¸åˆ°çš„å…ƒç´ é€²è¡Œ CSS æ¨£å¼è¨­å®šã€‚å‰è¨€ã€Œé‡æ–°èªè­˜ CSSã€é€™å€‹ç³»åˆ—åç¨±çš„ç”±ä¾†å°±å¦‚å…¶åï¼Œæˆ‘æƒ³è¦é‡æ–°èªè­˜å®ƒã€‚é›–ç„¶ä»¥å‰å°±æœ‰å­¸é CSSï¼Œä½†é€™æ¬¡æƒ³å¾ CSS Spec ä¸­å­¸åˆ°æœ€åŸå§‹çš„å®šç¾©å’Œå…§å®¹ï¼Œæ›´åŠ äº†è§£ CSS çš„åŸç†ï¼Œè®“æˆ‘åœ¨åˆ‡ç‰ˆçš„æ™‚å€™å¯ä»¥æ›´åŠ ç¢ºå®šè‡ªå·±åœ¨åšä»€éº¼ï¼Œæˆ‘è¸©åˆ°çš„é›·åªæ˜¯å› ç‚ºæˆ‘ä¸å¤ äº†è§£å®ƒæ‰æœƒç‚¸é–‹ã€‚åœ¨é€™ 30 å¤©çš„å…§å®¹ä¸­ï¼Œæœƒå°‡ Spec å…§çœ‹åˆ°çš„è³‡æ–™æ•´ç†æˆé€™å€‹ç³»åˆ—ï¼Œä¹Ÿå¸Œæœ›æ­£åœ¨å­¸ CSS çš„å„ä½å¯ä»¥æ›´åŠ äº†è§£å®ƒã€‚å¦å¤–æˆ‘ä¹ŸæœƒåŒæ™‚å°‡æ–‡ç« ç™¼è‡³æˆ‘çš„ Blogï¼Œå¦‚æœæƒ³ç›´æ¥çœ‹æ–‡å…§çš„ç¨‹å¼ç¢¼ Demo ç•«é¢ï¼Œå¯ä»¥åˆ°æˆ‘çš„ Blog ä¾†çœ‹ ğŸ˜ƒã€‚æœ¬æ–‡åŒæ­¥ç™¼è¡¨æ–¼ iT é‚¦å¹«å¿™ï¼šé‡æ–°èªè­˜ CSS - CSS Selector (1)ã€Œé‡æ–°èªè­˜ CSSã€ç³»åˆ—æ–‡ç« ç™¼æ–‡æ–¼ï¼šiT é‚¦å¹«å¿™Titangene BlogSelector èªæ³•Selector æ˜¯ç”±ä¸€å€‹æˆ–å¤šå€‹ simple selector (ç°¡å–®é¸æ“‡å™¨) åºåˆ—çµ„åˆï¼Œä¸¦ç”¨ combinator åˆ†éš”çš„ä¸€ä¸²æ±è¥¿ã€‚simple selector åºåˆ—ï¼šç”±å¤šå€‹ simple selector çµ„æˆï¼Œæ²’æœ‰è¢« combinator åˆ†éš”ä»¥ type selector æˆ– universal selector ç‚ºé–‹é ­ä»¥ä¸‹é€™äº›éƒ½æ˜¯ simple selectorï¼štype selectorï¼šä¾‹å¦‚ Euniversal selectorï¼šä¾‹å¦‚ *attribute selectorï¼šä¾‹å¦‚ E[foo]class selectorï¼šä¾‹å¦‚ .myclassID selectorï¼šä¾‹å¦‚ #myidpseudo-classï¼šä¾‹å¦‚ E:hovercombinator æ˜¯ (ç©ºç™½å­—å…ƒ)ã€&gt;ã€+ã€~ï¼Œä¾‹å¦‚ï¼š1234E F &#123; color: red; &#125;E &gt; F &#123; color: red; &#125;E + F &#123; color: red; &#125;E ~ F &#123; color: red; &#125;simple selector èˆ‡ combinator ä¹‹é–“å¯ä»¥åŠ ä¸Šç©ºç™½ï¼Œä¸åŠ ç©ºç™½ä¹Ÿå¯ä»¥ã€‚ä¾‹å¦‚ï¼šä¸‹é¢å…©å€‹é¸æ“‡å™¨æ˜¯ç›¸åŒçš„ï¼š12E &gt; FE&gt;Fä¸éï¼Œé€šå¸¸åœ¨ä¹‹é–“éƒ½æœƒåŠ ç©ºç™½ï¼Œå› ç‚ºå¯è®€æ€§è¼ƒä½³ã€‚Groups of selectorç•¶å¤šå€‹é¸æ“‡å™¨å…±äº«ç›¸åŒçš„å®£å‘Šæ™‚ï¼Œå®ƒå€‘å¯ä»¥ç”¨é€—è™Ÿä¾†åˆ†éš”æ¯å€‹é¸æ“‡å™¨ï¼Œæ¯å€‹é¸æ“‡å™¨éƒ½æœƒé¸åˆ° match çš„æ‰€æœ‰å…ƒç´ ï¼Œä¾‹å¦‚ï¼š123&lt;h1&gt;header 1&lt;/h1&gt;&lt;h2&gt;header 2&lt;/h2&gt;&lt;h3&gt;header 3&lt;/h3&gt;123h1 &#123; color: red; &#125;h2 &#123; color: red; &#125;h3 &#123; color: red; &#125;ç­‰åŒæ–¼ï¼š1h1, h2, h3 &#123; color: red; &#125;Demoï¼šCodepen é€£çµSee the Pen Groups of selector by Titangene (@titangene) on CodePen.ä¸è¦è¦æ³¨æ„çš„æ˜¯ï¼Œä¸Šé¢å…©å€‹ç¯„ä¾‹æœƒæœ‰ä¸€æ¨£çš„çµæœæ˜¯å› ç‚ºæ‰€æœ‰é¸æ“‡å™¨éƒ½æ˜¯æœ‰æ•ˆçš„é¸æ“‡å™¨ (valid selector)ã€‚å¦‚æœå…¶ä¸­ä¸€å€‹é¸æ“‡å™¨ç‚ºç„¡æ•ˆæ™‚ï¼Œå°±æœƒè®“æ•´å€‹é¸æ“‡å™¨ç¾¤çµ„éƒ½ç„¡æ•ˆã€‚ä¸éï¼Œè‹¥å°‡ä¸‰å€‹é¸æ“‡å™¨åˆ†é–‹å®£å‘Šæ™‚ï¼Œå°±åªæœ‰é‚£ä¸€å€‹æœƒå¤±æ•ˆã€‚ä¾‹å¦‚ï¼š123&lt;h1&gt;header 1&lt;/h1&gt;&lt;h2&gt;header 2&lt;/h2&gt;&lt;h3&gt;header 3&lt;/h3&gt;123h1 &#123; color: red; &#125;h2..foo &#123; color: red; &#125;h3 &#123; color: red; &#125;ä¸ç­‰æ–¼ï¼š1h1, h2..foo, h3 &#123; color: red; &#125;Demoï¼šCodepen é€£çµå¦‚ä¸‹åœ–ï¼Œå› ç‚ºä¸Šé¢å…¶ä¸­çš„ h2..foo æ˜¯ç„¡æ•ˆé¸æ“‡å™¨ (invalid selector)ï¼Œæ‰€ä»¥æœƒé€ æˆ h1, h2..foo, h3 å®Œå…¨ç„¡æ•ˆï¼Œä¸¦ä¸”æœƒåˆªé™¤é€™å€‹æ¨£å¼è¦å‰‡ï¼šå¦‚æœæ˜¯åˆ†é–‹å®£å‘Šï¼Œå°±åªæœƒåˆªé™¤ h2..foo é€™å€‹æ¨£å¼è¦å‰‡ï¼Œå¦‚ä¸‹åœ–ï¼šSee the Pen Groups of selector: valid selector by Titangene (@titangene) on CodePen.Simple selectorä»¥ä¸‹é€™äº›éƒ½æ˜¯ simple selectorï¼štype selectoruniversal selectorattribute selectorclass selectorID selectorpseudo-classType selectoré¸åˆ° HTML tag åç¨±çš„å…ƒç´ ï¼Œä¾‹å¦‚ï¼šmatch æ‰€æœ‰ h1 å…ƒç´ ï¼š1&lt;h1&gt;header 1&lt;/h1&gt;1h1 &#123; color: red; &#125;Demoï¼šCodepen é€£çµSee the Pen type selector by Titangene (@titangene) on CodePen.Universal SelectorUniversal selector æ˜¯ä½¿ç”¨ * ä¾† match ä»»ä½•å…ƒç´ ã€‚ä¾‹å¦‚ï¼šä¸‹é¢ç¯„ä¾‹å¯ä»¥é¸åˆ°æ‰€æœ‰å…ƒç´ ï¼š1234&lt;h1&gt;header 1&lt;/h1&gt;&lt;h2&gt;header 2&lt;/h2&gt;&lt;h3&gt;header 3&lt;/h3&gt;&lt;a href=\"https://titangene.github.io/\"&gt;Titangene Blog&lt;/a&gt;1* &#123; color: red; &#125;Demoï¼šCodepen é€£çµSee the Pen Universal Selector by Titangene (@titangene) on CodePen.Class selectorå¦‚æœè¦å°å¤šå€‹å…ƒç´ éœ€è¦ç›¸åŒçš„æ¨£å¼æ™‚ï¼Œå°±å¯ä»¥ç”¨ class é€™å€‹å±¬æ€§ä¾†æ¨™è­˜å®ƒå€‘ã€‚åœ¨ CSS æ˜¯ä½¿ç”¨ . ä¾†ä»£è¡¨ class å±¬æ€§ï¼Œä¹Ÿç­‰åŒæ–¼ ~= è¡¨ç¤ºæ³• (notation)ï¼Œå±¬æ€§å€¼å¿…é ˆåœ¨ . ä¹‹å¾Œã€‚ä¾‹å¦‚ï¼š12&lt;h1&gt;header 1&lt;/h1&gt;&lt;h1 class=\"highlight\"&gt;highlight header 1&lt;/h1&gt;1h1.highlight &#123; color: red; &#125;ç­‰åŒæ–¼ï¼š1h1[class~=highlight] &#123; color: red; &#125;Demoï¼šCodepen é€£çµç¬¬ä¸€å€‹ h1 å…ƒç´ çš„å­—é«”é¡è‰²ä¸æœƒè®Šæˆç´…è‰²ï¼Œåªæœ‰ç¬¬äºŒå€‹ h1 å…ƒç´ æ‰æœƒè®Šç´…è‰²ï¼šSee the Pen class selector by Titangene (@titangene) on CodePen.å¦‚æœåªå–®ç¨ä½¿ç”¨ class selector (ä¹Ÿå°±æ˜¯ . )ï¼Œä¹Ÿç­‰åŒæ–¼åœ¨å‰é¢åŠ ä¸Š universal selector (ä¹Ÿå°±æ˜¯ * )ã€‚ä¾‹å¦‚ï¼š1234&lt;h1&gt;header 1&lt;/h1&gt;&lt;h1 class=\"highlight\"&gt;highlight header 1&lt;/h1&gt;&lt;h2&gt;header 2&lt;/h2&gt;&lt;h2 class=\"highlight\"&gt;highlight header 2&lt;/h2&gt;1*.highlight &#123; color: red; &#125;1.highlight &#123; color: red; &#125;Demoï¼šCodepen é€£çµç¬¬ä¸€å€‹ h1 å’Œ h2 å…ƒç´ çš„å­—é«”é¡è‰²ä¸æœƒè®Šæˆç´…è‰²ï¼Œåªæœ‰ç¬¬äºŒå€‹ h1 å’Œ h2 å…ƒç´ æ‰æœƒè®Šç´…è‰²ï¼šSee the Pen class selector &amp; universal selector by Titangene (@titangene) on CodePen.å¦‚æœéœ€è¦åŒæ™‚æŒ‡å®šæŸå…ƒç´ ä¸Šçš„å…©å€‹ classï¼Œå¯ä»¥å¯«æˆé€™æ¨£ï¼š1234&lt;h1&gt;header 1&lt;/h1&gt;&lt;h1 class=\"text-primary highlight\"&gt;highlight header 1&lt;/h1&gt;&lt;h2&gt;header 2&lt;/h2&gt;&lt;h2 class=\"highlight\"&gt;highlight header 2&lt;/h2&gt;1.text-primary.highlight &#123; color: red; &#125;è¨»ï¼šåœ¨ HTML è¦å°æŸå…ƒç´ ä¸ŠåŒæ™‚è¨­å®šå¤šå€‹ classï¼Œæ˜¯ä½¿ç”¨ç©ºç™½å­—å…ƒä¾†åˆ†éš”å¤šå€‹ classã€‚ä»¥ä¸Šé¢ç¯„ä¾‹ä¾†èªªï¼Œç¬¬äºŒå€‹ h1 ä¸Šæœ‰å…©å€‹ classï¼Œåˆ†åˆ¥æ˜¯ text-primary å’Œ highlightã€‚Demoï¼šCodepen é€£çµSee the Pen multi class selector by Titangene (@titangene) on CodePen.ID selectorå¦‚æœè¦å°æŸå€‹å…ƒç´ ä½œå”¯ä¸€çš„æ¨™ç¤ºï¼Œå°±å¯ä»¥ç”¨ id é€™å€‹å±¬æ€§ä¾†æ¨™è­˜å®ƒå€‘ã€‚åœ¨ CSS æ˜¯ä½¿ç”¨ # ä¾†ä»£è¡¨ id å±¬æ€§ï¼Œå±¬æ€§å€¼å¿…é ˆåœ¨ # ä¹‹å¾Œã€‚ä¾‹å¦‚ï¼š1234&lt;h1&gt;header 1&lt;/h1&gt;&lt;h1 id=\"titan\"&gt;header 1&lt;/h1&gt;&lt;h2&gt;header 2&lt;/h2&gt;&lt;h2 id=\"titan\"&gt;header 2&lt;/h2&gt;1#titan &#123; color: red; &#125;Demoï¼šCodepen é€£çµSee the Pen id selector by Titangene (@titangene) on CodePen.å¦‚æœåªæƒ³é¸æ“‡å¸¶æœ‰ titan é€™å€‹ id çš„ h2 å…ƒç´ ï¼Œå¯ä»¥å¯«æˆé€™æ¨£ï¼š1h2#titan &#123; color: red; &#125;Demoï¼šCodepen é€£çµSee the Pen id selector: specific element by Titangene (@titangene) on CodePen.æœ€å¾Œä»Šå¤©ä»‹ç´¹ä¸€äº› simple selectorï¼Œæ¥ä¸‹ä¾†å¹¾å¤©æœƒæ¥çºŒä»‹ç´¹å…¶ä»– selectorã€‚è³‡æ–™ä¾†æºï¼šCSS 2.2 Specification - SelectorsSelectors Level 3Selectors Level 4","categories":[{"name":"CSS","slug":"css","permalink":"https://titangene.github.io/categories/css/"}],"tags":[{"name":"IT éµäººè³½","slug":"it-éµäººè³½","permalink":"https://titangene.github.io/tags/it-éµäººè³½/"}]},{"title":"é‡æ–°èªè­˜ CSS - CSS ç°¡ä»‹","slug":"css-introduction","date":"2019-09-16T10:10:11.000Z","updated":"2019-09-16T13:58:19.006Z","comments":true,"path":"article/css-introduction.html","link":"","permalink":"https://titangene.github.io/article/css-introduction.html","excerpt":"CSS æ˜¯ Cascading Style Sheets çš„ç¸®å¯«ï¼Œæ˜¯ä¸€ç¨® style sheet (æ¨£å¼è¡¨) èªè¨€ï¼Œå¯å°‡è‡ªè¨‚çš„æ¨£å¼ (ä¾‹å¦‚ï¼šå­—é«”ã€é¡è‰²) é™„åŠ åœ¨ HTML æ–‡ä»¶ä¸Šã€‚é€™ç¯‡æœƒå…ˆç°¡ä»‹ CSSï¼Œä»¥åŠå¦‚ä½•åœ¨ HTML è¨­å®š CSSã€‚","text":"CSS æ˜¯ Cascading Style Sheets çš„ç¸®å¯«ï¼Œæ˜¯ä¸€ç¨® style sheet (æ¨£å¼è¡¨) èªè¨€ï¼Œå¯å°‡è‡ªè¨‚çš„æ¨£å¼ (ä¾‹å¦‚ï¼šå­—é«”ã€é¡è‰²) é™„åŠ åœ¨ HTML æ–‡ä»¶ä¸Šã€‚é€™ç¯‡æœƒå…ˆç°¡ä»‹ CSSï¼Œä»¥åŠå¦‚ä½•åœ¨ HTML è¨­å®š CSSã€‚å‰è¨€ã€Œé‡æ–°èªè­˜ CSSã€é€™å€‹ç³»åˆ—åç¨±çš„ç”±ä¾†å°±å¦‚å…¶åï¼Œæˆ‘æƒ³è¦é‡æ–°èªè­˜å®ƒã€‚é›–ç„¶ä»¥å‰å°±æœ‰å­¸é CSSï¼Œä½†é€™æ¬¡æƒ³å¾ CSS Spec ä¸­å­¸åˆ°æœ€åŸå§‹çš„å®šç¾©å’Œå…§å®¹ï¼Œæ›´åŠ äº†è§£ CSS çš„åŸç†ï¼Œè®“æˆ‘åœ¨åˆ‡ç‰ˆçš„æ™‚å€™å¯ä»¥æ›´åŠ ç¢ºå®šè‡ªå·±åœ¨åšä»€éº¼ï¼Œæˆ‘è¸©åˆ°çš„é›·åªæ˜¯å› ç‚ºæˆ‘ä¸å¤ äº†è§£å®ƒæ‰æœƒç‚¸é–‹ã€‚åœ¨é€™ 30 å¤©çš„å…§å®¹ä¸­ï¼Œæœƒå°‡ Spec å…§çœ‹åˆ°çš„è³‡æ–™æ•´ç†æˆé€™å€‹ç³»åˆ—ï¼Œä¹Ÿå¸Œæœ›æ­£åœ¨å­¸ CSS çš„å„ä½å¯ä»¥æ›´åŠ äº†è§£å®ƒã€‚å¦å¤–æˆ‘ä¹ŸæœƒåŒæ™‚å°‡æ–‡ç« ç™¼è‡³æˆ‘çš„ Blogï¼Œå¦‚æœæƒ³ç›´æ¥çœ‹æ–‡å…§çš„ç¨‹å¼ç¢¼ Demo ç•«é¢ï¼Œå¯ä»¥åˆ°æˆ‘çš„ Blog ä¾†çœ‹ ğŸ˜ƒã€‚CSS è¦å‰‡æ˜¯ç”± selector å’Œå®£å‘Š (declaration) çµ„æˆï¼Œä»¥ä¸‹é¢ç¨‹å¼ç¢¼çš„ CSS è¦å‰‡ç‚ºä¾‹ï¼Œh1 å°±æ˜¯ selectorï¼Œcolor: red å°±æ˜¯å®£å‘Šã€‚åœ¨ HTML ä¸­ï¼Œå…ƒç´ åç¨±ä¸åˆ†å¤§å°å¯«ï¼Œä¾‹å¦‚ï¼šH1 å’Œ h1 ç›¸åŒï¼Œä½†é€šå¸¸æœƒå¯«å°å¯«ã€‚å®£å‘Šåˆç”±å±¬æ€§åç¨±å’Œå±¬æ€§å€¼çµ„æˆï¼Œä»¥ä¸‹é¢ç¨‹å¼ç¢¼ç‚ºä¾‹ï¼Œcolor å°±æ˜¯å±¬æ€§åç¨±ï¼Œred å°±æ˜¯å±¬æ€§å€¼ã€‚123456789&lt;!DOCTYPE html&gt;&lt;html&gt; &lt;head&gt; &lt;title&gt;Document&lt;/title&gt; &lt;/head&gt; &lt;body&gt; &lt;h1&gt;Title&lt;/h1&gt; &lt;/body&gt;&lt;/html&gt;1h1 &#123; color: red; &#125;åœ¨ HTML è¨­å®š CSSè¦åœ¨ HTML å…§è¨­å®š CSS æœ‰ä¸‰ç¨®æ–¹æ³•ï¼šInline CSSï¼šå…ƒç´ ä¸Šçš„ style å±¬æ€§Internal CSSï¼šstyle å…ƒç´ External CSSï¼šlink å…ƒç´ å¼•å…¥å¤–éƒ¨ CSSInline CSSï¼šå…ƒç´ ä¸Šçš„ style å±¬æ€§åœ¨æŒ‡å®šçš„å…ƒç´ ä¸Šé€é style å±¬æ€§ä¾†è¨­å®š CSS æ¨£å¼ç›¸åŒçš„æ¨£å¼ç„¡æ³•å…±ç”¨ï¼Œå¦‚æœè¦åœ¨ä¸åŒå…ƒç´ è¨­å®šç›¸åŒçš„æ¨£å¼ï¼Œå°±éœ€è¦åœ¨æ¯å€‹å…ƒç´ ä¸Šè¨­å®š style å±¬æ€§CSS æ¨£å¼èˆ‡ HTML çµæ§‹å¯«åœ¨ä¸€èµ·ï¼Œå¯è®€æ€§å·®ï¼Œä¸å»ºè­°é€™æ¨£å¯«12345678910&lt;!DOCTYPE html&gt;&lt;html&gt; &lt;head&gt; &lt;title&gt;Document&lt;/title&gt; &lt;/head&gt; &lt;body&gt; &lt;h1 style=\"color: red;\"&gt;Title&lt;/h1&gt; &lt;h2 style=\"color: red;\"&gt;Title&lt;/h2&gt; &lt;/body&gt;&lt;/html&gt;Demoï¼šSee the Pen Inline CSS by Titangene (@titangene) on CodePen.Internal CSSï¼šstyle å…ƒç´ ç›´æ¥åœ¨ HTML åŸå§‹ç¢¼å…§åˆ©ç”¨ style å…ƒç´ ä¾†è¨­å®š CSSåªèƒ½åœ¨å–®ç¨çš„ HTML å…§ä½¿ç”¨ style å…ƒç´ è£¡çš„æ¨£å¼123456789101112&lt;!DOCTYPE html&gt;&lt;html&gt; &lt;head&gt; &lt;title&gt;Document&lt;/title&gt; &lt;style&gt; h1 &#123; color: red; &#125; &lt;/style&gt; &lt;/head&gt; &lt;body&gt; &lt;h1&gt;Title&lt;/h1&gt; &lt;/body&gt;&lt;/html&gt;Demoï¼šExternal CSSï¼šlink å…ƒç´ å¼•å…¥å¤–éƒ¨ CSSä½¿ç”¨ link å…ƒç´ å¼•å…¥å¤–éƒ¨ CSS æª”æ¡ˆå…§çš„æ¨£å¼å¯å°‡ HTML èˆ‡ CSS çš„åŸå§‹ç¢¼åˆ†é–‹ç®¡ç†è‹¥è¦æ›´æ”¹æ¨£å¼ï¼Œåªè¦æ›´æ›æˆå…¶ä»– CSS æª”æ¡ˆæˆ–ä¿®æ”¹å¤–éƒ¨ CSS æª”æ¡ˆå…§çš„æ¨£å¼åŒä¸€ä»½ CSS æ¨£å¼å¯å¥—ç”¨è‡³å¤šå€‹ HTML æ–‡ä»¶ä½¿ç”¨å¸¸è¦‹æœƒä½¿ç”¨ CDN (Content Delivery Network)link å…ƒç´  ä¸Šçš„è¨­å®šï¼šç”¨ rel å±¬æ€§ (relationships) è¨­å®šé€£çµé¡å‹ï¼šstylesheetç”¨ href å±¬æ€§ (hyperlink reference) æŒ‡å®šçš„ CSS è·¯å¾‘12345678910&lt;!DOCTYPE html&gt;&lt;html&gt; &lt;head&gt; &lt;title&gt;Document&lt;/title&gt; &lt;link rel=\"stylesheet\" href=\"./style.css\"&gt; &lt;/head&gt; &lt;body&gt; &lt;h1&gt;Title&lt;/h1&gt; &lt;/body&gt;&lt;/html&gt;ä¸‹é¢å…§å®¹ç‚º style.cssï¼š1h1 &#123; color: red; &#125;Demoï¼šMultiple Style Sheetså¦‚æœä»¥ä¸åŒçš„æ–¹å¼ä¾†å°åŒä¸€å€‹å…ƒç´ è¨­å®šæ¨£å¼ï¼Œå‰‡æœƒä½¿ç”¨æœ€å¾Œè¨­å®šçš„æ¨£å¼ã€‚ä¾‹å¦‚ï¼šåŒæ™‚ä½¿ç”¨ internal CSS å’Œ external CSS çš„æ–¹å¼è¨­å®š CSSï¼š12345678910111213&lt;!DOCTYPE html&gt;&lt;html&gt; &lt;head&gt; &lt;title&gt;Document&lt;/title&gt; &lt;link rel=\"stylesheet\" href=\"./style.css\" type=\"text/css\"&gt; &lt;style&gt; h1 &#123; color: green; &#125; &lt;/style&gt; &lt;/head&gt; &lt;body&gt; &lt;h1&gt;Title&lt;/h1&gt; &lt;/body&gt;&lt;/html&gt;ä¸‹é¢å…§å®¹ç‚º style.cssï¼š1h1 &#123; color: red; &#125;é‚£ h1 çš„é¡è‰²æœƒæ˜¯ç¶ è‰²ï¼šå¦‚æœæ›´æ› style å’Œ link å…ƒç´ çš„é †åºï¼Œh1 çš„é¡è‰²å‰‡æœƒæ˜¯ç´…è‰²ï¼š12345678910111213&lt;!DOCTYPE html&gt;&lt;html&gt; &lt;head&gt; &lt;title&gt;Document&lt;/title&gt; &lt;style&gt; h1 &#123; color: green; &#125; &lt;/style&gt; &lt;link rel=\"stylesheet\" href=\"./style.css\" type=\"text/css\"&gt; &lt;/head&gt; &lt;body&gt; &lt;h1&gt;Title&lt;/h1&gt; &lt;/body&gt;&lt;/html&gt;è³‡æ–™ä¾†æºï¼šStyle Sheets in HTML documentsHTML Standard - 4.2.4 The link element","categories":[{"name":"CSS","slug":"css","permalink":"https://titangene.github.io/categories/css/"},{"name":"HTML","slug":"css/html","permalink":"https://titangene.github.io/categories/css/html/"}],"tags":[{"name":"IT éµäººè³½","slug":"it-éµäººè³½","permalink":"https://titangene.github.io/tags/it-éµäººè³½/"}]},{"title":"å¥—ç”¨è‡ªè¨‚ HackMD æš—ä¸»é¡Œ","slug":"hackmd-dark-theme","date":"2019-05-18T12:16:35.000Z","updated":"2019-05-19T16:02:51.484Z","comments":true,"path":"article/hackmd-dark-theme.html","link":"","permalink":"https://titangene.github.io/article/hackmd-dark-theme.html","excerpt":"HackMD æ˜¯æˆ‘å¸¸ç”¨çš„å¯«ä½œå¹³å°ï¼Œå› å®˜æ–¹æ²’æœ‰æä¾›æš—ä¸»é¡Œçš„ç€è¦½æ¨¡å¼ï¼Œæ‰€ä»¥æˆ‘å°±åˆ»äº†è‡ªè¨‚çš„æš—ä¸»é¡Œï¼Œä¹Ÿå°‡è‡ªè¨‚ä¸»é¡Œé–‹æºåœ¨ GitHubï¼Œæ­¡è¿å¤§å®¶ç™¼ PR çµ¦æˆ‘ï¼Œä¸¦è¨˜å¾—å¹«æˆ‘æŒ‰å€‹ â­ï¸ æ˜Ÿã€‚","text":"HackMD æ˜¯æˆ‘å¸¸ç”¨çš„å¯«ä½œå¹³å°ï¼Œå› å®˜æ–¹æ²’æœ‰æä¾›æš—ä¸»é¡Œçš„ç€è¦½æ¨¡å¼ï¼Œæ‰€ä»¥æˆ‘å°±åˆ»äº†è‡ªè¨‚çš„æš—ä¸»é¡Œï¼Œä¹Ÿå°‡è‡ªè¨‚ä¸»é¡Œé–‹æºåœ¨ GitHubï¼Œæ­¡è¿å¤§å®¶ç™¼ PR çµ¦æˆ‘ï¼Œä¸¦è¨˜å¾—å¹«æˆ‘æŒ‰å€‹ â­ï¸ æ˜Ÿã€‚æ‡‰è©²æœ‰å¾ˆå¤šäººåœ¨ç€è¦½å™¨å®‰è£ Dark reader é€™å€‹æ“´å……åŠŸèƒ½å§ï¼Ÿé€šå¸¸ä½¿ç”¨çš„åŸå› å¤§å¤šæ˜¯æƒ³æŠŠç•«é¢è®Šæˆæ·±è‰²ç€è¦½æ¨¡å¼ï¼Œæ¯”è¼ƒä¿è­·çœ¼ç›ã€‚ä½†æ˜¯æœ‰äº›ç¶²ç«™ä½¿ç”¨é€™å€‹æ“´å……åŠŸèƒ½ä¹‹å¾Œï¼Œæœ‰äº›é¡è‰²ä¸æ˜¯ä½ ç¿’æ…£æˆ–å–œæ­¡çš„ï¼Œå°¤å…¶æ˜¯åœ¨å€‹äººå¸¸ç”¨çš„ç¶²ç«™ä¸Šæœƒæ„Ÿè¦ºæ²’é‚£éº¼ç¿’æ…£ã€‚è€Œ HackMD æ˜¯æˆ‘å¸¸ç”¨ä¾†å¯«æŠ€è¡“ç­†è¨˜çš„å¯«ä½œå¹³å°ï¼Œå°¤å…¶æ˜¯ç¨‹å¼ç¢¼çš„ highlightï¼Œæˆ‘å€‹äººåå¥½ VS Code é è¨­çš„æš—ä¸»é¡Œ (Dark+ é€™å€‹ä¸»é¡Œ)ï¼Œæ‰€ä»¥æˆ‘å°±åœ¨ç¶²é ä¸ŠåŠ ä¸Šè‡ªå·±è‡ªè¨‚çš„ CSS å»æ”¹æˆæˆ‘æƒ³è¦çš„ä¸»é¡Œã€‚é‚£å¦‚ä½•å°‡è‡ªå®šçš„ CSS åŠ åœ¨æŒ‡å®šçš„ç¶²ç«™ä¸Šå‘¢ï¼ŸåŸæœ¬æˆ‘æ˜¯ç”¨ Stylish ä¾†ç®¡ç†è‡ªè¨‚çš„ç¶²é æ¨£å¼ï¼Œä½†å¾Œä¾†å› ç‚ºä¸€äº›åŸå› é€™å€‹æ“´å……åŠŸèƒ½å¤šäº†åœ¨èƒŒæ™¯ä¸Šå‚³è³‡è¨Šçš„åŠŸèƒ½ (é›–ç„¶å®˜æ–¹èªªä¸æœƒä¸Šå‚³å€‹è³‡)ï¼Œæ–¼æ˜¯æˆ‘å°±æ”¹ç”¨ Stylus ä¾†ç®¡ç†æ¨£å¼ã€‚Stylus æ˜¯ Stylish çš„åˆ†æ”¯ï¼Œåˆªé™¤äº†ä»»ä½•èˆ‡åˆ†æã€å›å‚³è³‡æ–™çš„åŠŸèƒ½ã€‚å¦‚ä½•ä½¿ç”¨ä¸»é¡Œåœ¨ç€è¦½å™¨å®‰è£ Stylus æ“´å……åŠŸèƒ½ï¼ŒStylus ç›®å‰æä¾›é€™å¹¾ç¨®ç€è¦½å™¨ç‰ˆæœ¬çš„æ“´å……åŠŸèƒ½ï¼šChromeFirefoxOperaä¸‹è¼‰æˆ‘è‡ªå®šçš„ HackMD dark theme è‡³ Stylusä¸‹è¼‰æ¨£å¼å¾Œæœƒè‡ªå‹•å¥—ç”¨ï¼Œé–‹å•Ÿ HackMD å°±æœƒçœ‹åˆ°ä»‹é¢è®Šæˆæš—ä¸»é¡Œå›‰ï¼å¦‚æœæ˜¯ä¹‹å‰å°±é–‹å•Ÿçš„ HackMD é é¢ï¼Œæœ‰æ™‚æœƒéœ€è¦é‡æ–°æ•´ç†é é¢æ‰æœƒå¥—ç”¨æš—ä¸»é¡Œã€‚å°±æ˜¯é€™éº¼ç°¡å–® ğŸ˜„ã€‚é€™é‚Šè¦å¦å¤–èªªæ˜ä¸€ä¸‹ï¼Œé›–ç„¶å‰›å‰›æåˆ°å› ç‚º Stylish æœ‰æ”¶é›†è³‡æ–™çš„å•é¡Œï¼Œæ‰€ä»¥æˆ‘æ”¹ç”¨ Stylus ä¾†ç®¡ç†è‡ªå®šæ¨£å¼ï¼Œä½†æ˜¯è¦å°‡è‡ªå®šçš„æ¨£æ˜¯åˆ†äº«çµ¦åˆ¥äººä½¿ç”¨ï¼Œé‚„æ˜¯è¦è¨»å†Š Stylish å®˜æ–¹å¹³å°çš„å¸³è™Ÿï¼Œå°‡è¦åˆ†äº«çš„æ¨£å¼ä¸Šå‚³è‡³é€™å€‹å¹³å°ï¼Œè®“å…¶ä»–äººå¯ä»¥ä¸‹è¼‰ä½¿ç”¨ã€‚ä¸éå¦‚æœåªæ˜¯ä¸‹è¼‰åˆ¥äººçš„ä¸»é¡Œæ˜¯ä¸éœ€è¦è¨»å†Šå¸³è™Ÿï¼Œæ‰€ä»¥ä¸ç”¨æ“”å› ã€‚åŸå§‹ç¢¼é€™å°±æ˜¯æˆ‘è‡ªå®š HackMD æ¨£å¼çš„åŸå§‹ç¢¼ï¼štitangene/hackmd-dark-themeå¦‚æœç™¼ç¾éœ€ä¿®æ­£çš„åœ°æ–¹ï¼Œæ­¡è¿ç™¼ pull request çµ¦æˆ‘ ğŸ˜ã€‚å¦‚æœå–œæ­¡ï¼Œè¨˜å¾—å¹«æˆ‘æŒ‰å€‹ â­ï¸ æ˜Ÿï¼ŒThanksã€‚ç•«é¢æˆªåœ–OverviewRecentView modeBook modeSlide modeEmoji &amp; Todo list &amp; Code block highlightGithub GistLaTeX &amp; UMLTableToC (Table of Contents)HistoryPermissionCommentå°çµå…¶å¯¦é€™å€‹ side project æˆ‘åœ¨ 2017 å¹´ 8 æœˆå°±é–‹å§‹åšäº†ï¼ŒæœŸé–“åšäº†ä¸€äº›ä¸å®šæœŸçš„æ›´æ–°ï¼Œé€™æ¬¡çš„æ›´æ–°ç®—æ˜¯æ‰€æœ‰æˆ‘ç™¼ç¾æƒ³æ”¹çš„éƒ¨åˆ† (æ´) éƒ½å¡«å¥½äº† (æœ‰å¯èƒ½æˆ‘çœ¼æ®˜æ²’ç™¼ç¾çš„éƒ¨åˆ†ä¹Ÿéœ€è¦æ”¹ XDï¼Œæ­¡è¿å¤§å®¶ç™¼ PR çµ¦æˆ‘)ï¼ŒåŒ…æ‹¬æœ€è¿‘ HackMD å®˜æ–¹æ¨å‡ºçš„å¯åˆ†äº«æ–‡ä»¶çµ¦æŒ‡å®šå¸³è™Ÿçš„åŠŸèƒ½ï¼Œæˆ‘ä¹ŸæŠŠä»‹é¢è®Šæˆæš—ä¸»é¡Œäº†ã€‚å¥—ç”¨æš—ä¸»é¡Œçš„å…¶ä»–ç§˜è¨£åœ¨ HackMD æ“”ä»» Developer çš„ é»ƒéˆºå‡± åœ¨æˆ‘ç™¼æ–‡çš„ Facebook ç¤¾åœ˜ Markdown å°ç£ï¼Œè·Ÿå¤§å®¶åˆ†äº«å¦ä¸€ç¨®å¯ä»¥å¥—ç”¨æš—ä¸»é¡Œçš„å°ç§˜è¨£ï¼Œè€Œä¸”é€™å€‹æ–¹æ³•å¯ä»¥å°‡ä½ è‡ªå®šçš„æ¨£å¼ï¼Œå¥—ç”¨è‡³ä½ åˆ†äº«çš„ç­†è¨˜ï¼Œæˆ–æ˜¯è·Ÿå¤¥ä¼´åƒèˆ‡çš„å…±ç­†ï¼Œè®“å¤§å®¶éƒ½èƒ½å…±äº«åŒæ¨£çš„æš—ä¸»é¡Œã€‚é€™å€‹ç¥•è¨£å°±æ˜¯åœ¨ç­†è¨˜å…§ï¼ŒåŠ ä¸Š HackMD çš„å…§åµŒç­†è¨˜èªæ³•ï¼Œä¾‹å¦‚ï¼š1&#123;%hackmd BJrTq20hE %&#125;ä»¥ https://hackmd.io/IpJEFpXkQg2yvdsY9IbTVg?both (é€™å€‹é€£çµæ˜¯ç”± é»ƒéˆºå‡± å¤§å¤§æä¾›) é€™å€‹ç­†è¨˜ç‚ºä¾‹ï¼Œåœ¨é€™å€‹ç­†è¨˜å…§å¯ä»¥çœ‹åˆ° HackMD çš„å…§åµŒç­†è¨˜èªæ³•ï¼Œè€Œä¸”å¯ä»¥çœ‹åˆ°æˆ‘æ²’æœ‰åœ¨ Stylus é–‹å•Ÿæˆ‘è‡ªå®šçš„ HackMD dark themeï¼Œç«Ÿç„¶é‚„å¯ä»¥ä¿æœ‰æš—ä¸»é¡Œçš„æ¨£å¼ï¼šåŸå› å°±ç™¼ç”Ÿåœ¨é€™å€‹ HackMD çš„å…§åµŒç­†è¨˜èªæ³•ï¼Œå› ç‚ºé€™å€‹èªæ³•èƒŒå¾Œå¹«ä½ å¤šåŠ äº†æš—ä¸»é¡Œçš„æ¨£å¼ã€‚é‚£æ˜¯æ€éº¼åšåˆ°çš„å‘¢ï¼Ÿæ–¼æ˜¯æˆ‘å°±å¾ BJrTq20hE é€™å€‹çœ‹ä¼¼å¥‡æ€ªäº‚ç¢¼çš„æ±è¥¿ä¸‹æ‰‹ã€‚é¦¬ä¸Šå°±ç›´è¦ºæƒ³åˆ°ï¼Œå…¶å¯¦ BJrTq20hE æ˜¯å¦ä¸€ç¯‡ç­†è¨˜çš„ç·¨è™Ÿï¼Œé€™å€‹ç­†è¨˜çš„å®Œæ•´é€£çµåƒæ˜¯ä¸‹é¢é€™æ¨£ï¼Œç¶²å€å…¶ä¸­çš„ s æ˜¯ HackMD çš„ç™¼è¡¨æ¨¡å¼ (æ‡‰è©²æ˜¯å«é€™æ¨£å§ï¼Ÿ)ï¼š1https://hackmd.io/s/BJrTq20hEé€²å…¥é€™å€‹é€£çµå¾Œï¼Œå¯ä»¥çœ‹åˆ°æ•´å€‹ç­†è¨˜ç•«é¢æ²’æœ‰ä»»ä½•æ–‡å­—å…§å®¹ï¼Œä½†æ˜¯ä¸€æ¨£åœ¨æ²’æœ‰å¥—ç”¨è‡ªè¨‚æš—ä¸»é¡Œçš„æƒ…æ³ä¸‹ï¼Œé‚„èƒ½æœ‰æš—ä¸»é¡Œçš„æ¨£å¼ã€‚æ¥è‘—æˆ‘é€²å…¥é€™å€‹ç­†è¨˜çš„ç·¨è¼¯æ¨¡å¼å°±ç™¼ç¾ç­”æ¡ˆå·²æ­æ›‰ï¼ŒåŸä¾†é€™å€‹çœ‹ä¼¼æ²’å…§æ–‡çš„ç­†è¨˜ä¸­ï¼Œæœ‰æˆ‘å¯«çš„æš—ä¸»é¡Œæ¨£å¼ï¼Œé€™äº›æ¨£å¼ç›´æ¥è¢«å¯«åœ¨é€™ç¯‡ HackMD çš„ç­†è¨˜è£¡é¢ï¼Œä¸¦ä¸”æ”¾åœ¨ &lt;style&gt; çš„ HTML element å…§ï¼šä¹Ÿå°±æ˜¯èªªå¦‚æœæœªä¾†æƒ³åœ¨å…¶ä»–ç­†è¨˜ä¹Ÿå¥—ç”¨ç›¸åŒçš„ä¸»é¡Œæ¨£å¼ï¼Œåªè¦å»ºç«‹å°ˆé–€æ”¾æ¨£å¼çš„ç­†è¨˜ï¼Œç„¶å¾Œå°‡é€™å€‹ç­†è¨˜é€é HackMD çš„å…§åµŒç­†è¨˜èªæ³•å¥—ç”¨è‡³å…¶ä»–ç­†è¨˜ä¸Šï¼Œé€™æ¨£é‚£äº›ç­†è¨˜éƒ½æœƒå…±äº«ç›¸åŒçš„æ¨£å¼å›‰ï¼å¥½ç¥å¥‡å•Šï¼æ„Ÿè¬ HackMD Developer å¤§å¤§çš„åˆ†äº«ï¼","categories":[{"name":"Blog","slug":"blog","permalink":"https://titangene.github.io/categories/blog/"},{"name":"CSS","slug":"blog/css","permalink":"https://titangene.github.io/categories/blog/css/"}],"tags":[{"name":"Markdown","slug":"markdown","permalink":"https://titangene.github.io/tags/markdown/"},{"name":"Dark Theme","slug":"dark-theme","permalink":"https://titangene.github.io/tags/dark-theme/"}]},{"title":"é€é Docker Compose è¨­å®š network","slug":"networking-in-docker-compose","date":"2019-05-15T13:03:15.000Z","updated":"2019-05-15T13:02:26.117Z","comments":true,"path":"article/networking-in-docker-compose.html","link":"","permalink":"https://titangene.github.io/article/networking-in-docker-compose.html","excerpt":"Docker Compose é è¨­æœƒå»ºç«‹ default networkï¼Œé€™ç¯‡æœƒå‘Šè¨´ä½ å¦‚ä½•è‡ªè¨‚ networkã€å¦‚ä½•ä½¿ç”¨ç¾æœ‰çš„ networkï¼Œä»¥åŠå¦‚ä½•è‡ªè¨‚ network åç¨±ã€‚","text":"Docker Compose é è¨­æœƒå»ºç«‹ default networkï¼Œé€™ç¯‡æœƒå‘Šè¨´ä½ å¦‚ä½•è‡ªè¨‚ networkã€å¦‚ä½•ä½¿ç”¨ç¾æœ‰çš„ networkï¼Œä»¥åŠå¦‚ä½•è‡ªè¨‚ network åç¨±ã€‚Docker Compose é è¨­æœƒå¹«ä½ çš„æ‡‰ç”¨ç¨‹å¼è¨­å®šä¸€å€‹ networkï¼Œservice çš„æ¯å€‹å®¹å™¨éƒ½æœƒåŠ å…¥ default networkï¼Œä¸¦ä¸”è©² network ä¸Šçš„å…¶ä»–å®¹å™¨éƒ½å¯ä»¥é€£æ¥ (reachable) ä»¥åŠç™¼ç¾ (discoverable) èˆ‡å®¹å™¨åç¨±ç›¸åŒçš„ hostnameã€‚é è¨­çš„ network åç¨±æ˜¯åŸºæ–¼ â€œå°ˆæ¡ˆç›®éŒ„åç¨±â€ï¼Œä¸¦åŠ ä¸Š _defaultã€‚ä¾‹å¦‚ï¼šä½ çš„æ‡‰ç”¨ç¨‹å¼æ”¾åœ¨åç‚º myapp çš„å°ˆæ¡ˆç›®éŒ„ä¸­ï¼Œè€Œ docker-compose.yml çš„å…§å®¹å¦‚ä¸‹ï¼š1234567891011version: '3'services: web: build: . ports: - '8000:8000' db: image: postgres ports: - '8001:5432'ç•¶ä½ åŸ·è¡Œ docker-compose up æŒ‡ä»¤æ™‚ï¼Œæœƒç™¼ç”Ÿä»¥ä¸‹æƒ…æ³ï¼šå»ºç«‹ä¸€å€‹åç‚º myapp_default çš„ networkä½¿ç”¨ web çš„è¨­å®šå»ºç«‹å®¹å™¨ï¼Œä¸¦ä»¥ web é€™å€‹åç¨±åŠ å…¥åç‚º myapp_default çš„ networkä½¿ç”¨ db çš„è¨­å®šå»ºç«‹å®¹å™¨ï¼Œä¸¦ä»¥ db é€™å€‹åç¨±åŠ å…¥åç‚º myapp_default çš„ networkç•¶ç„¶ä½ ä¹Ÿå¯ä»¥ä½¿ç”¨ --project-name (å¯ç°¡å¯«æˆ -p ) åƒæ•¸ æˆ–ä½¿ç”¨ COMPOSE_PROJECT_NAME é€™å€‹ ç’°å¢ƒè®Šæ•¸ ä¾†è¤‡å¯«å°ˆæ¡ˆåç¨±ã€‚ç¾åœ¨ï¼Œæ¯å€‹å®¹å™¨éƒ½å¯ä»¥æ‰¾åˆ°åç‚º web æˆ– db çš„ hostnameï¼Œä¸¦ç²å¾—å°æ‡‰å®¹å™¨çš„ IP ä½å€ã€‚ä¾‹å¦‚ï¼šweb çš„æ‡‰ç”¨ç¨‹å¼çš„ç¨‹å¼ç¢¼å¯ä»¥é€£æ¥åˆ° postgres://db:5432 çš„ URLï¼Œä¸¦é–‹å§‹ä½¿ç”¨ Postgres è³‡æ–™åº«ã€‚ä¸éè¦æ³¨æ„ HOST_PORT å’Œ CONTAINER_PORT ä¹‹é–“çš„å·®åˆ¥ã€‚ä»¥ä¸Šé¢ç¯„ä¾‹ä¸­çš„ db ä¾†èªªï¼ŒHOST_PORT æ˜¯ 8001ï¼ŒCONTAINER_PORT æ˜¯ 5432 (postgres çš„é è¨­ port)ã€‚Networked service-to-service é€šè¨Šä½¿ç”¨ CONTAINER_PORTã€‚å®šç¾© HOST_PORT ä¹‹å¾Œï¼Œservice ä¹Ÿå¯ä»¥åœ¨ swarm å¤–éƒ¨å­˜å–ã€‚åœ¨ web çš„å®¹å™¨ä¸­ï¼Œå¦‚æœè¦é€£æ¥åˆ° db çš„é€£æ¥å­—ä¸²æœƒçœ‹èµ·ä¾†åƒæ˜¯ postgres://db:5432 é€™æ¨£ï¼Œè€Œå¾ host machine ä¾†çœ‹ï¼Œé€£æ¥å­—ä¸²çœ‹èµ·ä¾†åƒæ˜¯ postgres://{DOCKER_IP}:8001ã€‚æ›´æ–°å®¹å™¨å¦‚æœæœ‰è®Šæ›´ service çš„è¨­å®šï¼Œè«‹åŸ·è¡Œ docker-compose up æŒ‡ä»¤ä¾†æ›´æ–° serviceï¼Œå®ƒæœƒåˆªé™¤èˆŠçš„å®¹å™¨ï¼Œè€Œæ–°å®¹å™¨æœƒä»¥ä¸åŒçš„ IP ä½å€åŠ å…¥ç›¸åŒåç¨±çš„ networkã€‚åŸ·è¡Œä¸­çš„å®¹å™¨å¯ä»¥æ‰¾åˆ°è©²åç¨±ä¸¦é€£æ¥åˆ°æ–°çš„ IP ä½å€ï¼Œè€ŒèˆŠçš„ IP ä½å€å°±ç„¡æ³•ä½¿ç”¨ã€‚å¦‚æœä»»ä½•å®¹å™¨å°èˆŠå®¹å™¨é–‹æ”¾é€£ç·šï¼Œé‚£é€™äº›å®¹å™¨å°±æœƒè¢«é—œé–‰é€£ç·šã€‚å®¹å™¨æœ‰è²¬ä»»æª¢æ¸¬é€™å€‹æƒ…æ³ï¼Œå†æ¬¡æ‰¾åˆ°åç¨±ä¸¦é‡æ–°é€£æ¥ã€‚Linkslink åˆ°å¦ä¸€å€‹ service ä¸­çš„å®¹å™¨ã€‚é€é link å¯ä»¥æŒ‡å®š service åç¨±å’Œ link åˆ¥å ( SERVICE:ALIAS ï¼‰ï¼Œæˆ–åƒ…æŒ‡å®š service åç¨±ã€‚é€éè©²åˆ¥åå¯ä»¥å¾å…¶ä»– service å­˜å–åˆ° serviceã€‚link ä¸éœ€è¦å•Ÿç”¨ service é€²è¡Œé€šè¨Š - é è¨­æƒ…æ³ä¸‹ï¼Œä»»ä½• service éƒ½å¯ä»¥é€šéè©² service çš„åç¨±å­˜å–ä»»ä½•å…¶ä»– serviceã€‚éˆæ¥ (linked) service çš„å®¹å™¨å¯åœ¨åˆ¥åç›¸åŒçš„ hostname ä¸Šå­˜å–ï¼Œå¦‚æœæœªæŒ‡å®šåˆ¥åï¼Œå‰‡å¯ä»¥å­˜å– service åç¨±ã€‚åœ¨ä¸‹é¢ç¯„ä¾‹ä¸­ï¼Œå¯ä»¥å¾ web çš„ hostname db å’Œ database å­˜å–åˆ° dbï¼š123456789version: '3'services: web: build: . links: - 'db:database' db: image: postgreslink å’Œ depends_on éƒ½æ˜¯ä»¥ç›¸åŒçš„æ–¹å¼è¡¨é” service ä¹‹é–“çš„ä¾è³´é—œä¿‚ï¼Œå› æ­¤å¯ä»¥ä½¿ç”¨å®ƒå€‘ä¾†æ±ºå®š service å•Ÿå‹•çš„é †åºã€‚å¦‚æœåŒæ™‚å®šç¾© links å’Œ networksï¼Œå‰‡å®ƒå€‘ä¹‹é–“å…·æœ‰ links çš„ service å¿…é ˆå…±äº«è‡³å°‘ä¸€å€‹å…±åŒçš„ç¶²çµ¡æ‰èƒ½é€²è¡Œé€šè¨Šã€‚å»ºè­°ä½¿ç”¨ networkåœ¨ swarm æ¨¡å¼ä¸‹ä½¿ç”¨ Compose æª”æ¡ˆ (v3) éƒ¨ç½² stack æ™‚ï¼Œæœƒå¿½ç•¥ links é€™å€‹ option--link åƒæ•¸ç‚º legacy åŠŸèƒ½ï¼Œå¯èƒ½æœƒè¢«åˆªé™¤ã€‚ä¸å»ºè­°ä½¿ç”¨ --linkï¼Œå»ºè­°ä½¿ç”¨ user-defined networks (ä½¿ç”¨è€…å®šç¾©çš„ç¶²è·¯) ä¾†ä¿ƒæˆå…©å€‹å®¹å™¨ä¹‹é–“çš„æºé€šã€‚user-defined networks ä¸æ”¯æ´ä½ ç”¨ --link åƒæ•¸åœ¨å®¹å™¨ä¹‹é–“å…±äº«ç’°å¢ƒè®Šæ•¸ã€‚ä½†æ˜¯ï¼Œä½ å¯ä»¥ä½¿ç”¨å…¶ä»–æ©Ÿåˆ¶ (ä¾‹å¦‚ï¼švolume)ï¼Œä»¥æ›´å¯æ§çš„æ–¹å¼åœ¨å®¹å™¨ä¹‹é–“å…±äº«ç’°å¢ƒè®Šæ•¸ã€‚è©³æƒ…å¯åƒè€ƒå®˜æ–¹çš„ Compose file version 3 reference | Docker Documentation æ–‡ä»¶ã€‚Multi-host networkingæ³¨æ„ï¼šæœ¬ç¯€ä¸­çš„èªªæ˜åªé©ç”¨æ–¼ legacy Docker Swarm çš„ç›¸é—œæ“ä½œï¼Œä¸¦ä¸”åªæœ‰ç›®æ¨™ç‚º legacy Swarm å¢é›†æ‰æœ‰ç”¨ã€‚æœ‰é—œå°‡ compose å°ˆæ¡ˆéƒ¨ç½²è‡³è¼ƒæ–°çš„æ•´åˆ swarm modeï¼Œè«‹åƒè€ƒDocker Stacks æ–‡ä»¶ã€‚å°‡ Compose æ‡‰ç”¨ç¨‹å¼éƒ¨ç½²è‡³ Swarm å¢é›† æ™‚ï¼Œå¯ä»¥ä½¿ç”¨å…§å»ºçš„ overlay driver åœ¨å®¹å™¨ä¹‹é–“å•Ÿç”¨ multi-host é€šè¨Šï¼Œè€Œç„¡éœ€æ›´æ”¹ Compose æª”æ¡ˆæˆ–æ‡‰ç”¨ç¨‹å¼çš„ç¨‹å¼ç¢¼ã€‚æƒ³äº†è§£å¦‚ä½•è¨­å®š Swarm å¢é›†å¯åƒè€ƒå®˜æ–¹çš„ Multi-host networking é€™ç¯‡ã€‚å¢é›†é è¨­æ˜¯ä½¿ç”¨ overlay driverï¼Œä¸éä¹Ÿå¯ä»¥åƒè€ƒä¸‹ä¸€ç¯€æŒ‡å®šå…¶ä»– driverã€‚æŒ‡å®šè‡ªå®š networkè‹¥ä¸æƒ³ä½¿ç”¨é è¨­çš„ app networkï¼Œå¯ä»¥ä½¿ç”¨ top-level networks key ä¾†æŒ‡å®šè‡ªå·±çš„ networkï¼Œè®“ä½ å¯ä»¥å»ºç«‹æ›´è¤‡é›œçš„æ‹“æ’²ï¼Œä¸¦æŒ‡å®š custom network driver å’Œ optionã€‚é‚„å¯ä»¥ä½¿ç”¨å®ƒï¼Œå°‡ service é€£æ¥åˆ°ä¸ç”± Compose ç®¡ç†ï¼Œè€Œæ˜¯ç”±å¤–éƒ¨å»ºç«‹çš„ networkã€‚æ¯å€‹ service éƒ½å¯ä»¥ä½¿ç”¨ service-level networks key æŒ‡å®šè¦é€£æ¥çš„ networkï¼Œè©² key æ˜¯å¼•ç”¨è‡³ top-level networks key ä¸‹çš„åç¨±ã€‚ä»¥ä¸‹é¢å®šç¾©çš„å…©å€‹è‡ªå®š network çš„ Compose æª”æ¡ˆç‚ºä¾‹ï¼Œproxy service èˆ‡ db service éš”é›¢ï¼Œå› ç‚ºå®ƒå€‘ä¸å…±äº«å…±åŒçš„ networkï¼Œåªæœ‰ app å¯ä»¥èˆ‡å…©è€…æºé€šï¼š123456789101112131415161718192021222324252627version: '3'services: proxy: build: ./proxy networks: - frontend app: build: ./app networks: - frontend - backend db: image: postgres networks: - backendnetworks: frontend: # Use a custom driver driver: custom-driver-1 backend: # Use a custom driver which takes special options driver: custom-driver-2 driver_opts: foo: '1' bar: '2'é€šéç‚ºæ¯å€‹é€£æ¥ (attached) çš„ network è¨­å®š ipv4_address å’Œ/æˆ– ipv6_addressï¼Œå¯ä»¥ç‚º network è¨­å®šéœæ…‹ IP ä½å€ã€‚è¨­å®š default networké€éåœ¨ top-level networks key å…§ï¼Œåç‚º default network ä¸‹å®šç¾© entryï¼Œä¾†æ›´æ”¹æ‡‰ç”¨ç¨‹åºç¯„åœ (app-wide) çš„ default network çš„è¨­å®šï¼š1234567891011121314version: '3'services: web: build: . ports: - '8000:8000' db: image: postgresnetworks: default: # Use a custom driver driver: custom-driver-1ä½¿ç”¨ pre-existing networkå¦‚æœå¸Œæœ›å®¹å™¨åŠ å…¥é å…ˆå®šç¾©å¥½çš„ networkï¼Œå°±å¯ä»¥ä½¿ç”¨ external optionã€‚å¦‚æœ external è¨­ç‚º trueï¼Œå°±æœƒæŒ‡å®šå·²åœ¨ Compose ä¹‹å¤–å…ˆå»ºç«‹çš„é‚£å€‹ networkï¼Œæ‰€ä»¥ docker-compose up ä¸æœƒå˜—è©¦å»ºç«‹æ­¤ networkã€‚å¦‚æœæ­¤ network ä¸å­˜åœ¨ï¼Œæœƒå› ç‚ºæ‰¾ä¸åˆ°åƒè€ƒçš„ç›®æ¨™ network è€Œç™¼ç”ŸéŒ¯èª¤ã€‚éŒ¯èª¤å¦‚ä¸‹ï¼š12$ docker-compose upERROR: Network my_network declared as external, but could be found. Please create the network manually using `docker network create my_network` and try again.å¦‚æœæ‰¾ä¸åˆ°æ­¤ networkï¼Œå¯ä»¥åŸ·è¡Œ docker network create [network_name] ä¾†å»ºç«‹ networkã€‚åœ¨ Compose v3.3 ä»¥åŠæ›´èˆŠç‰ˆçš„æª”æ¡ˆæ ¼å¼ä¸‹ï¼Œexternal ä¸èƒ½è·Ÿå…¶ä»– network configuration keys ä¸€èµ·ä½¿ç”¨ï¼ŒåŒ…æ‹¬ï¼šdriverã€driver_optsã€ipam å’Œ internal ã€‚Compose v3.4 ä»¥åŠæ›´æ–°ç‰ˆçš„æ ¼å¼å°±æ²’æœ‰é€™å€‹é™åˆ¶ã€‚ä¸‹é¢ç¯„ä¾‹çš„ Compose æœƒæ‰¾åˆ°åç‚º my-network-name çš„å·²å­˜åœ¨çš„ networkï¼Œä¸¦å°‡æ‡‰ç”¨ç¨‹å¼çš„å®¹å™¨é€£æ¥åˆ°è©² networkï¼Œé€™æ¨£å°±ä¸æœƒå˜—è©¦å»ºç«‹ä¸€å€‹åç‚º [projectname]_default çš„ networkï¼š123456789101112version: \"3.7\"services: app: image: whatever networks: - my-networknetworks: my-network: external: name: my-network-nameåœ¨ä¸‹é¢ç¯„ä¾‹ä¸­ï¼Œproxy æ˜¯é€šå¾€å¤–éƒ¨ä¸–ç•Œçš„ gatewayï¼Œæ‰€ä»¥ä¸éœ€è¦å»ºç«‹ä¸€å€‹åç‚º [projectname]_outside çš„ networkã€‚Compose æœƒæ‰¾åˆ°ä¸€å€‹åç‚º outside çš„å·²å­˜åœ¨çš„ networkï¼Œä¸¦å°‡ proxy service çš„å®¹å™¨é€£æ¥åˆ° outside networkã€‚12345678910111213141516version: \"3.7\"services: proxy: build: ./proxy networks: - outside - default app: build: ./app networks: - defaultnetworks: outside: external: trueä¸‹é¢ç¯„ä¾‹çš„ Compose ä¸æœƒå˜—è©¦å»ºç«‹ä¸€å€‹åç‚º [projectname]_default çš„ networkï¼ŒCompose æœƒæ‰¾åˆ°åç‚º my-pre-existing-network çš„ networkï¼Œä¸¦å°‡æ‡‰ç”¨ç¨‹å¼çš„å®¹å™¨é€£æ¥åˆ°è©² networkã€‚123456version: \"3.7\"networks: default: external: name: my-pre-existing-networkexternal.name åœ¨ Compose v3.5 æª”æ¡ˆæ ¼å¼ ä¸­å·²è¢«æ£„ç”¨ï¼Œè«‹æ”¹ç”¨åŒç‰ˆæœ¬æ–°å¢çš„ nameï¼Œä¸‹ä¸€ç¯€æœƒèªªæ˜ã€‚è‡ªè¨‚ network åç¨±network ä¹Ÿå¯ä»¥è‡ªè¨‚åç¨±ï¼Œname å±¬æ€§å¯å¼•ç”¨åŒ…å«ç‰¹æ®Šå­—å…ƒçš„ networkã€‚ä¸‹é¢ä»¥é€™å€‹ Compose ç‚ºä¾‹ï¼Œä»‹ç´¹å¦‚ä½•è‡ªè¨‚ network åç¨±ï¼š1234567891011version: '3.5'services: app: image: whatever networks: - my-networknetworks: my-network: name: my-app-networkåœ¨ top-level networks keyå…ˆæŠŠ Compose è£¡é¢çš„ version æ”¹æˆ 3.5 ä»¥ä¸Šï¼Œå› ç‚ºåœ¨ v3.5 ç‰ˆæ‰é–‹å§‹æä¾›è‡ªè¨‚ network åç¨± (ä¹Ÿå°±æ˜¯å¢åŠ  name å±¬æ€§)åœ¨ service-level networks key è£¡é¢ (ä¹Ÿå°±æ˜¯è‡ªè¨‚çš„ service å…§çš„ networks )ï¼ŒåŠ å…¥è‡ªè¨‚çš„ network åç¨± (æ­¤ç¯„ä¾‹ç‚º my-network )network çš„è©³ç´°å®šç¾©æ˜¯å¯«åœ¨ top-level networks key (ä¹Ÿå°±æ˜¯é€šå¸¸å¯«åœ¨æª”æ¡ˆæœ€å¾Œé¢çš„ networks ) è£¡é¢ã€‚é€™è£¡çš„ network åç¨±è¦å’Œ service-level networks key è£¡é¢è‡ªè¨‚çš„åç¨±å°æ‡‰ (ä¹Ÿå°±æ˜¯ my-network é€™å€‹ network åç¨±è¦å’Œä¸Šé¢ services å…§çš„ä¸€æ¨£)ï¼Œåœ¨ my-network ä¸‹é¢å°±å¯ä»¥ä½¿ç”¨ name å±¬æ€§ä¾†è‡ªå®š network åç¨± ( my-app-network å°±æ˜¯ä½ çœŸæ­£è‡ªè¨‚çš„ network åç¨± )è©³æƒ…å¯åƒè€ƒå®˜æ–¹çš„ Compose file version 3 reference | Docker Documentation æ–‡ä»¶ã€‚ä¹Ÿå¯ä»¥èˆ‡ external å±¬æ€§ä¸€èµ·ä½¿ç”¨ï¼š123456version: \"3.7\"networks: network1: external: true name: my-app-networkåƒè€ƒä¾†æºNetworking in Compose | Docker DocumentationCompose file version 3 reference | Docker Documentation","categories":[{"name":"DevOps","slug":"devops","permalink":"https://titangene.github.io/categories/devops/"}],"tags":[{"name":"Docker","slug":"docker","permalink":"https://titangene.github.io/tags/docker/"},{"name":"Container","slug":"container","permalink":"https://titangene.github.io/tags/container/"},{"name":"Docker Compose","slug":"docker-compose","permalink":"https://titangene.github.io/tags/docker-compose/"}]},{"title":"åœ¨ GCP å»ºç«‹ Network Load Balancer å’Œ HTTP Load Balancer","slug":"gcp-network-and-http-load-balancer","date":"2019-04-24T14:22:43.000Z","updated":"2019-04-24T14:21:10.799Z","comments":true,"path":"article/gcp-network-and-http-load-balancer.html","link":"","permalink":"https://titangene.github.io/article/gcp-network-and-http-load-balancer.html","excerpt":"æœ¬ç¯‡æ˜¯ç´€éŒ„åœ¨ Google çš„ Qwiklab å¹³å°å…§ï¼Œå®Œæˆã€ŒSet Up Network and HTTP Load Balancersã€é€™å€‹ quest æ‰€å­¸åˆ°çš„å…§å®¹ï¼ŒåŒ…æ‹¬å¦‚ä½•å»ºç«‹å¤šå€‹ web server instanceï¼Œä»¥åŠå¦‚ä½•å»ºç«‹ network load balancer å’Œ HTTP load balancerã€‚","text":"æœ¬ç¯‡æ˜¯ç´€éŒ„åœ¨ Google çš„ Qwiklab å¹³å°å…§ï¼Œå®Œæˆã€ŒSet Up Network and HTTP Load Balancersã€é€™å€‹ quest æ‰€å­¸åˆ°çš„å…§å®¹ï¼ŒåŒ…æ‹¬å¦‚ä½•å»ºç«‹å¤šå€‹ web server instanceï¼Œä»¥åŠå¦‚ä½•å»ºç«‹ network load balancer å’Œ HTTP load balancerã€‚åœ¨æ­¤ lab ä¸­ï¼Œä½ å°‡äº†è§£ network load balancer å’Œ HTTP load balancer ä¹‹é–“çš„å·®ç•°ï¼Œä»¥åŠå¦‚ä½•ç‚º Google Compute Engine (GCE) VM ä¸ŠåŸ·è¡Œçš„æ‡‰ç”¨ç¨‹å¼è¨­å®š load balancerã€‚ä½ å¯é€šéå¤šç¨®æ–¹å¼åœ¨ GCP å…§é€²è¡Œè² è¼‰å¹³è¡¡ (load balance)ã€‚æ­¤ lab å°‡æ•™ä½ å®Œæˆä»¥ä¸‹ load balancer çš„è¨­å®šï¼šL3 (Network Layer) Network Load BalancerL7 (Application Layer) HTTP(s) Load Balanceræœ¬ç¯‡å°‡æœƒåšä»€éº¼ï¼Ÿè¨­å®š network load balancerè¨­å®š HTTP load balanceré€éå¯¦ä½œï¼Œäº†è§£ network load balancer å’Œ HTTP load balancer ä¹‹é–“çš„å·®ç•°æº–å‚™åœ¨é»æ“Šã€ŒStart Labã€ä¹‹å‰ï¼Œæº–å‚™å¥½ç¶²è·¯ç€è¦½å™¨ (æ¨è–¦ç”¨ Google Chrome)ï¼Œä¸¦ä¸”è‡³å°‘ 40 åˆ†é˜å¯ä»¥å°ˆæ³¨çš„æ™‚é–“ï¼Œå› ç‚º lab æ˜¯æœ‰æ™‚é–“é™åˆ¶ï¼Œç•¶ä½ æŒ‰ä¸‹ã€ŒStart Labã€é–‹å§‹å­¸ç¿’æ™‚ï¼Œç„¡æ³•æš«åœå€’æ•¸è¨ˆæ™‚ï¼Œä½ åªèƒ½åœ¨é€™æ®µæ™‚é–“å…§ä½¿ç”¨ lab æä¾›çµ¦ä½ çš„å…¨æ–°æš«æ™‚ GCP Console å¯ç”¨å¸³è™Ÿï¼Œæ™‚é–“åˆ°ä¹‹å¾Œçš„å¹¾åˆ†é˜å°±æœƒè‡ªå‹•ç™»å‡ºã€‚æ³¨æ„ï¼šå¦‚æœä½ æœ‰è‡ªå·±çš„å€‹äºº GCP å¸³è™Ÿæˆ–å°ˆæ¡ˆï¼Œè«‹ä¸è¦åœ¨æ­¤ lab ä½¿ç”¨é–‹å§‹ä½ çš„ Labï¼Œç„¶å¾Œç™»å…¥ GCP Consoleå¦‚æœæº–å‚™è¦é–‹å§‹ï¼Œå¯ä»¥é»æ“Šå³ä¸Šè§’çš„ã€ŒStart Labã€é–‹å§‹ï¼šæ¥è‘—æœƒå‡ºç¾é€™å€‹ç•«é¢ï¼Œå› ç‚ºæˆ‘åƒåŠ  GDG Tainan çš„æ´»å‹•ï¼Œæ´»å‹•æœ‰æä¾› Qwiklabs ä¸€å€‹æœˆçš„å…è²»é¡åº¦ï¼Œæ‰€ä»¥æˆ‘é»é¸ä¸‹åœ–å·¦é‚Šçš„ã€ŒUse Subscriptionã€ï¼šLab æœƒæä¾›çµ¦ä½ å…è²»æš«æ™‚çš„ GCP å¸³è™Ÿï¼Œè¤‡è£½å¸³è™Ÿå’Œå¯†ç¢¼ï¼Œç„¶å¾Œé»æ“Šã€ŒOpen Google Consoleã€é–‹å•Ÿ GCP Consoleï¼šåœ–ç‰‡ä¾†æºï¼šCreating a Virtual Machine | Qwiklabsæ¥è‘—å°±æœƒé–‹å•Ÿç™»å…¥é é¢ï¼Œå»ºè­°å¦å¤–é–‹ Chrome ç„¡ç—•æ¨¡å¼ä¾†ç™»å…¥ lab æä¾›çš„å¸³è™Ÿå’Œå¯†ç¢¼ï¼Œå› ç‚º Chrome æœƒç´€éŒ„å¸³å¯†ï¼Œç¾åœ¨ç™»å…¥çš„åªæ˜¯æš«æ™‚å¸³è™Ÿï¼Œæœªä¾†ä¸éœ€è¦ç”¨åˆ°ï¼šæ³¨æ„ï¼šé€™é‚Šæ˜¯ç™»å…¥ lab æä¾›çš„å¸³è™Ÿ (ä¹Ÿå°±æ˜¯ email å¿…é ˆç‚º googlexxxxxx_student@qwiklabs.net )ï¼Œå¦‚æœä½ æœ‰è‡ªå·±çš„ GCP å¸³è™Ÿï¼Œè«‹ä¸è¦ç”¨æ–¼æ­¤ labï¼Œé¿å…ç”¢ç”Ÿè²»ç”¨é¡ä¼¼æ–¼ googlexxxxxx_student@qwiklabs.net çš„å¸³è™Ÿæ˜¯ä¸€å€‹ Google å¸³è™Ÿï¼Œå°ˆç‚º Qwiklabs å­¸ç”Ÿä½¿ç”¨è€Œå»ºç«‹çš„ã€‚å®ƒå…·æœ‰ç‰¹å®šçš„åŸŸå (ä¹Ÿå°±æ˜¯ qwiklabs.net )ï¼Œä¸¦ä¸”å·²åˆ†é…äº† IAM è§’è‰²ï¼Œå…è¨±ä½ å»å­˜å–è©² GCP å°ˆæ¡ˆã€‚æ¥å— terms å’Œ conditionsï¼šä¸è¦æ–°å¢ recovery options æˆ– two-factor authentication (å› ç‚ºé€™æ˜¯ä¸€å€‹è‡¨æ™‚å¸³è™Ÿ)ï¼šå‹¾é¸åŒæ„æœå‹™æ¢æ¬¾ï¼šä¹‹å¾Œå°±å¯ä»¥é–‹å§‹ä½¿ç”¨ GCP Console å›‰ï¼šå•Ÿå‹• Google Cloud ShellGoogle Cloud Shell æ˜¯è¼‰å…¥äº†é–‹ç™¼å·¥å…·çš„ VMï¼Œå®ƒæä¾› 5GB çš„ home ç›®éŒ„ï¼Œä¸¦åœ¨ Google Cloud ä¸ŠåŸ·è¡Œã€‚å¯ç”¨ Google Cloud Shell æä¾›çš„ command-line ä¾†å­˜å– GCP çš„è³‡æºã€‚åœ¨ GCP console çš„å³ä¸Šæ–¹å·¥å…·åˆ—ä¸­ï¼Œé»æ“Šã€ŒActivate Cloud Shellã€æŒ‰éˆ•ï¼šåœ¨æ‰“é–‹çš„å°è©±æ¡†å…§ï¼Œé»æ“Šã€ŒSTART CLOUD SHELLã€ï¼šé€£æ¥å’Œæä¾›ç’°å¢ƒéœ€è¦ä¸€äº›æ™‚é–“ï¼šé€£æ¥å¾Œï¼Œå°±ä»£è¡¨ä½ å·²ç¶“éèº«ä»½é©—è­‰ï¼Œå°ˆæ¡ˆå·²è¨­ç½®ç‚º PROJECT_IDï¼Œä»¥ä¸‹åœ–çš„ç‚ºä¾‹ï¼Œæ­¤å°ˆæ¡ˆçš„ ID ç‚º qwiklabs-gcp-f9d61ede8167e6b0ï¼šgcloud æ˜¯ GCP çš„ command-line å·¥å…·ï¼Œä»–å·²é å…ˆå®‰è£åœ¨ Cloud Shell ä¸Šï¼Œä¸¦ä¸”æ”¯æ´ tab è‡ªå‹•è£œé½Š (tab-completion)ã€‚ä½¿ç”¨ä¸‹é¢æŒ‡ä»¤å¯åˆ—å‡ºæœ‰æ•ˆå¸³è™Ÿåç¨±ï¼š1234567$ gcloud auth list Credentialed AccountsACTIVE ACCOUNT* google3043863_student@qwiklabs.netTo set the active account, run: $ gcloud config set account `ACCOUNT`å¯ä»¥ä½¿ç”¨ä»¥ä¸‹æŒ‡ä»¤åˆ—å‡ºå°ˆæ¡ˆ IDï¼š12345$ gcloud config list project[core]project = qwiklabs-gcp-f9d61ede8167e6b0Your active configuration is: [cloudshell-9292]è©³æƒ…å¯åƒè€ƒå®˜æ–¹çš„ Google Cloud gcloud Overview æ–‡ä»¶ã€‚ç‚ºæ‰€æœ‰è³‡æºè¨­å®šé è¨­çš„ region å’Œ zoneåœ¨ Cloud Shell ä¸­ï¼ŒåŸ·è¡Œä»¥ä¸‹æŒ‡ä»¤è¨­å®šé è¨­ zone ç‚º us-central1-aï¼š12$ gcloud config set compute/zone us-central1-aUpdated property [compute/zone].åœ¨ Cloud Shell ä¸­ï¼ŒåŸ·è¡Œä»¥ä¸‹æŒ‡ä»¤è¨­å®šé è¨­ region ç‚º us-central1ï¼š12$ gcloud config set compute/region us-central1Updated property [compute/region].è©³æƒ…å¯åƒè€ƒå®˜æ–¹çš„ Regions &amp; Zones æ–‡ä»¶ã€‚æ³¨æ„ï¼šåœ¨è‡ªå·±çš„æ©Ÿå™¨ä¸ŠåŸ·è¡Œ gcloud æ™‚ï¼Œconfig è¨­å®šåœ¨ session ä¸­ä¿æŒä¸è®Š (persist across)ã€‚åœ¨ Cloud Shell ä¸­ï¼Œä½ éœ€è¦ç‚ºæ¯å€‹æ–°çš„ session æˆ–é‡æ–°é€£æ¥è¨­å®šæ­¤é …ã€‚å»ºç«‹å¤šå€‹ web server instanceç‚ºäº†æ¨¡æ“¬ä¾†è‡³ä¸€å€‹å¢é›†ä¸»æ©Ÿçš„æœå‹™ï¼Œè«‹ä½¿ç”¨ Instance Templates å’Œ Managed Instance Groups å»ºç«‹ä¸€å€‹ç°¡å–®çš„ Nginx web server å¢é›†ä¾†æä¾›éœæ…‹å…§å®¹ã€‚Instance Templates å®šç¾©å¢é›†ä¸­æ¯å€‹ VM çš„è¦æ ¼ (ç¡¬ç¢Ÿã€CPUã€è¨˜æ†¶é«”â€¦ç­‰)ï¼ŒManaged Instance Groups ä½¿ç”¨ Instance Templates å¯¦ä¾‹åŒ– (instantiate) å¤šå€‹ VM instanceã€‚è¦å»ºç«‹ä¸€å€‹ Nginx web server å¢é›†ï¼Œè«‹å»ºç«‹ä»¥ä¸‹å…§å®¹ï¼šä¸€å€‹ç”¨ä¾†åœ¨æ¯å€‹ VM instance å•Ÿå‹•æ™‚è¨­å®š Nginx server çš„ startup scriptä¸€å€‹è¦ä½¿ç”¨ startup script çš„ instance templateä¸€å€‹ target poolä¸€å€‹ä½¿ç”¨ instance template çš„ managed instance groupå»ºç«‹ startup scriptåœ¨ Cloud Shell åŸ·è¡Œä¸‹é¢æŒ‡ä»¤ï¼Œå»ºç«‹è¦è®“æ¯å€‹ VM instance ä½¿ç”¨çš„ startup scriptã€‚æ­¤ script æœƒåœ¨å•Ÿå‹•æ™‚è¨­å®š Nginx serverï¼š1234567cat &lt;&lt; EOF &gt; startup.sh#! /bin/bashapt-get updateapt-get install -y nginxservice nginx startsed -i -- 's/nginx/Google Cloud Platform - '\"\\$HOSTNAME\"'/' /var/www/html/index.nginx-debian.htmlEOFå»ºç«‹ instance templateå»ºç«‹ä¸€å€‹ä½¿ç”¨ startup script çš„ instance templateï¼šnginx-templateï¼šinstance template çš„åç¨±--metadata-from-file startup-script=startup.shï¼š--metadata-from-file åƒæ•¸æœƒå¾ local æª”æ¡ˆä¸­æ‰¾åˆ°æŒ‡å®šçš„ startup script12$ gcloud compute instance-templates create nginx-template \\ --metadata-from-file startup-script=startup.shè¼¸å‡ºï¼š123Created [https://www.googleapis.com/compute/v1/projects/qwiklabs-gcp-.../global/instanceTemplates/nginx-template].NAME MACHINE_TYPE PREEMPTIBLE CREATION_TIMESTAMPnginx-template n1-standard-1 2019-04-22T04:53:53.045-07:00å¦‚æœä¸Šé¢æŒ‡ä»¤æ²’æœ‰æä¾›æ˜ç¢ºçš„ template è¨­å®šï¼Œgcloud compute æœƒä½¿ç”¨ä»¥ä¸‹é è¨­å€¼å»ºç«‹ templateï¼šæ©Ÿå‹ï¼šn1-standard-1imageï¼šæœ€æ–°ç‰ˆçš„ Debian imageé–‹æ©Ÿç£ç¢Ÿï¼šä»¥ instance å‘½åçš„æ–°æ¨™æº–é–‹æ©Ÿç£ç¢Ÿç¶²è·¯ï¼šdefault VPC ç¶²è·¯IP ä½å€ï¼šè‡¨æ™‚çš„å¤–éƒ¨ IP ä½å€è©³æƒ…å¯åƒè€ƒå®˜æ–¹çš„ gcloud compute instance-templates æ–‡ä»¶ã€‚è‹¥æƒ³äº†è§£æ›´å¤šå»ºç«‹ instance template çš„æ–¹æ³•ï¼Œè©³æƒ…å¯åƒè€ƒå®˜æ–¹çš„ Creating Instance Templates æ–‡ä»¶ã€‚å»ºç«‹ target pooltarget pool è³‡æºå®šç¾©äº†ä¸€çµ„å¯ä»¥å¾ forwarding rules æ¥æ”¶æ”¶åˆ°æµé‡çš„ instanceã€‚ç•¶ forwarding rules å°‡æµé‡å°å‘åˆ° target pool æ™‚ï¼ŒGoogle Cloud Load Balancing æœƒæ ¹æ“š source IP å’Œ port ä»¥åŠç›®æ¨™ IP å’Œ port çš„ hash å€¼ï¼Œå¾é€™äº› target pool ä¸­é¸æ“‡ä¸€å€‹ instanceã€‚å»ºç«‹ target poolï¼Œtarget pool å…è¨±å–®å€‹å­˜å–é»åˆ°ç¾¤çµ„ä¸­çš„æ‰€æœ‰ instanceï¼Œè€Œä¸”å°æ–¼ä¹‹å¾Œæ­¥é©Ÿçš„è² è¼‰å¹³è¡¡ä¾†èªªæ˜¯å¿…éœ€çš„ï¼š1$ gcloud compute target-pools create nginx-poolè¼¸å‡ºï¼š123Created [https://www.googleapis.com/compute/v1/projects/qwiklabs-gcp-.../regions/us-central1/targetPools/nginx-pool].NAME REGION SESSION_AFFINITY BACKUP HEALTH_CHECKSnginx-pool us-central1 NONEè©³æƒ…å¯åƒè€ƒå®˜æ–¹æ–‡ä»¶ï¼šå»ºç«‹ target pool æŒ‡ä»¤ï¼šgcloud compute target-pools createNetwork Load Balancing ConceptsUsing Target Poolså»ºç«‹ managed instance groupä½¿ç”¨ instance template å»ºç«‹ managed instance groupï¼šnginx-groupï¼šinstance group çš„åç¨±--base-instance-name nginxï¼šå…¶ä¸­çš„ nginx æ˜¯æŒ‡åœ¨æ­¤ managed instance group ä¸­å»ºç«‹çš„ instance ä½¿ç”¨çš„åç¨±ã€‚ç”±æ–¼é€™äº› instance éƒ½ä¸€æ¨£ï¼Œç³»çµ±æœƒç”¨éš¨æ©Ÿå­—ä¸²ä¾†ä½œç‚º instance åç¨±çš„ä¸€éƒ¨åˆ†ï¼Œä¾‹å¦‚ï¼šå¦‚æœ base åç¨±æ˜¯ nginxï¼Œinstance çš„åç¨±å°±å¯èƒ½æœƒæ˜¯ nginx-cl3tã€nginx-sqgw â€¦ ç­‰--size 2ï¼šinstance group çš„å¤§å°--template nginx-templateï¼šç”¨æ–¼æ­¤ç¾¤çµ„çš„ instance template çš„åç¨±--target-pool nginx-poolï¼šè¦æ–°å¢æ­¤ instance group çš„ target pool çš„åç¨± (å¯å¤šå€‹ target pool)12345$ gcloud compute instance-groups managed create nginx-group \\ --base-instance-name nginx \\ --size 2 \\ --template nginx-template \\ --target-pool nginx-poolè¼¸å‡ºï¼š123Created [https://www.googleapis.com/compute/v1/projects/qwiklabs-gcp-.../zones/us-central1-a/instanceGroupManagers/nginx-group].NAME LOCATION SCOPE BASE_INSTANCE_NAME SIZE TARGET_SIZE INSTANCE_TEMPLATE AUTOSCALEDnginx-group us-central1-a zone nginx 0 2 nginx-template noè©³æƒ…å¯åƒè€ƒå®˜æ–¹çš„ Creating groups of managed instances æ–‡ä»¶ã€‚åŸ·è¡Œä¸Šé¢çš„æŒ‡ä»¤å¾Œï¼Œæœƒå»ºç«‹å…©å€‹ VM instanceï¼Œåç¨±æœƒä»¥ nginx- ç‚ºå‰ç¶´ï¼Œå¯èƒ½éœ€è¦ç­‰å¹¾åˆ†é˜ã€‚æ¥è‘—æŸ¥çœ‹å·²å»ºç«‹çš„æ‰€æœ‰ compute engine instanceï¼š1$ gcloud compute instances listè¼¸å‡ºï¼š123NAME ZONE MACHINE_TYPE PREEMPTIBLE INTERNAL_IP EXTERNAL_IP STATUSnginx-cl3t us-central1-a n1-standard-1 10.128.0.3 35.193.149.246 RUNNINGnginx-sqgw us-central1-a n1-standard-1 10.128.0.2 130.211.208.12 RUNNINGè¨­å®šé˜²ç«ç‰†è¨­å®šé˜²ç«ç‰†å¾Œï¼Œå°±å¯ä»¥é€é EXTERNAL_IP ä½å€å’Œ 80 port ä¾†é€£æ¥æ©Ÿå™¨ï¼š1$ gcloud compute firewall-rules create www-firewall --allow tcp:80è¼¸å‡ºï¼š1234Creating firewall...â ›Created [https://www.googleapis.com/compute/v1/projects/qwiklabs-gcp-.../global/firewalls/www-firewall].Creating firewall...done.NAME NETWORK DIRECTION PRIORITY ALLOW DENY DISABLEDwww-firewall default INGRESS 1000 tcp:80 FalseåŸ·è¡Œä¸Šé¢çš„æŒ‡ä»¤å¾Œï¼Œæ‡‰è©²å°±èƒ½é€éå¤–éƒ¨ IP ä½å€ (ä¹Ÿå°±æ˜¯ http://EXTERNAL_IP/ ) ä¾†é€£æ¥å‰›å‰›å»ºç«‹çš„å…©å€‹ instanceï¼Œå¯ä»¥åœ¨å„åˆ¥çš„é é¢ä¸­ï¼Œçœ‹åˆ°å„å€‹ instance çš„åç¨±ï¼šå»ºç«‹ Network Load BalancerNetwork load balancing å…è¨±ä½ ä¾æ“šæ”¶åˆ°çš„ IP å”å®šè³‡æ–™ (ä¾‹å¦‚ï¼šä½å€ã€port å’Œå”å®šé¡å‹) ä¾†å¹³è¡¡ç³»çµ±çš„è² è¼‰ã€‚ä½ é‚„å¯ä»¥å–å¾— HTTP(S) load balancing æ²’æœ‰æä¾›çš„ä¸€äº›é¸é …ã€‚ä¾‹å¦‚ï¼šå¯ä»¥å°å…¶ä»–åŸºæ–¼ TCP/UDP çš„å”å®š (ä¾‹å¦‚ï¼šSMTP æµé‡) é€²è¡Œè² è¼‰å¹³è¡¡ã€‚å¦‚æœä½ çš„æ‡‰ç”¨ç¨‹å¼å° TCP é€£æ¥ç›¸é—œçš„ç‰¹æ€§æ„Ÿèˆˆè¶£ï¼Œnetwork load balancing ä¹Ÿå…è¨±ä½ çš„æ‡‰ç”¨ç¨‹å¼å»æª¢æŸ¥å°åŒ…ï¼Œè€Œ HTTP(S) load balancing å‰‡æ²’æœ‰æä¾›ã€‚è©³æƒ…å¯åƒè€ƒå®˜æ–¹çš„ Setting Up Network Load Balancing æ–‡ä»¶ã€‚é‡å°ä½ çš„ instance group ä¾†å»ºç«‹ L3 network load balancerï¼š1234$ gcloud compute forwarding-rules create nginx-lb \\ --region us-central1 \\ --ports=80 \\ --target-pool nginx-poolè¼¸å‡ºï¼š1Created [https://www.googleapis.com/compute/v1/projects/qwiklabs-gcp-.../regions/us-central1/forwardingRules/nginx-lb].Forwarding rule è¦èˆ‡ target pool ä¸€èµ·ä½¿ç”¨ï¼Œä»¥æ”¯æ´ load balancing åŠŸèƒ½ï¼Œè¦ä½¿ç”¨ load balancing å°±å¿…é ˆå»ºç«‹ forwarding ruleï¼Œé€™æ¨£æ‰æœƒå°‡æµé‡å°å‘åˆ°ç‰¹å®šçš„ target pool (ç”¨æ–¼ load balancing)ï¼Œè€Œä¸‹é¢æŒ‡ä»¤ä¸­çš„ --ports=80 ä»£è¡¨æŒ‡å‘ target pool çš„å¤–éƒ¨ port ç¯„åœã€‚åˆ—å‡ºå°ˆæ¡ˆä¸­æ‰€æœ‰ Google Compute Engine (GCE) çš„ Forwarding ruleï¼š1$ gcloud compute forwarding-rules listè¼¸å‡ºï¼š12NAME REGION IP_ADDRESS IP_PROTOCOL TARGETnginx-lb us-central1 35.202.173.185 TCP us-central1/targetPools/nginx-poolæ¥è‘—é€é http://IP_ADDRESS/ ä¾†å­˜å– load balancerï¼ŒIP_ADDRESS æ˜¯ä¸Šé¢åŸ·è¡Œçš„æŒ‡ä»¤ä¸­æ‰€è¼¸å‡ºçš„ IP ä½å€ã€‚å»ºç«‹ HTTP(S) Load BalancerHTTP(S) Load Balancing æä¾›å…¨çƒæ€§çš„ load balancingï¼Œèƒ½å°‡ HTTP è«‹æ±‚é€å¾€ä½ çš„ instanceã€‚ä½ å¯ä»¥è¨­å®š URL è¦å‰‡ï¼Œå°‡ä¸€äº› URL è·¯ç”± (route) åˆ°ä¸€çµ„ instanceï¼Œä¸¦å°‡å…¶ä»– URL è·¯ç”±åˆ°å…¶ä»– instanceã€‚è«‹æ±‚éƒ½æœƒè·¯ç”±åˆ°æœ€æ¥è¿‘ä½¿ç”¨è€…çš„ instance groupï¼Œå‰ææ˜¯è©² group å…·æœ‰è¶³å¤ çš„è³‡æºï¼Œä¸¦ä¸”é©åˆè«‹æ±‚ã€‚å¦‚æœæœ€è¿‘çš„ group æ²’æœ‰è¶³å¤ çš„è³‡æºï¼Œé‚£è«‹æ±‚å°‡æœƒé€è‡³å…·æœ‰è¶³å¤ è³‡æºï¼Œä¸¦ä¸”æ˜¯æœ€æ¥è¿‘ä½¿ç”¨è€…çš„ groupã€‚è©³æƒ…å¯åƒè€ƒå®˜æ–¹çš„ HTTP(S) Load Balancer æ–‡ä»¶ã€‚é¦–å…ˆï¼Œå»ºç«‹ health checkã€‚health check å¯ä»¥ç¢ºèª instance æ˜¯å¦æœ‰å›æ‡‰ HTTP æˆ– HTTPS æµé‡ï¼Œå…¶ä»–çš„ http-basic-check æ˜¯ legacy health check çš„åç¨±ã€‚åœ¨å°ˆæ¡ˆä¸­ï¼Œæ¯å€‹ legacy health check çš„åç¨±ä¸èƒ½é‡è¤‡ï¼š1$ gcloud compute http-health-checks create http-basic-checkè¼¸å‡ºï¼š123Created [https://www.googleapis.com/compute/v1/projects/qwiklabs-gcp-.../global/httpHealthChecks/http-basic-check].NAME HOST PORT REQUEST_PATHhttp-basic-check 80 /å®šç¾© HTTP serviceï¼Œä¸¦å°‡ port è™Ÿ map åˆ° instance group çš„ç›¸é—œ portã€‚ç¾åœ¨ load balancing service å¯ä»¥å°‡æµé‡ forward åˆ°æŒ‡å®šçš„ port è™Ÿï¼š123$ gcloud compute instance-groups managed \\ set-named-ports nginx-group \\ --named-ports http:80è¼¸å‡ºï¼š1Updated [https://www.googleapis.com/compute/v1/projects/qwiklabs-gcp-.../zones/us-central1-a/instanceGroups/nginx-group].è©³æƒ…å¯åƒè€ƒå®˜æ–¹çš„ Creating groups of managed instances æ–‡ä»¶ã€‚å»ºç«‹ å¾Œç«¯æœå‹™ (backend service)ï¼š1234$ gcloud compute backend-services create nginx-backend \\ --protocol HTTP \\ --http-health-checks http-basic-check \\ --globalè¼¸å‡ºï¼š123Created [https://www.googleapis.com/compute/v1/projects/qwiklabs-gcp-.../global/backendServices/nginx-backend].NAME BACKENDS PROTOCOLnginx-backend HTTPå°‡ instance group åŠ åˆ°å¾Œç«¯æœå‹™ä¸­ï¼š1234$ gcloud compute backend-services add-backend nginx-backend \\ --instance-group nginx-group \\ --instance-group-zone us-central1-a \\ --globalè¼¸å‡ºï¼š1Updated [https://www.googleapis.com/compute/v1/projects/qwiklabs-gcp-.../global/backendServices/nginx-backend].å»ºç«‹ä¸€å€‹é è¨­çš„ URL mapï¼Œå°‡æ‰€æœ‰æ”¶åˆ°çš„è«‹æ±‚å°å‘ä½ çš„æ‰€æœ‰ instanceï¼š12$ gcloud compute url-maps create web-map \\ --default-service nginx-backendè¼¸å‡ºï¼š123Created [https://www.googleapis.com/compute/v1/projects/qwiklabs-gcp-.../global/urlMaps/web-map].NAME DEFAULT_SERVICEweb-map backendServices/nginx-backendè‹¥è¦æ ¹æ“šè«‹æ±‚çš„ URL å°‡æµé‡å°å‘ä¸åŒçš„ instanceï¼Œè©³æƒ…å¯åƒè€ƒå®˜æ–¹çš„ content-based routing æ–‡ä»¶ã€‚å»ºç«‹ target HTTP proxyï¼Œå°‡è«‹æ±‚è·¯ç”±åˆ° URL mapï¼š12$ gcloud compute target-http-proxies create http-lb-proxy \\ --url-map web-mapè¼¸å‡ºï¼š123Created [https://www.googleapis.com/compute/v1/projects/qwiklabs-gcp-.../global/targetHttpProxies/http-lb-proxy].NAME URL_MAPhttp-lb-proxy web-mapå»ºç«‹ global forwarding ruleï¼Œä»¥è™•ç†å’Œè·¯ç”±æ”¶åˆ°çš„è«‹æ±‚ã€‚forwarding rule æœƒæ ¹æ“šæŒ‡å®šçš„ IP ä½å€ã€IP å”å®šå’Œ portï¼Œå°‡æµé‡é€è‡³ç‰¹å®šçš„ target HTTP æˆ– HTTPS proxyã€‚global forwarding rule ä¸æ”¯æ´å¤š portã€‚1234$ gcloud compute forwarding-rules create http-content-rule \\ --global \\ --target-http-proxy http-lb-proxy \\ --ports 80è¼¸å‡ºï¼š1Created [https://www.googleapis.com/compute/v1/projects/qwiklabs-gcp-.../global/forwardingRules/http-content-rule].å»ºç«‹ global forwarding rule å¾Œï¼Œè¨­å®šå¯èƒ½éœ€è¦å¹¾åˆ†é˜æ‰èƒ½å‚³æ’­ (propagate)ï¼š1$ gcloud compute forwarding-rules listè¼¸å‡ºï¼š123NAME REGION IP_ADDRESS IP_PROTOCOL TARGEThttp-content-rule 34.96.77.47 TCP http-lb-proxynginx-lb us-central1 35.202.173.185 TCP us-central1/targetPools/nginx-poolè¤‡è£½ forwarding rule å…§çš„ http-content-rule ä¸­çš„ IP_ADDRESSã€‚ä½ å¯èƒ½éœ€è¦å¹¾åˆ†é˜æ‰èƒ½é€éç€è¦½å™¨é€£æ¥åˆ° http://IP_ADDRESS/ã€‚å¦‚æœç„¡æ³•é€£æ¥ (å°±åƒä¸‹åœ–é€™æ¨£)ï¼Œè«‹ç¨ç­‰ä¸€ä¸‹ï¼Œå†é‡æ–°æ•´ç†ç€è¦½å™¨ï¼šä¸‹é¢å…©å¼µåœ–å°±æ˜¯å¤šæ¬¡é€£æ¥ http://IP_ADDRESS/ çš„æ™‚å€™ï¼Œå¸¸æœƒçœ‹åˆ°ç•«é¢åœ¨é€™å…©å€‹ä¹‹å‰å»ºç«‹çš„ VM instance é–“åˆ‡æ›ï¼šåƒè€ƒä¾†æºSet Up Network and HTTP Load Balancers","categories":[{"name":"Cloud","slug":"cloud","permalink":"https://titangene.github.io/categories/cloud/"}],"tags":[{"name":"GCP","slug":"gcp","permalink":"https://titangene.github.io/tags/gcp/"},{"name":"HTTP","slug":"http","permalink":"https://titangene.github.io/tags/http/"},{"name":"Load Balancer","slug":"load-balancer","permalink":"https://titangene.github.io/tags/load-balancer/"}]},{"title":"Google Kubernetes Engine (GKE) å…¥é–€","slug":"getting-started-with-google-k8s-engine","date":"2019-04-19T09:30:24.000Z","updated":"2019-04-30T16:00:09.450Z","comments":true,"path":"article/getting-started-with-google-k8s-engine.html","link":"","permalink":"https://titangene.github.io/article/getting-started-with-google-k8s-engine.html","excerpt":"æœ¬ç¯‡æ˜¯ç´€éŒ„åœ¨ Google çš„ Qwiklab å¹³å°å…§ï¼Œå®Œæˆã€ŒKubernetes Engine: Qwik Startã€é€™å€‹ quest æ‰€å­¸åˆ°çš„å…§å®¹ï¼ŒåŒ…æ‹¬å¦‚ä½•é€é GKE å»ºç«‹å®¹å™¨å’Œéƒ¨ç½²å®¹å™¨åŒ–æ‡‰ç”¨ç¨‹å¼ã€‚","text":"æœ¬ç¯‡æ˜¯ç´€éŒ„åœ¨ Google çš„ Qwiklab å¹³å°å…§ï¼Œå®Œæˆã€ŒKubernetes Engine: Qwik Startã€é€™å€‹ quest æ‰€å­¸åˆ°çš„å…§å®¹ï¼ŒåŒ…æ‹¬å¦‚ä½•é€é GKE å»ºç«‹å®¹å™¨å’Œéƒ¨ç½²å®¹å™¨åŒ–æ‡‰ç”¨ç¨‹å¼ã€‚Google Kubernetes Engine (GKE) æä¾›äº†ä¸€å€‹ä»£ç®¡ç’°å¢ƒï¼Œå¯ä»¥ä½¿ç”¨ Google åŸºç¤æ¶æ§‹ä¾†éƒ¨ç½²ã€ç®¡ç†å’Œæ“´å±•å®¹å™¨åŒ–æ‡‰ç”¨ç¨‹å¼ã€‚GKE æä¾›çš„ç’°å¢ƒæ˜¯ç”±å¤šå°æ©Ÿå™¨ (ç‰¹åˆ¥æ˜¯ Google Compute Engine instance) çµ„æˆï¼Œçµ„æˆä¸€å€‹å®¹å™¨å¢é›†ã€‚åœ¨æ­¤ lab ä¸­ï¼Œä½ å°‡é€é GKE ä¾†å¯¦éš›ç·´ç¿’å¦‚ä½•å»ºç«‹å®¹å™¨å’Œéƒ¨ç½²æ‡‰ç”¨ç¨‹å¼ã€‚GKE çš„å¢é›†ç·¨æ’ç®¡ç† (orchestration)GKE å¢é›†æ˜¯ç”± Kubernetes é–‹æºå¢é›†ç®¡ç†ç³»çµ±æä¾›æŠ€è¡“æ”¯æ´ã€‚ä½ å¯ä»¥é€é Kubernetes æä¾›çš„æ©Ÿåˆ¶èˆ‡å®¹å™¨å¢é›†äº’å‹•ã€‚å¯ä»¥ä½¿ç”¨ Kubernetes æŒ‡ä»¤å’Œè³‡æºä¾†éƒ¨ç½²ä»¥åŠç®¡ç†æ‡‰ç”¨ç¨‹å¼ã€åŸ·è¡Œç®¡ç†ä»»å‹™ã€åˆ¶è¨‚æ”¿ç­–ï¼Œä»¥åŠç›£æ§å·²éƒ¨ç½²å·¥ä½œè² è¼‰ (workload) çš„å¥åº·ç‹€æ…‹ã€‚Kubernetes æ¡ç”¨ç›¸åŒçš„è¨­è¨ˆåŸå‰‡ä¾†åŸ·è¡Œå¸¸ç”¨çš„ Google æœå‹™ï¼Œä¸¦æä¾›ç›¸åŒçš„å„ªå‹¢ï¼šæ‡‰ç”¨ç¨‹åºå®¹å™¨çš„è‡ªå‹•ç®¡ç†ã€ç›£æ§èˆ‡æœ‰æ•ˆæ€§æ¢æ¸¬ (liveness probe)ã€è‡ªå‹•æ“´å±•ï¼Œæ»¾å‹•å‡ç´šâ€¦ç­‰ã€‚ç•¶æ‚¨åœ¨å®¹å™¨å¢é›†ä¸ŠåŸ·è¡Œæ‡‰ç”¨ç¨‹åºæ™‚ï¼Œä½ æ‰€ä½¿ç”¨çš„æŠ€è¡“æ˜¯ç”± Google åœ¨å®¹å™¨ä¸­åŸ·è¡Œ production å·¥ä½œè² è¼‰çš„åé¤˜å¹´ç¶“é©—çš„æŠ€è¡“ã€‚GCP ä¸Šçš„ KubernetesåŸ·è¡Œ GKE å¢é›†æ™‚ï¼Œä½ ä¹Ÿå¯ä»¥ç²å¾— GCP æ‰€æä¾›çš„é€²éšå¢é›†ç®¡ç†åŠŸèƒ½å„ªé»ï¼Œå…¶ä¸­åŒ…æ‹¬ï¼šGoogle Compute Engine (GCE) instances æä¾›çš„è² è¼‰å¹³è¡¡ç¯€é»æ±  (Node Pools) å¯ä»¥æŒ‡å®šå¢é›†ä¸­çš„å­é›†ç¯€é»ï¼Œä»¥ç²å¾—é¡å¤–çš„éˆæ´»æ€§è‡ªå‹•æ“´å±• (Automatic scaling) å¢é›†çš„ç¯€é» instance æ•¸é‡è‡ªå‹•å‡ç´šå¢é›†çš„ç¯€é»è»Ÿé«”è‡ªå‹•ä¿®å¾©ç¯€é»ï¼šå¯ç¶­è­·ç¯€é»çš„å¥åº·ç‹€æ…‹å’Œå¯ç”¨æ€§ä½¿ç”¨ Stackdriver ä¾†è¨˜éŒ„ (logging) å’Œç›£æ§ï¼Œç”¨æ–¼æŸ¥çœ‹å¢é›†çš„ç‹€æ…‹æº–å‚™åœ¨é»æ“Šã€ŒStart Labã€ä¹‹å‰ï¼Œæº–å‚™å¥½ç¶²è·¯ç€è¦½å™¨ (æ¨è–¦ç”¨ Google Chrome)ï¼Œä¸¦ä¸”è‡³å°‘ 40 åˆ†é˜å¯ä»¥å°ˆæ³¨çš„æ™‚é–“ï¼Œå› ç‚º lab æ˜¯æœ‰æ™‚é–“é™åˆ¶ï¼Œç•¶ä½ æŒ‰ä¸‹ã€ŒStart Labã€é–‹å§‹å­¸ç¿’æ™‚ï¼Œç„¡æ³•æš«åœå€’æ•¸è¨ˆæ™‚ï¼Œä½ åªèƒ½åœ¨é€™æ®µæ™‚é–“å…§ä½¿ç”¨ lab æä¾›çµ¦ä½ çš„å…¨æ–°æš«æ™‚ GCP Console å¯ç”¨å¸³è™Ÿï¼Œæ™‚é–“åˆ°ä¹‹å¾Œçš„å¹¾åˆ†é˜å°±æœƒè‡ªå‹•ç™»å‡ºã€‚æ³¨æ„ï¼šå¦‚æœä½ æœ‰è‡ªå·±çš„å€‹äºº GCP å¸³è™Ÿæˆ–å°ˆæ¡ˆï¼Œè«‹ä¸è¦åœ¨æ­¤ lab ä½¿ç”¨é–‹å§‹ä½ çš„ Labï¼Œç„¶å¾Œç™»å…¥ GCP Consoleå¦‚æœæº–å‚™è¦é–‹å§‹ï¼Œå¯ä»¥é»æ“Šå³ä¸Šè§’çš„ã€ŒStart Labã€é–‹å§‹ï¼šæ¥è‘—æœƒå‡ºç¾é€™å€‹ç•«é¢ï¼Œå› ç‚ºæˆ‘åƒåŠ  GDG Tainan çš„æ´»å‹•ï¼Œæ´»å‹•æœ‰æä¾› Qwiklabs ä¸€å€‹æœˆçš„å…è²»é¡åº¦ï¼Œæ‰€ä»¥æˆ‘é»é¸ä¸‹åœ–å·¦é‚Šçš„ã€ŒUse Subscriptionã€ï¼šLab æœƒæä¾›çµ¦ä½ å…è²»æš«æ™‚çš„ GCP å¸³è™Ÿï¼Œè¤‡è£½å¸³è™Ÿå’Œå¯†ç¢¼ï¼Œç„¶å¾Œé»æ“Šã€ŒOpen Google Consoleã€é–‹å•Ÿ GCP Consoleï¼šåœ–ç‰‡ä¾†æºï¼šCreating a Virtual Machine | Qwiklabsæ¥è‘—å°±æœƒé–‹å•Ÿç™»å…¥é é¢ï¼Œå»ºè­°å¦å¤–é–‹ Chrome ç„¡ç—•æ¨¡å¼ä¾†ç™»å…¥ lab æä¾›çš„å¸³è™Ÿå’Œå¯†ç¢¼ï¼Œå› ç‚º Chrome æœƒç´€éŒ„å¸³å¯†ï¼Œç¾åœ¨ç™»å…¥çš„åªæ˜¯æš«æ™‚å¸³è™Ÿï¼Œæœªä¾†ä¸éœ€è¦ç”¨åˆ°ï¼šæ³¨æ„ï¼šé€™é‚Šæ˜¯ç™»å…¥ lab æä¾›çš„å¸³è™Ÿ (ä¹Ÿå°±æ˜¯ email å¿…é ˆç‚º googlexxxxxx_student@qwiklabs.net )ï¼Œå¦‚æœä½ æœ‰è‡ªå·±çš„ GCP å¸³è™Ÿï¼Œè«‹ä¸è¦ç”¨æ–¼æ­¤ labï¼Œé¿å…ç”¢ç”Ÿè²»ç”¨é¡ä¼¼æ–¼ googlexxxxxx_student@qwiklabs.net çš„å¸³è™Ÿæ˜¯ä¸€å€‹ Google å¸³è™Ÿï¼Œå°ˆç‚º Qwiklabs å­¸ç”Ÿä½¿ç”¨è€Œå»ºç«‹çš„ã€‚å®ƒå…·æœ‰ç‰¹å®šçš„åŸŸå (ä¹Ÿå°±æ˜¯ qwiklabs.net )ï¼Œä¸¦ä¸”å·²åˆ†é…äº† IAM è§’è‰²ï¼Œå…è¨±ä½ å»å­˜å–è©² GCP å°ˆæ¡ˆã€‚æ¥å— terms å’Œ conditionsï¼šä¸è¦æ–°å¢ recovery options æˆ– two-factor authentication (å› ç‚ºé€™æ˜¯ä¸€å€‹è‡¨æ™‚å¸³è™Ÿ)ï¼šå‹¾é¸åŒæ„æœå‹™æ¢æ¬¾ï¼šä¹‹å¾Œå°±å¯ä»¥é–‹å§‹ä½¿ç”¨ GCP Console å›‰ï¼šå•Ÿå‹• Google Cloud ShellGoogle Cloud Shell æ˜¯è¼‰å…¥äº†é–‹ç™¼å·¥å…·çš„ VMï¼Œå®ƒæä¾› 5GB çš„ home ç›®éŒ„ï¼Œä¸¦åœ¨ Google Cloud ä¸ŠåŸ·è¡Œã€‚å¯ç”¨ Google Cloud Shell æä¾›çš„ command-line ä¾†å­˜å– GCP çš„è³‡æºã€‚åœ¨ GCP console çš„å³ä¸Šæ–¹å·¥å…·åˆ—ä¸­ï¼Œé»æ“Šã€ŒActivate Cloud Shellã€æŒ‰éˆ•ï¼šåœ¨æ‰“é–‹çš„å°è©±æ¡†å…§ï¼Œé»æ“Šã€ŒSTART CLOUD SHELLã€ï¼šé€£æ¥å’Œæä¾›ç’°å¢ƒéœ€è¦ä¸€äº›æ™‚é–“ï¼šé€£æ¥å¾Œï¼Œå°±ä»£è¡¨ä½ å·²ç¶“éèº«ä»½é©—è­‰ï¼Œå°ˆæ¡ˆå·²è¨­ç½®ç‚º PROJECT_IDï¼Œä»¥ä¸‹åœ–çš„ç‚ºä¾‹ï¼Œæ­¤å°ˆæ¡ˆçš„ ID ç‚º qwiklabs-gcp-f9d61ede8167e6b0ï¼šgcloud æ˜¯ GCP çš„ command-line å·¥å…·ï¼Œä»–å·²é å…ˆå®‰è£åœ¨ Cloud Shell ä¸Šï¼Œä¸¦ä¸”æ”¯æ´ tab è‡ªå‹•è£œé½Š (tab-completion)ã€‚ä½¿ç”¨ä¸‹é¢æŒ‡ä»¤å¯åˆ—å‡ºæœ‰æ•ˆå¸³è™Ÿåç¨±ï¼š1234567$ gcloud auth list Credentialed AccountsACTIVE ACCOUNT* google3043863_student@qwiklabs.netTo set the active account, run: $ gcloud config set account `ACCOUNT`å¯ä»¥ä½¿ç”¨ä»¥ä¸‹æŒ‡ä»¤åˆ—å‡ºå°ˆæ¡ˆ IDï¼š12345$ gcloud config list project[core]project = qwiklabs-gcp-f9d61ede8167e6b0Your active configuration is: [cloudshell-9292]è©³æƒ…å¯åƒè€ƒå®˜æ–¹çš„ Google Cloud gcloud Overview æ–‡ä»¶ã€‚è¨­å®šé è¨­çš„ compute zonecompute zone æ˜¯ä½ çš„å¢é›†åŠå…¶è³‡æºæ‰€åœ¨çš„å¤§æ¦‚å€åŸŸä½ç½®ï¼Œä¾‹å¦‚ï¼šus-central1-a æ˜¯ us-central1 region ä¸­çš„ä¸€å€‹ zoneã€‚åœ¨ Cloud Shell ä¸­å•Ÿç”¨æ–°çš„ session ä¸¦åŸ·è¡Œä»¥ä¸‹æŒ‡ä»¤ï¼Œå°‡é è¨­ compute zone è¨­ç‚º us-central1-aï¼š12$ gcloud config set compute/zone us-central1-aUpdated property [compute/zone].è©³æƒ…å¯åƒè€ƒå®˜æ–¹çš„ Managing clusters æ–‡ä»¶ã€‚å»ºç«‹ GKE å¢é›†ä¸€å€‹å¢é›†åŒ…å«è‡³å°‘ä¸€å€‹å¢é›†ä¸»è¦ (master) æ©Ÿå™¨å’Œå¤šå€‹ç¨±ç‚º node çš„å·¥ä½œ (worker) æ©Ÿå™¨çµ„æˆã€‚node æ˜¯ Google Compute Engine (GCE) çš„ VM instanceï¼ŒåŸ·è¡Œ Kubernetes çš„å¿…è¦ç¨‹åº (process)ï¼Œä½¿å®ƒå€‘æˆç‚ºå¢é›†çš„ä¸€éƒ¨åˆ†ã€‚è‹¥è¦å»ºç«‹å¢é›†ï¼Œè«‹åŸ·è¡Œä»¥ä¸‹æŒ‡ä»¤ï¼Œä¸¦å°‡ [CLUSTER-NAME] æ›¿æ›ç‚ºè‡ªè¨‚çš„å¢é›†åç¨± (ä¾‹å¦‚ï¼šmy-cluster )ã€‚å¢é›†åç¨±å¿…é ˆä»¥å­—æ¯é–‹é ­ï¼Œçµå°¾å¿…é ˆæ˜¯å­—æ¯æˆ–æ•¸å­—ï¼Œä¸”ä¸èƒ½è¶…é 40 å€‹å­—å…ƒã€‚1$ gcloud container clusters create [CLUSTER-NAME]ä½ å¯ä»¥ç„¡è¦–ä¸‹é¢é€™äº›è¼¸å‡ºå…§çš„ä»»ä½•è­¦å‘Šï¼š1234567WARNING: In June 2019, node auto-upgrade will be enabled by default for newly created clusters and node pools. To disable it, use the `--no-enable-autoupgrade`flag.WARNING: Starting in 1.12, new clusters will have basic authentication disabled by default. Basic authentication can be enabled (or disabled) manually using the `--[no-]enable-basic-auth` flag.WARNING: Starting in 1.12, new clusters will not have a client certificate issued. You can manually enable (or disable) the issuance of the client certificate using the `--[no-]issue-client-certificate` flag.WARNING: Currently VPC-native is not the default mode during cluster creation. In the future, this will become the default mode and can be disabled using `--no-enable-ip-alias` flag. Use `--[no-]enable-ip-alias` flag to suppress this warning.WARNING: Starting in 1.12, default node pools in new clusters will have their legacy Compute Engine instance metadata endpoints disabled by default. To create a cluster with legacy instance metadata endpoints disabled in the default node pool, run `clusters create` with the flag `--metadata disable-legacy-endpoints=true`.This will enable the autorepair feature for nodes. Please see https://cloud.google.com/kubernetes-engine/docs/node-auto-repair for more information on node autorepairs.WARNING: Starting in Kubernetes v1.10, new clusters will no longer get compute-rw and storage-ro scopes added to what is specified in --scopes (though the latter will remain included in the default --scopes). To use these scopes, add them explicitly to --scopes. To use the new behavior, set container/new_scopes_behavior property (gcloud config set container/new_scopes_behavior true).å»ºç«‹å¢é›†å¯èƒ½éœ€è¦ä¸€äº›æ™‚é–“ï¼Œå¾ˆå¿«æ‡‰è©²æœƒçœ‹åˆ°é¡ä¼¼ä¸‹é¢çš„è¼¸å‡ºï¼š12NAME LOCATION MASTER_VERSION MASTER_IP MACHINE_TYPE NODE_VERSION NUM_NODES STATUSmy-cluster us-central1-a 1.11.7-gke.12 104.154.18.48 n1-standard-1 1.11.7-gke.12 3 RUNNINGè©³æƒ…å¯åƒè€ƒå®˜æ–¹çš„ Creating a cluster æ–‡ä»¶ã€‚å–å¾—å¢é›†çš„é©—è­‰æ†‘è­‰å»ºç«‹å¢é›†å¾Œï¼Œéœ€è¦å–å¾—é©—è­‰æ†‘è­‰ (authentication credentials) æ‰èƒ½æ“ä½œå¢é›†ã€‚åŸ·è¡Œä¸‹é¢æŒ‡å®šä¾†å°å¢é›†é€²è¡Œé©—è­‰ï¼Œå°‡ [CLUSTER-NAME] æ›¿æ›æˆå¢é›†åæˆï¼š1$ gcloud container clusters get-credentials [CLUSTER-NAME]è¼¸å‡ºå¦‚ä¸‹ï¼š12Fetching cluster endpoint and auth data.kubeconfig entry generated for my-cluster.è©³æƒ…å¯åƒè€ƒå®˜æ–¹çš„ Cluster access for kubectl æ–‡ä»¶ã€‚å°‡æ‡‰ç”¨éƒ¨ç½²è‡³å¢é›†ç¾åœ¨ä½ å·²ç¶“å»ºç«‹äº†ä¸€å€‹å¢é›†ï¼Œå¯ä»¥å°‡å®¹å™¨åŒ–æ‡‰ç”¨ç¨‹å¼éƒ¨ç½²åˆ°è©²å¢é›†ã€‚åœ¨æ­¤ lab ä¸­ï¼Œä½ å°‡åœ¨å¢é›†ä¸­åŸ·è¡Œ hello-appã€‚GKE ä½¿ç”¨ Kubernetes ç‰©ä»¶ä¾†å»ºç«‹å’Œç®¡ç†å¢é›†çš„è³‡æºã€‚Kubernetes æä¾› Deployment ç‰©ä»¶ä¾†éƒ¨ç½² stateless çš„æ‡‰ç”¨ï¼Œä¾‹å¦‚ï¼šweb serverã€‚Service ç‰©ä»¶å®šç¾©äº†å¾ç¶²éš›ç¶²è·¯ä¸Šå­˜å–æ‡‰ç”¨ç¨‹å¼çš„è¦å‰‡å’Œè² è¼‰å¹³è¡¡ã€‚åœ¨ Cloud Shell ä¸­åŸ·è¡Œä¸‹é¢çš„ kubectl run æŒ‡ä»¤ï¼Œå¾ hello-app å®¹å™¨ image å»ºç«‹æ–°çš„åç‚º hello-server çš„ Deploymentï¼š12$ kubectl run hello-server --image=gcr.io/google-samples/hello-app:1.0 --port 8080deployment.apps \"hello-server\" createdæˆ‘åœ¨ Github ä¸Šé¢æ‰¾åˆ° hello-app image çš„å°ˆæ¡ˆåŸå§‹ç¢¼ï¼šGoogleCloudPlatform/kubernetes-engine-sampleså¦‚æœæƒ³åœ¨è‡ªå·±çš„å°ˆæ¡ˆä¸Šä½¿ç”¨è‡ªå·±å»ºç½®çš„å®¹å™¨ imageï¼Œä¸¦å°‡æ­¤ image çš„æ‡‰ç”¨éƒ¨ç½²è‡³ GKEï¼Œå¯åƒè€ƒå®˜æ–¹çš„ Deploying a containerized web application æ–‡ä»¶ã€‚æ­¤ Kubernetes æŒ‡ä»¤å»ºç«‹ä¸€å€‹ä»£è¡¨ hello-app çš„ Deployment ç‰©ä»¶ã€‚åœ¨æ­¤æŒ‡ä»¤ä¸­ï¼š--imageï¼šæŒ‡å®šè¦éƒ¨ç½²çš„å®¹å™¨ imageã€‚åœ¨é€™ç¨®æƒ…æ³ä¸‹ï¼Œè©²æŒ‡ä»¤å¾ Google Container Registry bucket ä¸­ pull ç¯„ä¾‹ imageã€‚gcr.io/google-samples/hello-app:1.0 ä»£è¡¨é€™å€‹æŒ‡ä»¤è¦ pull çš„ç‰¹å®š image ç‰ˆæœ¬ã€‚å¦‚æœæœªæŒ‡å®šç‰ˆæœ¬ï¼Œæœƒä½¿ç”¨æœ€æ–°ç‰ˆ--portï¼šæŒ‡å®šå®¹å™¨è¦å…¬é–‹çš„ portå°‡æ‡‰ç”¨å…¬é–‹ç™¼ä½ˆåˆ°ç¶²éš›ç¶²è·¯æ ¹æ“šé è¨­ï¼Œåœ¨ GKE ä¸ŠåŸ·è¡Œçš„å®¹å™¨ç„¡æ³•å¾ç¶²éš›ç¶²è·¯å­˜å–ï¼Œå› ç‚ºé€™äº›å®¹å™¨æ²’æœ‰å¤–éƒ¨ IP ä½å€ã€‚æ‰€ä»¥ä½ å¿…é ˆåŸ·è¡Œ kubectl expose é€™å€‹æŒ‡ä»¤ï¼š12$ kubectl expose deployment hello-server --type=\"LoadBalancer\"service/hello-server exposedæ­¤æŒ‡ä»¤æœƒå»ºç«‹ä¸€å€‹ Kubernetes Serviceï¼Œå®ƒæ˜¯ä¸€å€‹ Kubernetes è³‡æºã€‚GKE æœƒç‚ºæ‡‰ç”¨ç¨‹å¼å»ºç«‹å¤–éƒ¨ IPï¼Œæ˜ç¢ºåœ°å°‡æ‡‰ç”¨ç¨‹åºå…¬é–‹çµ¦ä¾†è‡ªç¶²éš›ç¶²è·¯çš„æµé‡ (å¤–éƒ¨æµé‡)ã€‚åŠ ä¸Š type=&quot;LoadBalancer&quot; åƒæ•¸æœƒç‚ºå®¹å™¨å»ºç«‹ä¸€å€‹ GCE çš„ Load Balancer (åœ¨è‡ªå·±çš„å°ˆæ¡ˆä¸Šä½¿ç”¨éœ€è¦è¨ˆè²»)ã€‚GKE æœƒå°‡å¤–éƒ¨ IP ä½å€æŒ‡æ´¾çµ¦ Service è³‡æºï¼Œè€Œä¸æ˜¯æŒ‡æ´¾çµ¦ Deploymentã€‚å¦‚æœä½ æƒ³è¦æ‰¾å‡º GKE ç‚ºæ‡‰ç”¨ç¨‹å¼ä½ˆå»º (provisioned) çš„å¤–éƒ¨ IPï¼Œå¯åŸ·è¡Œ kubectl get service ä¾†æª¢æŸ¥ hello-server Serviceï¼š1$ kubectl get service hello-serverç”¢ç”Ÿå¤–éƒ¨ IP ä½å€å¯èƒ½éœ€è¦ä¸€åˆ†é˜ã€‚å¦‚æœ EXTERNAL-IP æ¬„ä½é¡¯ç¤ºç‚º pending ç‹€æ…‹æ™‚ (å¦‚ä¸‹)ï¼Œè«‹ç­‰å¾…ä¸€æ®µæ™‚é–“å¾Œï¼Œå†æ¬¡åŸ·è¡Œä¸Šé¢çš„æŒ‡ä»¤ï¼š12NAME TYPE CLUSTER-IP EXTERNAL-IP PORT(S) AGEhello-server LoadBalancer 10.39.249.21 &lt;pending&gt; 8080:31693/TCP 51sç¢ºèªæ‡‰ç”¨ç¨‹å¼çš„å¤–éƒ¨ IP ä½å€å¾Œ ( EXTERNAL-IP æ¬„ä½æä¾›çš„ IP)ï¼Œè«‹è¤‡è£½æ­¤ IP ä½å€ï¼Œä»¥ä¸‹é¢çš„è¼¸å‡ºç¯„ä¾‹ä¾†èªªï¼Œè¦è¤‡è£½çš„ Service å¤–éƒ¨ IP ä½å€å°±æ˜¯ 35.222.35.96ï¼š12NAME TYPE CLUSTER-IP EXTERNAL-IP PORT(S) AGEhello-server LoadBalancer 10.39.249.21 35.222.35.96 8080:31693/TCP 1mæ¥è‘—å°‡å‰›å‰›è¤‡è£½çš„å¤–éƒ¨ IP ä½å€ï¼ŒåŠ ä¸Šå…¬é–‹çš„ portï¼Œç¶²å€æ ¼å¼å°±æœƒåƒä¸‹é¢é€™æ¨£ï¼š1http://[EXTERNAL-IP]:8080ä½¿ç”¨ç€è¦½å™¨é–‹å•Ÿæ­¤ç¶²å€ï¼ŒæŸ¥çœ‹æ‡‰ç”¨ç¨‹å¼æ˜¯å¦èƒ½å­˜å–ã€‚çœ‹åˆ°çš„é é¢æ‡‰è©²æœƒåƒä¸‹åœ–é€™æ¨£ï¼šæ¸…é™¤åŸ·è¡Œä¸‹é¢çš„æŒ‡ä»¤ä¾†åˆªé™¤ Serviceï¼Œæ­¤æ­¥é©Ÿå°‡å–æ¶ˆåˆ†é…ç‚ºä½ çš„ Service æ‰€å»ºç«‹çš„ Cloud Load Balancerï¼š1$ kubectl delete service hello-serveråŸ·è¡Œä¸‹é¢çš„æŒ‡ä»¤ä¾†åˆªé™¤å®¹å™¨å¢é›†ï¼Œæ­¤æ­¥é©Ÿæœƒä¸€ä½µåˆªé™¤å®¹å™¨å¢é›†çš„çµ„æˆè³‡æºï¼Œä¾‹å¦‚ï¼šé‹ç®—åŸ·è¡Œå€‹é«”ã€ç£ç¢Ÿå’Œç¶²è·¯è³‡æºï¼š12345$ gcloud container clusters delete [CLUSTER-NAME]The following clusters will be deleted. - [my-cluster] in [us-central1-a]Do you want to continue (Y/n)?ç•¶å‡ºç¾æç¤ºæ™‚ï¼Œè¼¸å…¥ Y é€²è¡Œç¢ºèªã€‚åˆªé™¤å¢é›†å¯èƒ½éœ€è¦ä¸€äº›æ™‚é–“ã€‚åˆªé™¤å¢é›†å¾Œçš„è¼¸å‡ºæœƒåƒä¸‹é¢é€™æ¨£ï¼š1234567The following clusters will be deleted. - [my-cluster] in [us-central1-a]Do you want to continue (Y/n)? yDeleting cluster my-cluster...done.Deleted [https://container.googleapis.com/v1/projects/qwiklabs-gcp-deb218c6553ee39c/zones/us-central1-a/clusters/my-cluster].è©³æƒ…å¯æŸ¥çœ‹å®˜æ–¹çš„ Deleting a cluster | Google Kubernetes Engine æ–‡ä»¶ã€‚åƒè€ƒä¾†æºKubernetes Engine: Qwik Start | Qwiklabs","categories":[{"name":"Cloud","slug":"cloud","permalink":"https://titangene.github.io/categories/cloud/"}],"tags":[{"name":"Container","slug":"container","permalink":"https://titangene.github.io/tags/container/"},{"name":"GCP","slug":"gcp","permalink":"https://titangene.github.io/tags/gcp/"},{"name":"Load Balancer","slug":"load-balancer","permalink":"https://titangene.github.io/tags/load-balancer/"},{"name":"Kubernetes","slug":"kubernetes","permalink":"https://titangene.github.io/tags/kubernetes/"}]},{"title":"Google Cloud Shell å…¥é–€ï¼šgcloud & gsutil","slug":"getting-started-with-cloud-shell-gcloud-and-gsutil","date":"2019-04-17T08:56:38.000Z","updated":"2019-04-17T08:56:02.565Z","comments":true,"path":"article/getting-started-with-cloud-shell-gcloud-and-gsutil.html","link":"","permalink":"https://titangene.github.io/article/getting-started-with-cloud-shell-gcloud-and-gsutil.html","excerpt":"æœ¬ç¯‡æ˜¯ç´€éŒ„åœ¨ Google çš„ Qwiklab å¹³å°å…§ï¼Œå®Œæˆã€ŒGetting Started with Cloud Shell &amp; gcloudã€é€™å€‹ quest æ‰€å­¸åˆ°çš„å…§å®¹ï¼ŒåŒ…æ‹¬å¦‚ä½•ä½¿ç”¨ gcloud æŒ‡ä»¤ï¼Œä»¥åŠå¦‚ä½•ä½¿ç”¨ gsutil å·¥å…·ä¾†ç®¡ç† Cloud Storage è³‡æºï¼Œå°‡æª”æ¡ˆä¸Šå‚³è‡³æŒ‡å®šçš„ bucketã€‚","text":"æœ¬ç¯‡æ˜¯ç´€éŒ„åœ¨ Google çš„ Qwiklab å¹³å°å…§ï¼Œå®Œæˆã€ŒGetting Started with Cloud Shell &amp; gcloudã€é€™å€‹ quest æ‰€å­¸åˆ°çš„å…§å®¹ï¼ŒåŒ…æ‹¬å¦‚ä½•ä½¿ç”¨ gcloud æŒ‡ä»¤ï¼Œä»¥åŠå¦‚ä½•ä½¿ç”¨ gsutil å·¥å…·ä¾†ç®¡ç† Cloud Storage è³‡æºï¼Œå°‡æª”æ¡ˆä¸Šå‚³è‡³æŒ‡å®šçš„ bucketã€‚Google Cloud Shell ç‚ºä½ æä¾› gcloud command-line å­˜å– GCP ä¸Šè¨—ç®¡çš„é‹ç®—è³‡æºã€‚Cloud Shell æ˜¯åŸºæ–¼ Debian çš„ VMï¼Œå…·æœ‰ 5 GB persistent disk çš„ home ç›®éŒ„ï¼Œè®“ä½ å¯ä»¥è¼•é¬†ç®¡ç† GCP å°ˆæ¡ˆå’Œè³‡æºã€‚ä½ éœ€è¦çš„ Cloud SDK gcloud å’Œå…¶ä»–å·¥å…·éƒ½å·²é è£åœ¨ Cloud Shell ä¸­ï¼Œè®“ä½ å¯ä»¥å¿«é€Ÿå•Ÿå‹•å’ŒåŸ·è¡Œã€‚è‹¥æƒ³äº†è§£å¦‚ä½• åœ¨ GCP ä¸Šå»ºç«‹ VM æ¶è¨­ NIGNX Web server å¯åƒè€ƒæ­¤ç¯‡ã€‚è‹¥æƒ³äº†è§£å¦‚ä½• åœ¨ GCP ä¸Šå»ºç«‹ VM æ¶è¨­ Windows Server å¯åƒè€ƒæ­¤ç¯‡ã€‚æº–å‚™åœ¨é»æ“Šã€ŒStart Labã€ä¹‹å‰ï¼Œæº–å‚™å¥½ç¶²è·¯ç€è¦½å™¨ (æ¨è–¦ç”¨ Google Chrome)ï¼Œä¸¦ä¸”è‡³å°‘ 40 åˆ†é˜å¯ä»¥å°ˆæ³¨çš„æ™‚é–“ï¼Œå› ç‚º lab æ˜¯æœ‰æ™‚é–“é™åˆ¶ï¼Œç•¶ä½ æŒ‰ä¸‹ã€ŒStart Labã€é–‹å§‹å­¸ç¿’æ™‚ï¼Œç„¡æ³•æš«åœå€’æ•¸è¨ˆæ™‚ï¼Œä½ åªèƒ½åœ¨é€™æ®µæ™‚é–“å…§ä½¿ç”¨ lab æä¾›çµ¦ä½ çš„å…¨æ–°æš«æ™‚ GCP Console å¯ç”¨å¸³è™Ÿï¼Œæ™‚é–“åˆ°ä¹‹å¾Œçš„å¹¾åˆ†é˜å°±æœƒè‡ªå‹•ç™»å‡ºã€‚æ³¨æ„ï¼šå¦‚æœä½ æœ‰è‡ªå·±çš„å€‹äºº GCP å¸³è™Ÿæˆ–å°ˆæ¡ˆï¼Œè«‹ä¸è¦åœ¨æ­¤ lab ä½¿ç”¨é–‹å§‹ä½ çš„ Labï¼Œç„¶å¾Œç™»å…¥ GCP Consoleå¦‚æœæº–å‚™è¦é–‹å§‹ï¼Œå¯ä»¥é»æ“Šå³ä¸Šè§’çš„ã€ŒStart Labã€é–‹å§‹ï¼šæ¥è‘—æœƒå‡ºç¾é€™å€‹ç•«é¢ï¼Œå› ç‚ºæˆ‘åƒåŠ  GDG Tainan çš„æ´»å‹•ï¼Œæ´»å‹•æœ‰æä¾› Qwiklabs ä¸€å€‹æœˆçš„å…è²»é¡åº¦ï¼Œæ‰€ä»¥æˆ‘é»é¸ä¸‹åœ–å·¦é‚Šçš„ã€ŒUse Subscriptionã€ï¼šLab æœƒæä¾›çµ¦ä½ å…è²»æš«æ™‚çš„ GCP å¸³è™Ÿï¼Œè¤‡è£½å¸³è™Ÿå’Œå¯†ç¢¼ï¼Œç„¶å¾Œé»æ“Šã€ŒOpen Google Consoleã€é–‹å•Ÿ GCP Consoleï¼šåœ–ç‰‡ä¾†æºï¼šCreating a Virtual Machine | Qwiklabsæ¥è‘—å°±æœƒé–‹å•Ÿç™»å…¥é é¢ï¼Œå»ºè­°å¦å¤–é–‹ Chrome ç„¡ç—•æ¨¡å¼ä¾†ç™»å…¥ lab æä¾›çš„å¸³è™Ÿå’Œå¯†ç¢¼ï¼Œå› ç‚º Chrome æœƒç´€éŒ„å¸³å¯†ï¼Œç¾åœ¨ç™»å…¥çš„åªæ˜¯æš«æ™‚å¸³è™Ÿï¼Œæœªä¾†ä¸éœ€è¦ç”¨åˆ°ï¼šæ³¨æ„ï¼šé€™é‚Šæ˜¯ç™»å…¥ lab æä¾›çš„å¸³è™Ÿ (ä¹Ÿå°±æ˜¯ email å¿…é ˆç‚º googlexxxxxx_student@qwiklabs.net )ï¼Œå¦‚æœä½ æœ‰è‡ªå·±çš„ GCP å¸³è™Ÿï¼Œè«‹ä¸è¦ç”¨æ–¼æ­¤ labï¼Œé¿å…ç”¢ç”Ÿè²»ç”¨é¡ä¼¼æ–¼ googlexxxxxx_student@qwiklabs.net çš„å¸³è™Ÿæ˜¯ä¸€å€‹ Google å¸³è™Ÿï¼Œå°ˆç‚º Qwiklabs å­¸ç”Ÿä½¿ç”¨è€Œå»ºç«‹çš„ã€‚å®ƒå…·æœ‰ç‰¹å®šçš„åŸŸå (ä¹Ÿå°±æ˜¯ qwiklabs.net )ï¼Œä¸¦ä¸”å·²åˆ†é…äº† IAM è§’è‰²ï¼Œå…è¨±ä½ å»å­˜å–è©² GCP å°ˆæ¡ˆã€‚æ¥å— terms å’Œ conditionsï¼šä¸è¦æ–°å¢ recovery options æˆ– two-factor authentication (å› ç‚ºé€™æ˜¯ä¸€å€‹è‡¨æ™‚å¸³è™Ÿ)ï¼šå‹¾é¸åŒæ„æœå‹™æ¢æ¬¾ï¼šä¹‹å¾Œå°±å¯ä»¥é–‹å§‹ä½¿ç”¨ GCP Console å›‰ï¼šå•Ÿå‹• Google Cloud ShellGoogle Cloud Shell æ˜¯è¼‰å…¥äº†é–‹ç™¼å·¥å…·çš„ VMï¼Œå®ƒæä¾› 5GB çš„ home ç›®éŒ„ï¼Œä¸¦åœ¨ Google Cloud ä¸ŠåŸ·è¡Œã€‚å¯ç”¨ Google Cloud Shell æä¾›çš„ command-line ä¾†å­˜å– GCP çš„è³‡æºã€‚åœ¨ GCP console çš„å³ä¸Šæ–¹å·¥å…·åˆ—ä¸­ï¼Œé»æ“Šã€ŒActivate Cloud Shellã€æŒ‰éˆ•ï¼šåœ¨æ‰“é–‹çš„å°è©±æ¡†å…§ï¼Œé»æ“Šã€ŒSTART CLOUD SHELLã€ï¼šé€£æ¥å’Œæä¾›ç’°å¢ƒéœ€è¦ä¸€äº›æ™‚é–“ï¼šé€£æ¥å¾Œï¼Œå°±ä»£è¡¨ä½ å·²ç¶“éèº«ä»½é©—è­‰ï¼Œå°ˆæ¡ˆå·²è¨­ç½®ç‚º PROJECT_IDï¼Œä»¥ä¸‹åœ–çš„ç‚ºä¾‹ï¼Œæ­¤å°ˆæ¡ˆçš„ ID ç‚º qwiklabs-gcp-f9d61ede8167e6b0ï¼šgcloud æ˜¯ GCP çš„ command-line å·¥å…·ï¼Œä»–å·²é å…ˆå®‰è£åœ¨ Cloud Shell ä¸Šï¼Œä¸¦ä¸”æ”¯æ´ tab è‡ªå‹•è£œé½Š (tab-completion)ã€‚ä½¿ç”¨ä¸‹é¢æŒ‡ä»¤å¯åˆ—å‡ºæœ‰æ•ˆå¸³è™Ÿåç¨±ï¼š1234567$ gcloud auth list Credentialed AccountsACTIVE ACCOUNT* google3043863_student@qwiklabs.netTo set the active account, run: $ gcloud config set account `ACCOUNT`å¯ä»¥ä½¿ç”¨ä»¥ä¸‹æŒ‡ä»¤åˆ—å‡ºå°ˆæ¡ˆ IDï¼š12345$ gcloud config list project[core]project = qwiklabs-gcp-f9d61ede8167e6b0Your active configuration is: [cloudshell-9292]ç†è§£ Regions å’Œ ZonesCompute Engine è³‡æºä½æ–¼ä¸åŒçš„ regions (åœ°å€) æˆ– zones (å€åŸŸ)ã€‚region æ˜¯ä½ å¯ä»¥åŸ·è¡Œè³‡æºçš„æ‰€åœ¨ç‰¹å®šåœ°ç†ä½ç½®ã€‚æ¯å€‹ region éƒ½æœ‰ä¸€å€‹æˆ–å¤šå€‹ zonesã€‚ä¾‹å¦‚ï¼Œus-central1 region ä»£è¡¨ç¾åœ‹ä¸­éƒ¨åœ°å€ï¼Œå…¶ä¸­åŒ…å«çš„ Zones æœ‰ us-central1-aã€us-central1-bã€us-central1-c èˆ‡ us-central1-fã€‚åœ–ç‰‡ä¾†æºï¼šCreating a Virtual Machine | Qwiklabsä½æ–¼ zone ä¸­çš„è³‡æºéƒ½ç¨±ç‚º zonel (å€åŸŸ) è³‡æºï¼ŒVM instance (å¯¦ä¾‹) å’Œ persistent disk (æ°¸ä¹…ç£ç¢Ÿ) éƒ½ä½æ–¼ zone ä¸­ï¼Œå¦‚æœè¦å°‡ persistent disk é™„åŠ åˆ° VM instanceï¼Œé€™å…©å€‹è³‡æºéƒ½å¿…é ˆä½æ–¼åŒä¸€å€‹ zone ä¸­ã€‚åŒæ¨£ï¼Œå¦‚æœè¦å°‡éœæ…‹ IP ä½å€åˆ†é…åˆ° instanceï¼Œæ­¤ instance å°±å¿…é ˆèˆ‡éœæ…‹ IP ä½æ–¼åŒä¸€å€‹ region ä¸­ã€‚è©³æƒ…å¯åƒè€ƒ GCP å®˜æ–¹çš„ Regions &amp; Zones æ–‡ä»¶ã€‚ä½¿ç”¨ command lineåœ¨ GCP console çš„å³ä¸Šæ–¹å·¥å…·åˆ—ä¸­ï¼Œé»æ“Šã€ŒActivate Cloud Shellã€æŒ‰éˆ•é–‹å•Ÿæ–°çš„ Cloud Shell sessionï¼šå•Ÿç”¨ Cloud Shell å¾Œï¼Œä½ å¯ä»¥ä½¿ç”¨ command line invoke Cloud SDK gcloud æŒ‡ä»¤æˆ– VM instance ä¸Šå¯ç”¨çš„å…¶ä»–å·¥å…·ï¼Œé‚„å¯ä»¥åœ¨ä¸åŒå°ˆæ¡ˆå’Œ Cloud Shell session ä¹‹é–“ï¼Œå°‡è¦å­˜å–çš„æª”æ¡ˆå„²å­˜åœ¨ persistent disk storage çš„ $HOME ç›®éŒ„å…§ã€‚$HOME ç›®éŒ„æ˜¯ç§æœ‰çš„ï¼Œå…¶ä»–ä½¿ç”¨è€…ç„¡æ³•å­˜å–ã€‚å¯ä»¥åœ¨ä»»ä½• gcloud æŒ‡ä»¤çš„æœ«ç«¯åŠ ä¸Š -h åƒæ•¸ä¾†æŸ¥çœ‹ä½¿ç”¨æŒ‡å—ï¼š1$ gcloud -håŠ ä¸Š --help åƒæ•¸æˆ–åŸ·è¡Œ gcloud help å¯ä»¥æŸ¥çœ‹æ›´è©³ç´°çš„ help å…§å®¹ï¼š1$ gcloud config --helpé€éæŒ‰ Enter æˆ–ç©ºç™½å»ºä¾†æ²å‹•ç€è¦½ help å…§å®¹ï¼ŒæŒ‰ q æŒ‰éµæœƒé€€å‡ºå…§å®¹ã€‚ä¸‹é¢å…©å€‹æŒ‡ä»¤æ˜¯ä¸€æ¨£çš„æ„æ€ï¼Œéƒ½æ˜¯ç”¨ä¾†æŸ¥çœ‹è©³ç´°çš„ help å…§å®¹ï¼š12$ gcloud config --help$ gcloud help configä½¿ç”¨ä½ çš„ home ç›®éŒ„ç¾åœ¨è®“æˆ‘å€‘è©¦è©¦ä½ çš„ HOME ç›®éŒ„ã€‚å°±ç®—å»çµ‚æ­¢å’Œé‡å•Ÿ VMï¼ŒCloud Shell HOME éŒ„çš„å…§å®¹éƒ½æœƒåœ¨æ‰€æœ‰ Cloud Shell session ä¹‹é–“çš„å°ˆæ¡ˆä¸­ä¿ç•™ã€‚è®Šæ›´ç›®å‰çš„å·¥ä½œç›®éŒ„ï¼š1$ cd $HOMEä½¿ç”¨ vi æ‰“é–‹ .bashrc è¨­å®šæª”ï¼š1$ vi ./.bashrcä½¿ç”¨ gcloud æŒ‡ä»¤æª¢è¦–ç’°å¢ƒå…§çš„è¨­å®šåˆ—è¡¨ï¼š1$ gcloud config listå¦‚æœè¦æª¢æŸ¥å…¶ä»–å±¬æ€§çš„è¨­å®šï¼Œè«‹åœ¨æŒ‡ä»¤å¾Œé¢åŠ ä¸Š --all åƒæ•¸ï¼š1$ gcloud config list --allç®¡ç† Cloud Storage è³‡æ–™å¯ä»¥ä½¿ç”¨ Cloud Shell ä¸­çš„ gsutil å·¥å…·ä¾†ç®¡ç† Cloud Storage è³‡æºï¼ŒåŒ…æ‹¬å»ºç«‹å’Œåˆªé™¤ bucket å’Œç‰©ä»¶ã€è¤‡è£½å’Œç§»å‹•å„²å­˜è³‡æ–™ä»¥åŠç®¡ç† bucket å’Œç‰©ä»¶ ACLs (Access Control List)ã€‚gsutil é‚„èƒ½å°‡è³‡æ–™å‚³å…¥å’Œå‚³å‡º Cloud Shell instanceã€‚bucket æ˜¯ç”¨æ–¼å„²å­˜è³‡æ–™çš„åŸºæœ¬å®¹å™¨ï¼Œå„²å­˜åœ¨ Cloud Storage çš„æ‰€æœ‰è³‡æ–™éƒ½å¿…é ˆæ”¾åœ¨ bucket ä¸­ã€‚ä½ å¯ä»¥ç”¨ bucket ä¾†æ•´ç†è³‡æ–™ã€æ§åˆ¶è³‡æ–™çš„å­˜å–æ¬Šï¼Œä½† bucket ä¸èƒ½åƒç›®éŒ„å’Œè³‡æ–™å¤¾å¯ä»¥å·¢ç‹€å„²å­˜ã€‚ç”±æ–¼å»ºç«‹å’Œåˆªé™¤ bucket æœ‰ä¸€äº›é™åˆ¶ï¼Œæ‰€ä»¥ä½ è¨­è¨ˆçš„å„²å­˜æ‡‰ç”¨ç¨‹å¼æ‡‰å„˜é‡åŸ·è¡Œå¯†é›†çš„ç‰©ä»¶ä½œæ¥­å’Œç›¸å°è¼ƒå°‘çš„ bucket ä½œæ¥­ã€‚è©³æƒ…å¯åƒè€ƒå®˜æ–¹çš„ Bucketsã€Creating Storage Buckets å’Œ Access Control List (ACL) æ–‡ä»¶ã€‚å˜—è©¦å»ºç«‹ Cloud Storage bucketï¼Œbucket åç¨±ä¸èƒ½é‡è¤‡ï¼Œå› æ­¤è«‹å°‡ unique-name æ›¿æ›ç‚ºå…¶ä»–åç¨±ï¼Œæˆ–è€… append åç¨±è®“å®ƒä¸é‡è¤‡ã€‚1$ gsutil mb gs://unique-nameåƒæˆ‘æ˜¯ä½¿ç”¨åç‚º unique-name-titan çš„ bucketï¼Œå‰›å¥½æ²’æœ‰é‡è¤‡ï¼Œæ‰€ä»¥æˆåŠŸå»ºç«‹äº† bucketï¼š12$ gsutil mb gs://unique-name-titanCreating gs://unique-name-titan/...å¦‚æœä½¿ç”¨é‡è¤‡çš„ bucket åç¨±å°±æœƒå‡ºç¾é¡ä¼¼ä¸‹é¢çš„è¨Šæ¯ï¼š123$ gsutil mb gs://unique-nameCreating gs://unique-name/...ServiceException: 409 Bucket unique-name already exists.ç¾åœ¨ä¾†å»ºç«‹ä¸€äº›è³‡æ–™ï¼Œä¸Šå‚³åˆ°ä½ çš„ bucketã€‚é¦–å…ˆï¼Œå»ºç«‹ä¸€å€‹æ¸¬è©¦æª”æ¡ˆï¼š1$ vi test.datåŠ ä¸€äº›è³‡æ–™é€²å»ï¼š1Welcome to gcloud!å­˜å„²æª”æ¡ˆï¼š1:wqç¾åœ¨ï¼Œä¸Šå‚³ä¸€äº›æª”æ¡ˆåˆ°ä½ å»ºç«‹çš„ bucketï¼Œè«‹å°‡ unique-name å–ä»£æˆä½ çš„ storage bucketï¼š1$ gsutil cp test.dat gs://unique-nameå‰›å‰›æˆ‘æ˜¯ä½¿ç”¨ unique-name-titan çš„ bucketï¼Œæ‰€ä»¥ä¸Šå‚³æŒ‡ä»¤å¦‚ä¸‹ï¼Œå¯ä»¥çœ‹åˆ°æˆ‘å·²æˆåŠŸä¸Šå‚³ï¼š1234$ gsutil cp test.dat gs://unique-name-titanCopying file://test.dat [Content-Type=application/octet-stream]...- [1 files][ 19.0 B/ 19.0 B]Operation completed over 1 objects/19.0 B.å¦‚æœæ˜¯ä½¿ç”¨é‡è¤‡çš„ bucket åç¨±ä¸Šå‚³ï¼Œå°±æœƒå‡ºç¾é¡ä¼¼ä¸‹é¢çš„è¨Šæ¯ï¼š123$ gsutil cp test.dat gs://unique-nameCopying file://test.dat [Content-Type=application/octet-stream]...BadRequestException: 400 Project does not exist: 666160882299è‹¥è¦æŸ¥çœ‹ä½ çš„ bucket å’Œæª”æ¡ˆï¼Œè«‹é–‹å•Ÿå°èˆªé¸å–®ï¼Œç„¶å¾Œé¸æ“‡ã€ŒStorage &gt; Browserã€ï¼šç„¶å¾Œé»æ“Šä½ çš„ bucketï¼šä½ æ‡‰è©²æœƒçœ‹åˆ° test.dat é€™å€‹æª”æ¡ˆï¼šåƒè€ƒä¾†æºGetting Started with Cloud Shell &amp; gcloud | Qwiklabs (æœ¬ç¯‡å¤§å¤šæ•¸çš„åœ–ç‰‡ä¾†æº)","categories":[{"name":"Cloud","slug":"cloud","permalink":"https://titangene.github.io/categories/cloud/"}],"tags":[{"name":"GCP","slug":"gcp","permalink":"https://titangene.github.io/tags/gcp/"},{"name":"VM","slug":"vm","permalink":"https://titangene.github.io/tags/vm/"}]},{"title":"åœ¨ GCP ä¸Šå»ºç«‹ VM æ¶è¨­ Windows Server","slug":"gcp-vm-windows-server","date":"2019-04-16T13:17:46.000Z","updated":"2019-04-30T15:56:57.523Z","comments":true,"path":"article/gcp-vm-windows-server.html","link":"","permalink":"https://titangene.github.io/article/gcp-vm-windows-server.html","excerpt":"æœ¬ç¯‡æ˜¯ç´€éŒ„åœ¨ Google çš„ Qwiklab å¹³å°å…§ï¼Œå®Œæˆã€ŒCompute Engine: Qwik Start - Windowsã€é€™å€‹ quest æ‰€å­¸åˆ°çš„å…§å®¹ï¼ŒåŒ…æ‹¬å¦‚ä½•é€é GCP Console åœ¨ GCP å»ºç«‹ instance æ¶è¨­ Windows Serverï¼Œä»¥åŠå¦‚ä½•ä½¿ç”¨ Chrome RDP for GCP æ“´å……åŠŸèƒ½ç›´æ¥å¾ç€è¦½å™¨é€²è¡Œ RDP é€£æ¥è‡³ Windows Serverã€‚","text":"æœ¬ç¯‡æ˜¯ç´€éŒ„åœ¨ Google çš„ Qwiklab å¹³å°å…§ï¼Œå®Œæˆã€ŒCompute Engine: Qwik Start - Windowsã€é€™å€‹ quest æ‰€å­¸åˆ°çš„å…§å®¹ï¼ŒåŒ…æ‹¬å¦‚ä½•é€é GCP Console åœ¨ GCP å»ºç«‹ instance æ¶è¨­ Windows Serverï¼Œä»¥åŠå¦‚ä½•ä½¿ç”¨ Chrome RDP for GCP æ“´å……åŠŸèƒ½ç›´æ¥å¾ç€è¦½å™¨é€²è¡Œ RDP é€£æ¥è‡³ Windows Serverã€‚Google Compute Engine å¯è®“ä½ åœ¨ Google åŸºç¤æ¶æ§‹ä¸Šå»ºç«‹å’ŒåŸ·è¡Œ VMã€‚ Compute Engine æä¾›æ“´å±•ã€æ•ˆèƒ½å’Œåƒ¹å€¼ï¼Œè®“ä½ å¯ä»¥è¼•é¬†åœ°åœ¨ Google åŸºç¤æ¶æ§‹ä¸Šå•Ÿå‹•å¤§å‹é‹ç®—ç¾¤é›†ã€‚ä½ å¯ä»¥åœ¨ Google Compute Engine ä¸ŠåŸ·è¡Œ Windows æ‡‰ç”¨ç¨‹å¼ï¼Œä¸¦åˆ©ç”¨ VM instance å¯ç”¨çš„è¨±å¤šå„ªå‹¢ï¼Œä¾‹å¦‚ï¼šå¯é çš„å„²å­˜é¸é …ã€Google ç¶²è·¯çš„é€Ÿåº¦å’Œè‡ªå‹•æ“´å±• (Autoscaling)ã€‚åœ¨æ­¤ lab ä¸­ï¼Œä½ å°‡å­¸ç¿’å¦‚ä½•åœ¨ Google Compute Engine ä¸­å•Ÿå‹• Windows Server instanceï¼Œä¸¦ä½¿ç”¨é ç«¯æ¡Œé¢å”å®šé€£æ¥åˆ°è©² instanceã€‚è‹¥æƒ³äº†è§£å¦‚ä½• åœ¨ GCP ä¸Šå»ºç«‹ VM æ¶è¨­ NIGNX Web server å¯åƒè€ƒæ­¤ç¯‡ã€‚å¦‚æœä½ æœªåœ¨ local ä¸»æ©Ÿä¸Šä½¿ç”¨ Windowsï¼Œè«‹å®‰è£ç¬¬ä¸‰æ–¹çš„ RDP clientï¼Œä¾‹å¦‚ï¼šFusionLabs çš„ Chrome RDPã€‚æº–å‚™åœ¨é»æ“Šã€ŒStart Labã€ä¹‹å‰ï¼Œæº–å‚™å¥½ç¶²è·¯ç€è¦½å™¨ (æ¨è–¦ç”¨ Google Chrome)ï¼Œä¸¦ä¸”è‡³å°‘ 40 åˆ†é˜å¯ä»¥å°ˆæ³¨çš„æ™‚é–“ï¼Œå› ç‚º lab æ˜¯æœ‰æ™‚é–“é™åˆ¶ï¼Œç•¶ä½ æŒ‰ä¸‹ã€ŒStart Labã€é–‹å§‹å­¸ç¿’æ™‚ï¼Œç„¡æ³•æš«åœå€’æ•¸è¨ˆæ™‚ï¼Œä½ åªèƒ½åœ¨é€™æ®µæ™‚é–“å…§ä½¿ç”¨ lab æä¾›çµ¦ä½ çš„å…¨æ–°æš«æ™‚ GCP Console å¯ç”¨å¸³è™Ÿï¼Œæ™‚é–“åˆ°ä¹‹å¾Œçš„å¹¾åˆ†é˜å°±æœƒè‡ªå‹•ç™»å‡ºã€‚æ³¨æ„ï¼šå¦‚æœä½ æœ‰è‡ªå·±çš„å€‹äºº GCP å¸³è™Ÿæˆ–å°ˆæ¡ˆï¼Œè«‹ä¸è¦åœ¨æ­¤ lab ä½¿ç”¨é–‹å§‹ä½ çš„ Labï¼Œç„¶å¾Œç™»å…¥ GCP Consoleå¦‚æœæº–å‚™è¦é–‹å§‹ï¼Œå¯ä»¥é»æ“Šå³ä¸Šè§’çš„ã€ŒStart Labã€é–‹å§‹ï¼šæ¥è‘—æœƒå‡ºç¾é€™å€‹ç•«é¢ï¼Œå› ç‚ºæˆ‘åƒåŠ  GDG Tainan çš„æ´»å‹•ï¼Œæ´»å‹•æœ‰æä¾› Qwiklabs ä¸€å€‹æœˆçš„å…è²»é¡åº¦ï¼Œæ‰€ä»¥æˆ‘é»é¸ä¸‹åœ–å·¦é‚Šçš„ã€ŒUse Subscriptionã€ï¼šLab æœƒæä¾›çµ¦ä½ å…è²»æš«æ™‚çš„ GCP å¸³è™Ÿï¼Œè¤‡è£½å¸³è™Ÿå’Œå¯†ç¢¼ï¼Œç„¶å¾Œé»æ“Šã€ŒOpen Google Consoleã€é–‹å•Ÿ GCP Consoleï¼šåœ–ç‰‡ä¾†æºï¼šCreating a Virtual Machine | Qwiklabsæ¥è‘—å°±æœƒé–‹å•Ÿç™»å…¥é é¢ï¼Œå»ºè­°å¦å¤–é–‹ Chrome ç„¡ç—•æ¨¡å¼ä¾†ç™»å…¥ lab æä¾›çš„å¸³è™Ÿå’Œå¯†ç¢¼ï¼Œå› ç‚º Chrome æœƒç´€éŒ„å¸³å¯†ï¼Œç¾åœ¨ç™»å…¥çš„åªæ˜¯æš«æ™‚å¸³è™Ÿï¼Œæœªä¾†ä¸éœ€è¦ç”¨åˆ°ï¼šæ³¨æ„ï¼šé€™é‚Šæ˜¯ç™»å…¥ lab æä¾›çš„å¸³è™Ÿ (ä¹Ÿå°±æ˜¯ email å¿…é ˆç‚º googlexxxxxx_student@qwiklabs.net )ï¼Œå¦‚æœä½ æœ‰è‡ªå·±çš„ GCP å¸³è™Ÿï¼Œè«‹ä¸è¦ç”¨æ–¼æ­¤ labï¼Œé¿å…ç”¢ç”Ÿè²»ç”¨é¡ä¼¼æ–¼ googlexxxxxx_student@qwiklabs.net çš„å¸³è™Ÿæ˜¯ä¸€å€‹ Google å¸³è™Ÿï¼Œå°ˆç‚º Qwiklabs å­¸ç”Ÿä½¿ç”¨è€Œå»ºç«‹çš„ã€‚å®ƒå…·æœ‰ç‰¹å®šçš„åŸŸå (ä¹Ÿå°±æ˜¯ qwiklabs.net )ï¼Œä¸¦ä¸”å·²åˆ†é…äº† IAM è§’è‰²ï¼Œå…è¨±ä½ å»å­˜å–è©² GCP å°ˆæ¡ˆã€‚æ¥å— terms å’Œ conditionsï¼šä¸è¦æ–°å¢ recovery options æˆ– two-factor authentication (å› ç‚ºé€™æ˜¯ä¸€å€‹è‡¨æ™‚å¸³è™Ÿ)å‹¾é¸åŒæ„æœå‹™æ¢æ¬¾ï¼šä¹‹å¾Œå°±å¯ä»¥é–‹å§‹ä½¿ç”¨ GCP Console å›‰ï¼šå»ºç«‹ VM instanceåœ¨ GCP Console çš„å·¦ä¸Šè§’ï¼Œé»é¸ã€ŒNavigation menu &gt; Compute Engine &gt; VM Instancesã€ï¼šæ¥è‘—é»æ“Šã€ŒCreateã€æŒ‰éˆ•å»ºç«‹æ–°çš„ instanceï¼šåœ¨ã€ŒBoot diskã€éƒ¨åˆ†ä¸­ï¼Œé»æ“Šã€ŒChangeã€æŒ‰éˆ•ä»¥é–‹å§‹é…ç½® boot diskï¼šé¸æ“‡ã€ŒWindows Server 2012 R2 Datacenterã€ï¼Œç„¶å¾Œé»æ“Šã€ŒSelectã€æŒ‰éˆ•ï¼šå°‡æ‰€æœ‰å…¶ä»–è¨­å®šéƒ½ä¿ç•™ç‚ºé è¨­å€¼ã€‚è¨­å®šå¥½ä¹‹å¾Œï¼Œé»æ“Šã€ŒCreateã€æŒ‰éˆ•å»ºç«‹ instanceï¼šå•Ÿå‹• Google Cloud ShellGoogle Cloud Shell æ˜¯è¼‰å…¥äº†é–‹ç™¼å·¥å…·çš„ VMï¼Œå®ƒæä¾› 5GB çš„ home ç›®éŒ„ï¼Œä¸¦åœ¨ Google Cloud ä¸ŠåŸ·è¡Œã€‚å¯ç”¨ Google Cloud Shell æä¾›çš„ command-line ä¾†å­˜å– GCP çš„è³‡æºã€‚åœ¨ GCP console çš„å³ä¸Šæ–¹å·¥å…·åˆ—ä¸­ï¼Œé»æ“Šã€ŒActivate Cloud Shellã€æŒ‰éˆ•ï¼šåœ¨æ‰“é–‹çš„å°è©±æ¡†å…§ï¼Œé»æ“Šã€ŒSTART CLOUD SHELLã€ï¼šé€£æ¥å’Œæä¾›ç’°å¢ƒéœ€è¦ä¸€äº›æ™‚é–“ï¼šé€£æ¥å¾Œï¼Œå°±ä»£è¡¨ä½ å·²ç¶“éèº«ä»½é©—è­‰ï¼Œå°ˆæ¡ˆå·²è¨­ç½®ç‚º PROJECT_IDï¼Œä»¥ä¸‹åœ–çš„ç‚ºä¾‹ï¼Œæ­¤å°ˆæ¡ˆçš„ ID ç‚º qwiklabs-gcp-f9d61ede8167e6b0ï¼šä½¿ç”¨ä¸‹é¢æŒ‡ä»¤å¯åˆ—å‡ºæœ‰æ•ˆå¸³è™Ÿåç¨±ï¼š1234567$ gcloud auth list Credentialed AccountsACTIVE ACCOUNT* google3043863_student@qwiklabs.netTo set the active account, run: $ gcloud config set account `ACCOUNT`å¯ä»¥ä½¿ç”¨ä»¥ä¸‹æŒ‡ä»¤åˆ—å‡ºå°ˆæ¡ˆ IDï¼š12345$ gcloud config list project[core]project = qwiklabs-gcp-f9d61ede8167e6b0Your active configuration is: [cloudshell-9292]è©³æƒ…å¯åƒè€ƒå®˜æ–¹çš„ Google Cloud gcloud Overview æ–‡ä»¶ã€‚æ¸¬è©¦ Windows Startup çš„ç‹€æ…‹åœ¨ã€ŒVM Instancesã€é é¢ä¸Šçœ‹åˆ°å¸¶æœ‰ç¶ è‰²ç‹€æ…‹çš„ icon å°±ä»£è¡¨è©² instance å·²å»ºç«‹å®Œæˆï¼Œå¦‚ä¸‹åœ–ï¼šä½†æ˜¯ï¼Œå®ƒå¯èƒ½å°šæœªæº–å‚™å¥½æ¥å— RDP é€£æ¥ï¼Œå› ç‚ºæ‰€æœ‰ OS å…ƒä»¶åˆå§‹åŒ–éƒ½éœ€è¦ä¸€æ®µæ™‚é–“ã€‚è¦æŸ¥çœ‹ server æ˜¯å¦å·²æº–å‚™å¥½é€²è¡Œ RDP é€£æ¥ï¼Œè«‹åœ¨ Cloud Shell terminal command-line ä¸­åŸ·è¡Œä»¥ä¸‹æŒ‡ä»¤ï¼Œå…¶ä¸­çš„ instance-1 æ˜¯å‰›å‰›å»ºç«‹çš„ instance åç¨±ï¼š1$ gcloud compute instances get-serial-port-output instance-1 --zone us-central1-aé‡è¤‡é€™å€‹æŒ‡ä»¤ï¼Œç›´åˆ°æŒ‡ä»¤è¼¸å‡ºä»¥ä¸‹å…§å®¹ç‚ºæ­¢ã€‚é€™å€‹æŒ‡ä»¤çš„è¼¸å‡ºæœƒå‘Šè¨´ä½  OS å…ƒä»¶å·²åˆå§‹åŒ–ï¼Œä¸¦ä¸” Windows Server å·²æº–å‚™å¥½æ¥å— RDP é€£æ¥ (å˜—è©¦ä¸‹ä¸€æ­¥)ã€‚1Finished running startup scripts.é€™å€‹æŒ‡ä»¤å®Œæ•´çš„è¼¸å‡ºè¨Šæ¯æœƒé¡ä¼¼ä¸‹é¢é€™æ¨£ï¼š123456789101112131415161718192021222324252627282930313233343536373839404142434445464748495051525354555657585960616263646566$ gcloud compute instances get-serial-port-output instance-1 --zone us-central1-aSeaBIOS (version 1.8.2-20190322_093631-google)Total RAM Size = 0x00000000f0000000 = 3840 MiBCPUs found: 1 Max CPUs supported: 1found virtio-scsi at 0:3virtio-scsi vendor='Google' product='PersistentDisk' rev='1' type=0 removable=0virtio-scsi blksize=512 sectors=104857600 = 51200 MiBdrive 0x000f29f0: PCHS=0/0/0 translation=lba LCHS=1024/255/63 s=104857600Booting from Hard Disk 0...2019/04/15 15:39:21 GCEWindowsAgent: GCE Agent Started (version 4.6.0@1)2019/04/15 15:39:56 GCEInstanceSetup: Starting sysprep specialize phase.2019/04/15 15:39:57 GCEInstanceSetup: All networks set to DHCP.2019/04/15 15:39:57 GCEInstanceSetup: Running 'netsh' with arguments 'interface ipv4 set interface Ethernet mtu=1460'2019/04/15 15:39:57 GCEInstanceSetup: --&gt; Ok.2019/04/15 15:39:58 GCEInstanceSetup: MTU set to 1460.2019/04/15 15:39:58 GCEInstanceSetup: Running 'route' with arguments '/p add 169.254.169.254 mask 255.255.255.255 0.0.0.0 if 12 metric 1'2019/04/15 15:39:58 GCEInstanceSetup: --&gt; OK!2019/04/15 15:39:58 GCEInstanceSetup: Added persistent route to metadata netblock via first netkvm adapter.2019/04/15 15:39:58 GCEInstanceSetup: Getting hostname from metadata server.2019/04/15 15:39:58 GCEInstanceSetup: Changing hostname from WIN-MQ2QFF14J03 to instance-1.2019/04/15 15:39:58 GCEInstanceSetup: Renamed from WIN-MQ2QFF14J03 to instance-1.2019/04/15 15:39:58 GCEMetadataScripts: Starting specialize scripts (version 4.2.1@1).2019/04/15 15:39:58 GCEMetadataScripts: No specialize scripts to run.2019/04/15 15:39:58 GCEMetadataScripts: Finished running specialize scripts.2019/04/15 15:39:58 GCEInstanceSetup: Finished with sysprep specialize phase, restarting...2019/04/15 15:39:59 GCEWindowsAgent: GCE Agent StoppedSeaBIOS (version 1.8.2-20190322_093631-google)Total RAM Size = 0x00000000f0000000 = 3840 MiBCPUs found: 1 Max CPUs supported: 1found virtio-scsi at 0:3virtio-scsi vendor='Google' product='PersistentDisk' rev='1' type=0 removable=0virtio-scsi blksize=512 sectors=104857600 = 51200 MiBdrive 0x000f29f0: PCHS=0/0/0 translation=lba LCHS=1024/255/63 s=104857600Booting from Hard Disk 0...2019/04/15 15:40:36 GCEWindowsAgent: GCE Agent Started (version 4.6.0@1)2019/04/15 15:40:43 GCEInstanceSetup: Disabled Ctrl + Alt + Del.2019/04/15 15:40:43 GCEInstanceSetup: Enable RDP firewall rules.2019/04/15 15:40:43 GCEInstanceSetup: Running 'netsh' with arguments 'advfirewall firewall set rule group=remote desktop new enable=Yes'2019/04/15 15:40:43 GCEInstanceSetup: --&gt; Updated 3 rule(s).2019/04/15 15:40:43 GCEInstanceSetup: --&gt; Ok.2019/04/15 15:40:43 GCEInstanceSetup: Restarting Terminal Service services, to enable RDP.2019/04/15 15:40:44 GCEInstanceSetup: Enabled Remote Desktop.2019/04/15 15:40:44 GCEInstanceSetup: Configuring WinRM...2019/04/15 15:40:47 GCEInstanceSetup: Running 'netsh' with arguments 'advfirewall firewall add rule profile=any name=Windows Remote Management (HTTPS-In) dir=in localport=5986 protocol=TCP action=allow'2019/04/15 15:40:47 GCEInstanceSetup: --&gt; Ok.2019/04/15 15:40:48 GCEInstanceSetup: Setup of WinRM complete.2019/04/15 15:40:48 GCEInstanceSetup: Running startup scripts from metadata server.2019/04/15 15:40:48 GCEInstanceSetup: Running 'schtasks' with arguments '/run /tn GCEStartup'2019/04/15 15:40:48 GCEInstanceSetup: --&gt; SUCCESS: Attempted to run the scheduled task \"GCEStartup\".2019/04/15 15:40:48 GCEInstanceSetup: ------------------------------------------------------------2019/04/15 15:40:48 GCEInstanceSetup: Instance setup finished. instance-1 is ready to use.2019/04/15 15:40:48 GCEInstanceSetup: ------------------------------------------------------------2019/04/15 15:40:51 GCEInstanceSetup: Checking instance license activation status.2019/04/15 15:40:51 GCEInstanceSetup: instance-1 needs to be activated by a KMS Server.2019/04/15 15:40:51 GCEInstanceSetup: Key Management Service machine name set to kms.windows.googlecloud.com successfully.2019/04/15 15:40:51 GCEInstanceSetup: Installed product key W3GGN-FT8W3-Y4M27-J84CP-Q3VJ9 successfully.2019/04/15 15:40:51 GCEInstanceSetup: Activating instance...2019/04/15 15:40:52 GCEInstanceSetup: Activating Windows(R), ServerDatacenter edition (00091344-1ea4-4f37-b789-01750ba6988c) ...2019/04/15 15:40:52 GCEInstanceSetup: Product activated successfully.2019/04/15 15:40:52 GCEInstanceSetup: Activation successful.2019/04/15 15:40:53 GCEMetadataScripts: Starting startup scripts (version 4.2.1@1).2019/04/15 15:40:53 GCEMetadataScripts: No startup scripts to run.2019/04/15 15:40:53 GCEMetadataScripts: Finished running startup scripts.Specify --start=4643 in the next get-serial-port-output invocation to get only the new output starting from here.é€£æ¥ instanceé»æ“Š VM çš„åç¨±ï¼šåœ¨ã€ŒRemote Accessã€éƒ¨åˆ†é»æ“Šã€ŒSet Windows Passwordã€æŒ‰éˆ•ï¼šè¼¸å…¥ username å¾Œï¼Œé»æ“Šã€ŒSetã€æŒ‰éˆ•ä¾†ç”¢ç”Ÿæ­¤ Windows instance çš„å¯†ç¢¼ã€‚å¦‚æœæ²’æœ‰æ­¤ username çš„ Windows å¸³è™Ÿï¼Œå°±æœƒå»ºç«‹è©²å¸³è™Ÿä¸¦ä½¿ç”¨æ–°å¯†ç¢¼ï¼Œå¦‚æœå·²æœ‰æ­¤å¸³è™Ÿï¼Œå¯†ç¢¼å‰‡æœƒè¢«é‡è¨­ï¼šè¤‡è£½å¯†ç¢¼ä¸¦å„²å­˜ï¼Œç¨å¾Œç™»å…¥ instance æ™‚æœƒç”¨åˆ°ï¼šä½¿ç”¨é ç«¯æ¡Œé¢ (RDP) é€²å…¥ Windows Serverå¯ä»¥ä½¿ç”¨ Chrome RDP for Google Cloud Platform æ“´å……åŠŸèƒ½ç›´æ¥å¾ç€è¦½å™¨é€²è¡Œ RDP é€£æ¥ï¼Œé»æ“Šã€ŒRDPã€æŒ‰éˆ•é€²è¡Œé€£æ¥ï¼šå¦‚æœå‰›å‰›æ˜¯ç”¨ Chrome çš„ç„¡ç—•æ¨¡å¼ç™»å…¥å¸³è™Ÿï¼Œå°±æœƒç™¼ç”Ÿé»æ“Šã€ŒRDPã€æŒ‰éˆ•æ²’æœ‰åæ‡‰çš„ç‹€æ³ï¼Œæ›æˆåŸæœ¬çš„æ¨¡å¼å°±å¯ä»¥æ­£å¸¸ä½¿ç”¨ã€‚å®ƒæœƒæç¤ºä½ å®‰è£ RDP æ“´å……åŠŸèƒ½ã€‚å®‰è£å®Œæˆå¾Œï¼ŒGCP æœƒæ‰“é–‹åƒä¸‹åœ–çš„ç™»å…¥ç•«é¢ï¼Œè«‹ä½¿ç”¨ Windows ä½¿ç”¨è€…å’Œå¯†ç¢¼ç™»å…¥ (è²¼ä¸Šä¹‹å‰å„²å­˜çš„å¯†ç¢¼)ï¼šé»æ“Šã€ŒContinueã€æŒ‰éˆ•ä»¥ç¢ºèªä½ è¦é€£æ¥ï¼šæ‰“é–‹ Server Manager æ™‚ï¼Œå°±æœƒé€£æ¥åˆ° Windows Server ä¸Šçš„ VM instanceã€‚ä½¿ç”¨ RDP client è¤‡è£½å’Œè²¼ä¸Šç™»å…¥åˆ° instance å¾Œï¼Œå¯ä»¥æŒ‰ Ctrl + V è²¼ä¸Šè³‡æ–™ (å¦‚æœæ˜¯ Mac çš„ä½¿ç”¨è€…ï¼ŒæŒ‰ Cmd + V æœƒç„¡æ³•è²¼ä¸Šï¼‰ã€‚å¦‚æœè¦è²¼è‡³ PuTTY å’Œ Powershellï¼Œè«‹æŒ‰æ»‘é¼ å³éµå°±å¯ä»¥è²¼ä¸Šã€‚å¦‚æœåœ¨ Powershell è¦–çª—ä¸­ï¼Œè«‹ç¢ºä¿å·²é»æ“Šè©²è¦–çª—ï¼Œå¦å‰‡æœƒç„¡æ³•è²¼ä¸Šã€‚åƒè€ƒä¾†æºCompute Engine: Qwik Start - Windows (æœ¬ç¯‡å¤§å¤šæ•¸çš„åœ–ç‰‡ä¾†æº)","categories":[{"name":"Windows Server","slug":"windows-server","permalink":"https://titangene.github.io/categories/windows-server/"},{"name":"Cloud","slug":"windows-server/cloud","permalink":"https://titangene.github.io/categories/windows-server/cloud/"}],"tags":[{"name":"GCP","slug":"gcp","permalink":"https://titangene.github.io/tags/gcp/"},{"name":"VM","slug":"vm","permalink":"https://titangene.github.io/tags/vm/"}]},{"title":"GCP (Google Cloud Platform) å…¥é–€","slug":"getting-started-with-gcp","date":"2019-04-15T14:20:20.000Z","updated":"2019-04-16T12:05:50.221Z","comments":true,"path":"article/getting-started-with-gcp.html","link":"","permalink":"https://titangene.github.io/article/getting-started-with-gcp.html","excerpt":"æœ¬ç¯‡æ˜¯ç´€éŒ„åœ¨ Google çš„ Qwiklab å¹³å°å…§ï¼Œå®Œæˆã€ŒA Tour of Qwiklabs and the Google Cloud Platformã€é€™å€‹ quest æ‰€å­¸åˆ°çš„å…§å®¹ï¼ŒåŒ…æ‹¬å¦‚ä½•ä½¿ç”¨ä»¥åŠèªè­˜ Qwiklab å’Œ GCPã€‚","text":"æœ¬ç¯‡æ˜¯ç´€éŒ„åœ¨ Google çš„ Qwiklab å¹³å°å…§ï¼Œå®Œæˆã€ŒA Tour of Qwiklabs and the Google Cloud Platformã€é€™å€‹ quest æ‰€å­¸åˆ°çš„å…§å®¹ï¼ŒåŒ…æ‹¬å¦‚ä½•ä½¿ç”¨ä»¥åŠèªè­˜ Qwiklab å’Œ GCPã€‚Google Cloud Platform (GCP) æ˜¯è¨—ç®¡åœ¨ Google åŸºç¤æ¶æ§‹ä¸Šçš„ä¸€å¥—é›²ç«¯æœå‹™ï¼Œå¾è¨ˆç®—å’Œå„²å­˜ï¼Œåˆ°è³‡æ–™åˆ†æã€æ©Ÿå™¨å­¸ç¿’ã€ç¶²è·¯ã€GCP æä¾›å„ç¨®æœå‹™å’Œ APIï¼Œå¯ä»¥èˆ‡ä»»ä½•é›²ç«¯è¨ˆç®—æ‡‰ç”¨ç¨‹å¼æˆ–å°ˆæ¡ˆæ•´åˆ - ç„¡è«–æ˜¯å€‹äººé‚„æ˜¯ä¼æ¥­ã€‚åœ¨é€™å€‹å…¥é–€ç­‰ç´šçš„ lab ä¸­ï¼Œå¯é€éä½¿ç”¨ GCP console (ç€è¦½å™¨å…§çš„ UIï¼Œå¯è®“æ‚¨å­˜å–å’Œç®¡ç† Google Cloud æœå‹™) ä¾†ç·´ç¿’ä½¿ç”¨ GCPï¼Œäº†è§£ GCP çš„ä¸»è¦åŠŸèƒ½ï¼Œå¿…äº†è§£ Qwiklabs çš„ç’°å¢ƒã€‚ä½ æœƒå­¸åˆ°ä»€éº¼äº†è§£å¦‚ä½•ä½¿ç”¨ç‰¹å®šæ†‘è­‰å­˜å– GCP consoleèªè­˜ GCP å°ˆæ¡ˆäº†è§£å¦‚ä½•ä½¿ç”¨ GCP çš„å°èˆªé¸å–®ä¾†è­˜åˆ¥ GCP æœå‹™çš„é¡å‹äº†è§£ primitive roles ä¸¦ä½¿ç”¨ Cloud IAM æœå‹™æª¢æŸ¥ç‰¹å®šä½¿ç”¨è€…çš„å¯ç”¨æ“ä½œäº†è§£ Cloud Shell ä¸¦ä½¿ç”¨ gcloud toolkit ä¾†åŸ·è¡ŒæŒ‡ä»¤äº†è§£ API library ä¸¦æŸ¥çœ‹å…¶ä¸»è¦åŠŸèƒ½è‹¥æƒ³äº†è§£å¦‚ä½• åœ¨ GCP ä¸Šå»ºç«‹ VM æ¶è¨­ NIGNX Web server å¯åƒè€ƒæ­¤ç¯‡ã€‚è‹¥æƒ³äº†è§£å¦‚ä½• åœ¨ GCP ä¸Šå»ºç«‹ VM æ¶è¨­ Windows Server å¯åƒè€ƒæ­¤ç¯‡ã€‚å…¶ä»–é—œæ–¼ Qwiklab çš„ä»‹ç´¹ï¼Œå¯è‡³åŸæ–‡ A Tour of Qwiklabs and the Google Cloud Platform æŸ¥çœ‹ã€‚å­˜å– GCP Consoleå¦‚æœå·²ç¶“é»æ“Šå³ä¸Šè§’çš„ã€ŒStart Labã€é–‹å§‹ï¼Œæ‡‰è©²æœƒçœ‹åˆ°å·¦å´çš„ã€ŒOpen Google Consoleã€æŒ‰éˆ•è®Šæˆå¯ä»¥è¢«é»æ“Šï¼Œè€Œä¸”å¯ä»¥çœ‹åˆ°æœ‰å¸³è™Ÿã€å¯†ç¢¼ä»¥åŠ GCP å°ˆæ¡ˆ IDï¼šGCP å°ˆæ¡ˆ IDGCP å°ˆæ¡ˆæ˜¯ä½ çš„ Google é›²ç«¯è³‡æºçš„çµ„ç¹”å¯¦é«”ï¼ŒåŒ…å«è³‡æºå’Œæœå‹™ï¼Œä¾‹å¦‚ï¼šå¯ä»¥åŒ…å«ä¸€å€‹ VM çš„ poolï¼Œä¸€çµ„è³‡æ–™åº«ä»¥åŠå°‡å®ƒå€‘å½¼æ­¤é€£æ¥çš„ç¶²è·¯ï¼Œå°ˆæ¡ˆé‚„åŒ…å«è¨­å®šå’Œæ¬Šé™ï¼Œé€™äº›è¨­å®šå’Œæ¬Šé™å¯ä»¥æŒ‡å®šå®‰å…¨è¦å‰‡ä»¥åŠè¨­å®šèª°æœ‰æ¬Šå­˜å–å“ªäº›è³‡æºã€‚è€Œ GCP Project ID ä¸æœƒé‡è¤‡ï¼Œç”¨æ–¼å°‡ GCP è³‡æºå’Œ API é€£æ¥åˆ°ä½ çš„ç‰¹å®šå°ˆæ¡ˆã€‚å¸³è™Ÿå’Œå¯†ç¢¼å¸³è™Ÿå’Œå¯†ç¢¼æ˜¯è¡¨ç¤ºåœ¨ GCP èº«ä»½å’Œå­˜å–ç®¡ç† (Identity and Access Managementï¼ŒIAM) æœå‹™ä¸­ï¼Œå…·æœ‰å­˜å–æ¬Šé™èº«ä»½ (ä¸€å€‹æˆ–å¤šå€‹è§’è‰²) çš„æ†‘è­‰ï¼Œå…è¨±ä½ åœ¨å·²åˆ†é…çš„å°ˆæ¡ˆä¸­ä½¿ç”¨ GCP è³‡æºã€‚é€™äº›æ†‘è­‰æ˜¯è‡¨æ™‚çš„ï¼Œåªèƒ½åœ¨ lab é™åˆ¶çš„å­˜å–æ™‚é–“å…§ä½¿ç”¨ï¼Œæ‰€ä»¥åªè¦è¨ˆæ™‚å™¨å€’æ•¸åˆ° 0 ä¹‹å¾Œï¼Œä½ å°±ç„¡æ³•å†ä½¿ç”¨é€™äº›æ†‘è­‰å­˜å–é€™å€‹çš„ GCP å°ˆæ¡ˆã€‚ç™»å…¥ GCPLab æœƒæä¾›çµ¦ä½ å…è²»æš«æ™‚çš„ GCP å¸³è™Ÿï¼Œè¤‡è£½å¸³è™Ÿå’Œå¯†ç¢¼ï¼Œç„¶å¾Œé»æ“Šã€ŒOpen Google Consoleã€é–‹å•Ÿ GCP Consoleï¼šæ¥è‘—å°±æœƒé–‹å•Ÿç™»å…¥é é¢ï¼Œå»ºè­°å¦å¤–é–‹ Chrome ç„¡ç—•æ¨¡å¼ä¾†ç™»å…¥ lab æä¾›çš„å¸³è™Ÿå’Œå¯†ç¢¼ï¼Œå› ç‚º Chrome æœƒç´€éŒ„å¸³å¯†ï¼Œç¾åœ¨ç™»å…¥çš„åªæ˜¯æš«æ™‚å¸³è™Ÿï¼Œæœªä¾†ä¸éœ€è¦ç”¨åˆ°ï¼šæ³¨æ„ï¼šé€™é‚Šæ˜¯ç™»å…¥ lab æä¾›çš„å¸³è™Ÿ (ä¹Ÿå°±æ˜¯ email å¿…é ˆç‚º googlexxxxxx_student@qwiklabs.net )ï¼Œå¦‚æœä½ æœ‰è‡ªå·±çš„ GCP å¸³è™Ÿï¼Œè«‹ä¸è¦ç”¨æ–¼æ­¤ labï¼Œé¿å…ç”¢ç”Ÿè²»ç”¨é¡ä¼¼æ–¼ googlexxxxxx_student@qwiklabs.net çš„å¸³è™Ÿæ˜¯ä¸€å€‹ Google å¸³è™Ÿï¼Œå°ˆç‚º Qwiklabs å­¸ç”Ÿä½¿ç”¨è€Œå»ºç«‹çš„ã€‚å®ƒå…·æœ‰ç‰¹å®šçš„åŸŸå (ä¹Ÿå°±æ˜¯ qwiklabs.net )ï¼Œä¸¦ä¸”å·²åˆ†é…äº† IAM è§’è‰²ï¼Œå…è¨±ä½ å»å­˜å–è©² GCP å°ˆæ¡ˆã€‚æ¥å— terms å’Œ conditionsï¼šä¸è¦æ–°å¢ recovery options æˆ– two-factor authentication (å› ç‚ºé€™æ˜¯ä¸€å€‹è‡¨æ™‚å¸³è™Ÿ)å‹¾é¸åŒæ„æœå‹™æ¢æ¬¾ï¼šä¹‹å¾Œå°±å¯ä»¥é–‹å§‹ä½¿ç”¨ GCP Console å›‰ï¼šGCP Console ä¸­çš„å°ˆæ¡ˆGCP Console çš„å·¦ä¸Šè§’ï¼Œæœƒçœ‹åˆ°ä¸€å€‹åç‚º Project info çš„é¢æ¿ï¼Œç•«é¢å¦‚ä¸‹ï¼šä¸€å€‹å°ˆæ¡ˆæœƒæœ‰åç¨±ã€IDã€ç·¨è™Ÿï¼Œåœ¨ä½¿ç”¨ GCP æœå‹™æ™‚æœƒç¶“å¸¸ä½¿ç”¨é€™äº›æ±è¥¿ã€‚ä¸éä½ å¯ä»¥å­˜å–å¤šå€‹ GCP å°ˆæ¡ˆã€‚åœ¨æŸäº› lab ä¸­ï¼Œå¯èƒ½æœƒä½¿ç”¨å¤šå€‹å°ˆæ¡ˆä¾†å®Œæˆåˆ†é…çš„ä»»å‹™ã€‚å¦‚æœé»æ“Šå¸¶æœ‰å°ˆæ¡ˆåç¨±çš„ä¸‹æ‹‰å¼é¸å–®ä¸¦é¸æ“‡ã€ŒALLã€ï¼Œå°±æœƒçœ‹åˆ°ã€ŒQwiklabs Resourcesã€å°ˆæ¡ˆä¹Ÿå¯è¦‹ï¼šç›®å‰ä¸è¦åˆ‡æ›åˆ° Qwiklabs è³‡æºå°ˆæ¡ˆï¼ä½†æ˜¯ï¼Œä½ å¯ä»¥ç¨å¾Œåœ¨å…¶ä»– lab ä¸­ä½¿ç”¨å®ƒã€‚GCP çš„å¤§å‹ä¼æ¥­æˆ–æœ‰ç¶“é©—çš„ä½¿ç”¨è€…æ“æœ‰æ•¸ååˆ°æ•¸åƒå€‹ GCP å°ˆæ¡ˆçš„æƒ…æ³é‚„è »å¸¸è¦‹çš„ï¼Œçµ„ç¹”æœƒä»¥ä¸åŒçš„æ–¹å¼ä½¿ç”¨ GCPï¼Œå› æ­¤å°ˆæ¡ˆåˆ†é›¢åœ¨é›²ç«¯é‹ç®—æœå‹™ (ä»¥åœ˜éšŠæˆ–ç”¢å“ç‚ºä¾‹) æ˜¯å€‹å¥½æ–¹æ³•ã€‚â€œQwiklabs Resourcesâ€ æ˜¯ä¸€å€‹åŒ…å«æŸäº› lab çš„æª”æ¡ˆï¼Œè³‡æ–™é›†å’Œæ©Ÿå™¨ image çš„å°ˆæ¡ˆï¼Œå¯ä»¥å¾æ¯å€‹ GCP lab ç’°å¢ƒå­˜å–ã€‚è¦æ³¨æ„æ˜¯ â€œQwiklabs Resourcesâ€ èˆ‡æ‰€æœ‰ Qwiklabs ä½¿ç”¨è€…å…±äº«è³‡æº (read only)ï¼Œä¹Ÿå°±ä»£è¡¨ä½ ç„¡æ³•åˆªé™¤æˆ–ä¿®æ”¹å®ƒã€‚ä½ æ­£åœ¨ä½¿ç”¨åç‚ºé¡ä¼¼æ–¼ qwiklabs-gcp-xxx çš„ GCP å°ˆæ¡ˆæ˜¯è‡¨æ™‚çš„ï¼Œä¹Ÿå°±ä»£è¡¨å°ˆæ¡ˆåŠå…¶åŒ…å«çš„æ‰€æœ‰å…§å®¹æœƒåœ¨ lab çµæŸå¾Œåˆªé™¤ã€‚æ¯æ¬¡ä½¿ç”¨çš„ lab éƒ½å¯ä»¥å­˜å–ä¸€å€‹æˆ–å¤šå€‹æ–°çš„ GCP å°ˆæ¡ˆï¼Œä¸¦ä¸”åœ¨é‚£è£¡ (ä¸æ˜¯ â€œQwiklabs Resourcesâ€ ) åŸ·è¡Œæ‰€æœ‰ lab çš„æ­¥é©Ÿã€‚å°èˆªé¸å–®å’Œæœå‹™åœ¨ç•«é¢çš„å·¦ä¸Šè§’æœ‰ä¸€å€‹é¡ä¼¼ã€Œä¸‰ã€çš„ iconï¼šé»æ“Šæ­¤æŒ‰éˆ•æœƒé¡¯ç¤º (æˆ–éš±è—) GCP æ ¸å¿ƒæœå‹™çš„å°èˆªé¸å–®ï¼Œå¦‚æœé¸å–®æ²’æœ‰æ‰“é–‹ï¼Œè«‹é»æ“Šæ­¤ icon ä¸¦æ²å‹•æŸ¥çœ‹æ‰€æœ‰æä¾›çš„æœå‹™é¡å‹ï¼šåœ¨å°èˆªé¸å–®å¯ä»¥å¿«é€Ÿå­˜å–å¹³å°çš„æœå‹™ï¼Œå¯çœ‹åˆ°å…±æœ‰ 7 é¡ GCP çš„æœå‹™ï¼šComputeï¼šåŒ…å«æ”¯æ´ä»»ä½•é¡å‹çš„å·¥ä½œè² è¼‰çš„å„ç¨®æ©Ÿå‹ã€‚é€šéä¸åŒçš„é‹ç®—é¸é …ï¼Œå¯ä»¥æ±ºå®šä½ å¸Œæœ›å¦‚ä½•åƒèˆ‡ operational details å’ŒåŸºç¤æ¶æ§‹ç­‰Storageï¼šçµæ§‹åŒ–æˆ–éçµæ§‹åŒ–ã€é—œä¿‚è³‡æ–™æˆ–éé—œä¿‚è³‡æ–™çš„è³‡æ–™å„²å­˜å’Œè³‡æ–™åº«é¸é …Networkingï¼šå¹³è¡¡æ‡‰ç”¨ç¨‹å¼æµé‡å’Œæä¾›å®‰å…¨è¦å‰‡çš„æœå‹™Stackdriverï¼šä¸€å¥—è·¨é›²ç«¯æ—¥èªŒè¨˜éŒ„ (cross-cloud logging)ã€ç›£æ§ã€è¿½è¹¤å’Œå…¶ä»–æœå‹™çš„å¯é æ€§å·¥å…·Toolsï¼šç®¡ç†éƒ¨ç½²å’Œæ‡‰ç”¨ç¨‹å¼å»ºç½® pipeline çš„é–‹ç™¼äººå“¡çš„æœå‹™Big Dataï¼šç”¨æ–¼è™•ç†å’Œåˆ†æå¤§é‡è³‡æ–™é›†çš„æœå‹™Artificial Intelligence (AI)ï¼šå¯åœ¨ GCP ä¸ŠåŸ·è¡Œç‰¹å®šçš„ AI å’Œæ©Ÿå™¨å­¸ç¿’ (MLï¼Œmachine learning) ä»»å‹™çš„ä¸€å¥— APIè©³æƒ…å¯æŸ¥çœ‹å®˜æ–¹çš„ About the GCP Services | Google Cloud æ–‡ä»¶ã€‚è§’è‰²å’Œæ¬Šé™é™¤äº†é›²ç«¯é‹ç®—æœå‹™ä¹‹å¤–ï¼ŒGCP é‚„åŒ…å«ä¸€çµ„æ¬Šé™å’Œè§’è‰²ï¼Œç”¨æ–¼å®šç¾©èª°å¯ä»¥å­˜å–å“ªäº›è³‡æºï¼Œæˆ‘å€‘å°±å¯ä»¥ä½¿ç”¨é›²ç«¯èº«ä»½å’Œå­˜å–ç®¡ç† (Cloud Identity and Access Managementï¼ŒIAM) æœå‹™ä¾†æª¢æŸ¥å’Œä¿®æ”¹è§’è‰²å’Œæ¬Šé™ã€‚è«‹æ‰“é–‹å°èˆªé¸å–®ï¼Œç„¶å¾Œé»æ“Šã€ŒIAM &amp; adminã€ï¼Œç•«é¢æœƒè·³è‡³åŒ…å«ä½¿ç”¨è€…åˆ—è¡¨çš„é é¢ï¼Œè©²é é¢æŒ‡å®šçµ¦äºˆç‰¹å®šå¸³è™Ÿçš„æ¬Šé™å’Œè§’è‰²ã€‚å˜—è©¦ç¯©é¸é€™äº›ä¸¦æ‰¾åˆ°ä½ ç™»å…¥çš„ â€œ@qwiklabsâ€ æ­¤ä½¿ç”¨è€…åç¨±ï¼šé¡ä¼¼ä¸‹åœ–ï¼šmember æ¬„ä½è¢«è¨­ç‚º google23396_student@qwiklabs.netï¼ˆèˆ‡ä½ ç™»å…¥çš„å¸³è™Ÿä¸€æ¨£ï¼‰ï¼Œname æ¬„ä½è¢«è¨­ç‚º google23396_student@qwiklabs.net studentã€‚æœƒçœ‹åˆ° Role æ¬„ä½è¢«è¨­ç‚º Editorï¼Œé€™æ˜¯ GCP æä¾›çš„ä¸‰ç¨® primitive roles çš„å…¶ä¸­ä¹‹ä¸€ã€‚é™¤éå¦æœ‰æŒ‡å®šï¼Œå¦å‰‡ primitive roles æ˜¯è¨­å®šå°ˆæ¡ˆç­‰ç´šçš„æ¬Šé™ï¼Œå®ƒå€‘æ§åˆ¶å°æ‰€æœ‰ GCP æœå‹™çš„å­˜å–å’Œç®¡ç†ã€‚ä¸‹è¡¨æ˜¯å¾è§’è‰²æ–‡ä»¶ä¸­æå–çš„å®šç¾©ï¼Œå…¶ä¸­æä¾›äº† viewerã€editor å’Œ owner è§’è‰²æ¬Šé™çš„ overviewï¼šè§’è‰²åç¨±æ¬Šé™roles/viewerä¸å½±éŸ¿ç‹€æ…‹çš„ read-only æ“ä½œçš„æ¬Šé™ï¼Œä¾‹å¦‚ï¼šæŸ¥çœ‹ (ä½†ä¸èƒ½ä¿®æ”¹) ç¾æœ‰çš„è³‡æºæˆ–è³‡æ–™roles/editoræ‰€æœ‰ viewer çš„æ¬Šé™ï¼Œä»¥åŠä¿®æ”¹ç‹€æ…‹çš„æ“ä½œçš„æ¬Šé™ï¼Œä¾‹å¦‚ï¼šä¿®æ”¹ç¾æœ‰è³‡æºroles/owneræ‰€æœ‰ editor æ¬Šé™å’Œä»¥ä¸‹æ“ä½œçš„æ¬Šé™ï¼š- ç®¡ç†å°ˆæ¡ˆçš„è§’è‰²å’Œæ¬Šé™ä»¥åŠå°ˆæ¡ˆä¸­çš„æ‰€æœ‰è³‡æº- è¨­å®šå°ˆæ¡ˆçš„è¨ˆè²»æ–¹å¼å› æ­¤ editor èƒ½å¤ å»ºç«‹ã€ä¿®æ”¹å’Œåˆªé™¤ GCP è³‡æºã€‚ä½†æ˜¯ç„¡æ³•åœ¨ GCP å°ˆæ¡ˆä¸­æ–°å¢æˆ–åˆªé™¤ memberã€‚API å’Œæœå‹™Google Cloud API æ˜¯ GCP ä¸­é‡è¦çš„éƒ¨åˆ†ã€‚èˆ‡æœå‹™é¡ä¼¼ï¼Œå¾ä¼æ¥­ç®¡ç†åˆ°æ©Ÿå™¨å­¸ç¿’ç­‰é ˜åŸŸçš„ 200 å¤šå€‹ API éƒ½å¯ä»¥è¼•é¬†åœ°èˆ‡ GCP å°ˆæ¡ˆå’Œæ‡‰ç”¨ç¨‹å¼æ•´åˆã€‚API æ˜¯ â€œApplication Programming Interfacesâ€ï¼Œå¯ä»¥ç›´æ¥æˆ–é€šé Google Cloud client library å‘¼å« (call) å®ƒå€‘ã€‚ Cloud API ä½¿ç”¨å®˜æ–¹çš„ Google API Design Guide ä¸­æè¿°çš„è³‡æºå°å‘çš„è¨­è¨ˆåŸå‰‡ã€‚ç•¶ Qwiklabs ç‚º lab instance æä¾›æ–°çš„ GCP å°ˆæ¡ˆæ™‚ï¼Œå®ƒå¯ä»¥åœ¨èƒŒå¾Œå•Ÿç”¨å¤§å¤šæ•¸çš„ APIï¼Œä»¥ä¾¿ä½ å¯ä»¥ç«‹å³è™•ç† lab çš„ä»»å‹™ã€‚ä½†è¦æ³¨æ„çš„äº‹ï¼Œç•¶ä½ åœ¨ Qwiklabs ä¹‹å¤–å»ºç«‹è‡ªå·±çš„ GCP å°ˆæ¡ˆæ™‚ï¼Œå¿…é ˆè‡ªå·±å•Ÿç”¨æŸäº› APIã€‚å¤§å¤šæ•¸é›²ç«¯ API æœƒç‚ºä½ æä¾›æœ‰é—œå°ˆæ¡ˆä½¿ç”¨è©² API çš„è©³ç´°è³‡è¨Š (åŒ…æ‹¬æµé‡ã€éŒ¯èª¤ç‡ã€å»¶é²æ™‚é–“)ï¼Œå¹«åŠ©ä½ å¿«é€Ÿæ‰¾åˆ°ä½¿ç”¨ Googleæœå‹™çš„æ‡‰ç”¨ç¨‹åºå•é¡Œã€‚ä½ å¯ä»¥é€šéæ‰“é–‹å°èˆªé¸å–®ä¸¦é»æ“Šã€ŒAPIs &amp; Services &gt; Libraryã€ä¾†æŸ¥çœ‹æ­¤è³‡è¨Šï¼šåœ¨ API æœå°‹æ¬„ä¸­ï¼Œè¼¸å…¥ â€œDialogflowâ€ ä¸¦é¸æ“‡ Dialogflow API å¾Œï¼Œå°±æœƒçœ‹åˆ°ä¸‹åœ–çš„é é¢ï¼šDialogflow API å¯è®“ä½ å»ºç½®å°è©±å¼ (conversational) æ‡‰ç”¨ç¨‹å¼ (ä¾‹å¦‚ï¼Œfor Google Assistant)ï¼Œè€Œç„¡éœ€æ“”å¿ƒåº•å±¤æ©Ÿå™¨å­¸ç¿’å’Œè‡ªç„¶èªè¨€ç†è§£ (Natural Language Understanding) schemaã€‚é»æ“Šã€ŒENABLEã€æŒ‰éˆ•å¾Œæœƒè·³è‡³æ–°é é¢ï¼Œæ¥è‘—é»æ“Šç€è¦½å™¨çš„è¿”å›æŒ‰éˆ•å°±å¯çœ‹åˆ°ã€ŒAPI enabledã€ï¼šé»æ“Šã€ŒTry this APIã€æŒ‰éˆ•æœƒä»¥æ–°åˆ†é çš„æ–¹å¼é–‹å•Ÿ Dialogflow API çš„æ–‡ä»¶ï¼Œä¸¦ä¸”å¯ä»¥æŒ‡å®šå¯ç”¨çš„ API æ–¹æ³•ã€‚è©³æƒ…å¯æŸ¥çœ‹ Google Cloud ä¸­åç‚º APIs Explorer çš„ hands-on å·¥å…·ã€‚Cloud ShellCloud Shell æ˜¯åœ¨ç€è¦½å™¨å…§çš„æŒ‡ä»¤æç¤º (command prompt) åŸ·è¡Œç’°å¢ƒï¼Œå…è¨±ä½ åœ¨çµ‚ç«¯æç¤º (terminal prompt) ä¸‹è¼¸å…¥æŒ‡ä»¤ä¾†ç®¡ç† GCP å°ˆæ¡ˆä¸­çš„è³‡æºå’Œæœå‹™ã€‚Cloud Shell èƒ½è®“ä½ åœ¨ä¸é›¢é–‹ console çš„æƒ…æ³ä¸‹åŸ·è¡Œæ‰€æœ‰ shell æŒ‡ä»¤ï¼Œä¸¦æœ‰é è£çš„ command-line å·¥å…·ã€‚åœ¨ console çš„å³ä¸Šè§’é»æ“Šã€ŒActivate Cloud Shellã€æŒ‰éˆ•ï¼Œç„¶å¾Œåœ¨å‡ºç¾æç¤ºæ™‚é»æ“Šã€ŒSTART CLOUD SHELLã€æŒ‰éˆ•ï¼šæ¥è‘—æœƒåœ¨ console åº•éƒ¨å‡ºç¾ä¸€å€‹æ–°çš„é»‘è‰²è¦–çª—ï¼Œè¦–çª—å…§æœƒå‡ºç¾é¡ä¼¼ä»¥ä¸‹å…§å®¹çš„è¨Šæ¯å’Œæç¤ºï¼Œé€™ä»£è¡¨ä½ å·²å•Ÿå‹•ä¸¦åŸ·è¡Œ Cloud Shell sessionï¼š1234Welcome to Cloud Shell! Type \"help\" to get started.Your Cloud Platform project in this session is set to qwiklabs-gcp-76ad0f1342e20013.Use \"gcloud config set project [PROJECT_ID]\" to change to a different project.gcpstaging23396_student@cloudshell:~ (qwiklabs-gcp-76ad0f1342e20013)$æ¥è‘—å°‡ä¸‹é¢æŒ‡ä»¤è¤‡è£½ä¸¦è²¼ (æˆ–è¼¸å…¥) è‡³ Cloud Shell ä¸Šï¼Œç„¶å¾ŒæŒ‰ Enter éµåŸ·è¡Œï¼Œæ‡‰è©²æœƒçœ‹åˆ°é¡ä¼¼ä¸‹é¢çš„è¼¸å‡ºï¼š123456$ gcloud auth listCredentialed AccountsACTIVE ACCOUNT* gcpstaging23396_student@qwiklabs.netTo set the active account, run: $ gcloud config set account `ACCOUNT`å…¶ä¸­ ACTIVE ACCOUNT æ˜¯è¨­ç‚ºä½ çš„ GCP IAM èº«ä»½ (ä¹Ÿå°±æ˜¯ googlexxxxxx_student@qwiklabs.net )ï¼Œgcloudauth list æŒ‡ä»¤æœƒåˆ—å‡º GCP å°ˆæ¡ˆä¸­æœ‰æ†‘è­‰çš„å¸³è™Ÿã€‚æ­¤å¸³è™Ÿåç¨±èˆ‡ä¹‹å‰ç™»å…¥åˆ° console çš„ Qwiklabs å¸³è™Ÿç›¸åŒã€‚ï¼šå¦‚ä¹‹å‰æ‰€èªªçš„ï¼ŒCloud Shell é è£äº†ç‰¹å®šçš„ command-line å·¥å…·ï¼Œä¸»è¦çš„ GCP toolkit æ˜¯ gcloudï¼Œæ˜¯ç”¨æ–¼å¹³å°ä¸Šçš„è¨±å¤šä»»å‹™ï¼Œä¾‹å¦‚ï¼šè³‡æºç®¡ç†å’Œä½¿ç”¨è€…èº«ä»½é©—è­‰ã€‚é™¤äº†é è£çš„ toolkitï¼ŒCloud Shell é‚„é™„å¸¶æ¨™æº–çš„ unix CLI å·¥å…·å’Œ nano ç­‰æ–‡å­—ç·¨è¼¯å™¨ï¼Œåœ¨ Cloud Shell ä¸­å¯ä»¥åˆ©ç”¨å®ƒå€‘ä¾†å»ºç«‹å’Œç·¨è¼¯æª”æ¡ˆã€‚åƒè€ƒä¾†æºA Tour of Qwiklabs and the Google Cloud Platform (æœ¬ç¯‡å¤§å¤šæ•¸çš„åœ–ç‰‡ä¾†æº)","categories":[{"name":"Cloud","slug":"cloud","permalink":"https://titangene.github.io/categories/cloud/"}],"tags":[{"name":"GCP","slug":"gcp","permalink":"https://titangene.github.io/tags/gcp/"}]},{"title":"åœ¨ GCP ä¸Šå»ºç«‹ VM æ¶è¨­ NIGNX Web server","slug":"gcp-vm-nignx-web-server","date":"2019-04-14T02:17:46.000Z","updated":"2019-04-30T15:57:08.765Z","comments":true,"path":"article/gcp-vm-nignx-web-server.html","link":"","permalink":"https://titangene.github.io/article/gcp-vm-nignx-web-server.html","excerpt":"æœ¬ç¯‡æ˜¯ç´€éŒ„åœ¨ Google çš„ Qwiklab å¹³å°å…§ï¼Œå®Œæˆã€ŒCreating a Virtual Machineã€é€™å€‹ quest æ‰€å­¸åˆ°çš„å…§å®¹ï¼ŒåŒ…æ‹¬å¦‚ä½•é€é GCP Console å’Œ command-line å·¥å…· gcloud åœ¨ GCP å»ºç«‹ instanceï¼Œå¦‚ä½•ä½¿ç”¨ gcloud é€é SSH é€£æ¥åˆ°ä½ çš„ instanceï¼Œä»¥åŠå¦‚ä½•åœ¨ VM ä¸Šéƒ¨ç½² NIGNX web serverã€‚","text":"æœ¬ç¯‡æ˜¯ç´€éŒ„åœ¨ Google çš„ Qwiklab å¹³å°å…§ï¼Œå®Œæˆã€ŒCreating a Virtual Machineã€é€™å€‹ quest æ‰€å­¸åˆ°çš„å…§å®¹ï¼ŒåŒ…æ‹¬å¦‚ä½•é€é GCP Console å’Œ command-line å·¥å…· gcloud åœ¨ GCP å»ºç«‹ instanceï¼Œå¦‚ä½•ä½¿ç”¨ gcloud é€é SSH é€£æ¥åˆ°ä½ çš„ instanceï¼Œä»¥åŠå¦‚ä½•åœ¨ VM ä¸Šéƒ¨ç½² NIGNX web serverã€‚é€é Google Compute Engineï¼Œå¯åœ¨ Google åŸºç¤æ¶æ§‹ä¸Šï¼Œå»ºç«‹åŸ·è¡Œä¸åŒä½œæ¥­ç³»çµ±çš„ VM (virtual machineï¼Œè™›æ“¬æ©Ÿ)ï¼ŒåŒ…æ‹¬å¤šç¨® Linux (Debianã€Ubuntuã€Suseã€Red Hatã€CoreOS) å’Œ Windows Serverã€‚å¯ä»¥å­¸åˆ°å¦‚ä½•ä½¿ç”¨ Google Cloud Platform (GCP) Console å’Œ gcloud command-line å»ºç«‹å„ç¨®æ©Ÿå™¨é¡å‹çš„è™›æ“¬æ©Ÿ instance (å¯¦ä¾‹)ï¼Œé‚„èƒ½å­¸ç¿’å¦‚ä½•å°‡ NGINX web server é€£æ¥åˆ° VMã€‚è‹¥æƒ³äº†è§£å¦‚ä½• åœ¨ GCP ä¸Šå»ºç«‹ VM æ¶è¨­ Windows Server å¯åƒè€ƒæ­¤ç¯‡ã€‚æœ¬ç¯‡å°‡æœƒåšä»€éº¼ï¼Ÿä½¿ç”¨ GCP Console å»ºç«‹ VMä½¿ç”¨ gcloud command-line å»ºç«‹ VMåœ¨ VM ä¸Šéƒ¨ç½² web serveræº–å‚™åœ¨é»æ“Šã€ŒStart Labã€ä¹‹å‰ï¼Œæº–å‚™å¥½ç¶²è·¯ç€è¦½å™¨ (æ¨è–¦ç”¨ Google Chrome)ï¼Œä¸¦ä¸”è‡³å°‘ 40 åˆ†é˜å¯ä»¥å°ˆæ³¨çš„æ™‚é–“ï¼Œå› ç‚º lab æ˜¯æœ‰æ™‚é–“é™åˆ¶ï¼Œç•¶ä½ æŒ‰ä¸‹ã€ŒStart Labã€é–‹å§‹å­¸ç¿’æ™‚ï¼Œç„¡æ³•æš«åœå€’æ•¸è¨ˆæ™‚ï¼Œä½ åªèƒ½åœ¨é€™æ®µæ™‚é–“å…§ä½¿ç”¨ lab æä¾›çµ¦ä½ çš„å…¨æ–°æš«æ™‚ GCP Console å¯ç”¨å¸³è™Ÿï¼Œæ™‚é–“åˆ°ä¹‹å¾Œçš„å¹¾åˆ†é˜å°±æœƒè‡ªå‹•ç™»å‡ºã€‚æ³¨æ„ï¼šå¦‚æœä½ æœ‰è‡ªå·±çš„å€‹äºº GCP å¸³è™Ÿæˆ–å°ˆæ¡ˆï¼Œè«‹ä¸è¦åœ¨æ­¤ lab ä½¿ç”¨é–‹å§‹ä½ çš„ Labï¼Œç„¶å¾Œç™»å…¥ GCP Consoleå¦‚æœæº–å‚™è¦é–‹å§‹ï¼Œå¯ä»¥é»æ“Šå³ä¸Šè§’çš„ã€ŒStart Labã€é–‹å§‹ï¼šæ¥è‘—æœƒå‡ºç¾é€™å€‹ç•«é¢ï¼Œå› ç‚ºæˆ‘åƒåŠ  GDG Tainan çš„æ´»å‹•ï¼Œæ´»å‹•æœ‰æä¾› Qwiklabs ä¸€å€‹æœˆçš„å…è²»é¡åº¦ï¼Œæ‰€ä»¥æˆ‘é»é¸ä¸‹åœ–å·¦é‚Šçš„ã€ŒUse Subscriptionã€ï¼šLab æœƒæä¾›çµ¦ä½ å…è²»æš«æ™‚çš„ GCP å¸³è™Ÿï¼Œè¤‡è£½å¸³è™Ÿå’Œå¯†ç¢¼ï¼Œç„¶å¾Œé»æ“Šã€ŒOpen Google Consoleã€é–‹å•Ÿ GCP Consoleï¼šåœ–ç‰‡ä¾†æºï¼šCreating a Virtual Machine | Qwiklabsæ¥è‘—å°±æœƒé–‹å•Ÿç™»å…¥é é¢ï¼Œå»ºè­°å¦å¤–é–‹ Chrome ç„¡ç—•æ¨¡å¼ä¾†ç™»å…¥ lab æä¾›çš„å¸³è™Ÿå’Œå¯†ç¢¼ï¼Œå› ç‚º Chrome æœƒç´€éŒ„å¸³å¯†ï¼Œç¾åœ¨ç™»å…¥çš„åªæ˜¯æš«æ™‚å¸³è™Ÿï¼Œæœªä¾†ä¸éœ€è¦ç”¨åˆ°ï¼šæ³¨æ„ï¼šé€™é‚Šæ˜¯ç™»å…¥ lab æä¾›çš„å¸³è™Ÿ (ä¹Ÿå°±æ˜¯ email å¿…é ˆç‚º googlexxxxxx_student@qwiklabs.net )ï¼Œå¦‚æœä½ æœ‰è‡ªå·±çš„ GCP å¸³è™Ÿï¼Œè«‹ä¸è¦ç”¨æ–¼æ­¤ labï¼Œé¿å…ç”¢ç”Ÿè²»ç”¨é¡ä¼¼æ–¼ googlexxxxxx_student@qwiklabs.net çš„å¸³è™Ÿæ˜¯ä¸€å€‹ Google å¸³è™Ÿï¼Œå°ˆç‚º Qwiklabs å­¸ç”Ÿä½¿ç”¨è€Œå»ºç«‹çš„ã€‚å®ƒå…·æœ‰ç‰¹å®šçš„åŸŸå (ä¹Ÿå°±æ˜¯ qwiklabs.net )ï¼Œä¸¦ä¸”å·²åˆ†é…äº† IAM è§’è‰²ï¼Œå…è¨±ä½ å»å­˜å–è©² GCP å°ˆæ¡ˆã€‚æ¥å— terms å’Œ conditionsï¼šä¸è¦æ–°å¢ recovery options æˆ– two-factor authentication (å› ç‚ºé€™æ˜¯ä¸€å€‹è‡¨æ™‚å¸³è™Ÿ)å‹¾é¸åŒæ„æœå‹™æ¢æ¬¾ï¼šä¹‹å¾Œå°±å¯ä»¥é–‹å§‹ä½¿ç”¨ GCP Console å›‰ï¼šå•Ÿå‹• Google Cloud ShellGoogle Cloud Shell æ˜¯è¼‰å…¥äº†é–‹ç™¼å·¥å…·çš„ VMï¼Œå®ƒæä¾› 5GB çš„ home ç›®éŒ„ï¼Œä¸¦åœ¨ Google Cloud ä¸ŠåŸ·è¡Œã€‚å¯ç”¨ Google Cloud Shell æä¾›çš„ command-line ä¾†å­˜å– GCP çš„è³‡æºã€‚åœ¨ GCP console çš„å³ä¸Šæ–¹å·¥å…·åˆ—ä¸­ï¼Œé»æ“Šã€ŒActivate Cloud Shellã€æŒ‰éˆ•ï¼šåœ¨æ‰“é–‹çš„å°è©±æ¡†å…§ï¼Œé»æ“Šã€ŒSTART CLOUD SHELLã€ï¼šé€£æ¥å’Œæä¾›ç’°å¢ƒéœ€è¦ä¸€äº›æ™‚é–“ï¼šé€£æ¥å¾Œï¼Œå°±ä»£è¡¨ä½ å·²ç¶“éèº«ä»½é©—è­‰ï¼Œå°ˆæ¡ˆå·²è¨­ç½®ç‚º PROJECT_IDï¼Œä»¥ä¸‹åœ–çš„ç‚ºä¾‹ï¼Œæ­¤å°ˆæ¡ˆçš„ ID ç‚º qwiklabs-gcp-f9d61ede8167e6b0ï¼šgcloud æ˜¯ GCP çš„ command-line å·¥å…·ï¼Œä»–å·²é å…ˆå®‰è£åœ¨ Cloud Shell ä¸Šï¼Œä¸¦ä¸”æ”¯æ´ tab è‡ªå‹•è£œé½Š (tab-completion)ã€‚æœªä¾†å¯ä½¿ç”¨ gcloud çš„ä¸‹é¢æŒ‡ä»¤ä¸¦é€é PROJECT_ID ä¾†æ›´æ›æˆå…¶ä»–å°ˆæ¡ˆï¼š1$ gcloud config set project [PROJECT_ID]ä½¿ç”¨ä¸‹é¢æŒ‡ä»¤å¯åˆ—å‡ºæœ‰æ•ˆå¸³è™Ÿåç¨±ï¼š1234567$ gcloud auth list Credentialed AccountsACTIVE ACCOUNT* google3043863_student@qwiklabs.netTo set the active account, run: $ gcloud config set account `ACCOUNT`å¯ä»¥ä½¿ç”¨ä»¥ä¸‹æŒ‡ä»¤åˆ—å‡ºå°ˆæ¡ˆ IDï¼š12345$ gcloud config list project[core]project = qwiklabs-gcp-f9d61ede8167e6b0Your active configuration is: [cloudshell-9292]ç†è§£ Regions å’Œ ZonesCompute Engine è³‡æºä½æ–¼ä¸åŒçš„ regions (åœ°å€) æˆ– zones (å€åŸŸ)ã€‚region æ˜¯ä½ å¯ä»¥åŸ·è¡Œè³‡æºçš„æ‰€åœ¨ç‰¹å®šåœ°ç†ä½ç½®ã€‚æ¯å€‹ region éƒ½æœ‰ä¸€å€‹æˆ–å¤šå€‹ zonesã€‚ä¾‹å¦‚ï¼Œus-central1 region ä»£è¡¨ç¾åœ‹ä¸­éƒ¨åœ°å€ï¼Œå…¶ä¸­åŒ…å«çš„ Zones æœ‰ us-central1-aã€us-central1-bã€us-central1-c èˆ‡ us-central1-fã€‚åœ–ç‰‡ä¾†æºï¼šCreating a Virtual Machine | Qwiklabsä½æ–¼ zone ä¸­çš„è³‡æºéƒ½ç¨±ç‚º zonel (å€åŸŸ) è³‡æºï¼ŒVM instance (å¯¦ä¾‹) å’Œ persistent disk (æ°¸ä¹…ç£ç¢Ÿ) éƒ½ä½æ–¼ zone ä¸­ï¼Œå¦‚æœè¦å°‡ persistent disk é™„åŠ åˆ° VM instanceï¼Œé€™å…©å€‹è³‡æºéƒ½å¿…é ˆä½æ–¼åŒä¸€å€‹ zone ä¸­ã€‚åŒæ¨£ï¼Œå¦‚æœè¦å°‡éœæ…‹ IP ä½å€åˆ†é…åˆ° instanceï¼Œæ­¤ instance å°±å¿…é ˆèˆ‡éœæ…‹ IP ä½æ–¼åŒä¸€å€‹ region ä¸­ã€‚è©³æƒ…å¯åƒè€ƒ GCP å®˜æ–¹çš„ Regions &amp; Zones æ–‡ä»¶ã€‚å¾ Cloud Console å»ºç«‹æ–°çš„ instanceåœ¨ GCP Console çš„å³ä¸Šè§’ï¼Œé»é¸ã€ŒNavigation menu &gt; Compute Engine &gt; VM Instancesã€ï¼šæ¥è‘—é»æ“Šã€ŒCreateã€å»ºç«‹æ–°çš„ instanceï¼šå»ºç«‹æ–°çš„ instance æ™‚å¯ä»¥è¨­å®šå¾ˆå¤šåƒæ•¸ã€‚åœ¨æ­¤ lab ä¸­æœƒä½¿ç”¨ä»¥ä¸‹è¨­å®šï¼šæ¬„ä½å€¼é¡å¤–è³‡è¨Šnamegcelabregionus-central1 (Iowa)æˆ–asia-south1 (Mumbai)æ›´å¤šé—œæ–¼ regions çš„è³‡è¨Šzoneus-central1-cæˆ–asia-south1-cæ³¨æ„ï¼šè¨˜ä½ä½ é¸æ“‡çš„ zoneï¼Œä¹‹å¾Œæœƒç”¨åˆ°æ›´å¤šé—œæ–¼ zones çš„è³‡è¨ŠMachine Type2 vCPUé€™æ˜¯ä¸€å€‹ ( n1-standard-2 )2-CPU, 7.5 GB RAM instanceæœ‰å¾ˆå¤šæ©Ÿå‹å¯ä»¥é¸æ“‡ï¼Œå¾ micro instance é¡å‹çš„åˆ° 32-core/208 GB RAM çš„éƒ½æœ‰ï¼Œè©³æƒ…å¯åƒè€ƒæ©Ÿå‹ç¨®é¡æ–‡ä»¶æ³¨æ„ï¼šæ–°å°ˆæ¡ˆå…·æœ‰é è¨­çš„è³‡æºé…é¡ï¼Œå¯èƒ½æœƒé™åˆ¶ CPU æ ¸å¿ƒæ•¸ã€‚å¯åœ¨æ­¤ lab ä¹‹å¤–çš„å°ˆæ¡ˆä¸Šç”³è«‹åˆ°æ›´é«˜çš„è¦æ ¼Boot DiskNew 10 GB standard persistent diskOS Image: Debian GNU/Linux 9 (Stretch)æœ‰å¾ˆå¤š images å¯ä»¥é¸æ“‡ï¼ŒåŒ…æ‹¬ï¼šDebianã€Ubuntuã€CoreOSï¼Œä»¥åŠ premium imagesï¼Œåƒæ˜¯ RedHat Enterprise Linux å’Œ Windows Serverï¼Œè©³æƒ…å¯åƒè€ƒ OS æ–‡ä»¶Firewallå‹¾é¸ Allow HTTP trafficï¼Œå‹¾é¸æ­¤é¸é …æ‰èƒ½å­˜å–ä¹‹å¾Œå®‰è£çš„ web serveræ³¨æ„ï¼šé€™æœƒè‡ªå‹•å»ºç«‹é˜²ç«ç‰†è¦å‰‡ï¼Œå…è¨± 80 port çš„ HTTP æµé‡è¨­å®šå¥½ä¹‹å¾Œï¼Œé»æ“Šã€ŒCreateã€ï¼šç­‰å¾… instance å»ºç«‹ï¼šçœ‹åˆ°ä¸‹é¢ç•«é¢å°±ä»£è¡¨ instance å·²å»ºç«‹å®Œæˆï¼Œæ¥è‘—é»æ“Šå³é‚Šçš„ã€ŒSSHã€æŒ‰éˆ•ï¼Œæœƒé–‹å•Ÿæ–°çš„ç€è¦½å™¨é é¢ï¼šæ­¤é é¢æ˜¯ç›´æ¥å¾ç€è¦½å™¨å•Ÿå‹• SSH client é€£æ¥åˆ° VMï¼šè©³æƒ…å¯åƒè€ƒå®˜æ–¹çš„ Connect to an instance using ssh æ–‡ä»¶ã€‚å®‰è£ NGINX web serveré€é SSH é€£æ¥ VM ä¹‹å¾Œï¼Œè«‹ä½¿ç”¨ sudo å–å¾— root çš„å­˜å–æ¬Šé™ï¼š1$ sudo su -æ›´æ–° OSï¼š12345$ apt-get updateGet:1 http://security.debian.org stretch/updates InRelease [94.3 kB]Ign:2 http://deb.debian.org/debian stretch InRelease Get:3 http://deb.debian.org/debian stretch-updates InRelease [91.0 kB] ...å®‰è£ NGINXï¼š1$ apt-get install nginx -yæª¢æŸ¥ NGINX æ˜¯å¦æ­£åœ¨åŸ·è¡Œï¼š12345$ ps auwx | grep nginxroot 2339 0.0 0.0 159532 1628 ? Ss 06:37 0:00 nginx: master process /usr/sbin/nginx -g daemon on; master_process on;www-data 2340 0.0 0.0 159864 3200 ? S 06:37 0:00 nginx: worker processwww-data 2341 0.0 0.0 159864 3200 ? S 06:37 0:00 nginx: worker processroot 2350 0.0 0.0 12780 952 pts/0 S+ 06:37 0:00 grep nginxè¨»ï¼šå¦‚æœé—œæ‰ NGINX å°±ä¸æœƒå‡ºç¾é—œæ–¼ NGINX çš„ processï¼š1234$ service nginx stop$ ps auwx | grep nginxroot 2359 0.0 0.0 12780 1012 pts/0 S+ 14:23 0:00 grep nginxä½¿ç”¨ä¸‹é¢æŒ‡ä»¤å¯ä»¥å•Ÿå‹• NGINXï¼š1$ service nginx startå›åˆ° Cloud Consoleï¼Œä¸¦é»æ“Š VM instance çš„ External IP é€£çµï¼šå°±æœƒé–‹å•Ÿæ–°åˆ†é ï¼Œå¯ä»¥çœ‹åˆ° NGINX web server çš„é è¨­ç¶²é ï¼šä½¿ç”¨ gcloud å»ºç«‹æ–°çš„ instanceå‰é¢ä»‹ç´¹çš„æ˜¯åˆ©ç”¨ GCP Console ä¾†å»ºç«‹ VM instanceï¼Œé€™é‚Šè¦ä»‹ç´¹çš„æ˜¯å¯ä»¥ä½¿ç”¨é è£åœ¨ Google Cloud Shell ä¸­çš„ command-line å·¥å…· gcloud ä¾†å®Œæˆä¸€æ¨£çš„äº‹ã€‚Cloud Shell æ˜¯åŸºæ–¼ Debian çš„ VMï¼Œé è¼‰ä½ æ‰€éœ€çš„æ‰€æœ‰é–‹ç™¼å·¥å…· (gcloudã€git â€¦ ç­‰å…¶ä»–)ï¼Œä¸¦æä¾› 5 GB persistent disk çš„ home ç›®éŒ„ã€‚è©³æƒ…å¯åƒè€ƒ gcloud command line tool guideã€‚åœ¨ Cloud Shell ä½¿ç”¨ command-line å·¥å…· gcloud å»ºç«‹ä¸€å°æ–°çš„ VM instanceï¼Œå°‡ [YOUR_ZONE] æ›¿æ›æˆå‰é¢ä½¿ç”¨çš„ zoneï¼š1$ gcloud compute instances create gcelab2 --machine-type n1-standard-2 --zone [your_zone]åƒæˆ‘å‰é¢çš„ zone æ˜¯ç”¨ asia-south1-cï¼Œæ‰€ä»¥æŒ‡ä»¤å¦‚ä¸‹ï¼š1234$ gcloud compute instances create gcelab2 --machine-type n1-standard-2 --zone asia-south1-cCreated [https://www.googleapis.com/compute/v1/projects/qwiklabs-gcp-f9d61ede8167e6b0/zones/asia-south1-c/instances/gcelab2].NAME ZONE MACHINE_TYPE PREEMPTIBLE INTERNAL_IP EXTERNAL_IP STATUSgcelab2 asia-south1-c n1-standard-2 10.160.0.3 35.244.6.170 RUNNINGå»ºç«‹çš„ instance å…·æœ‰ä»¥ä¸‹é è¨­å€¼ï¼šæœ€æ–°çš„ Debian 9 (stretch) imageé è¨­æ©Ÿå‹ (machine type) ç‚º n1-standard-2ï¼Œåœ¨æ­¤ lab ä¸­ï¼Œä½ ä¹Ÿå¯ä»¥ä½¿ç”¨ n1-highmem-4 æˆ– n1-highcpu-4 å…¶ä»–æ©Ÿå‹ã€‚åœ¨ lab ä¹‹å¤–çš„å°ˆæ¡ˆå¯ä»¥æŒ‡å®šè‡ªè¨‚çš„æ©Ÿå‹root persistent disk é è¨­èˆ‡ instance çš„åç¨±ä¸€æ¨£ï¼Œdisk æœƒè‡ªå‹•é™„åŠ åˆ° instanceåŸ·è¡Œä¸‹é¢æŒ‡ä»¤å¯ä»¥æŸ¥çœ‹æ‰€æœ‰é è¨­å€¼ï¼š1$ gcloud compute instances create --helpNoteï¼šå¦‚æœä½ ç¸½æ˜¯ä½¿ç”¨åŒä¸€å€‹ region/zoneï¼Œä¸¦ä¸”ä¸å¸Œæœ›æ¯æ¬¡éƒ½ä½¿ç”¨ --zone åƒæ•¸ï¼Œå°±å¯ä»¥ä½¿ç”¨ä¸‹é¢æŒ‡ä»¤ï¼Œå°‡æŒ‡å®šçš„ region å’Œ zones è¨­ç‚ºé è¨­ï¼š12$ gcloud config set compute/zone ...$ gcloud config set compute/region ...è©³æƒ…å¯åƒè€ƒå®˜æ–¹çš„ gcloud compute | Compute Engine Documentation æ–‡ä»¶ã€‚è‹¥è¦æŸ¥çœ‹å‰›å‰›å»ºç«‹çš„ instance æ˜¯å¦æˆåŠŸå»ºç«‹ï¼Œå°±è¦å›åˆ°ã€ŒNavigation menu &gt; Compute Engine &gt; VM Instancesã€é é¢ï¼Œå¦‚æœé‚„æ˜¯æ²’æœ‰çœ‹åˆ°ï¼Œå°±å¯ä»¥é»æ“Šã€ŒREFRESHã€æŒ‰éˆ•é‡æ–°æ•´ç†æ­¤é é¢ï¼Œæ‡‰è©²å°±æœƒçœ‹åˆ°å‰›å‰›å»ºç«‹åç‚º gcelab2 çš„ instanceï¼šæ¥è‘—ä½ ä¹Ÿå¯ä»¥ä½¿ç”¨ gcloud é€é SSH é€£æ¥åˆ°ä½ çš„ instanceï¼Œé€£ç·šæ™‚ï¼Œè«‹ç¢ºèªæŒ‡ä»¤å¾Œé¢ --zone åƒæ•¸çš„ [YOUR_ZONE] æ˜¯å¦å’Œç•¶åˆå»ºç«‹çš„ä¸€æ¨£ï¼Œæˆ–æ˜¯å¦‚æœä½ å·²åœ¨å…¨åŸŸè¨­å®šé è¨­ (ä¸Šé¢ Note æåˆ°çš„éƒ¨åˆ†)ï¼Œå°±å¯ä»¥çœç•¥ --zone åƒæ•¸ï¼š1$ gcloud compute ssh gcelab2 --zone [YOUR_ZONE]åƒæˆ‘æ²’æœ‰åœ¨å…¨åŸŸè¨­å®šé è¨­ï¼Œæ‰€ä»¥éœ€è¦åœ¨æŒ‡ä»¤å¾Œé¢åŠ ä¸Š --zone åƒæ•¸ï¼Œ[YOUR_ZONE] å‰‡æ˜¯ç•¶åˆå»ºç«‹çš„ asia-south1-cï¼ŒæŒ‡ä»¤å¦‚ä¸‹ï¼š12345678910$ gcloud compute ssh gcelab2 --zone asia-south1-cWARNING: The public SSH key file for gcloud does not exist.WARNING: The private SSH key file for gcloud does not exist.WARNING: You do not have an SSH key for gcloud.WARNING: SSH keygen will be executed to generate a key.This tool needs to create the directory[/home/google3043863_student/.ssh] before being able to generate SSHkeys.Do you want to continue (Y/n)?æ¥è‘—æœƒå‡ºç¾ä¸‹é¢ç•«é¢ï¼Œè«‹è¼¸å…¥ Y ç¹¼çºŒï¼š1Do you want to continue (Y/n)? yæ­¤æ™‚æœƒç”¢ç”Ÿä¸€å°å…¬é‘° (public key) å’Œç§é‘° (private key)ï¼Œæ¥è‘—æŒ‰ Enter éµï¼Œä¸è¼¸å…¥ä¹Ÿä¸è¨­å®š passphrase (å¦‚æœæ˜¯åœ¨çœŸæ­£çš„å°ˆæ¡ˆå°±å»ºè­°è¼¸å…¥ passphraseï¼Œå› ç‚ºç•¶åˆ¥äººæ‹¿èµ°ä½ çš„ç§é‘°æ™‚ï¼Œå°±ç„¡æ³•ç›´æ¥ç™»å…¥ä¸»æ©Ÿï¼Œé‚„è¦è¼¸å…¥ passphraseï¼Œå®‰å…¨æ€§æœƒæ¯”è¼ƒé«˜)ï¼š1234567891011121314151617181920212223242526272829Generating public/private rsa key pair.Enter passphrase (empty for no passphrase):Enter same passphrase again:Your identification has been saved in /home/google3043863_student/.ssh/google_compute_engine.Your public key has been saved in /home/google3043863_student/.ssh/google_compute_engine.pub.The key fingerprint is:SHA256:LJMylIaZY1aNf2v0uP/a83TSVw506GazmtvrTyPCxqU google3043863_student@cs-6000-devshell-vm-8e6e4e18-0f7e-4771-ac48-22ab57ceb161The key&apos;s randomart image is:+---[RSA 2048]----+| .o || =... . || B +. o .|| o + .oo o . || o +oS+ .* .|| o o+ + oo *.|| . . E .+.*|| . ..o=.+o|| .oo*==o.|+----[SHA256]-----+Warning: Permanently added &apos;compute.3226821850929314737&apos; (ECDSA) to the list of known hosts.Linux gcelab2 4.9.0-8-amd64 #1 SMP Debian 4.9.144-3.1 (2019-02-19) x86_64The programs included with the Debian GNU/Linux system are free software;the exact distribution terms for each program are described in theindividual files in /usr/share/doc/*/copyright.Debian GNU/Linux comes with ABSOLUTELY NO WARRANTY, to the extentpermitted by applicable law.Creating directory &apos;/home/google3043863_student&apos;.ä½¿ç”¨ gcloud è¨­å®šé˜²ç«ç‰†å¦‚æœæˆ‘å·²ç¶“è·Ÿè‘—ä¹‹å‰çš„æ­¥é©Ÿå®‰è£å®Œ NGINX äº†ï¼Œå°±æœƒç™¼ç¾å‰›å‰›å»ºç«‹çš„ instance æ²’æœ‰åšé˜²ç«ç‰†è¨­å®šï¼Œä¹Ÿå°±æ˜¯ä¸å…è¨± 80 port çš„ HTTP æµé‡ï¼Œæ‰€ä»¥å°±å¯ä»¥æ˜¯ç”¨ä¸‹é¢æŒ‡ä»¤ä¾†è¨­å®šï¼š1$ gcloud compute firewall-rules create nginx --allow tcp:80åŸ·è¡ŒæŒ‡ä»¤å¾Œæœƒçœ‹åˆ°ä¸‹é¢è¨Šæ¯ï¼Œè¨Šæ¯å…§å®¹æ˜¯ç„¡æ³•å»ºç«‹é˜²ç«ç‰†ï¼Œé€™æ˜¯å› ç‚ºè«‹æ±‚çš„èº«åˆ†æ¬Šé™ä¸è¶³ï¼š123Creating firewall...failed.ERROR: (gcloud.compute.firewall-rules.create) Could not fetch resource: - Insufficient Permission: Request had insufficient authentication scopes.é‚£å¦‚ä½•çŸ¥é“ç›®å‰çš„æœ‰æ•ˆå¸³è™Ÿåç¨±ï¼Ÿå¯ä»¥ä½¿ç”¨ä¸‹é¢æŒ‡ä»¤ä¾†æŸ¥çœ‹ï¼Œå¯ä»¥çœ‹åˆ°ç›®å‰çš„å¸³è™Ÿä¸æ˜¯ä¹‹å‰ lab æš«æ™‚çµ¦æˆ‘å€‘ç”¨çš„å¸³è™Ÿï¼š1234567$ gcloud auth list Credentialed AccountsACTIVE ACCOUNT* 721269751803-compute@developer.gserviceaccount.comTo set the active account, run: $ gcloud config set account `ACCOUNT`æ‰€ä»¥å¿…é ˆç™»å…¥ä¹‹å‰çš„å¸³è™Ÿï¼Œå¯ä»¥ä½¿ç”¨ä¸‹é¢æŒ‡ä»¤ï¼š123456789101112131415$ gcloud auth loginYou are running on a Google Compute Engine virtual machine.It is recommended that you use service accounts for authentication.You can run: $ gcloud config set account `ACCOUNT`to switch accounts if necessary.Your credentials may be visible to others with access to thisvirtual machine. Are you sure you want to authenticate withyour personal account?Do you want to continue (Y/n)?æ¥è‘—æœƒå‡ºç¾ä¸‹é¢ç•«é¢ï¼Œè«‹è¼¸å…¥ Y ç¹¼çºŒï¼š1Do you want to continue (Y/n)?æ¥è‘—æœƒå‡ºç¾ä¸€é•·ä¸²çš„é€£çµï¼Œé»æ“Šé€™å€‹é€£çµï¼š12345678Do you want to continue (Y/n)? yGo to the following link in your browser: https://accounts.google.com/o/oauth2/auth?redirect_uri=urn%3Aietf%3Awg%3Aoauth%3A2.0%3Aoob&amp;prompt=select_account&amp;response_type=code&amp;client_id=32555940559.apps.googleusercontent.com&amp;scope=https%3A%2F%2Fwww.googleapis.com%2Fauth%2Fuserinfo.email+https%3A%2F%2Fwww.googleapis.com%2Fauth%2Fcloud-platform+https%3A%2F%2Fwww.googleapis.com%2Fauth%2Fappengine.admin+https%3A%2F%2Fwww.googleapis.com%2Fauth%2Fcompute+https%3A%2F%2Fwww.googleapis.com%2Fauth%2Faccounts.reauth&amp;access_type=offlineEnter verification code:è©²é€£çµå°±æ˜¯è¦ä½ ç”¨ lab æä¾›çš„å¸³è™Ÿç™»å…¥ï¼šæ¥è‘—è¦åŒæ„ Google Cloud SDK å­˜å–æ­¤å¸³è™Ÿï¼šæ¥è‘—è¤‡è£½æ­¤æˆæ¬Šç¢¼ï¼Œå°‡æˆæ¬Šç¢¼è²¼è‡³å‰›å‰›çš„ shellï¼š12345678Enter verification code: 4/KwEnGIyzJ0P_ZvFeKt5264lP_3CdzZhUb-ZXoEJ0TbVFQVUQyYSBF58WARNING: `gcloud auth login` no longer writes application default credentials.If you need to use ADC, see: gcloud auth application-default --helpYou are now logged in as [google3043863_student@qwiklabs.net].Your current project is [qwiklabs-gcp-f9d61ede8167e6b0]. You can change this setting by running: $ gcloud config set project PROJECT_IDç™»å…¥æˆåŠŸå¾Œï¼Œå¯ä»¥å†æ¬¡åŸ·è¡Œä¸‹é¢æŒ‡ä»¤çœ‹ä¸€ä¸‹ç›®å‰æœ‰æ•ˆå¸³è™Ÿçš„åç¨±ï¼Œè®Šæˆ lab æš«æ™‚çµ¦æˆ‘å€‘ç”¨çš„å¸³è™Ÿå›‰ï¼š12345678$ gcloud auth list Credentialed AccountsACTIVE ACCOUNT 721269751803-compute@developer.gserviceaccount.com* google3043863_student@qwiklabs.netTo set the active account, run: $ gcloud config set account `ACCOUNT`æ¥è‘—å†æ¬¡åŸ·è¡Œä¸‹é¢æŒ‡ä»¤ï¼Œå°±å¯ä»¥æˆåŠŸè¨­å®šé˜²ç«ç‰†ï¼š12345$ gcloud compute firewall-rules create nginx --allow tcp:80Creating firewall...â ¶Created [https://www.googleapis.com/compute/v1/projects/qwiklabs-gcp-f9d61ede8167e6b0/global/firewalls/nginx].Creating firewall...done.NAME NETWORK DIRECTION PRIORITY ALLOW DENY DISABLEDnginx default INGRESS 1000 tcp:80 Falseé›–ç„¶ GCP Console ä»‹é¢ä¸Š VM instance çš„ External IP æ²’æœ‰è®Šæˆå¯ä»¥é»æ“Šçš„é€£çµï¼Œä½†å¯ä»¥å°‡ External IP è¤‡è£½åˆ°æ–°çš„ç€è¦½å™¨åˆ†é ï¼šå°±èƒ½æˆåŠŸçœ‹åˆ° NGINX web server çš„é è¨­ç¶²é ï¼šä¸‹åœ–å°±æ˜¯æˆ‘æˆåŠŸå®Œæˆæ­¤ quest çš„ç•«é¢ï¼šåƒè€ƒä¾†æºCreating a Virtual Machine | QwiklabsA Tour of Qwiklabs and the Google Cloud Platform | Qwiklabsåœ¨ GCP ä¸Šé–‹ç«‹ä¸€å°è™›æ“¬æ©Ÿ | Rayâ€™s Coding Journey","categories":[{"name":"Cloud","slug":"cloud","permalink":"https://titangene.github.io/categories/cloud/"}],"tags":[{"name":"GCP","slug":"gcp","permalink":"https://titangene.github.io/tags/gcp/"},{"name":"VM","slug":"vm","permalink":"https://titangene.github.io/tags/vm/"},{"name":"NIGNX","slug":"nignx","permalink":"https://titangene.github.io/tags/nignx/"},{"name":"Web Server","slug":"web-server","permalink":"https://titangene.github.io/tags/web-server/"}]},{"title":"Python çˆ¬èŸ²å¸¸ç”¨æŠ€å·§ (æŒçºŒæ›´æ–°)","slug":"python-crawler-note","date":"2019-02-28T09:33:51.000Z","updated":"2019-04-30T15:55:09.896Z","comments":true,"path":"article/python-crawler-note.html","link":"","permalink":"https://titangene.github.io/article/python-crawler-note.html","excerpt":"ç´€éŒ„å€‹äººå¸¸ç”¨çš„ Python çˆ¬èŸ²æŠ€å·§ï¼Œæœªä¾†é‚„æœƒæŒçºŒæ›´æ–°å…¶ä»–æŠ€å·§ã€‚","text":"ç´€éŒ„å€‹äººå¸¸ç”¨çš„ Python çˆ¬èŸ²æŠ€å·§ï¼Œæœªä¾†é‚„æœƒæŒçºŒæ›´æ–°å…¶ä»–æŠ€å·§ã€‚è¼‰å…¥å¸¸ç”¨å¥—ä»¶12345678910import jsonimport shutilimport xml.etree.ElementTree as ETfrom urllib.parse import urlparse, parse_qs, urlunparseimport requestsfrom bs4 import BeautifulSoupfrom user_agent import generate_user_agentimport numpy as npimport pandas as pdè§£æ HTML123456import requestsfrom bs4 import BeautifulSoupresponse = requests.get(url)soup = BeautifulSoup(response.text, 'lxml')html = soup.find(id='some_id')è§£æç¶²å€12345from urllib.parse import urlparse, parse_qs, urlunparseurl = 'http://xxx.com/api/data?id=123&amp;sub_code=06A1297'link_parse = urlparse(url)print(link_parse)è¼¸å‡ºï¼š1ParseResult(scheme=&apos;http&apos;, netloc=&apos;xxx.com&apos;, path=&apos;/api/data&apos;, params=&apos;&apos;, query=&apos;id=123&amp;sub_code=06A1297&apos;, fragment=&apos;&apos;)å°‡ ParseResult ç‰©ä»¶è½‰æˆç¶²å€å­—ä¸²12url = urlunparse(link_parse)print(url)è¼¸å‡ºï¼š1&apos;http://xxx.com/api/data?id=123&amp;sub_code=06A1297&apos;è§£æç¶²å€ query123456link_query = parse_qs(link_parse.query)print(link_query)id = link_query['id'][0]sub_code = link_query['sub_code'][0]print(id, sub_code)è¼¸å‡ºï¼š12&#123;&apos;id&apos;: [&apos;123&apos;], &apos;sub_code&apos;: [&apos;06A1297&apos;]&#125;123 06A1297éš¨æ©Ÿç”Ÿæˆ user-agentfake_useragent å¥—ä»¶123456789import requestsfrom fake_useragent import UserAgentdef set_header_user_agent(): user_agent = UserAgent() return user_agent.randomuser_agent = set_header_user_agent()response = requests.get(url, headers=&#123; 'user-agent': user_agent &#125;)user_agent å¥—ä»¶12345import requestsfrom user_agent import generate_user_agentuser_agent = generate_user_agent()response = requests.get(url, headers=&#123; 'user-agent': user_agent &#125;)è®€å–è¡¨æ ¼è³‡æ–™123456789import requestsfrom bs4 import BeautifulSoupimport numpy as npimport pandas as pdresponse = requests.get(url)soup = BeautifulSoup(response.text, 'lxml')html = soup.find(id='table_id')df = pd.read_html(str(html), header=0)[0]è®€å–/è§£æ JSON123456789import json# è®€å–with open('data.json', encoding='utf-8') as file: datas = json.load(file)# è§£æwith open('data.json', 'w', encoding='utf-8') as file: json.dump(datas, file, ensure_ascii=False)è®€å–/è§£æ XMLè®€å– XML æª”1234import xml.etree.ElementTree as ETtree = ET.parse('data.xml')root = tree.getroot()è®€å– XML å­—ä¸²123import xml.etree.ElementTree as ETroot = ET.fromstring(some_xml_strings)ä»¥ä¸‹é¢çš„ XML ç‚ºç¯„ä¾‹ï¼š123456789101112131415161718&lt;?xml version=\"1.0\"?&gt;&lt;bookstore&gt; &lt;book ISBN=\"10-000000-001\"&gt; &lt;title&gt;Book 1&lt;/title&gt; &lt;price&gt;300&lt;/price&gt; &lt;comments&gt; &lt;userComment rating=\"4\"&gt;xxx...&lt;/userComment&gt; &lt;userComment rating=\"2\"&gt;yyy...&lt;/userComment&gt; &lt;/comments&gt; &lt;/book&gt; &lt;book ISBN=\"10-000000-999\"&gt; &lt;title&gt;Book 2&lt;/title&gt; &lt;price&gt;500&lt;/price&gt; &lt;comments&gt; &lt;userComment rating=\"3\"&gt;zzz...&lt;/userComment&gt; &lt;/comments&gt; &lt;/book&gt;&lt;/bookstore&gt;è¿´åœˆå–å¾—å­å…ƒç´ 12for child in root: print(child.tag, child.attrib)è¼¸å‡ºï¼š12book &#123;&apos;ISBN&apos;: &apos;10-000000-001&apos;&#125;book &#123;&apos;ISBN&apos;: &apos;10-000000-999&apos;&#125;ç”¨ index å–å¾—æŸå…ƒç´ 123root[0][1].tagroot[0][1].textroot[0].attribè¼¸å‡ºï¼š123&apos;price&apos;&apos;300&apos;&#123;&apos;ISBN&apos;: &apos;10-000000-001&apos;&#125;æœå°‹æŒ‡å®šå…ƒç´ ä½¿ç”¨ root.iter()ï¼š123for comment in root.iter('userComment'): print(comment.attrib) print('comment: &#123;&#125;'.format(comment.text))è¼¸å‡ºï¼š123456&#123;&apos;rating&apos;: &apos;4&apos;&#125;comment: xxx...&#123;&apos;rating&apos;: &apos;2&apos;&#125;comment: yyy...&#123;&apos;rating&apos;: &apos;3&apos;&#125;comment: zzz...ä½¿ç”¨ root.findall()ï¼š1234for book in root.findall('book'): ISBN = book.get('ISBN') title = book.find('title').text print(ISBN, title)1210-000000-001 Book 110-000000-999 Book 2ä¸‹è¼‰åœ–ç‰‡response.raw æ˜¯ file-like ç‰©ä»¶ï¼Œé è¨­ä¸æœƒè§£å£“ç¸® response (ä½¿ç”¨ gzip æˆ– deflateï¼Œåƒè€ƒè‡³ Requests åŸå§‹ç¢¼)ï¼Œå¯ä»¥é€éåœ¨ requests.get() æ–¹æ³•ä¸­ï¼Œæ–°å¢åƒæ•¸ stream=True ä¾†å¼·åˆ¶è§£å£“ç¸®ï¼Œä¸¦ä¸”å¯ä»¥é¿å…ç«‹å³å°‡å¤§çš„ response å…§å®¹è®€å…¥è¨˜æ†¶é«”å…§ï¼Œæ¥è‘—ä½¿ç”¨ shutil.copyfileobj() è®“ Python å°‡ ä¸²æµè³‡æ–™è½‰æˆæª”æ¡ˆç‰©ä»¶ã€‚12345678import requestsimport shutilurl = \"http://www.xxx.com/xxx.png\"response = requests.get(url, stream=True)file_name = url.split('/')[-1]with open(file_name, 'wb') as file: shutil.copyfileobj(response.raw, file)å¦‚æœè¦ä¸‹è¼‰æª”æ¡ˆå¤§çš„åœ–ç‰‡ï¼Œå¯åƒè€ƒä¸‹å€‹æ®µè½ã€Œä¸‹è¼‰å¤§æª”æ¡ˆã€ã€‚shutil.copyfileobj(fsrc, fdst[, length])ï¼šå°‡ file-like ç‰©ä»¶ fsrc çš„å…§å®¹è¤‡è£½åˆ° file-like ç‰©ä»¶ fdstã€‚length åƒæ•¸ (int) æ˜¯ buffer çš„å¤§å°ã€‚å¦‚æœ length ç‚ºè² æ•¸å‰‡ä»£è¡¨æ˜¯è¤‡è£½è³‡æ–™ï¼Œè€Œä¸ä»¥ chunk çš„å½¢å¼å¾ªç’°åŸå§‹è³‡æ–™ï¼›é è¨­æ˜¯è³‡æ–™ä»¥ chunk çš„å½¢å¼è®€å–ï¼Œä»¥é¿å…ä¸å—æ§åˆ¶çš„è¨˜æ†¶é«”æ¶ˆè€—ã€‚è«‹æ³¨æ„ï¼Œå¦‚æœ fsrc ç‰©ä»¶çš„ç•¶å‰æª”æ¡ˆä½ç½®ä¸ç‚º 0ï¼Œå‰‡åªè¤‡è£½å¾ç•¶å‰æª”æ¡ˆä½ç½®åˆ°æª”æ¡ˆæœ«ç«¯çš„å…§å®¹ã€‚åƒè€ƒè‡³ shutil - High-level file operations - Python 3.7.3 documentation å®˜æ–¹æ–‡ä»¶ã€‚:::åƒè€ƒä¾†æºï¼špython - How to download image using requests - Stack Overflowä¸‹è¼‰å¤§æª”æ¡ˆä»¥è¿­ä»£çš„æ–¹å¼å–å¾—ï¼Œé è¨­æœƒä»¥æ¯ 128 byte ç‚ºä¸€å€‹ chunk ä¾†è®€å–è³‡æ–™ (åƒè€ƒè‡³ Requests åŸå§‹ç¢¼)ï¼š1234567import requestsresponse = requests.get(url, stream=True)file_name = url.split('/')[-1]with open(file_name, 'wb') as file: for chunk in response: file.write(chunk)è‹¥è¦è‡ªè¨‚ chunk å¤§å°ï¼Œå¯ä½¿ç”¨ Response.iter_content() æ–¹æ³•è‡ªè¨‚ï¼š12345678910import requestsfile_name = url.split('/')[-1]with requests.get(url, stream=True) as response: response.raise_for_status() with open(file_name, 'wb') as file: for chunk in response.iter_content(chunk_size=8192): if chunk: # filter out keep-alive new chunks file.write(chunk) # file.flush()åƒè€ƒä¾†æºï¼šDownload large file in python with requests - Stack Overflowè‹¥æƒ³è¦ä»¥ä¸€æ¬¡ä¸€è¡Œçš„æ–¹å¼è¿­ä»£ response è³‡æ–™ï¼Œå¯ä½¿ç”¨ Response.iter_lines() æ–¹æ³•ï¼Œæ­¤æ–¹æ³•é è¨­ä¸€å€‹ chunk çš„å¤§å°ç‚º 512 byteï¼Œè‹¥è¦è¨­å®šåˆ†éš”ç¬¦è™Ÿï¼Œå¯åŠ ä¸Š delimiter åƒæ•¸ï¼š12345678import jsonimport requestsr = requests.get(url, stream=True)for line in r.iter_lines(): # filter out keep-alive new lines if line: print(json.loads(line))åƒè€ƒä¾†æºï¼šPython Requests åº«ï¼šHTTP for Humans - å†è¦‹ç´«ç¾…è˜­ - åšå®¢åœ’","categories":[{"name":"Python","slug":"python","permalink":"https://titangene.github.io/categories/python/"},{"name":"Crawler","slug":"python/crawler","permalink":"https://titangene.github.io/categories/python/crawler/"}],"tags":[{"name":"Python Requests","slug":"python-requests","permalink":"https://titangene.github.io/tags/python-requests/"}]},{"title":"åœ¨ Hexo ä¸»é¡Œå…§æ–°å¢ç¨‹å¼ç¢¼ç‰‡æ®µè¤‡è£½åŠŸèƒ½","slug":"hexo-copy-code-snippet-to-clipboard","date":"2019-02-09T02:40:00.000Z","updated":"2019-04-30T15:38:34.184Z","comments":true,"path":"article/hexo-copy-code-snippet-to-clipboard.html","link":"","permalink":"https://titangene.github.io/article/hexo-copy-code-snippet-to-clipboard.html","excerpt":"ç‚ºäº†æé«˜ blog çš„ä½¿ç”¨é«”é©—ï¼Œæœ¬æ–‡å°‡èªªæ˜å¦‚ä½•åœ¨ Hexo ä¸»é¡Œå…§ï¼Œæä¾›ç¨‹å¼ç¢¼ç‰‡æ®µè¤‡è£½è‡³å‰ªè²¼ç°¿çš„åŠŸèƒ½ã€‚","text":"ç‚ºäº†æé«˜ blog çš„ä½¿ç”¨é«”é©—ï¼Œæœ¬æ–‡å°‡èªªæ˜å¦‚ä½•åœ¨ Hexo ä¸»é¡Œå…§ï¼Œæä¾›ç¨‹å¼ç¢¼ç‰‡æ®µè¤‡è£½è‡³å‰ªè²¼ç°¿çš„åŠŸèƒ½ã€‚12// copy to clipboardvar clipboard = document.querySelectorAll('pre');è¼‰å…¥ clipboard.jsåœ¨ themes\\material-flow\\layout\\_partial\\scripts.ejs æª”æ¡ˆå…§çš„è¼‰å…¥ clipboard.jsï¼š1&lt;script src=\"https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.0/clipboard.min.js\"&gt;&lt;/script&gt;æ–°å¢ç¨‹å¼ç¢¼ç‰‡æ®µè¤‡è£½åŠŸèƒ½æ¯å€‹ç¨‹å¼ç¢¼ç‰‡æ®µå…§éƒ½è¦æ–°å¢è¤‡è£½åŠŸèƒ½æŒ‰éˆ•ï¼Œä¸‹é¢èªªæ˜æ–°å¢è¤‡è£½æŒ‰éˆ•çš„è™•ç†é‚è¼¯ï¼šé¦–å…ˆè¦æ‰¾åˆ°æ‰€æœ‰ç¨‹å¼ç¢¼å€å¡Šï¼š1var snippets = document.querySelectorAll('figure.highlight');æº–å‚™è¦æ–°å¢çš„æŒ‰éˆ•çµæ§‹ï¼š1234var htmlCopyButton = ` &lt;button class=\"codecopy-btn tooltipped tooltipped-sw\" aria-label=\"Copy to clipboard\"&gt; &lt;i class=\"far fa-copy\" aria-hidden=\"true\"&gt;&lt;/i&gt; &lt;/button&gt;`;åœ¨åŸæœ¬çš„ç¨‹å¼ç¢¼å€å¡Šçš„ &lt;figure&gt; æ¨™ç±¤å¤–å¤šåŒ…äº†ä¸€å±¤ &lt;div&gt; æ¨™ç±¤åœ¨ &lt;div&gt; æ¨™ç±¤ä¸Šæ–°å¢ .code-highlight class æ¨£å¼åœ¨ &lt;div&gt; æ¨™ç±¤ä¸Šæ–°å¢ data-lang å±¬æ€§ç”¨æ–¼è¨˜éŒ„æ­¤ç¨‹å¼ç¢¼å€å¡Šå…§çš„ç¨‹å¼ç¢¼æ˜¯å“ªç¨®ç¨‹å¼èªè¨€12345678910111213snippets.forEach(snippet =&gt; &#123; var parent = snippet.parentNode; var wrapper = document.createElement('div'); parent.replaceChild(wrapper, snippet); wrapper.appendChild(snippet); wrapper.classList.add('code-highlight'); wrapper.firstChild.insertAdjacentHTML('beforebegin', htmlCopyButton); var lang = (snippet.classList[1] || 'code').toUpperCase(); wrapper.setAttribute('data-lang', lang);&#125;);æ¥è‘—å°‡åç‚º .codecopy-btn çš„ element ä¸Šæ–°å¢è¤‡è£½åŠŸèƒ½ï¼Œè¤‡è£½çš„å…§å®¹æ˜¯ &lt;figure&gt; æ¨™ç±¤å…§çš„ç¨‹å¼ç¢¼ï¼š12345var clipboard = new ClipboardJS('.codecopy-btn', &#123; target: trigger =&gt; &#123; return trigger.nextSibling; &#125;,&#125;);åªè¦æŒ‰è¤‡è£½æŒ‰éˆ•ä¸”è¤‡è£½æˆåŠŸï¼Œå°±æœƒé¡¯ç¤º Copied! æç¤ºå·²æˆåŠŸè¤‡è£½ç¨‹å¼ç¢¼ç‰‡æ®µï¼š1234clipboard.on('success', e =&gt; &#123; e.trigger.setAttribute('aria-label', 'Copied!'); e.clearSelection();&#125;);å°‡æ¯å€‹è¤‡è£½æŒ‰éˆ•æ–°å¢å…©å€‹ç›£è½äº‹ä»¶ï¼Œåˆ†åˆ¥æ˜¯ mouseleave å’Œ clickï¼šmouseleaveï¼šæ»‘é¼ é›¢é–‹æŒ‰éˆ•å°±å°‡æç¤ºæ–‡å­—è®Šæˆ Copy to clipboardclickï¼šå–æ¶ˆäº‹ä»¶çš„é è¨­è¡Œç‚º123456789101112var btns = document.querySelectorAll('.codecopy-btn');btns.forEach(btn =&gt; &#123; btn.addEventListener('mouseleave', e =&gt; &#123; e.target.setAttribute('aria-label', 'Copy to clipboard'); e.target.blur(); &#125;); btn.addEventListener('click', e =&gt; &#123; e.preventDefault(); &#125;);&#125;);å®Œæ•´ç¨‹å¼ç¢¼åœ¨ themes\\material-flow\\source\\js ç›®éŒ„å…§å»ºç«‹ clipboard-use.jsï¼Œæª”æ¡ˆå…§å®¹å¦‚ä¸‹ï¼š12345678910111213141516171819202122232425262728293031323334353637383940414243444546474849$(function() &#123; // ref: https://github.com/zenorocha/codecopy/blob/master/src/scripts/main.js var snippets = document.querySelectorAll('figure.highlight'); var htmlCopyButton = ` &lt;button class=\"codecopy-btn tooltipped tooltipped-sw\" aria-label=\"Copy to clipboard\"&gt; &lt;i class=\"far fa-copy\" aria-hidden=\"true\"&gt;&lt;/i&gt; &lt;/button&gt;`; snippets.forEach(snippet =&gt; &#123; var parent = snippet.parentNode; var wrapper = document.createElement('div'); parent.replaceChild(wrapper, snippet); wrapper.appendChild(snippet); wrapper.classList.add('code-highlight'); wrapper.firstChild.insertAdjacentHTML('beforebegin', htmlCopyButton); var lang = (snippet.classList[1] || 'code').toUpperCase(); wrapper.setAttribute('data-lang', lang); &#125;); // Add copy to clipboard functionality and user feedback var clipboard = new ClipboardJS('.codecopy-btn', &#123; target: trigger =&gt; &#123; return trigger.nextSibling; &#125;, &#125;); clipboard.on('success', e =&gt; &#123; e.trigger.setAttribute('aria-label', 'Copied!'); e.clearSelection(); &#125;); // Replace tooltip message when mouse leaves button // and prevent page refresh after click button var btns = document.querySelectorAll('.codecopy-btn'); btns.forEach(btn =&gt; &#123; btn.addEventListener('mouseleave', e =&gt; &#123; e.target.setAttribute('aria-label', 'Copy to clipboard'); e.target.blur(); &#125;); btn.addEventListener('click', e =&gt; &#123; e.preventDefault(); &#125;); &#125;);&#125;);æ¥è‘—åœ¨ themes\\material-flow\\layout\\_partial\\scripts.ejs æª”æ¡ˆå…§çš„è¼‰å…¥ clipboard-use.jsï¼š1&lt;%- js('js/clipboard-use.js') %&gt;CSS æ¨£å¼æç¤ºæ–‡å­—æ¨£å¼åœ¨ themes\\material-flow\\source\\less ç›®éŒ„å…§å»ºç«‹ _tooltipped.lessï¼Œæª”æ¡ˆå…§å®¹å¦‚ä¸‹ï¼š123456789101112131415161718192021222324252627282930313233343536373839404142434445464748495051525354555657585960616263646566676869707172737475767778798081828384858687888990919293// ref: https://github.com/primer/primer/blob/master/modules/primer-tooltips/lib/tooltips.scss.tooltipped &#123; position: relative;&#125;// This is the tooltip bubble.tooltipped::after &#123; position: absolute; z-index: 1000000; display: none; padding: 0.5em 0.75em; -webkit-font-smoothing: subpixel-antialiased; color: #fff; text-align: center; text-decoration: none; text-shadow: none; text-transform: none; letter-spacing: normal; word-wrap: break-word; white-space: pre; pointer-events: none; content: attr(aria-label); background: #616161; border-radius: 3px; opacity: 0;&#125;// This is the tooltip arrow.tooltipped::before &#123; position: absolute; z-index: 1000001; display: none; width: 0; height: 0; color: #616161; pointer-events: none; content: ''; border: 6px solid transparent; opacity: 0;&#125;// delay animation for tooltip@keyframes tooltip-appear &#123; from &#123; opacity: 0; &#125; to &#123; opacity: 1; &#125;&#125;// This will indicate when we'll activate the tooltip.tooltipped:hover,.tooltipped:active,.tooltipped:focus &#123; &amp;::before, &amp;::after &#123; display: inline-block; text-decoration: none; animation-name: tooltip-appear; animation-duration: 0.1s; animation-fill-mode: forwards; animation-timing-function: ease-in; &#125;&#125;// Tooltipped south.tooltipped-s,.tooltipped-sw &#123; &amp;::after &#123; top: 100%; right: 50%; margin-top: 6px; &#125; &amp;::before &#123; top: auto; right: 50%; bottom: -7px; margin-right: -6px; border-bottom-color: #616161; &#125;&#125;.tooltipped-sw::after &#123; margin-right: -16px;&#125;// Move the tooltip body to the center of the object..tooltipped-s::after &#123; transform: translateX(50%);&#125;æ¥è‘—åœ¨ themes\\material-flow\\source\\style.less æª”æ¡ˆå…§çš„è¼‰å…¥ _tooltipped.lessï¼š1@import 'less/_tooltipped.less';å…¶ä»–æ¨£å¼å¯åƒè€ƒæœ¬ç«™çš„å®Œæ•´æ¨£å¼ï¼šåŸå§‹ç¢¼123456789101112131415161718192021222324252627282930313233343536373839404142figure &#123; &amp;.highlight &#123; position: relative; margin: 1rem 0; padding-top: 22px; &#125;&#125;.code-highlight &#123; position: relative; &amp;::before &#123; content: attr(data-lang); font-family: 'Roboto Mono', Consolas, monospace, sans-serif; font-size: 0.6em; color: #b1b1b1; line-height: 18px; position: absolute; top: 4px; right: 7px; z-index: 1; &#125;&#125;.codecopy-btn &#123; width: 24px; height: 26px; position: absolute; top: 0; right: -24px; border: none; box-shadow: none; background: none; z-index: 1; font-size: 12px; color: #fff; transition: color 0.2s; &amp;:hover &#123; color: #7bf; &#125;&#125;Demoä¸‹é¢æ˜¯åŸæœ¬çš„ HTMLï¼š123456789101112&lt;figure class=\"highlight javascript\"&gt; &lt;table&gt; &lt;tr&gt; &lt;td class=\"gutter\"&gt; &lt;pre&gt;&lt;span class=\"line\"&gt;1&lt;/span&gt;&lt;br&gt;&lt;/pre&gt; &lt;/td&gt; &lt;td class=\"code\"&gt; &lt;pre&gt;&lt;code class=\"hljs javascript\"&gt;...&lt;/code&gt;&lt;/pre&gt; &lt;/td&gt; &lt;/tr&gt; &lt;/table&gt;&lt;/figure&gt;ä½¿ç”¨å¾Œçš„ HTMLï¼š1234567891011121314151617&lt;div class=\"code-highlight\" data-lang=\"JAVASCRIPT\"&gt; &lt;button class=\"codecopy-btn tooltipped tooltipped-sw\" aria-label=\"Copy to clipboard\"&gt; &lt;i class=\"far fa-copy\" aria-hidden=\"true\"&gt;&lt;/i&gt; &lt;/button&gt; &lt;figure class=\"highlight javascript\"&gt; &lt;table&gt; &lt;tr&gt; &lt;td class=\"gutter\"&gt; &lt;pre&gt;&lt;span class=\"line\"&gt;1&lt;/span&gt;&lt;br&gt;&lt;/pre&gt; &lt;/td&gt; &lt;td class=\"code\"&gt; &lt;pre&gt;&lt;code class=\"hljs javascript\"&gt;...&lt;/code&gt;&lt;/pre&gt; &lt;/td&gt; &lt;/tr&gt; &lt;/table&gt; &lt;/figure&gt;&lt;/div&gt;ç•«é¢ï¼šåƒè€ƒé€£çµclipboard.js â€” Copy to clipboard without FlashGitHubâ€™s Primer Tooltipszenorocha/codecopy: A browser extension that adds copy to clipboard buttons on every code block","categories":[{"name":"Blog","slug":"blog","permalink":"https://titangene.github.io/categories/blog/"}],"tags":[{"name":"Hexo","slug":"hexo","permalink":"https://titangene.github.io/tags/hexo/"},{"name":"Code Snippet","slug":"code-snippet","permalink":"https://titangene.github.io/tags/code-snippet/"},{"name":"Clipboard","slug":"clipboard","permalink":"https://titangene.github.io/tags/clipboard/"}]},{"title":"åœ¨ Docker ä¸‹å»ºç«‹ä¸¦ä½¿ç”¨ MSSQL Server for Linux","slug":"docker-mssql-server-for-linux","date":"2019-01-30T15:30:00.000Z","updated":"2019-04-30T15:57:59.868Z","comments":true,"path":"article/docker-mssql-server-for-linux.html","link":"","permalink":"https://titangene.github.io/article/docker-mssql-server-for-linux.html","excerpt":"åœ¨ SQL Server 2017 æ™‚ï¼Œå¾®è»Ÿæ¨å‡ºäº† Linux ç‰ˆï¼ŒåŒæ™‚ä¹Ÿåœ¨ Docker Hub ä¸Šæä¾›äº† microsoft/mssql-server-linux çš„ Docker imageã€‚æœ¬ç¯‡æœƒä»‹ç´¹å¦‚ä½•åœ¨ Docker ä¸‹ï¼Œé€éæ­¤ image ä¾†å»ºç«‹ä¸¦ä½¿ç”¨ MSSQL Server for Linuxã€‚","text":"åœ¨ SQL Server 2017 æ™‚ï¼Œå¾®è»Ÿæ¨å‡ºäº† Linux ç‰ˆï¼ŒåŒæ™‚ä¹Ÿåœ¨ Docker Hub ä¸Šæä¾›äº† microsoft/mssql-server-linux çš„ Docker imageã€‚æœ¬ç¯‡æœƒä»‹ç´¹å¦‚ä½•åœ¨ Docker ä¸‹ï¼Œé€éæ­¤ image ä¾†å»ºç«‹ä¸¦ä½¿ç”¨ MSSQL Server for Linuxã€‚MSSQL Server for Linux è¦æ±‚å¿…é ˆ Docker Engine 1.8+ï¼Œæ”¯æ´ä»»ä½•å¹³å° (Windows/Mac/Linux)ç¡¬ç¢Ÿç©ºé–“è‡³å°‘ 2 GBRAM è‡³å°‘ 2 GBimage å¿…è¦çš„ç’°å¢ƒè®Šæ•¸ï¼šACCEPT_EULA=Yï¼šç¢ºèªåŒæ„æˆæ¬Šåˆç´„MSSQL_SA_PASSWORD=&lt;YourStrong!Passw0rd&gt;ï¼šè¨­å®š SA å¯†ç¢¼A strong system administrator (SA) å¯†ç¢¼å¿…é ˆç¬¦åˆä»¥ä¸‹è¦å‰‡ï¼šè‡³å°‘ 8 å€‹å­—å…ƒå¿…éœ€åŒ…å«è‹±æ–‡å¤§å¯«ã€è‹±æ–‡å°å¯«ã€æ•¸å­—ã€éå­—æ¯æ•¸å­—ç¬¦è™Ÿå››è€…ä¸­çš„å…¶ä¸­ä¸‰ç¨®å³å¯è©³æƒ…å¯åƒè€ƒå®˜æ–¹çš„ SQL Server on Liunx çš„ç³»çµ±éœ€æ±‚ æ–‡ä»¶ã€‚å»ºç«‹ ContainerDocker Hubï¼šmicrosoft/mssql-server-linux1234567# å¾ Docker Hub æå– SQL Server 2017 Linux container image$ docker pull microsoft/mssql-server-linux:2017-latest# å»ºç«‹ä¸¦åŸ·è¡Œ Docker container$ docker run -e 'ACCEPT_EULA=Y' -e 'MSSQL_SA_PASSWORD=&lt;YourStrong!Passw0rd&gt;' \\ -p 1401:1433 --name sql1 \\ -d microsoft/mssql-server-linux:2017-latest-e 'ACCEPT_EULA=Y'ï¼šç¢ºèªåŒæ„æˆæ¬Šåˆç´„-e 'MSSQL_SA_PASSWORD=&lt;YourStrong!Passw0rd&gt;'ï¼šå¿…éœ€æ˜¯å¼·å¯†ç¢¼ä¸¦è‡³å°‘ 8 å€‹å­—å…ƒã€‚å¼·å¯†ç¢¼è‹±æ–‡å¤§å¯«ã€è‹±æ–‡å°å¯«ã€æ•¸å­—ã€éå­—æ¯æ•¸å­—ç¬¦è™Ÿå››è€…ä¸­çš„å…¶ä¸­ä¸‰ç¨®å³å¯ã€‚-p hostPort:containerPortï¼šhost å°å¤–é–‹ 1401 portï¼Œcontainer å…§é–‹ 1433 port--nameï¼šæŒ‡å®š container åç¨±-dï¼šèƒŒæ™¯åŸ·è¡Œmicrosoft/mssql-server-linux:2017-latestï¼šä½¿ç”¨ SQL Server 2017 Linux image å»ºç«‹ containerå¦‚æœåˆ—è¡¨ NAMES é¡¯ç¤º sql1 ä¸¦ä¸” STATUS é¡¯ç¤º UP å°±ä»£è¡¨ SQL Server å·²åœ¨èƒŒæ™¯åŸ·è¡Œï¼š1234# æŸ¥çœ‹ container çš„ç‹€æ…‹$ docker psCONTAINER ID IMAGE COMMAND CREATED STATUS PORTS NAMES08e2f151d579 microsoft/mssql-server-linux:2017-latest \"/bin/sh -c /opt/mssâ€¦\" 31 minutes ago Up 31 minutes 0.0.0.0:1401-&gt;1433/tcp sql1é€£æ¥è‡³ SQL Serverä½¿ç”¨ SQL Server å‘½ä»¤åˆ—å·¥å…· sqlcmdï¼Œé€£æ¥åˆ° SQL Server containerï¼š123456789# åœ¨å¤–éƒ¨å‘åŸ·è¡Œä¸­çš„ container å…§éƒ¨ä¸‹æŒ‡ä»¤ï¼Œå•Ÿå‹• Container å…§éƒ¨çš„äº’å‹•å¼ bash shellï¼Œä¾†åŸ·è¡Œä½ ä¸‹çš„æŒ‡ä»¤$ docker exec -it sql1 bash# ä½¿ç”¨ SQL Server å‘½ä»¤åˆ—å·¥å…· `sqlcmd`ï¼Œä¸¦ç™»å…¥å¸³è™Ÿå¯†ç¢¼é€£æ¥åˆ° SQL Server$ /opt/mssql-tools/bin/sqlcmd -S localhost -U SAPassword:# å‡ºç¾ \"1&gt;\" å°±ä»£è¡¨å·²æˆåŠŸç™»å…¥ä¸¦å·²é€²å…¥ sqlcmd1&gt;è®Šæ›´ SA çš„å¯†ç¢¼SA å¸³è™Ÿæ˜¯åœ¨å®‰è£æœŸé–“å»ºç«‹çš„ SQL Server å¯¦ä¾‹ä¸Šçš„ç³»çµ±ç®¡ç†å“¡ã€‚å»ºç«‹ SQL Server container ä¹‹å¾Œï¼Œåœ¨ container ä¸­åŸ·è¡Œ echo $MSSQL_SA_PASSWORDï¼Œå³å¯æŸ¥çœ‹ SA çš„å¯†ç¢¼ï¼š123$ docker exec -it sql1 bashroot@xxx:/# echo $MSSQL_SA_PASSWORDYourStrong!Passw0rdåŸ·è¡Œä¸‹é¢æŒ‡ä»¤å¯ä»¥è®Šæ›´ SA çš„å¯†ç¢¼ï¼Œè€Œ opt/mssql-tools/bin/sqlcmd æ˜¯ sqlcmd æ‰€åœ¨çš„è·¯å¾‘ï¼š123$ docker exec -it sql1 /opt/mssql-tools/bin/sqlcmd \\ -S localhost -U SA -P '&lt;YourStrong!Passw0rd&gt;' \\ -Q 'ALTER LOGIN SA WITH PASSWORD=\"&lt;YourNewStrong!Passw0rd&gt;\"'åƒæ•¸èªªæ˜ï¼š-Sï¼šserver-Uï¼šuser name-Pï¼špassword-Qï¼šqueryï¼ŒåŸ·è¡Œ SQL æŒ‡ä»¤å¾ŒçµæŸ sqlcmdå»ºç«‹è³‡æ–™åº«åŠæŸ¥è©¢è³‡æ–™123456789101112131415161718192021# æŸ¥è©¢ server ä¸Šæ‰€æœ‰ DB åç¨±1&gt; SELECT Name from sys.Databases# åœ¨ sqlcmd æŒ‡ä»¤æ¨¡å¼ä¸‹ï¼Œè¦è¼¸å…¥ GO æŒ‡ä»¤æ‰æœƒåŸ·è¡Œ2&gt; GOName------------mastertempdbmodelmsdb(4 rows affected)# å»ºç«‹è³‡æ–™åº«1&gt; CREATE DATABASE TestDB2&gt; GO# å‡ºç¾ä¸‹é¢ç•«é¢ \"1&gt;\" å°±ä»£è¡¨å·²æˆåŠŸå»ºç«‹è³‡æ–™åº«1&gt;# é›¢é–‹ sqlcmd1&gt; quitä½¿ç”¨ Azure Data Studio é€£æ¥ SQL ServerAzure Data Studio (ä»¥å‰ç¨±ç‚º SQL Operations Studio) æ˜¯ä¸€å€‹è¼•é‡ä¸”å…è²»çš„è·¨å¹³å° SQL Server é–‹æºç®¡ç†å·¥å…·ï¼Œæ”¯æ´ Windowsã€macOSã€Linuxã€‚å®‰è£ Azure Data Studiofor Windowsä¸‹è¼‰ä¸¦è§£å£“ç¸®ï¼Œæ¥è‘—åŸ·è¡Œ \\azuredatastudio-windows\\sqlops.exe å³å¯é–‹å§‹ä½¿ç”¨ã€‚for Linuxä¸‹è¼‰ä¸¦è§£å£“ç¸®ï¼Œæ¥è‘—å°‡ Azure Data Studio åŸ·è¡Œæª”åŠ å…¥ PATH ç’°å¢ƒè®Šæ•¸ï¼Œä»¥å¾Œå³å¯åœ¨çµ‚ç«¯æ©Ÿè¼¸å…¥ azuredatastudio é–‹å•Ÿ Azure Data Studioï¼š123456$ cd ~$ cp ~/Downloads/azuredatastudio-linux-&lt;version string&gt;.tar.gz ~$ tar -xvf ~/azuredatastudio-linux-&lt;version string&gt;.tar.gz$ echo 'export PATH=\"$PATH:~/azuredatastudio-linux-x64\"' &gt;&gt; ~/.bashrc$ source ~/.bashrc$ azuredatastudiofor macOSä¸‹è¼‰ä¸¦è§£å£“ç¸®ï¼Œç„¶å¾Œå°‡ Azure Data Studio åŠ å…¥ Launchpadï¼Œå°‡ Studio.app æ‹–æ›³åˆ°æ‡‰ç”¨ç¨‹å¼ç›®éŒ„ (Applications folder) å³å¯ã€‚å®‰è£è©³æƒ…å¯åƒè€ƒå®˜æ–¹çš„ ä¸‹è¼‰ä¸¦å®‰è£ - Azure Data Studio | Microsoft Docs æ–‡ä»¶ã€‚ç™»å…¥ SQL ServerServer name çš„æ ¼å¼ï¼š IP, PortIPï¼šLinuxï¼šä½¿ç”¨ ifconfig æŒ‡ä»¤æŸ¥è©¢ IPWindowsï¼šä½¿ç”¨ ipconfig æŒ‡ä»¤æŸ¥è©¢ IPPortï¼šè¦çœ‹å‰é¢å»ºç«‹çš„ container æ˜¯è¨­å®šå¤šå°‘ Portæ­¤ç¯„ä¾‹ (ä¹Ÿå°±æ˜¯ä¸‹é¢çš„æŒ‡ä»¤) æ˜¯è¨­å®šä½¿ç”¨ 1401 portï¼Œæ‰€ä»¥åªè¦è¼¸å…¥ YourIP, 1401 å°±èƒ½èˆ‡ SQL Server é€£æ¥ã€‚123$ docker run -e 'ACCEPT_EULA=Y' -e 'MSSQL_SA_PASSWORD=&lt;YourStrong!Passw0rd&gt;' \\ -p 1401:1433 --name sql1 \\ -d microsoft/mssql-server-linux:2017-latestå»ºç«‹è³‡æ–™è¡¨å’Œè³‡æ–™ï¼Œä¸¦æŸ¥è©¢è³‡æ–™åŸ·è¡Œä¸‹é¢æŒ‡ä»¤ï¼Œå»ºç«‹è³‡æ–™è¡¨å’Œè³‡æ–™ï¼Œä¸¦æŸ¥è©¢è³‡æ–™ï¼š12345678-- åˆ‡æ›è‡³ TestDB è³‡æ–™åº«use TestDB;-- å»ºç«‹è³‡æ–™è¡¨CREATE TABLE People(Name nvarchar(50), Age int);-- æ–°å¢è³‡æ–™INSERT INTO People VALUES ('Titan', 18), ('John', 6), ('Alex', 40);-- æŸ¥è©¢å¹´é½¡å°æ–¼ 20 æ­²çš„äººSELECT * FROM People WHERE Age &lt; 20;åŸ·è¡Œå®Œçš„çµæœå¦‚ä¸‹åœ–ï¼Œçœ‹åˆ°æ­¤æŸ¥è©¢çµæœå°±ä»£è¡¨å·²æˆåŠŸæ–°å¢è³‡æ–™ï¼šåˆªé™¤ ContaineræŒ‡å®šåˆªé™¤åç‚º sql1 çš„ containerï¼š12345678# æŸ¥è©¢ç›®å‰çš„æ­£åœ¨åŸ·è¡Œçš„ container$ docker ps# container åœæ­¢åŸ·è¡Œ$ docker stop sql# åˆªé™¤ container$ docker rm sql1æˆ–æ˜¯å¯ä»¥åœ¨æœªåœæ­¢åŸ·è¡Œ container çš„æƒ…æ³ä¸‹ï¼Œç›´æ¥å¼·åˆ¶åˆªé™¤ containerï¼š12# å¼·åˆ¶åˆªé™¤ container$ docker rm -f sql1é€é Volume å°‡è³‡æ–™åº«çš„è³‡æ–™å„²å­˜è‡³ä¸»æ©Ÿåœ¨ docker run æŒ‡ä»¤ä¸ŠåŠ  -v åƒæ•¸å¯ä»¥å»ºç«‹å¯¦é«”è³‡æ–™å¤¾èˆ‡ container è³‡æ–™å¤¾çš„å°æ‡‰é—œä¿‚ï¼Œå°‡ä¸»æ©Ÿä¸Šçš„æŒ‡å®šç›®éŒ„ç¶å®šåˆ° container çš„æŒ‡å®šç›®éŒ„ï¼Œä¹Ÿå°±æ˜¯å¯ä»¥å­˜è³‡æ–™åº«çš„è³‡æ–™è‡³ä¸»æ©Ÿï¼Œåƒæ•¸èªæ³•ç‚º -v &lt;host directory&gt;:/var/opt/mssqlï¼š12345# åŸ·è¡Œ Docker container image$ docker run -e 'ACCEPT_EULA=Y' -e 'MSSQL_SA_PASSWORD=&lt;YourStrong!Passw0rd&gt;' \\ -p 1402:1433 --name sql2 \\ -v `pwd`/mssql:/var/opt/mssql \\ -d microsoft/mssql-server-linux:2017-latestå‚™ä»½èˆ‡é‚„åŸè³‡æ–™åº«ç¯„ä¾‹å‰ç½®æº–å‚™ï¼šå»ºç«‹è³‡æ–™åº«ã€è³‡æ–™è¡¨å’Œè³‡æ–™ä¸‹é¢çš„ SQL æŒ‡ä»¤æ˜¯ç”¨ä¾†ç«‹è³‡æ–™åº«ã€è³‡æ–™è¡¨å’Œè³‡æ–™ï¼Œå› ç‚ºæ­¤ container æ˜¯å‰›å‰›å¦å¤–æ–°å»ºçš„ï¼Œä¹‹å‰çš„ container å·²ç¶“åˆªé™¤äº† (å› ç‚ºæ²’æœ‰åˆ©ç”¨ Volume å„²å­˜è³‡æ–™åº«çš„è³‡æ–™)ï¼Œæ‰€ä»¥éœ€è¦é‡æ–°å»ºç«‹è³‡æ–™ï¼š123456789-- å»ºç«‹ è³‡æ–™åº«CREATE DATABASE TestDB;GO-- åˆ‡æ›è‡³ TestDB è³‡æ–™åº«use TestDB;-- å»ºç«‹è³‡æ–™è¡¨CREATE TABLE People(Name nvarchar(50), Age int);-- æ–°å¢è³‡æ–™INSERT INTO People VALUES ('Titan', 18), ('John', 6), ('Alex', 40);å‚™ä»½è³‡æ–™åº«ä½¿ç”¨ sqlcmd é€£æ¥åˆ° SQL Serverï¼Œä¸¦å®Œæ•´å‚™ä»½ TestDB è³‡æ–™åº«ï¼Œå‚™ä»½æª”å­˜è‡³ ./data/testdb.bakï¼š12$ docker exec -it sql2 /opt/mssql-tools/bin/sqlcmd -S localhost -U SA \\ -Q \"BACKUP DATABASE TestDB TO DISK = N'/var/opt/mssql/data/testdb.bak' WITH NOFORMAT, NOINIT, NAME = 'demodb-full', SKIP, NOREWIND, NOUNLOAD, STATS = 10\"ç•¶åŸ·è¡Œæ­¤æŒ‡ä»¤æ™‚ï¼ŒSQL Server å°‡æœƒæç¤ºéœ€è¼¸å…¥å¯†ç¢¼ã€‚è¼¸å…¥å¯†ç¢¼å¾Œï¼Œå¾ˆå¿«å°±æœƒå‚™ä»½å®Œæˆï¼Œå¦‚æœå‚™ä»½æˆåŠŸç•«é¢å°±æœƒé¡¯ç¤ºã€ŒBACKUP DATABASE successfully â€¦ã€ï¼š1234567891011121314Password: 10 percent processed.20 percent processed.30 percent processed.40 percent processed.50 percent processed.60 percent processed.70 percent processed.80 percent processed.90 percent processed.Processed 312 pages for database 'TestDB', file 'TestDB' on file 1.100 percent processed.Processed 6 pages for database 'TestDB', file 'TestDB_log' on file 1.BACKUP DATABASE successfully processed 318 pages in 0.348 seconds (7.139 MB/sec).ç¯„ä¾‹å‰ç½®è™•ç†ï¼šåˆªé™¤ container å’Œè³‡æ–™åº«è³‡æ–™ä¸‹é¢æ˜¯è¦æ¨¡æ“¬æŠŠ container åˆªé™¤å¾Œï¼Œè¦å¦‚ä½•å°‡å‰›å‰›å‚™ä»½çš„è³‡æ–™åº«è³‡æ–™ (ä¹Ÿå°±æ˜¯ ./data/testdb.bak ) é‚„åŸï¼Œå› æ­¤ä¹Ÿè¦åˆªé™¤é€é Volume å„²å­˜çš„è³‡æ–™åº«è³‡æ–™ï¼Œå¦‚ä»¥ä¸‹æ­¥é©Ÿï¼šåˆªé™¤ container1234# æŸ¥è©¢ç›®å‰çš„æ­£åœ¨åŸ·è¡Œçš„ container$ docker ps# å¼·åˆ¶åˆªé™¤ container$ docker rm -f sql2åˆªé™¤é€é Volume å„²å­˜çš„è³‡æ–™åº«è³‡æ–™1234567891011121314151617181920212223242526272829# æŸ¥çœ‹å‰›å‰›åˆªé™¤çš„ container ä¿å­˜ä¸‹ä¾†çš„ DB è³‡æ–™æª” (TestDB_log.ldf å’Œ TestDB.mdf)$ cd mssql/data$ pwd/home/titan/project/mssql/data$ treeâ”œâ”€â”€ master.mdfâ”œâ”€â”€ mastlog.ldfâ”œâ”€â”€ modellog.ldfâ”œâ”€â”€ model.mdfâ”œâ”€â”€ msdbdata.mdfâ”œâ”€â”€ msdblog.ldfâ”œâ”€â”€ tempdb.mdfâ”œâ”€â”€ templog.ldfâ”œâ”€â”€ testdb.bakâ”œâ”€â”€ TestDB_log.ldf &lt;---â””â”€â”€ TestDB.mdf &lt;---# åˆªé™¤ TestDB.mdf å’Œ TestDB_log.ldf$ sudo rm TestDB*$ treeâ”œâ”€â”€ master.mdfâ”œâ”€â”€ mastlog.ldfâ”œâ”€â”€ modellog.ldfâ”œâ”€â”€ model.mdfâ”œâ”€â”€ msdbdata.mdfâ”œâ”€â”€ msdblog.ldfâ”œâ”€â”€ tempdb.mdfâ”œâ”€â”€ templog.ldfâ””â”€â”€ testdb.bakåœ¨å»ºç«‹ä¸€å€‹æ–°çš„ container (ç”¨ä¾†åšé‚„åŸè³‡æ–™åº«ç”¨çš„)å…ˆå›åˆ°å°ˆæ¡ˆçš„æ ¹ç›®éŒ„ï¼š12345$ pwd/home/titan/project/mssql/data$ cd ../..$ pwd/home/titan/projectæ¥è‘—å»ºç«‹ä¸€å€‹æ–°çš„ containerï¼Œåç¨±å«åš sql3ï¼š1234$ docker run -e 'ACCEPT_EULA=Y' -e 'MSSQL_SA_PASSWORD=&lt;YourStrong!Passw0rd&gt;' \\ -p 1403:1433 --name sql3 \\ -v `pwd`/mssql:/var/opt/mssql \\ -d microsoft/mssql-server-linux:2017-latesté‚„åŸè³‡æ–™åº«ä½¿ç”¨ sqlcmd é€£æ¥åˆ° SQL Serverï¼Œä¸¦é‚„åŸ TestDB è³‡æ–™åº« (è¦é‚„åŸçš„å‚™ä»½æª”å­˜è‡³ ./data/testdb.bak )ï¼š12$ docker exec -it sql3 /opt/mssql-tools/bin/sqlcmd -S localhost -U SA \\ -Q \"RESTORE DATABASE TestDB FROM DISK = N'/var/opt/mssql/data/testdb.bak' WITH FILE = 1, NOUNLOAD, REPLACE, STATS = 5\"ç•¶åŸ·è¡Œæ­¤æŒ‡ä»¤æ™‚ï¼ŒSQL Server å°‡æœƒæç¤ºéœ€è¼¸å…¥å¯†ç¢¼ã€‚è¼¸å…¥å¯†ç¢¼å¾Œï¼Œå¾ˆå¿«å°±æœƒé‚„åŸå®Œæˆï¼Œå¦‚æœé‚„åŸæˆåŠŸç•«é¢å°±æœƒé¡¯ç¤ºã€ŒRESTORE DATABASE successfully â€¦ã€ï¼š123456789101112131415161718192021222324Password: 6 percent processed.11 percent processed.15 percent processed.20 percent processed.25 percent processed.31 percent processed.36 percent processed.41 percent processed.45 percent processed.50 percent processed.57 percent processed.61 percent processed.66 percent processed.70 percent processed.75 percent processed.82 percent processed.86 percent processed.91 percent processed.95 percent processed.100 percent processed.Processed 344 pages for database 'TestDB', file 'TestDB' on file 1.Processed 7 pages for database 'TestDB', file 'TestDB_log' on file 1.RESTORE DATABASE successfully processed 351 pages in 0.321 seconds (8.530 MB/sec).æª¢æŸ¥ä¸€ä¸‹å‰›å‰›åˆªé™¤çš„ TestDB.mdf å’Œ TestDB_log.ldf éƒ½æ­£ç¢ºçš„é‚„åŸäº†ï¼š12345678910111213$ cd mssql/data$ treeâ”œâ”€â”€ master.mdfâ”œâ”€â”€ mastlog.ldfâ”œâ”€â”€ modellog.ldfâ”œâ”€â”€ model.mdfâ”œâ”€â”€ msdbdata.mdfâ”œâ”€â”€ msdblog.ldfâ”œâ”€â”€ tempdb.mdfâ”œâ”€â”€ templog.ldfâ”œâ”€â”€ testdb.bakâ”œâ”€â”€ TestDB_log.ldf &lt;---â””â”€â”€ TestDB.mdf &lt;---ä½¿ç”¨ select SQL æŒ‡ä»¤å¯ä»¥çœ‹åˆ°è³‡æ–™ç¢ºå¯¦å·²é‚„åŸï¼šä½¿ç”¨ Azure Data Studio å‚™ä»½æˆ–é‚„åŸè³‡æ–™åº«å¦‚æœè¦ºå¾—æ‰“æŒ‡ä»¤å¾ˆéº»ç…©ï¼Œå…¶å¯¦ Azure Data Studioã€SQL Server Management Studio (SSMS)ã€SQL Server Data Tools (SSDT) æˆ– Visual Studio Code (VS Code) çš„ mssql æ“´å……åŠŸèƒ½ éƒ½æœ‰æä¾› GUI çš„ä»‹é¢ï¼Œå¯ä»¥ç›´æ¥å‚™ä»½æˆ–é‚„åŸè³‡æ–™åº«ã€‚ä¸‹åœ–æ˜¯ Azure Data Studio å‚™ä»½æˆ–é‚„åŸè³‡æ–™åº«çš„ç•«é¢ï¼šè©³æƒ…å¯åƒè€ƒå®˜æ–¹çš„ å‚™ä»½èˆ‡é‚„åŸçš„è³‡æ–™åº« - Azure Data Studio | Microsoft Docs æ–‡ä»¶ã€‚åƒè€ƒé€£çµé–‹å§‹ä½¿ç”¨ Docker ï¼ˆLinux ä¸ŠåŸ·è¡Œ SQL Serverï¼‰ ä¸Šçš„ SQL Server å®¹å™¨ - SQL Server | Microsoft Docsåœ¨ Docker ä¸Šçš„ SQL Server çµ„æ…‹é¸é … - SQL Server | Microsoft Docsåœ¨ Docker ä¸­çš„ SQL Server è³‡æ–™åº«é‚„åŸ - SQL Server | Microsoft DocsGithub repo: Microsoft/mssql-docker","categories":[{"name":"SQL Server","slug":"sql-server","permalink":"https://titangene.github.io/categories/sql-server/"},{"name":"Linux","slug":"sql-server/linux","permalink":"https://titangene.github.io/categories/sql-server/linux/"},{"name":"Database","slug":"sql-server/linux/database","permalink":"https://titangene.github.io/categories/sql-server/linux/database/"},{"name":"DevOps","slug":"sql-server/linux/database/devops","permalink":"https://titangene.github.io/categories/sql-server/linux/database/devops/"}],"tags":[{"name":"Docker","slug":"docker","permalink":"https://titangene.github.io/tags/docker/"},{"name":"Container","slug":"container","permalink":"https://titangene.github.io/tags/container/"}]},{"title":"å°‡ Hexo çš„ Markdown æ¸²æŸ“å¼•æ“æ›æˆ markdown-it","slug":"hexo-markdown-it","date":"2019-01-29T14:51:00.000Z","updated":"2019-09-08T16:34:17.393Z","comments":true,"path":"article/hexo-markdown-it.html","link":"","permalink":"https://titangene.github.io/article/hexo-markdown-it.html","excerpt":"å€‹äººå¾ˆå¸¸ç”¨ HackMD ç´€éŒ„ç­†è¨˜ï¼Œå¸Œæœ› blog ä¹Ÿå¯ä»¥æ”¯æ´ HackMD çš„ Markdown æ ¼å¼ï¼Œå› æ­¤æœ¬ç¯‡çš„ç›®æ¨™å°±æ˜¯è¦å°‡ Hexo åŸæœ¬çš„ Markdown æ¸²æŸ“å¼•æ“ markedï¼Œæ›æˆ HackMD çš„ Markdown æ¸²æŸ“å¼•æ“ï¼šmarkdown-itã€‚","text":"å€‹äººå¾ˆå¸¸ç”¨ HackMD ç´€éŒ„ç­†è¨˜ï¼Œå¸Œæœ› blog ä¹Ÿå¯ä»¥æ”¯æ´ HackMD çš„ Markdown æ ¼å¼ï¼Œå› æ­¤æœ¬ç¯‡çš„ç›®æ¨™å°±æ˜¯è¦å°‡ Hexo åŸæœ¬çš„ Markdown æ¸²æŸ“å¼•æ“ markedï¼Œæ›æˆ HackMD çš„ Markdown æ¸²æŸ“å¼•æ“ï¼šmarkdown-itã€‚æ›´æ›æ¸²æŸ“å¼•æ“Hexo é è¨­çš„ markdown æ¸²æŸ“å¼•æ“æ˜¯ markedï¼Œä¸¦ä½¿ç”¨ hexo-renderer-marked æ­¤ Hexo å¤–æ›ä¾†å°‡ Markdown è½‰æ›æˆéœæ…‹æª”æ¡ˆ HTMLï¼Œä½†å› å‰é¢æåˆ°çš„éœ€æ±‚ï¼Œæ‰€ä»¥è¦åˆªé™¤åŸæœ¬çš„æ¸²æŸ“å¼•æ“1$ npm uninstall hexo-renderer-marked --saveå®‰è£æˆ‘å€‘è¦æ”¹ç”¨çš„ Markdown æ¸²æŸ“å¼•æ“ï¼šmarkdown-itï¼Œè€Œä½¿ç”¨æ­¤æ¸²æŸ“å¼•æ“çš„ Hexo å¤–æ›å°±æ˜¯ hexo-renderer-markdown-itï¼Œæ‰€ä»¥è¦åœ¨ hexo çš„å°ˆæ¡ˆä¸­å®‰è£æ­¤å¤–æ›ï¼š1$ npm install git+https://github.com/hexojs/hexo-renderer-markdown-it.git --saveç‚ºä½•å®‰è£ NPM å¥—ä»¶æ™‚è¦æŒ‡å®š github çš„ repo å‘¢ï¼Ÿå› ç‚º hexo-renderer-markdown-it æ­¤ NPM å¥—ä»¶çš„ç¨‹å¼æ²’æœ‰æ›´æ–°æˆ Github ä¸Šé¢çš„ç¨‹å¼ç‰ˆæœ¬ï¼Œè«‹ç¢ºå®šå‰›å‰›å®‰è£å¥—ä»¶ä¸­ï¼Œnode_modules\\hexo-renderer-markdown-it\\lib\\renderer.js é€™å€‹æª”æ¡ˆå…§çš„ä¸‹é¢é€™æ®µç¨‹å¼ç¢¼æ˜¯å¦ç›¸åŒï¼š123456789if (opt.plugins) &#123; parser = opt.plugins.reduce(function(parser, pugs) &#123; if (pugs instanceof Object &amp;&amp; pugs.name) &#123; return parser.use(require(pugs.name), pugs.options); &#125; else &#123; return parser.use(require(pugs)); &#125; &#125;, parser);&#125;è‹¥æ˜¯å¾ NPM ä¸‹è¼‰çš„å¥—ä»¶ç‰ˆæœ¬ (ä¹Ÿå°±æ˜¯ç›´æ¥ä½¿ç”¨ npm install hexo-renderer-markdown-it --save æ­¤æŒ‡ä»¤)ï¼Œæœƒå°‘å¹¾å¥ç¨‹å¼ï¼Œå°‘äº†å¯åœ¨è¼‰å…¥ markdown-it çš„å¤–æ›æ™‚ç‚ºè©²å¤–æ›è¨­å®šæ‰€éœ€çš„ optionsï¼š12345if (opt.plugins) &#123; parser = opt.plugins.reduce(function(parser, pugs) &#123; return parser.use(require(pugs)); &#125;, parser);&#125;å®‰è£æ¸²æŸ“å¼•æ“å¤–æ›å¥—ä»¶æˆ‘å€‘å¯ä»¥åƒè€ƒ HackMD çš„ç›¸ä¾å¥—ä»¶ï¼Œåªè¦æ˜¯åç‚º markdown-it-xxx çš„å¥—ä»¶å°±æ˜¯æ¸²æŸ“å¼•æ“ markdown-it çš„å¤–æ›ï¼š12345678910111213141516171819&#123; \"dependencies\": &#123; // ... \"markdown-it\": \"^8.2.2\", \"markdown-it-abbr\": \"^1.0.4\", \"markdown-it-container\": \"^2.0.0\", \"markdown-it-deflist\": \"^2.0.1\", \"markdown-it-emoji\": \"^1.3.0\", \"markdown-it-footnote\": \"^3.0.1\", \"markdown-it-imsize\": \"^2.0.1\", \"markdown-it-ins\": \"^2.0.0\", \"markdown-it-mark\": \"^2.0.0\", \"markdown-it-mathjax\": \"^2.0.0\", \"markdown-it-regexp\": \"^0.4.0\", \"markdown-it-sub\": \"^1.0.0\", \"markdown-it-sup\": \"^1.0.0\" // ... &#125;&#125;è€Œä¸‹åˆ—æ˜¯æˆ‘é¸æ“‡è¦å®‰è£çš„å¤–æ›ï¼šmarkdown-it-abbrmarkdown-it-containermarkdown-it-deflistmarkdown-it-emojimarkdown-it-footnotemarkdown-it-imsizemarkdown-it-insmarkdown-it-markmarkdown-it-regexpmarkdown-it-submarkdown-it-supmarkdown-it-task-checkbox1$ npm i markdown-it-abbr markdown-it-checkbox markdown-it-container markdown-it-deflist markdown-it-emoji markdown-it-footnote markdown-it-imsize markdown-it-ins markdown-it-mark markdown-it-regexp markdown-it-sub markdown-it-sup --savemarkdown-it-mathjaxç‚ºä½•æˆ‘æœªå®‰è£ markdown-it-mathjax é€™å€‹å¤–æ›ï¼Ÿé€™æ˜¯å› ç‚ºâ€¦æˆ‘ä¹‹å¾Œå†å–®ç¨å¯«ä¸€ç¯‡æ–‡ç« ä¾†ä»‹ç´¹å¦‚ä½•åœ¨ Markdown åŠ ä¸Šæ•¸å­¸å¼ MathJaxã€‚markdown-it-task-checkboxç‚ºä½•æˆ‘æœƒæ¯” HackMD å¤šå®‰è£ markdown-it-task-checkbox é€™å€‹å¤–æ›ï¼Ÿæœ‰ä½¿ç”¨é HackMD çš„æœ‹å‹éƒ½çŸ¥é“ï¼Œåªè¦åœ¨ HackMD è¼¸å…¥ä¸‹åˆ— Markdown èªæ³•ï¼š12- [ ] task 1- [x] task 2å°±æœƒè¢«è½‰æ›æˆ HTML çš„ checkboxï¼š12345678&lt;ul&gt; &lt;li class=\"task-list-item\"&gt; &lt;input type=\"checkbox\" class=\"task-list-item-checkbox \" /&gt;&lt;label&gt;&lt;/label&gt;task 1 &lt;/li&gt; &lt;li class=\"task-list-item\"&gt; &lt;input type=\"checkbox\" class=\"task-list-item-checkbox\" checked=\"\" /&gt;&lt;label&gt;&lt;/label&gt;task 2 &lt;/li&gt;&lt;/ul&gt;ç•«é¢æœƒçœ‹åˆ°ä¸€å€‹æœªè¢«å‹¾é¸ä»¥åŠä¸€å€‹å·²è¢«å‹¾é¸çš„ checkboxï¼šä¸é HackMD ä¸æ˜¯é è‘— Markdown æ¸²æŸ“å¼•æ“ markdown-it çš„å¤–æ›ä¾†è½‰æ›æˆ HTML çš„ï¼Œè€Œæ˜¯ç›´æ¥åˆ©ç”¨æ­£è¦è¡¨ç¤ºæ³• (Regular Expression) æ‰¾åˆ° [ ] æˆ– [x] çš„æ–‡å­—ï¼Œå†å°‡é€™äº›æ–‡å­—ç›´æ¥è½‰æ›æˆ HTML çš„ checkboxã€‚æˆ‘æ“·å–äº† HackMD çš„é€™æ®µç¨‹å¼é‚è¼¯ï¼Œè‹¥æƒ³çœ‹è©³ç´°çš„åŸå§‹ç¢¼å¯è‡³ HackMD çš„åŸå§‹ç¢¼å…§çš„ public/js/extra.js æª”æ¡ˆä¸­çš„ç¬¬ 263 è¡Œå·¦å³ï¼š12345678910111213141516if (/^\\s*\\[[x ]\\]\\s*/.test(html)) &#123; li.innerHTML = html .replace( /^\\s*\\[ \\]\\s*/, `&lt;input type=\"checkbox\" class=\"task-list-item-checkbox\" $&#123;disabled&#125;&gt;&lt;label&gt;&lt;/label&gt;`, ) .replace( /^\\s*\\[x\\]\\s*/, `&lt;input type=\"checkbox\" class=\"task-list-item-checkbox\" checked $&#123;disabled&#125;&gt;&lt;label&gt;&lt;/label&gt;`, ); if (li.tagName.toLowerCase() !== 'li') &#123; li.parentElement.setAttribute('class', 'task-list-item'); &#125; else &#123; li.setAttribute('class', 'task-list-item'); &#125;&#125;è¨­å®š _config.ymlå°‡ä¸‹é¢é€™äº›è¨­å®šåœ¨æ ¹ç›®éŒ„çš„ _config.yml è¨­å®šæª”ä¸­ï¼š123456789101112131415161718192021222324252627282930313233343536373839# Markdown-it config# Docs: https://github.com/hexojs/hexo-renderer-markdown-it/wikimarkdown: render: html: true xhtmlOut: false breaks: true linkify: true typographer: true quotes: 'â€œâ€â€˜â€™' plugins: - markdown-it-abbr - markdown-it-footnote - markdown-it-ins - markdown-it-sub - markdown-it-sup - markdown-it-deflist - markdown-it-imsize - markdown-it-mark - markdown-it-regexp - markdown-it-task-checkbox - name: markdown-it-container options: success - name: markdown-it-container options: info - name: markdown-it-container options: warning - name: markdown-it-container options: danger - markdown-it-deflist - name: markdown-it-emoji options: shortcuts: &#123;&#125; anchors: level: 1 collisionSuffix: 'v' permalink: true permalinkClass: header-anchor permalinkSymbol: ''æƒ³äº†è§£è¨­å®šè©³æƒ…å¯åƒè€ƒ Advanced Configuration | hexojs/hexo-renderer-markdown-it Wiki å®˜æ–¹æ–‡ä»¶ã€‚","categories":[{"name":"Blog","slug":"blog","permalink":"https://titangene.github.io/categories/blog/"}],"tags":[{"name":"Markdown","slug":"markdown","permalink":"https://titangene.github.io/tags/markdown/"},{"name":"Hexo","slug":"hexo","permalink":"https://titangene.github.io/tags/hexo/"}]},{"title":"Flutter è¼‰å…¥åœ–ç‰‡","slug":"flutter-loading-images","date":"2018-12-31T13:10:00.000Z","updated":"2019-04-30T15:57:23.428Z","comments":true,"path":"article/flutter-loading-images.html","link":"","permalink":"https://titangene.github.io/article/flutter-loading-images.html","excerpt":"è¦å¦‚ä½•åœ¨ Flutter å…§è¼‰å…¥åœ–ç‰‡ï¼Ÿé€™ç¯‡åšå€‹å°è¨˜éŒ„ã€‚","text":"è¦å¦‚ä½•åœ¨ Flutter å…§è¼‰å…¥åœ–ç‰‡ï¼Ÿé€™ç¯‡åšå€‹å°è¨˜éŒ„ã€‚æŒ‡å®šè³‡æºFlutter æ˜¯åœ¨æ ¹ç›®éŒ„å…§çš„ pubspec.yaml æª”æ¡ˆä¾†è¨­å®šæ‡‰ç”¨ç¨‹å¼æ‰€éœ€çš„è³‡æºï¼Œè¨­å®šçš„è³‡æºæ²’æœ‰é †åºé—œä¿‚ã€‚è‹¥è¦æŒ‡å®šæŸäº›è³‡æºï¼Œè³‡æºçš„è·¯å¾‘æ˜¯ç›¸å°æ–¼ pubspec.yaml æª”æ¡ˆçš„ç›¸å°è·¯å¾‘ï¼š1234flutter: assets: - assets/images/avatar.jpg - assets/images/background.jpgä¹Ÿå¯ä»¥æŒ‡å®šæŸå€‹ç›®éŒ„ï¼Œä»£è¡¨å¯ä»¥å­˜å–åˆ°é€™å€‹ç›®éŒ„ä¸‹çš„æ‰€æœ‰è³‡æºï¼Œä½†è¨˜å¾—è¦åœ¨ç›®éŒ„çš„æœ€å¾ŒåŠ ä¸Š / é€™å€‹ç¬¦è™Ÿï¼š123flutter: assets: - assets/è‹¥è¦å­˜å–å­ç›®éŒ„å…§çš„è³‡æºï¼Œè«‹è¨˜å¾—è¦å¦å¤–ç‚ºå­ç›®éŒ„è¨­å®šï¼Œä¾‹å¦‚ï¼š1234flutter: assets: - assets/ - assets/images/è¼‰å…¥åœ–ç‰‡å¯ä½¿ç”¨ Image.asset() ä¾†è¼‰å…¥åœ–ç‰‡ï¼Œè£¡é¢çš„åƒæ•¸å°±æ˜¯åœ–ç‰‡çš„è·¯å¾‘ï¼š12345Widget build(BuildContext context) &#123; // ... return Image.asset('assets/images/background.jpg'); // ...&#125;æˆ–æ˜¯åœ¨ Image() å…§çš„ image åƒæ•¸ä½¿ç”¨ AssetImage()ï¼š1234567Widget build(BuildContext context) &#123; // ... return Image( image: AssetImage('assets/images/background.jpg'), ); // ...&#125;æœ€å¾Œé¡¯ç¤ºçš„çµæœæœƒä¸€æ¨£ï¼šåƒè€ƒé€£çµAdding assets and images - Flutter","categories":[{"name":"Flutter","slug":"flutter","permalink":"https://titangene.github.io/categories/flutter/"},{"name":"Mobile App","slug":"flutter/mobile-app","permalink":"https://titangene.github.io/categories/flutter/mobile-app/"}],"tags":[{"name":"Dart","slug":"dart","permalink":"https://titangene.github.io/tags/dart/"}]},{"title":"Python - æ—¥èªŒ (logging) æ¨¡çµ„","slug":"python-logging","date":"2018-12-13T10:32:46.000Z","updated":"2019-04-30T15:55:01.854Z","comments":true,"path":"article/python-logging.html","link":"","permalink":"https://titangene.github.io/article/python-logging.html","excerpt":"é–‹ç™¼ Python æ™‚ï¼Œå¾ˆå¸¸ä½¿ç”¨ print() ä¾†è¼¸å‡ºè®Šæ•¸ä»¥æ–¹ä¾¿ debugï¼Œä½†è¦éƒ¨ç½²æ™‚ï¼Œä¸éœ€è¦é€™äº›è¨Šæ¯ï¼Œéœ€è¦è‡ªå·±æ‰‹å‹•å»è¨»è§£æˆ–åˆªé™¤é‚£äº›æ”¾åœ¨å„è™•çš„ print()ã€‚è€Œ Python å…§å»ºæä¾›äº† logging æ¨¡çµ„å¯ä»¥ç”¨ä¾†å–ä»£ print()ï¼Œlogging é™¤äº†å¯ä»¥è¼¸å‡ºè¨Šæ¯ï¼Œä¹Ÿå¯ä»¥å°‡è¨Šæ¯å„²å­˜è‡³æ—¥èªŒæª”ä¿å­˜ã€‚ä¸‹é¢ç´€éŒ„å¦‚ä½•ä½¿ç”¨ logging æ¨¡çµ„ã€‚","text":"é–‹ç™¼ Python æ™‚ï¼Œå¾ˆå¸¸ä½¿ç”¨ print() ä¾†è¼¸å‡ºè®Šæ•¸ä»¥æ–¹ä¾¿ debugï¼Œä½†è¦éƒ¨ç½²æ™‚ï¼Œä¸éœ€è¦é€™äº›è¨Šæ¯ï¼Œéœ€è¦è‡ªå·±æ‰‹å‹•å»è¨»è§£æˆ–åˆªé™¤é‚£äº›æ”¾åœ¨å„è™•çš„ print()ã€‚è€Œ Python å…§å»ºæä¾›äº† logging æ¨¡çµ„å¯ä»¥ç”¨ä¾†å–ä»£ print()ï¼Œlogging é™¤äº†å¯ä»¥è¼¸å‡ºè¨Šæ¯ï¼Œä¹Ÿå¯ä»¥å°‡è¨Šæ¯å„²å­˜è‡³æ—¥èªŒæª”ä¿å­˜ã€‚ä¸‹é¢ç´€éŒ„å¦‚ä½•ä½¿ç”¨ logging æ¨¡çµ„ã€‚è¼‰å…¥ logging æ¨¡çµ„1import logginglogging ç­‰ç´šlogging æ¨¡çµ„é å…ˆå®šç¾©äº† 6 ç¨®ç­‰ç´šä»¥åŠå°æ‡‰çš„ log è¼¸å‡ºå‡½æ•¸ (é™¤äº† logging.NOTSET æ²’æœ‰å°æ‡‰çš„è¼¸å‡ºå‡½æ•¸)ï¼šç­‰ç´šç­‰ç´šæ•¸å€¼è¼¸å‡ºå‡½æ•¸èªªæ˜NOTSET0ç„¡å°æ‡‰çš„è¼¸å‡ºå‡½æ•¸æœªè¨­å®šDEBUG10logging.debug()é™¤éŒ¯INFO20logging.info()è¨Šæ¯WARNING30logging.warning()è­¦å‘ŠERROR40logging.error()éŒ¯èª¤CRITICAL50logging.critical()åš´é‡éŒ¯èª¤è‹¥è¦æŸ¥è©¢å„ç­‰ç´šçš„æ•¸å€¼ï¼Œå¯ç›´æ¥å‘¼å«è©²ç­‰ç´šï¼š12345678import loggingprint(logging.NOTSET) # 0print(logging.DEBUG) # 10print(logging.INFO) # 20print(logging.WARNING) # 30print(logging.ERROR) # 40print(logging.CRITICAL) # 50è‹¥è¦ç”¨ç­‰ç´šæ•¸å€¼ä¾†æŸ¥è©¢æ˜¯å“ªå€‹ç­‰ç´šçš„è¨Šæ¯ï¼Œå¯ä½¿ç”¨ logging.getLevelName(level)ï¼š12345678import loggingprint(logging.getLevelName(0)) # NOTSETprint(logging.getLevelName(10)) # DEBUGprint(logging.getLevelName(20)) # INFOprint(logging.getLevelName(30)) # WARNINGprint(logging.getLevelName(40)) # ERRORprint(logging.getLevelName(50)) # CRITICALè¼¸å‡º logginglogging æ¨¡çµ„é è¨­ç­‰ç´šç‚º WARNINGï¼Œå¤§æ–¼æˆ–ç­‰æ–¼ WARNING ç­‰ç´šçš„è¨Šæ¯æ‰æœƒè¢«è¨˜éŒ„ï¼š1234567import logginglogging.debug('debug message')logging.info('info message')logging.warning('warning message')logging.error('error message')logging.critical('critical message')ä¸‹é¢æ˜¯è¼¸å‡ºçµæœï¼Œå¯ä»¥çœ‹åˆ°æ¯” WARNING ç­‰ç´šé‚„è¦ä½çš„è¨Šæ¯æœ‰ DEBUG å’Œ INFO å°±ä¸æœƒè¢«è¼¸å‡ºï¼š123WARNING:root:warning messageERROR:root:error messageCRITICAL:root:critical messageè‹¥å°‡ç­‰ç´šè¨­ç‚º DEBUGï¼Œå°±æœƒå°‡æ‰€æœ‰ç­‰ç´šçš„è¨Šæ¯éƒ½è¼¸å‡ºï¼š123456789import logginglogging.basicConfig(level=logging.DEBUG)logging.debug('debug message')logging.info('info message')logging.warning('warning message')logging.error('error message')logging.critical('critical message')ä¸‹é¢æ˜¯è¼¸å‡ºçµæœï¼Œé è¨­çš„è¨Šæ¯è¼¸å‡ºæ ¼å¼æ˜¯ %(levelname)s:%(name)s:%(message)s (å¾Œé¢æœƒä»‹ç´¹å¦‚ä½•è‡ªè¨‚è¼¸å‡ºæ ¼å¼)ï¼š12345DEBUG:root:debug messageINFO:root:info messageWARNING:root:warning messageERROR:root:error messageCRITICAL:root:critical messageç´€éŒ„å †ç–Šè¿½è¹¤è³‡è¨Šlogging æ¨¡çµ„ä¹Ÿæä¾›å¯ä»¥ç´€éŒ„å®Œæ•´çš„å †ç–Šè¿½è¹¤ (stack traces)ï¼Œè‹¥åœ¨ logging.error() åŠ ä¸Š exc_info åƒæ•¸ï¼Œä¸¦å°‡è©²åƒæ•¸è¨­ç‚º Trueï¼Œå°±å¯ä»¥ç´€éŒ„ Exceptionï¼Œå¦‚ä¸‹ï¼š123456import loggingtry: x = 5 / 0except: logging.error(\"Catch an exception.\", exc_info=True)ä¸‹é¢æ˜¯è¼¸å‡ºçµæœï¼š12345ERROR:root:Catch an exception.Traceback (most recent call last): File \"main.py\", line 14, in &lt;module&gt; x = 5 / 0ZeroDivisionError: division by zeroè‹¥æ²’æœ‰åŠ ä¸Š exc_info=True å‰‡ç„¡æ³•ç´€éŒ„ Exceptionï¼š123456import loggingtry: x = 5 / 0except: logging.error(\"Catch an exception.\")ä¸‹é¢æ˜¯è¼¸å‡ºçµæœï¼š1ERROR:root:Catch an exception.è‹¥è¦åœ¨ logging å…§ç´€éŒ„ exception è¨Šæ¯ï¼Œå¯ä½¿ç”¨ logging.exception()ï¼Œå®ƒæœƒå°‡ exception æ·»åŠ è‡³è¨Šæ¯ä¸­ï¼Œæ­¤æ–¹æ³•çš„ç­‰ç´šç‚º ERRORï¼Œä¹Ÿå°±æ˜¯èªª logging.exception() å°±ç­‰åŒæ–¼ logging.error(exc_info=True)123456import loggingtry: x = 5 / 0except: logging.exception('Catch an exception.')è¼¸å‡ºçµæœå’Œ logging.error(exc_info=True) ç›¸åŒï¼š12345ERROR:root:Catch an exception.Traceback (most recent call last): File \"main.py\", line 14, in &lt;module&gt; x = 5 / 0ZeroDivisionError: division by zeroè‹¥ä¸æƒ³ä½¿ç”¨ ERROR ç´šåˆ¥ç´€éŒ„ exception è¨Šæ¯ï¼Œå¯ä½¿ç”¨ DEBUGã€INFOã€WARNINGã€CRITICAL ç´šåˆ¥ä¸¦åŠ ä¸Šåƒæ•¸ exc_info=True çš„è¨­å®šï¼š1234567891011import logginglogging.basicConfig(level=logging.DEBUG)try: x = 5 / 0except: logging.debug('Catch an exception.', exc_info=True) logging.info('Catch an exception.', exc_info=True) logging.warning('Catch an exception.', exc_info=True) logging.critical('Catch an exception.', exc_info=True)ä¸‹é¢æ˜¯è¼¸å‡ºçµæœï¼š1234567891011121314151617181920DEBUG:root:Catch an exception.Traceback (most recent call last): File \"main.py\", line 14, in &lt;module&gt; x = 5 / 0ZeroDivisionError: division by zeroINFO:root:Catch an exception.Traceback (most recent call last): File \"main.py\", line 14, in &lt;module&gt; x = 5 / 0ZeroDivisionError: division by zeroWARNING:root:Catch an exception.Traceback (most recent call last): File \"main.py\", line 14, in &lt;module&gt; x = 5 / 0ZeroDivisionError: division by zeroCRITICAL:root:Catch an exception.Traceback (most recent call last): File \"main.py\", line 14, in &lt;module&gt; x = 5 / 0ZeroDivisionError: division by zeroè‡ªè¨‚ logging è¼¸å‡ºæ ¼å¼é è¨­çš„è¨Šæ¯è¼¸å‡ºæ ¼å¼åªæœ‰ levelnameã€nameã€messageï¼Œä¸‹é¢æ˜¯å…¶ä»–ç›¸é—œçš„è³‡è¨Šï¼šæ ¼å¼åŒ–å­—ä¸²èªªæ˜%(asctime)sæ—¥æœŸæ™‚é–“, æ ¼å¼ç‚º YYYY-MM-DD HH:mm:SS,msï¼Œä¾‹å¦‚ï¼š2018-12-13 17:20:30,567%(filename)sæ¨¡çµ„æª”å%(funcName)så‡½æ•¸åç¨±%(levelname)sæ—¥èªŒçš„ç­‰ç´šåç¨±%(levelno)sæ—¥èªŒçš„ç­‰ç´šæ•¸å€¼%(lineno)då‘¼å«æ—¥èªŒå‡½æ•¸æ‰€åœ¨çš„è¡Œæ•¸%(message)sè¨Šæ¯%(module)sæ¨¡çµ„åç¨±%(name)slogger çš„åç¨±%(pathname)sæª”æ¡ˆçš„å®Œæ•´è·¯å¾‘ (å¦‚æœå¯ç”¨)%(process)dprocess ID (å¦‚æœå¯ç”¨)%(thread)dåŸ·è¡Œç·’ ID (å¦‚æœå¯ç”¨)%(threradName)såŸ·è¡Œç·’åç¨±å¯å°‡é€™äº›è³‡è¨ŠåŠ å…¥ logging.basicConfig() å…§çš„ format åƒæ•¸ï¼š12345678910import loggingFORMAT = '%(asctime)s %(levelname)s: %(message)s'logging.basicConfig(level=logging.DEBUG, format=FORMAT)logging.debug('debug message')logging.info('info message')logging.warning('warning message')logging.error('error message')logging.critical('critical message')ä¸‹é¢æ˜¯è‡ªè¨‚è¨Šæ¯çš„è¼¸å‡ºçµæœï¼š123452018-12-13 17:40:34,604 DEBUG: debug message2018-12-13 17:40:34,604 INFO: info message2018-12-13 17:40:34,604 WARNING: warning message2018-12-13 17:40:34,604 ERROR: error message2018-12-13 17:40:34,608 CRITICAL: critical messageè‡ªè¨‚è¼¸å‡ºçš„æ™‚é–“æ ¼å¼åœ¨ logging.basicConfig() å…§çš„ datefmt åƒæ•¸å¯è¨­å®šæ‰€éœ€çš„æ™‚é–“æ ¼å¼ï¼Œè¦ä½¿ç”¨ time.strftime() æ¥å—çš„æ™‚é–“æ ¼å¼ï¼šåƒæ•¸èªªæ˜%Yé•·å¹´ä»½ï¼Œä¾‹å¦‚ï¼š2019%yçŸ­å¹´ä»½ï¼Œä¾‹å¦‚ï¼š19%mæœˆä»½ï¼š01 ~ 12%Bæœˆä»½å®Œæ•´åç¨±ï¼Œä¾‹å¦‚ï¼šFebruary%bæœˆä»½ç¸®å¯«åç¨±ï¼Œä¾‹å¦‚ï¼šFeb%dæ—¥æœŸï¼š01 ~ 31%Hå°æ™‚ (24 å°æ™‚åˆ¶)ï¼š00 ~ 23%Iå°æ™‚ (12 å°æ™‚åˆ¶)ï¼š01 ~ 12%wæ˜ŸæœŸï¼š0 ~ 6ï¼Œ0 ä»£è¡¨æ˜ŸæœŸæ—¥%Aæ˜ŸæœŸå®Œæ•´åç¨±ï¼Œä¾‹å¦‚ï¼šFriday%aæ˜ŸæœŸç¸®å¯«åç¨±ï¼Œä¾‹å¦‚ï¼šFri%PAM æˆ– PM%Måˆ†é˜ï¼š00 ~ 59%Sç§’ï¼š00 ~ 61time.strftime() çš„æ™‚é–“åƒæ•¸è©³æƒ…å¯åƒè€ƒ Python å®˜æ–¹çš„ time â€” Time access and conversions â€” Python 3.7.2 documentation æ–‡ä»¶ã€‚1234567891011import loggingLOGGING_FORMAT = '%(asctime)s %(levelname)s: %(message)s'DATE_FORMAT = '%Y%m%d %H:%M:%S'logging.basicConfig(level=logging.DEBUG, format=LOGGING_FORMAT, datefmt=DATE_FORMAT)logging.debug('debug message')logging.info('info message')logging.warning('warning message')logging.error('error message')logging.critical('critical message')ä¸‹é¢æ˜¯è‡ªè¨‚è¨Šæ¯çš„è¼¸å‡ºçµæœï¼š1234520190107 08:57:07 DEBUG: debug message20190107 08:57:07 INFO: info message20190107 08:57:07 WARNING: warning message20190107 08:57:07 ERROR: error message20190107 08:57:07 CRITICAL: critical messageå„²å­˜ loggingåªè¦åœ¨ logging.basicConfig() å…§çš„ filename åƒæ•¸è¨­å®šè¦å„²å­˜çš„æ—¥èªŒæª”åï¼Œå°±å¯ä»¥å°‡ logging å„²å­˜ï¼š12345678910import loggingFORMAT = '%(asctime)s %(levelname)s: %(message)s'logging.basicConfig(level=logging.DEBUG, filename='myLog.log', filemode='w', format=FORMAT)logging.debug('debug message')logging.info('info message')logging.warning('warning message')logging.error('error message')logging.critical('critical message')é è¨­ filemode åƒæ•¸æ˜¯è¨­ç‚º aï¼Œä»£è¡¨ append (é™„åŠ ) çš„æ„æ€ï¼Œæ¯æ¬¡åŸ·è¡Œç¨‹å¼æ™‚ï¼ŒLogging æœƒå°‡æ–°çš„è¨Šæ¯åŠ åœ¨èˆŠçš„è¨Šæ¯å¾Œé¢ï¼Œä¸æœƒè¦†è“‹èˆŠçš„è¨Šæ¯ã€‚è‹¥è¦æ”¹æˆæ–°è¨Šæ¯è¦†è“‹å°±è¨Šæ¯ï¼Œé‚£å¯ä»¥å°‡ filemode åƒæ•¸è¨­ç‚º wï¼Œä»£è¡¨ write çš„æ„æ€ã€‚ä¸‹é¢æ˜¯å‰›å‰›åŸ·è¡Œå¾Œå„²å­˜çš„ myLog.log æ—¥èªŒæª”ï¼š123452018-12-13 17:47:18,686 DEBUG: debug message2018-12-13 17:47:18,687 INFO: info message2018-12-13 17:47:18,687 WARNING: warning message2018-12-13 17:47:18,687 ERROR: error message2018-12-13 17:47:18,687 CRITICAL: critical messageè©³æƒ…å¯åƒè€ƒå®˜æ–¹æ–‡ä»¶ Logging facility for Python â€” Python documentationã€‚","categories":[{"name":"Python","slug":"python","permalink":"https://titangene.github.io/categories/python/"}],"tags":[{"name":"Logging","slug":"logging","permalink":"https://titangene.github.io/tags/logging/"}]},{"title":"è¨­å®š Windows å·¥ä½œæ’ç¨‹å®šæœŸåŸ·è¡Œ Python çˆ¬èŸ²ç¨‹å¼","slug":"set-up-windows-task-scheduler-to-periodically-execute-python-crawler","date":"2018-12-01T04:55:00.000Z","updated":"2019-04-30T15:54:19.642Z","comments":true,"path":"article/set-up-windows-task-scheduler-to-periodically-execute-python-crawler.html","link":"","permalink":"https://titangene.github.io/article/set-up-windows-task-scheduler-to-periodically-execute-python-crawler.html","excerpt":"å¦‚ä½•å°‡ Python çˆ¬èŸ²ç¨‹å¼å®šæœŸåŸ·è¡Œï¼Ÿä½¿ç”¨ Windows çš„ä½¿ç”¨è€…å¯ä»¥é¸æ“‡ã€Œå·¥ä½œæ’ç¨‹å™¨ã€ä¾†è§£æ±ºã€‚","text":"å¦‚ä½•å°‡ Python çˆ¬èŸ²ç¨‹å¼å®šæœŸåŸ·è¡Œï¼Ÿä½¿ç”¨ Windows çš„ä½¿ç”¨è€…å¯ä»¥é¸æ“‡ã€Œå·¥ä½œæ’ç¨‹å™¨ã€ä¾†è§£æ±ºã€‚æœ€è¿‘æœ‰äº›è³‡æ–™æƒ³é€éçˆ¬èŸ²ä¾†æ“·å–ï¼Œè€Œä¸”å¸Œæœ›å¯ä»¥å®šæœŸ (ä¾‹å¦‚ï¼šæ¯ 10 åˆ†é˜ä¸€æ¬¡) è‡ªå‹•åŸ·è¡Œçˆ¬èŸ²ç¨‹å¼ï¼Œå› æ­¤å°±æœ‰äº†é€™ç¯‡ç­†è¨˜ã€‚ä¸‹é¢ä»‹ç´¹å¦‚ä½•ä»¥ Windows å·¥ä½œæ’ç¨‹å™¨ä¾†å®šæœŸåŸ·è¡Œçˆ¬èŸ²ç¨‹å¼ã€‚ç›®æ¨™æ¯ 10 åˆ†é˜è‡ªå‹•åŸ·è¡Œ Python çˆ¬èŸ²ç¨‹å¼ï¼Œå°‡çˆ¬èŸ²æŠ“åˆ°çš„æœ€æ–°é™é›¨é‡è³‡æ–™å­˜å…¥ CSV æª”å…§æ”¶é›†ã€‚æº–å‚™WindowsPython ç’°å¢ƒï¼šå»ºè­°å®‰è£ Anacondaï¼Œå¯åƒè€ƒ ç”¨ Conda å»ºç«‹è™›æ“¬ç’°å¢ƒå’Œç®¡ç†ç›¸ä¾å¥—ä»¶Python å¥—ä»¶ (é€™æ˜¯æœ¬ç¯‡çˆ¬èŸ²ç¯„ä¾‹æ‰€éœ€çš„ç›¸ä¾å¥—ä»¶ï¼Œå¯ä¾å„è‡ªéœ€æ±‚ä¾†é¸æ“‡)PandasNumpyRequestsPython çˆ¬èŸ²ç¨‹å¼åŸå§‹ç¢¼source code: titangene/cwb-opendata-crawler-demo/crawler.pyç°¡å–®èªªæ˜ä¸€ä¸‹ç¨‹å¼çš„åŸ·è¡Œæ­¥é©Ÿï¼šåˆ©ç”¨ Python çš„ Requests å¥—ä»¶ä¾†å»ºç«‹ HTTP çš„ GET è«‹æ±‚ï¼Œå¾ä¸­å¤®æ°£è±¡å±€æä¾›çš„é–‹æ”¾è³‡æ–™ API ä¸­å–å¾—è³‡æ–™ï¼Œå›å‚³çš„æ ¼å¼æ˜¯ JSONè§£æ API å›å‚³çš„ JSON è³‡æ–™ï¼Œä¸¦å°‡ JSON è½‰æˆ Pandas çš„ DataFrame å‹åˆ¥çš„è³‡æ–™æ ¼å¼å°‡ DataFrame å„²å­˜æˆ CSV æª”ä¿å­˜è³‡æ–™è‹¥æƒ³äº†è§£ä¸­å¤®æ°£è±¡å±€é–‹æ”¾è³‡æ–™çš„ç›¸é—œå…§å®¹ï¼Œè©³æƒ…å¯åƒè€ƒ ä¸­å¤®æ°£è±¡å±€é–‹æ”¾è³‡æ–™ - é–‹ç™¼æŒ‡å—ã€‚Python çˆ¬èŸ²ç¨‹å¼çš„æ‰¹æ¬¡æª”å»ºç«‹ä¸€å€‹å‰¯æª”åç‚º .bat çš„æ‰¹æ¬¡æª”ï¼Œæ‰¹æ¬¡æª”æ˜¯ç”¨ä¾†åŸ·è¡Œ Python çˆ¬èŸ²ç¨‹å¼ï¼Œå› æ­¤å°±èƒ½è®“ Windows å·¥ä½œæ’ç¨‹å™¨åœ¨å®šæœŸæ™‚é–“è‡ªå‹•åŸ·è¡Œæ‰¹æ¬¡æª”ï¼Œä»¥é”æˆè‡ªå‹•åŒ–åŸ·è¡Œçˆ¬èŸ²çš„ç›®çš„ã€‚ä¸‹é¢å°±ä¾†èªªæ˜æ‰¹æ¬¡æª”æ¯è¡Œéƒ½åšäº†ç”šéº¼ï¼šç¬¬ä¸€è¡Œï¼šåˆ‡åˆ°æŒ‡å®šç›®éŒ„ç¬¬äºŒè¡Œï¼šæŒ‡å®š Python è™›æ“¬ç’°å¢ƒ (å¯åƒè€ƒ ç”¨ Conda å»ºç«‹è™›æ“¬ç’°å¢ƒå’Œç®¡ç†ç›¸ä¾å¥—ä»¶ã€‚å¦‚æœè¦åœ¨å…¨åŸŸç’°å¢ƒä¸‹åŸ·è¡Œå°±ä¸éœ€è¦é€™è¡Œ)ç¬¬ä¸‰è¡Œï¼šåŸ·è¡Œ Python çˆ¬èŸ²ç¨‹å¼ç¬¬å››è¡Œï¼šè‹¥æƒ³æŸ¥çœ‹ Python çˆ¬èŸ²ç¨‹å¼åŸ·è¡Œéç¨‹ä¸­æ‰€è¼¸å‡º (ä¹Ÿå°±æ˜¯åŸ·è¡Œ print æ–¹æ³•çš„éƒ¨åˆ†) å…§å®¹ï¼Œå°±éœ€è¦å–æ¶ˆé€™è¡Œçš„è¨»è§£REMï¼šå–®è¡Œè¨»è§£pauseï¼šç”¨ä¾†æš«åœæ‰¹æ¬¡æª”çš„åŸ·è¡Œ1234cd /d D:/Project/Python/cwb-opendata-crawlercall activate devcall python crawler.pyREM pausesource code: titangene/cwb-opendata-crawler-demo/crawler.batWindows å·¥ä½œæ’ç¨‹å™¨ ç°¡ä»‹å¯é å…ˆè¨­å®šå·¥ä½œåœ¨ç‰¹å®šæ™‚é–“æˆ–æŒ‡å®šæ™‚é–“æ™‚ï¼Œæœƒè‡ªå‹•åŸ·è¡Œç¨‹å¼æˆ–æ‰¹æ¬¡æª”ä»¥é”æˆå·¥ä½œè‡ªå‹•åŒ–ã€‚ä¸‹åœ–ç‚º Windows 10 çš„å·¥ä½œæ’ç¨‹å™¨ä»‹é¢ï¼šå»ºç«‹å·¥ä½œï¼Œè¨­å®šå®šæœŸåŸ·è¡Œçˆ¬èŸ²ç¨‹å¼é–‹å•Ÿ Windows çš„ã€Œå·¥ä½œæ’ç¨‹å™¨ã€ï¼Œé»æ“Šå³ä¸Šè§’çš„ã€Œå»ºç«‹å·¥ä½œã€è‡ªè¨‚å·¥ä½œåç¨±ï¼Œè‹¥æœ‰æ¬Šé™éœ€æ±‚å¯å‹¾é¸ã€Œä»¥æœ€é«˜æ¬Šé™åŸ·è¡Œã€é¸é …æ¥è‘—æ–°å¢ã€Œè§¸ç™¼ç¨‹åºã€è¨­å®šå·¥ä½œçš„é–‹å§‹æ™‚é–“ï¼Œä¸¦é¸æ“‡ã€Œåƒ…ä¸€æ¬¡ã€ï¼Œä»¥åŠè¨­å®šå·¥ä½œè¦æ¯éš”å¤šä¹…å°±åŸ·è¡Œä¸€æ¬¡ï¼Œä¸¦ä¸”è¦æŒçºŒå¤šä¹…æ™‚é–“ç„¶å¾Œæ–°å¢ã€Œå‹•ä½œã€è¨­å®šè¦è‡ªå‹•åŸ·è¡Œçš„ç¨‹å¼ï¼Œé€™é‚Šé¸æ“‡çš„å°±æ˜¯å‰›å‰›æåˆ°çš„ æ‰¹æ¬¡æª” (åŸå§‹ç¢¼)å¦‚æœè¨­å®šå¥½äº†å°±å¯ä»¥æŒ‰ç¢ºå®šå®Œæˆå»ºç«‹å·¥ä½œï¼Œæ­¤æ™‚å°±æœƒçœ‹åˆ°åœ¨ã€Œå·¥ä½œæ’ç¨‹å™¨ç¨‹å¼åº«ã€å…§çš„å·¥ä½œæ¸…å–®ä¸­ï¼Œå¤šäº†å‰›å‰›æ–°å¢çš„å·¥ä½œæˆæœå¯ä»¥çœ‹åˆ°çˆ¬èŸ²ç¨‹å¼æœƒåœ¨å®šæœŸè‡ªå‹•åŸ·è¡Œï¼ŒåŸ·è¡Œçš„æ™‚å€™æœƒè·³å‡ºä¸€å€‹ cmd è¦–çª—ã€‚è‹¥å‰›å‰›æåˆ°çš„ æ‰¹æ¬¡æª” å…§æ²’æœ‰å°‡ REM pause é€™è¡Œè¨»è§£ï¼Œå°±æœƒçœ‹åˆ°çˆ¬èŸ²ç¨‹å¼åŸ·è¡Œå®Œæˆå¾Œï¼Œä¸æœƒè‡ªå‹•é—œé–‰ cmd è¦–çª—ï¼Œé€™æ˜¯ç‚ºäº†å¯ä»¥ç«‹å³çœ‹åˆ°è©²æ¬¡çˆ¬èŸ²åŸ·è¡Œéç¨‹ä¸­è¼¸å‡ºçš„è¨Šæ¯ã€‚ä¸‹åœ–å°±æ˜¯è‡ªå‹•åŸ·è¡Œçˆ¬èŸ²æ‰€æŠ“åˆ°çš„è³‡æ–™ï¼šå®Œæ•´ source codeï¼štitangene/cwb-opendata-crawler-demo","categories":[{"name":"Windows","slug":"windows","permalink":"https://titangene.github.io/categories/windows/"},{"name":"Python","slug":"windows/python","permalink":"https://titangene.github.io/categories/windows/python/"},{"name":"Crawler","slug":"windows/python/crawler","permalink":"https://titangene.github.io/categories/windows/python/crawler/"},{"name":"OS","slug":"windows/python/crawler/os","permalink":"https://titangene.github.io/categories/windows/python/crawler/os/"}],"tags":[{"name":"Python Requests","slug":"python-requests","permalink":"https://titangene.github.io/tags/python-requests/"},{"name":"Windows å·¥ä½œæ’ç¨‹","slug":"windows-å·¥ä½œæ’ç¨‹","permalink":"https://titangene.github.io/tags/windows-å·¥ä½œæ’ç¨‹/"}]},{"title":"ç”¨ Conda å»ºç«‹è™›æ“¬ç’°å¢ƒå’Œç®¡ç†ç›¸ä¾å¥—ä»¶","slug":"create-a-virtual-environment-and-manage-dependencies-with-conda","date":"2018-11-19T09:10:00.000Z","updated":"2019-05-12T07:21:26.188Z","comments":true,"path":"article/create-a-virtual-environment-and-manage-dependencies-with-conda.html","link":"","permalink":"https://titangene.github.io/article/create-a-virtual-environment-and-manage-dependencies-with-conda.html","excerpt":"å­¸ç¿’å¦‚ä½•åˆ©ç”¨ Conda ä¾†å»ºç«‹ä¸åŒéœ€æ±‚æ‰€éœ€çš„ Python é–‹ç™¼ç’°å¢ƒï¼Œä¸¦å¦‚ä½•ç®¡ç†ç›¸ä¾å¥—ä»¶ã€‚","text":"å­¸ç¿’å¦‚ä½•åˆ©ç”¨ Conda ä¾†å»ºç«‹ä¸åŒéœ€æ±‚æ‰€éœ€çš„ Python é–‹ç™¼ç’°å¢ƒï¼Œä¸¦å¦‚ä½•ç®¡ç†ç›¸ä¾å¥—ä»¶ã€‚AnacondaAnaconda æ˜¯æœ€å—æ­¡è¿çš„ Python è³‡æ–™ç§‘å­¸ (Data Science) å¹³å°ï¼Œå®ƒç‰¹é»å°±æ˜¯æœ¬ä¾†å°±åŒ…å«äº†å„ç¨®æ•¸æ“šåˆ†æã€ç§‘å­¸è¨ˆç®—çš„ç›¸é—œå¥—ä»¶ (ä¾‹å¦‚ï¼šNumPyã€SciPyã€Matplotlibã€SymPyã€Pandas â€¦ ç­‰)ï¼Œè€Œ Anaconda çš„å¥—ä»¶ç®¡ç†å·¥å…·å°±æ˜¯ condaã€‚CondaConda æ˜¯ä¸€å€‹é–‹æºçš„å¥—ä»¶èˆ‡ç’°å¢ƒç®¡ç†çš„ç³»çµ±ï¼Œå¯ä»¥åœ¨ Windowsã€macOS å’Œ Linux ä¸Šä½¿ç”¨ã€‚å¯åˆ©ç”¨ Conda ä¾†å®‰è£ã€åŸ·è¡Œã€æ›´æ–°å¥—ä»¶ä»¥åŠå…¶ç›¸ä¾çš„å¥—ä»¶ï¼Œä¸¦ä¸”é‚„å¯ç”¨ä¾†å»ºç«‹ä¸åŒçš„é–‹ç™¼ç’°å¢ƒ (ä¾‹å¦‚ï¼šä¸åŒç’°å¢ƒæœ‰ä¸åŒçš„ Python ç‰ˆæœ¬)ã€‚å®‰è£ Anacondaè‡³ Anaconda å®˜ç¶²ä¸‹è¼‰ä¸¦å®‰è£ï¼Œå»ºè­°é¸æ“‡ Python 3.x çš„ç‰ˆæœ¬ã€‚å»ºç«‹è™›æ“¬ç’°å¢ƒå¾æŒ‡å®šå¥—ä»¶åˆ—è¡¨ä¸­å»ºç«‹æ–°çš„ conda ç’°å¢ƒï¼š-nï¼Œ--nameï¼šè¨­å®šç’°å¢ƒåç¨±1234567$ conda create -n &lt;environment&gt; &lt;package&gt;# å®‰è£åŒ…å« Anaconda ç™¼è¡Œç‰ˆçš„å¥—ä»¶$ conda create -n &lt;environment&gt; anaconda# æŒ‡å®š Python ç‰ˆæœ¬$ conda create -n &lt;environment&gt; python=3.6-eï¼Œ--envsï¼šåˆ—å‡ºå·²å»ºç«‹çš„ç’°å¢ƒ123456# é¡¯ç¤ºè™›æ“¬ç’°å¢ƒåˆ—è¡¨ï¼Œä¸¦é¡¯ç¤ºæ­£åœ¨ä½¿ç”¨çš„è™›æ“¬ç’°å¢ƒ$ conda info -e# conda environments:#base * D:\\Users\\Titan\\Anaconda3hello D:\\Users\\Titan\\Anaconda3\\envs\\helloä½¿ç”¨æˆ– activate è‡³æŒ‡å®šç’°å¢ƒï¼š12345# Windows$ activate &lt;environment&gt;# Linux and macOS$ source activate &lt;environment&gt;123456# é¡¯ç¤ºè™›æ“¬ç’°å¢ƒåˆ—è¡¨ï¼Œä¸¦é¡¯ç¤ºæ­£åœ¨ä½¿ç”¨çš„è™›æ“¬ç’°å¢ƒ$ conda info -e# conda environments:#base D:\\Users\\Titan\\Anaconda3hello * D:\\Users\\Titan\\Anaconda3\\envs\\hello* ä»£è¡¨ç›®å‰æ­£åœ¨ä½¿ç”¨çš„è™›æ“¬ç’°å¢ƒé›¢é–‹è™›æ“¬ç’°å¢ƒå¦‚æœè¦å°‡ç¾åœ¨ç’°å¢ƒæ”¹å›é è¨­å€¼ base (é›¢é–‹ç›®å‰ç’°å¢ƒ) å¯ä½¿ç”¨ä¸‹é¢æŒ‡ä»¤ï¼š12345# Windows$ deactivate# Linux and macOS$ source deactivateåˆ©ç”¨ conda å®‰è£å¥—ä»¶1234$ conda install &lt;package&gt;# å®‰è£å¤šå€‹å¥—ä»¶$ conda install &lt;package-1&gt; &lt;package-2&gt;æŸ¥çœ‹è³‡è¨ŠæŸ¥çœ‹ conda ç›®å‰ç‰ˆæœ¬12$ conda -Vconda 4.5.11æŸ¥çœ‹ç›®å‰ç’°å¢ƒå·²å®‰è£çš„å¥—ä»¶123456789101112$ conda list# packages in environment at D:\\Users\\Titan\\Anaconda3:## Name Version Build Channel...jupyter 1.0.0 py35_3jupyter_client 5.2.3 py35_0jupyter_console 4.1.1 py35_0jupyter_core 4.4.0 py35h629ba7f_0jupyterlab 0.32.1 &lt;pip&gt;jupyterlab-launcher 0.10.5 &lt;pip&gt;...æŸ¥çœ‹ conda æ˜¯å¦æœ‰æŸå¥—ä»¶ï¼š12345678$ conda search &lt;package&gt;$ conda search pandasLoading channels: done# Name Version Build Channelpandas 0.9.0 np16py27_0 pkgs/freepandas 0.9.1 np16py27_0 pkgs/free...å¦‚æœ conda æ²’æœ‰è©²å¥—ä»¶ï¼Œå¯ä»¥ä½¿ç”¨ pip ä¾†å®‰è£å¥—ä»¶ï¼š12345# å®‰è£å¥—ä»¶$ pip install &lt;package&gt;# æ›´æ–°å¥—ä»¶$ pip install --upgrade &lt;package&gt;åˆªé™¤å¥—ä»¶12345678# åˆªé™¤ç’°å¢ƒå…§çš„å¥—ä»¶$ conda remove -n &lt;environment&gt; &lt;package&gt;# åˆªé™¤ç›®å‰ç’°å¢ƒå…§çš„å¥—ä»¶$ conda remove &lt;package&gt;# åˆªé™¤å¤šå€‹å¥—ä»¶$ conda remove &lt;package-1&gt; &lt;package-2&gt;æ›´æ–°å¥—ä»¶1234567891011# æ›´æ–° conda$ conda update conda# æ›´æ–° Anaconda$ conda update anaconda# æ›´æ–° Python$ conda update python# æ›´æ–°ç‰¹å®šå¥—ä»¶$ conda update &lt;package&gt;åˆªé™¤è™›æ“¬ç’°å¢ƒ1$ conda env remove -n &lt;environment&gt;æ›´æ–° Pythonæ›´æ–°å…¨åŸŸç’°å¢ƒè‹¥ç›®å‰ Python ç‰ˆæœ¬æ˜¯ 3.6.1ï¼Œä¸‹é¢æŒ‡ä»¤åªæœƒå°‡ Python æ›´æ–°è‡³ 3.6.x çš„æœ€æ–°ç‰ˆæœ¬ï¼š1$ conda update pythonè‹¥æ˜¯è¦æ›´æ–°åˆ°å…¶ä»–ç‰ˆæœ¬å¯æŒ‡å®š Python ç‰ˆæœ¬ï¼š1$ conda install python=3.6æ›´æ–° Anacondaæ›´æ–°å¥—ä»¶ç®¡ç†å™¨ï¼š1$ conda update condaæ³¨æ„ï¼šConda æœƒæ›´æ–°è©²ç‰ˆæœ¬åˆ—è¡¨ä¸­çš„æœ€é«˜ç‰ˆæœ¬ï¼Œå› æ­¤ Python 2.7 æ›´æ–°åˆ° 2.x ä¸­çš„æœ€é«˜ç‰ˆæœ¬ï¼Œè€Œ 3.x ç³»åˆ—ä¾æ­¤é¡æ¨ã€‚æ›´æ–° anaconda æ­¤ meta-packageï¼Œå¯æ›´æ–° Anaconda ç™¼è¡Œç‰ˆåŒ…å«çš„å¥—ä»¶ï¼š1$ conda update anacondaå¦‚æœè¦æ›´æ–° Python çš„ç‰¹å®šç‰ˆæœ¬ï¼š1$ conda install python==$pythonversion$åƒè€ƒé€£çµManaging packages | Conda documentationmacos - How do I upgrade to Python 3.6 with conda? - Stack Overflow","categories":[{"name":"Python","slug":"python","permalink":"https://titangene.github.io/categories/python/"}],"tags":[{"name":"Anaconda","slug":"anaconda","permalink":"https://titangene.github.io/tags/anaconda/"},{"name":"Conda","slug":"conda","permalink":"https://titangene.github.io/tags/conda/"},{"name":"Virtual Environment","slug":"virtual-environment","permalink":"https://titangene.github.io/tags/virtual-environment/"},{"name":"Package Management","slug":"package-management","permalink":"https://titangene.github.io/tags/package-management/"}]},{"title":"Windows Subsystem for Linux (WSL)","slug":"windows-subsystem-for-linux","date":"2018-11-17T11:00:45.000Z","updated":"2019-04-30T16:01:29.511Z","comments":true,"path":"article/windows-subsystem-for-linux.html","link":"","permalink":"https://titangene.github.io/article/windows-subsystem-for-linux.html","excerpt":"Windows Subsystem for Linux (ç°¡ç¨± WSL)ï¼Œç”± Microsoft èˆ‡ Canonical å…¬å¸åˆä½œé–‹ç™¼ï¼Œå¯ç›´æ¥åœ¨ Windows 10 ä¸­å»ºç«‹ä¸€å€‹ Linux å­ç³»çµ±ï¼ŒåŸç”ŸåŸ·è¡Œ Linuxï¼Œé‚„å¯è‡ªè¡Œé¸æ“‡ä½ æƒ³å®‰è£çš„ Linux ç™¼è¡Œç‰ˆï¼Œä¾‹å¦‚ï¼šUbuntuã€Kali Linuxã€SUSEã€‚","text":"Windows Subsystem for Linux (ç°¡ç¨± WSL)ï¼Œç”± Microsoft èˆ‡ Canonical å…¬å¸åˆä½œé–‹ç™¼ï¼Œå¯ç›´æ¥åœ¨ Windows 10 ä¸­å»ºç«‹ä¸€å€‹ Linux å­ç³»çµ±ï¼ŒåŸç”ŸåŸ·è¡Œ Linuxï¼Œé‚„å¯è‡ªè¡Œé¸æ“‡ä½ æƒ³å®‰è£çš„ Linux ç™¼è¡Œç‰ˆï¼Œä¾‹å¦‚ï¼šUbuntuã€Kali Linuxã€SUSEã€‚å•Ÿç”¨ Windows Subsystem for Linuxä½¿ç”¨ç³»çµ±ç®¡ç†è€…æ¬Šé™é–‹å•Ÿ PowerShellï¼Œä¸¦åŸ·è¡Œä¸‹é¢å‘½ä»¤å•Ÿç”¨ Windows Subsystem for Linux åŠŸèƒ½ï¼š1$ Enable-WindowsOptionalFeature -Online -FeatureName Microsoft-Windows-Subsystem-Linuxå¦‚æœé¡¯ç¤ºä¸‹é¢è¨Šæ¯å°±ä»£è¡¨ä½ æ²’æœ‰ä½¿ç”¨ç³»çµ±ç®¡ç†å“¡é–‹å•Ÿ PowerShellï¼š123456Enable-WindowsOptionalFeature : è¦æ±‚çš„ä½œæ¥­éœ€è¦æå‡çš„æ¬Šé™ã€‚ä½æ–¼ ç·šè·¯:1 å­—å…ƒ:1+ Enable-WindowsOptionalFeature -Online -FeatureName Microsoft-Windows- ...+ ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~ + CategoryInfo : NotSpecified: (:) [Enable-WindowsOptionalFeature], COMException + FullyQualifiedErrorId : Microsoft.Dism.Commands.EnableWindowsOptionalFeatureCommandæ¥è‘—ç­‰ä»–è·‘ä¸€ä¸‹â€¦ï¼šæ¥è‘—ä»–æœƒå•æ˜¯å¦è¦é‡å•Ÿé›»è…¦ï¼Œå› ç‚ºé è¨­æ˜¯ Yesï¼Œæ‰€ä»¥å¯ä»¥ç›´æ¥æŒ‰ Enterï¼šå…¶å¯¦ä¸Šé¢æŒ‡ä»¤å°±ç­‰æ–¼å»ã€Œæ§åˆ¶å° &gt; ç¨‹å¼é›† &gt; é–‹å•Ÿæˆ–é—œé–‰ Windows åŠŸèƒ½ã€é–‹å•Ÿã€Œé©ç”¨æ–¼ Linux çš„ Windows å­ç³»çµ±ã€ã€‚å®‰è£ Linux ç™¼è¡Œç‰ˆç³»çµ±çµ„å»º (build) å¿…é ˆè¦ Windows build 16215 æˆ–æ›´æ–°ç‰ˆæœ¬ã€‚è‹¥è¦æƒ³çŸ¥é“ç³»çµ±çµ„å»ºï¼Œå¯è‡³ Windows çš„ã€Œè¨­å®šã€å…§çš„ã€Œé—œæ–¼ã€å³å¯æŸ¥çœ‹ã€‚ä½ å¯ä»¥é¸æ“‡ä½ æƒ³å®‰è£çš„ Linux ç™¼è¡Œç‰ˆï¼šUbuntu 16.04 LTSUbuntu 18.04 LTSDebian GNU/LinuxOpenSUSE Leap 42SUSE Linux Enterprise Server 12Kali Linuxå¦‚æœåœ¨å®‰è£å¾Œç›´æ¥é–‹å•Ÿ Ubuntuï¼Œå°±æœƒé¡¯ç¤º Error: 0x8007007e éŒ¯èª¤å°±ä»£è¡¨ä½ æ²’æœ‰å•Ÿç”¨ Windows Subsystem for Linux åŠŸèƒ½ï¼Œè©³æƒ…è«‹åƒè€ƒä¸Šé¢ï¼š1234The WSL optional component is not enabled. Please enable it and try again.See https://aka.ms/wslinstall for details.Error: 0x8007007ePress any key to continue...å®‰è£å¾Œå•Ÿå‹• Linux ç™¼è¡Œç‰ˆï¼Œæ­¤æ™‚æœƒé–‹å•Ÿä¸€å€‹ console è¦–çª—ã€‚å› ç‚ºæ˜¯ç¬¬ä¸€æ¬¡é–‹å•Ÿï¼Œæ‰€ä»¥æœƒå…ˆå®‰è£ WSLï¼Œç­‰å®ƒå®‰è£å®Œå¾Œï¼Œå°±æœƒçœ‹åˆ°ä¸‹é¢ç•«é¢ï¼Œç³»çµ±è¦ä½ å»ºç«‹ä¸€å€‹æ–°çš„ Unix ä½¿ç”¨è€…åç¨±ï¼š12345Installing, this may take a few minutes...Installation successful!Please create a default UNIX user account. The username does not need to match your Windows username.For more information visit: https://aka.ms/wslusersEnter new UNIX username:æ¥è‘—æ˜¯è¨­å®šæ­¤ä½¿ç”¨è€…çš„å¯†ç¢¼ï¼Œé€™é‚Šçš„ä½¿ç”¨è€…èˆ‡ä½ çš„ Windows ä½¿ç”¨è€…åç¨±å’Œå¯†ç¢¼æ²’æœ‰ä»»ä½•é—œä¿‚ã€‚è©³æƒ…å¯åƒè€ƒå®˜æ–¹çš„ Linux User Account and Permissions | Microsoft Docs æ–‡ä»¶ã€‚å¦‚æœé¡¯ç¤º $ å°±ä»£è¡¨è¨­å®šå®Œæˆå›‰ï¼åŸ·è¡Œ lsb_release -a æŒ‡ä»¤å°±æœƒçœ‹åˆ° Linux çš„ç³»çµ±ç‰ˆæœ¬ï¼šåœ¨å…¶ä»–çµ‚ç«¯ä½¿ç”¨ Bashå¦‚æœåœ¨ä½¿ç”¨ CMD ã€ PowerShell æˆ–å…¶ä»–çµ‚ç«¯ (ä¾‹å¦‚æˆ‘å¸¸ç”¨çš„ Cmder) æ™‚æƒ³ç”¨ bash shellï¼Œå¯ä½¿ç”¨ bash æŒ‡ä»¤å°±å¯ä»¥å•Ÿå‹•æ–°çš„ Ubuntu shellï¼š1$ bashå­˜å–ç›®éŒ„å¦‚æœæƒ³å­˜å– D:\\projectï¼Œåœ¨æ­¤ç’°å¢ƒä¸‹çš„è·¯å¾‘å°±æ˜¯ /mnt/d/projectã€‚å°çµå¦‚æœæœ‰åœ¨è·¨å¹³å°é–‹ç™¼æˆ–ç¶­é‹çš„æœ‹å‹ï¼Œé€™å€‹åŠŸèƒ½æ‡‰è©²æ˜¯ä¸€ç›´ä»¥ä¾†çš„é¡˜æœ›å§ï¼Ÿè®“ä½ åœ¨ Windows ä¸Šå¯ä»¥ç›´æ¥è™•ç†äº‹æƒ…ï¼Œä¸ç”¨å†å¤šé–‹ VM ä¾†ä½¿ç”¨ï¼Œä¸åªçœè³‡æºï¼Œä¹Ÿçœç¡¬ç¢Ÿç©ºé–“ï¼Œé‡é»æ˜¯ä¸ç”¨ç­‰ VM é–‹æ©Ÿâ€¦åƒè€ƒé€£çµInstall the Linux Subsystem on Windows 10 | Microsoft Docsã€WSLã€‘Windows Subsystem for Linux å®‰è£åŠåŸºæœ¬é…ç½®ï¼ | å°ç£å¾®è»Ÿå­¸ç”Ÿå¤§ä½¿Bash on Ubuntu on Windows çš„ç°¡å–®ä½¿ç”¨ | Heresyâ€™s Space","categories":[{"name":"Linux","slug":"linux","permalink":"https://titangene.github.io/categories/linux/"},{"name":"Windows","slug":"linux/windows","permalink":"https://titangene.github.io/categories/linux/windows/"}],"tags":[{"name":"Ubuntu","slug":"ubuntu","permalink":"https://titangene.github.io/tags/ubuntu/"},{"name":"WSL","slug":"wsl","permalink":"https://titangene.github.io/tags/wsl/"}]},{"title":"GitHub ç¸®ç¶²å€æœå‹™ Git.io","slug":"github-url-shortener","date":"2018-10-31T16:58:19.000Z","updated":"2019-02-07T11:20:54.891Z","comments":true,"path":"article/github-url-shortener.html","link":"","permalink":"https://titangene.github.io/article/github-url-shortener.html","excerpt":"æœ€è¿‘ç™¼ç¾åŸä¾† Github ä¹Ÿæœ‰æä¾›ç¸®ç¶²å€ (URL Shortener) æœå‹™ã€ŒGit.ioã€ï¼Œå®ƒåªé©ç”¨æ–¼ gist.github.com åŠ github.com å…©å€‹ hostnameã€‚","text":"æœ€è¿‘ç™¼ç¾åŸä¾† Github ä¹Ÿæœ‰æä¾›ç¸®ç¶²å€ (URL Shortener) æœå‹™ã€ŒGit.ioã€ï¼Œå®ƒåªé©ç”¨æ–¼ gist.github.com åŠ github.com å…©å€‹ hostnameã€‚ä¸‹åˆ—ç¶²å€éƒ½å¯ä»¥é€é Git.io ä¾†å»ºç«‹ç¸®ç¶²å€ï¼šGithub å€‹äººæˆ–çµ„ç¹”å°ˆæ¥­ ( https://github.com/&lt;github-id&gt; )Github repository ( https://github.com/&lt;github-id&gt;/&lt;repo-name&gt; ) æˆ– repository å…§ç›®éŒ„æˆ–æª”æ¡ˆGist ( https://gist.github.com/&lt;github-id&gt;/&lt;gist-id&gt; )Git.io æœ‰å…©ç¨®å»ºç«‹çŸ­ç¶²å€çš„æ–¹æ³•ï¼Œä¸‹é¢æœƒåˆ†åˆ¥ä»‹ç´¹ï¼šç›´æ¥åˆ° Git.io ç·šä¸Šè¨­å®šä½¿ç”¨ curl æŒ‡ä»¤è¨­å®šï¼šGit.io: GitHub URL Shortener | GitHub BlogGit.io ç·šä¸Šè¨­å®šæœ€ç°¡å–®çš„æ–¹æ³•ç•¶ç„¶æ˜¯ç›´æ¥æ‰“é–‹ Git.ioï¼Œæ¥è‘—è¼¸å…¥ç¶²å€ä¸¦é»æ“Šã€Œshortenã€æŒ‰éˆ•å°±æœƒå°‡ä½ å‰›å‰›è¼¸å…¥çš„ç¶²å€è®ŠæˆçŸ­ç¶²å€ï¼ŒçŸ­ç¶²å€çš„æ ¼å¼æ˜¯ git.io/xxxã€‚ä½†ç¼ºé»æ˜¯ç„¡æ³•è‡ªè¨‚çŸ­ç¶²å€åç¨±ï¼Œé è¨­æ˜¯è‡ªå‹•éš¨æ©Ÿè‹±æ–‡ + æ•¸å­—çš„å­—ä¸²ã€‚ä½¿ç”¨ curl æŒ‡ä»¤å»ºç«‹çŸ­ç¶²å€-iã€--includeï¼šé¡¯ç¤º HTTP response headers-Fã€--form &lt;name=content&gt;ï¼šè¨­å®šè¡¨å–®è³‡æ–™ï¼ŒContent-Type æœƒè¢«è¨­ç‚º multipart/form-data1$ curl -i https://git.io -F \"url=&lt;æƒ³ç¸®çŸ­çš„ç¶²å€&gt;\" -F \"code=&lt;è‡ªè¨‚çŸ­ç¶²å€åç¨±&gt;\"ä¾‹å¦‚æˆ‘æƒ³å°‡è‡ªå·±çš„ Github profile URLï¼šgithub.com/titangene ç¸®çŸ­æˆ git.io/titanï¼Œå°±è¦åŸ·è¡Œä¸‹é¢æŒ‡ä»¤ï¼š1234567$ curl -i https://git.io -F \"url=https://github.com/titangene\" -F \"code=titan\"HTTP/1.1 201 Created...Location: https://git.io/titan...$ curl -i https://git.io -F \"url=https://titangene.github.io/\" -F \"code=titan-blog\"åªè¦è¼¸å…¥ä¸‹é¢æŒ‡ä»¤å°±å¯ä»¥ç¢ºèªæ˜¯å¦å»ºç«‹æˆåŠŸ12345$ curl -i https://git.io/titanHTTP/1.1 302 Found...Location: https://github.com/titangene...[å°æ’æ›²] ç¸®ç¶²å€ä¸å°å¿ƒè¨­å®šéŒ¯èª¤ä¸€é–‹å§‹åœ¨ Git.io æ¸¬è©¦æ™‚ï¼Œç›´æ¥ç”¨è‡ªå·±çš„ Github profile URL ( github.com/titangene ) ä¾†ç”¢ç”Ÿé è¨­éš¨æ©Ÿè‹±æ–‡ + æ•¸å­—çš„çŸ­ç¶²å€ï¼Œæƒ³è¦ä¿®æ”¹æˆ git.io/titan å»æ²’è¾¦æ³•ï¼é€™æ˜¯å› ç‚º Git.io æ²’æœ‰ç›´æ¥æä¾›ä¿®æ”¹çŸ­ç¶²å€çš„åŠŸèƒ½ã€‚å¾Œä¾† Google ä¸€ä¸‹æ‰ç™¼ç¾åªèƒ½è¯ç¹« Github å®¢æœä¾†å¹«å¿™åˆªé™¤çŸ­ç¶²å€ï¼Œç„¶å¾Œå†è‡ªè¡Œé‡æ–°è¨­å®šã€‚éäº†ä¸åˆ°åŠå¤©å®¢æœå°±å›ä¿¡å¹«æˆ‘è§£æ±ºäº†ï¼çœŸæ˜¯å¤ªæ„Ÿè¬ Github å®¢æœäº†ï¼","categories":[{"name":"Other","slug":"other","permalink":"https://titangene.github.io/categories/other/"}],"tags":[{"name":"Github","slug":"github","permalink":"https://titangene.github.io/tags/github/"},{"name":"URL","slug":"url","permalink":"https://titangene.github.io/tags/url/"},{"name":"URL Shortener","slug":"url-shortener","permalink":"https://titangene.github.io/tags/url-shortener/"}]},{"title":"Flutter è‡ªè¨‚å­—å‹","slug":"flutter-custom-fonts","date":"2018-10-29T03:40:00.000Z","updated":"2019-04-30T15:57:38.523Z","comments":true,"path":"article/flutter-custom-fonts.html","link":"","permalink":"https://titangene.github.io/article/flutter-custom-fonts.html","excerpt":"é›–ç„¶ Android å’Œ iOS å…§å»ºéƒ½æœ‰å­—å‹ï¼Œä½†å¸¸æœ‰è‡ªè¨‚å­—å‹çš„éœ€æ±‚ï¼Œæ‰€ä»¥é€™ç¯‡æœƒæ•™ä½ å¦‚ä½•åœ¨ Flutter ä½¿ç”¨è‡ªè¨‚å­—å‹ã€‚","text":"é›–ç„¶ Android å’Œ iOS å…§å»ºéƒ½æœ‰å­—å‹ï¼Œä½†å¸¸æœ‰è‡ªè¨‚å­—å‹çš„éœ€æ±‚ï¼Œæ‰€ä»¥é€™ç¯‡æœƒæ•™ä½ å¦‚ä½•åœ¨ Flutter ä½¿ç”¨è‡ªè¨‚å­—å‹ã€‚å°‡å­—å‹æª”æ”¾å…¥å°ˆæ¡ˆè³‡æ–™å¤¾å…§æ­¤ç¯„ä¾‹æ˜¯æ”¾åœ¨ ./assets/fonts è³‡æ–™å¤¾å…§ï¼š1234567assets/ fonts/ FiraCode-Medium.ttf mononoki-Bold.ttf mononoki-BoldItalic.ttf mononoki-Italic.ttf mononoki-Regular.ttfåœ¨ pubspec.yaml å®šç¾©å­—å‹è³‡è¨Š123456789101112131415flutter: fonts: - family: FiraCode fonts: - asset: assets/fonts/FiraCode-Medium.ttf - family: Mononoki fonts: - asset: assets/fonts/mononoki-Regular.ttf - asset: assets/fonts/mononoki-Bold.ttf weight: 700 - asset: assets/fonts/mononoki-Italic.ttf style: italic - asset: assets/fonts/mononoki-BoldItalic.ttf weight: 700 style: italicè¨­å®šé è¨­å­—å‹12345MaterialApp( title: 'Custom Fonts', theme: ThemeData(fontFamily: 'FiraCode'), home: MyHomePage(title: 'Custom Fonts'),);åœ¨ç‰¹å®š Widget è¨­å®šå­—å‹123456789Text( 'Custom Fonts', style: TextStyle( fontFamily: 'Mononoki', fontSize: 30.0, fontWeight: FontWeight.w700, fontStyle: FontStyle.italic, ),)å®Œæ•´ç¯„ä¾‹ç¨‹å¼ç¢¼123456789101112131415161718192021222324252627282930313233343536373839404142434445464748495051525354555657585960616263646566676869707172import 'package:flutter/material.dart';void main() =&gt; runApp(new MyApp());class MyApp extends StatelessWidget &#123; @override Widget build(BuildContext context) &#123; return new MaterialApp( title: 'Custom Fonts', theme: new ThemeData( primarySwatch: Colors.blue, fontFamily: 'FiraCode', ), home: new MyHomePage(title: 'Custom Fonts'), ); &#125;&#125;class MyHomePage extends StatelessWidget &#123; MyHomePage(&#123;Key key, this.title&#125;) : super(key: key); final String title; @override Widget build(BuildContext context) &#123; return new Scaffold( appBar: new AppBar( title: new Text(this.title), ), body: Column( children: &lt;Widget&gt;[ new Text( '&lt;-- Custom Fonts -&gt;&gt;', style: TextStyle(fontSize: 30.0), ), new Text( 'Custom Fonts', style: TextStyle( fontFamily: 'Mononoki', fontSize: 30.0, ), ), new Text( 'Custom Fonts', style: TextStyle( fontFamily: 'Mononoki', fontSize: 30.0, fontWeight: FontWeight.w700, ), ), new Text( 'Custom Fonts', style: TextStyle( fontFamily: 'Mononoki', fontSize: 30.0, fontStyle: FontStyle.italic, ), ), new Text( 'Custom Fonts', style: TextStyle( fontFamily: 'Mononoki', fontSize: 30.0, fontWeight: FontWeight.w700, fontStyle: FontStyle.italic, ), ), ], ), ); &#125;&#125;è©³æƒ…å¯åƒè€ƒ Using custom fonts - Flutter å®˜æ–¹æ–‡ä»¶","categories":[{"name":"Flutter","slug":"flutter","permalink":"https://titangene.github.io/categories/flutter/"},{"name":"Mobile App","slug":"flutter/mobile-app","permalink":"https://titangene.github.io/categories/flutter/mobile-app/"}],"tags":[{"name":"Dart","slug":"dart","permalink":"https://titangene.github.io/tags/dart/"},{"name":"Font","slug":"font","permalink":"https://titangene.github.io/tags/font/"}]},{"title":"Flutter ç’°å¢ƒå»ºç½® (Windows)","slug":"flutter-install-on-windows","date":"2018-10-22T22:58:44.000Z","updated":"2019-04-30T15:57:33.487Z","comments":true,"path":"article/flutter-install-on-windows.html","link":"","permalink":"https://titangene.github.io/article/flutter-install-on-windows.html","excerpt":"æœ€è¿‘å‰›æ¥è§¸ Flutterï¼Œæ–¼æ˜¯å°±æŠŠåœ¨ Windows ä¸Šå»ºç½®ç’°å¢ƒçš„è¨˜éŒ„å¯«æˆä¸€ç¯‡ç­†è¨˜ï¼Œè£¡é¢åŒ…æ‹¬ Android Studio å’Œ VS Code çš„é–‹ç™¼æµç¨‹ã€‚","text":"æœ€è¿‘å‰›æ¥è§¸ Flutterï¼Œæ–¼æ˜¯å°±æŠŠåœ¨ Windows ä¸Šå»ºç½®ç’°å¢ƒçš„è¨˜éŒ„å¯«æˆä¸€ç¯‡ç­†è¨˜ï¼Œè£¡é¢åŒ…æ‹¬ Android Studio å’Œ VS Code çš„é–‹ç™¼æµç¨‹ã€‚è©³æƒ…å¯åƒè€ƒå®˜æ–¹é€£çµï¼šGet Started: Install on Windows | Flutterç³»çµ±è¦æ±‚OSï¼šWindows 7 SP1 æˆ–ä»¥ä¸Š (64-bit)ç¡¬ç¢Ÿç©ºé–“ï¼š400 MB (ä¸åŒ…æ‹¬ IDE å’Œå·¥å…·çš„ç©ºé–“)å·¥å…·PowerShell 5.0 æˆ–æ›´æ–°ç‰ˆGit for Windows (å‹¾é¸ Use Git from the Windows Command Prompt é¸é …ï¼Œè‹¥æ²’æ‰“å‹¾å¯è‡ªè¡Œå°‡ Git å®‰è£ç›®éŒ„å…§çš„ bin è³‡æ–™å¤¾è¨­å®šç‚º Path ç’°å¢ƒè®Šæ•¸ï¼Œé è¨­ç›®éŒ„ç‚º C:\\Program Files\\Git\\bin )å®‰è£ Flutter SDKä¸‹è¼‰ Flutter SDKï¼Œå¯ä¸‹è¼‰æ­·å²ç‰ˆæœ¬ï¼Œä½†å»ºè­°å®‰è£æ–°ç‰ˆã€‚è§£å£“æª”å…§æœ‰ä¸€å€‹ flutter è³‡ç­å¤¾ï¼Œå°‡æ­¤è³‡æ–™å¤¾æ”¾åœ¨ Flutter SDK æ‰€éœ€çš„å®‰è£ç›®éŒ„ (e.g D:\\dev\\flutterï¼Œè«‹å‹¿å°‡ flutter è³‡ç­å¤¾æ”¾åœ¨éœ€è¦æé«˜æ¬Šé™ä¹‹é¡çš„ç›®éŒ„å…§ï¼Œe.g. C:\\Program Files\\ )ã€‚å°‡ flutter\\bin çš„å®Œæ•´ç›®éŒ„ (e.g. D:\\dev\\flutter\\bin ) åŠ å…¥ Path ç’°å¢ƒè®Šæ•¸ (å„å®Œæ•´è·¯å¾‘è¨˜å¾—ç”¨ ; åˆ†è™Ÿåˆ†éš”)æ¥è‘—å°±å¯ä»¥åœ¨ Console å…§åŸ·è¡Œ Flutter commandsåŸ·è¡Œ flutter --version æŒ‡ä»¤ç¢ºå®šå·²æˆåŠŸå®‰è£ Flutter SDK12345$ flutter --versionFlutter 0.7.3 â€¢ channel beta â€¢ https://github.com/flutter/flutter.gitFramework â€¢ revision 3b309bda07 (12 days ago) â€¢ 2018-08-28 12:39:24 -0700Engine â€¢ revision af42b6dc95Tools â€¢ Dart 2.1.0-dev.1.0.flutter-ccb16f7282ä¹‹å¾Œè«‹å®šæœŸåŸ·è¡Œ flutter upgrade æŒ‡ä»¤æ›´æ–° Flutter (å› ç‚ºç›®å‰é‚„åœ¨ betaï¼Œå¤§ç´„å¹¾é€±å°±æœƒæœ‰æ–°ç‰ˆ)åŸ·è¡Œ flutter --version æŒ‡ä»¤å¾Œï¼Œè‹¥çœ‹åˆ°ä¸‹é¢ç•«é¢å°±ä»£è¡¨ç¾åœ¨æœ‰æ–°ç‰ˆå¯ä»¥æ›´æ–°ï¼š123456789101112$ flutter --version â•”â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•— â•‘ A new version of Flutter is available! â•‘ â•‘ â•‘ â•‘ To update to the latest version, run \"flutter upgrade\". â•‘ â•šâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•Flutter 0.7.3 â€¢ channel beta â€¢ https://github.com/flutter/flutter.gitFramework â€¢ revision 3b309bda07 (3 weeks ago) â€¢ 2018-08-28 12:39:24 -0700Engine â€¢ revision af42b6dc95Tools â€¢ Dart 2.1.0-dev.1.0.flutter-ccb16f7282åŸ·è¡Œ flutter upgrade æŒ‡ä»¤æ›´æ–° Flutterï¼š123456789101112131415161718$ flutter upgradeUpgrading Flutter from D:\\dev\\flutter......Flutter 0.7.3 â€¢ channel beta â€¢ https://github.com/flutter/flutter.gitFramework â€¢ revision 3b309bda07 (3 weeks ago) â€¢ 2018-09-07 12:33:05 -0700Engine â€¢ revision 58a1894a1cTools â€¢ Dart 2.1.0-dev.1.0.flutter-ccb16f7282Running flutter doctor...Doctor summary (to see all details, run flutter doctor -v):[âˆš] Flutter (Channel beta, v0.8.2, on Microsoft Windows [Version 10.0.17134.285], locale zh-TW)[âˆš] Android toolchain - develop for Android devices (Android SDK 28.0.2)[âˆš] Android Studio (version 3.1)[âˆš] VS Code (version 1.27.2)[!] Connected devices ! No devices available! Doctor found issues in 1 category.åœ¨åŸ·è¡Œä¸€æ¬¡ flutter --version ç¢ºèªå·²æ›´æ–°è‡³æ–°çš„ç‰ˆæœ¬ï¼š12345$ flutter --versionFlutter 0.8.2 â€¢ channel beta â€¢ https://github.com/flutter/flutter.gitFramework â€¢ revision 5ab9e70727 (13 days ago) â€¢ 2018-09-07 12:33:05 -0700Engine â€¢ revision 58a1894a1cTools â€¢ Dart 2.1.0-dev.3.1.flutter-760a9690c2flutter doctorä¸‹é¢æŒ‡ä»¤æ˜¯ç”¨ä¾†æŸ¥çœ‹æ˜¯å¦éœ€è¦å®‰è£ä»»ä½•ä¾è³´æ‰èƒ½å®Œæˆè¨­å®šï¼Œå› æ­¤ä»–æœƒæª¢æŸ¥ä½ çš„ç’°å¢ƒä¸¦é¡¯ç¤ºæª¢æŸ¥å ±å‘Šï¼š1$ flutter doctorDart SDK is bundled with Flutterï¼Œä¸ç”¨å¦å¤–å®‰è£ Dartã€‚å¾æª¢æŸ¥å ±å‘Šçš„è¼¸å‡ºä¸­å¯ä»¥äº†è§£éœ€è¦å®‰è£çš„å…¶ä»–è»Ÿé«”æˆ–åŸ·è¡Œçš„å…¶ä»–ä»»å‹™ (ä»¥ç²—é«”é¡¯ç¤º)ã€‚ä¾‹å¦‚ï¼š123456789101112$ flutter doctorDoctor summary (to see all details, run flutter doctor -v):[âˆš] Flutter (Channel beta, v0.7.3, on Microsoft Windows [Version 10.0.17134.228], locale zh-TW)[!] Android toolchain - develop for Android devices (Android SDK 28.0.2) X Android license status unknown.[âˆš] Android Studio (version 3.1) X Flutter plugin not installed; this adds Flutter specific functionality. X Dart plugin not installed; this adds Dart specific functionality.[!] Connected devices ! No devices available! Doctor found issues in 2 categories.ä¸‹é¢æœƒä»‹ç´¹å¦‚ä½•åŸ·è¡Œé€™äº›ä»»å‹™ä¸¦å®Œæˆè¨­å®šéç¨‹ã€‚å¯å†æ¬¡åŸ·è¡Œ flutter doctor æŒ‡ä»¤ä¾†é©—è­‰æ˜¯å¦å·²æ­£ç¢ºè¨­å®šæ‰€æœ‰å…§å®¹ã€‚å¦‚æœå·²é©—è­‰è¨­å®šæ‰€æœ‰å…§å®¹ï¼Œå°±æœƒçœ‹åˆ°ä¸‹é¢è¼¸å‡ºçµæœï¼š12345678$ flutter doctorDoctor summary (to see all details, run flutter doctor -v):[âˆš] Flutter (Channel beta, v0.7.3, on Microsoft Windows [Version 10.0.17134.285], locale zh-TW)[âˆš] Android toolchain - develop for Android devices (Android SDK 28.0.2)[âˆš] Android Studio (version 3.1)[âˆš] Connected devices (1 available)â€¢ No issues found!åŠ ä¸Šåƒæ•¸ -vï¼Œå¯ä»¥çœ‹æ›´è©³ç´°çš„é©—è­‰èªªæ˜ï¼š1234567891011121314151617181920212223242526$ flutter doctor -v[âˆš] Flutter (Channel beta, v0.7.3, on Microsoft Windows [Version 10.0.17134.285], locale zh-TW) â€¢ Flutter version 0.7.3 at D:\\dev\\flutter â€¢ Framework revision 3b309bda07 (3 weeks ago), 2018-08-28 12:39:24 -0700 â€¢ Engine revision af42b6dc95 â€¢ Dart version 2.1.0-dev.1.0.flutter-ccb16f7282[âˆš] Android toolchain - develop for Android devices (Android SDK 28.0.2) â€¢ Android SDK at C:\\Users\\Titan\\AppData\\Local\\Android\\sdk â€¢ Android NDK location not configured (optional; useful for native profiling support) â€¢ Platform android-28, build-tools 28.0.2 â€¢ ANDROID_HOME = C:\\Users\\Titan\\AppData\\Local\\Android\\sdk â€¢ Java binary at: C:\\Program Files\\Android\\Android Studio\\jre\\bin\\java â€¢ Java version OpenJDK Runtime Environment (build 1.8.0_152-release-1024-b02) â€¢ All Android licenses accepted.[âˆš] Android Studio (version 3.1) â€¢ Android Studio at C:\\Program Files\\Android\\Android Studio â€¢ Flutter plugin version 28.0.1 â€¢ Dart plugin version 173.4700 â€¢ Java version OpenJDK Runtime Environment (build 1.8.0_152-release-1024-b02)[âˆš] Connected devices (1 available) â€¢ SM N950F â€¢ 988a98444d********** â€¢ android-arm64 â€¢ Android 8.0.0 (API 26)â€¢ No issues found!Android è¨­å®šFlutter ä¾è³´æ–¼ Android Studio ä»¥æä¾› Android å¹³å°çš„ä¾è³´æ€§ã€‚ä½†ä¹Ÿå¯ä»¥ä½¿ç”¨å…¶ä»–ç·¨è¼¯å™¨ä¾†å¯« Flutter Appã€‚å®‰è£ Java JDKå®‰è£ JDKå°‡ Java JDK å®‰è£ç›®éŒ„è¨­å®šç‚º JAVA_HOME ç’°å¢ƒè®Šæ•¸ (e.g. C:\\Program Files\\Java\\jdk1.8.0_151 )ï¼Œä¸¦åœ¨å°‡ Java JDK å®‰è£ç›®éŒ„å…§çš„ bin è³‡æ–™å¤¾è¨­å®šç‚º Path ç’°å¢ƒè®Šæ•¸ (e.g. C:\\Program Files\\Java\\jdk1.8.0_151\\binï¼Œä¹Ÿå¯è¨­å®šç‚º %JAVA_HOME%\\bin )å®‰è£ Android Studioå®‰è£ Android Studioï¼Œè«‹å®‰è£ Recommended (å»ºè­°) ç‰ˆåŸ·è¡Œ Android Studioï¼Œä¸¦ç€è¦½ Android Studio Setup Wizardï¼Œå®‰è£æœ€æ–°çš„ Android SDKã€Android SDK Platform-Toolsã€Android SDK Build-Toolsï¼Œé€™äº›éƒ½æ˜¯ Flutter åœ¨é–‹ç™¼ Android æ™‚æ‰€å¿…é ˆçš„ã€‚å°‡ Android SDK ç›®éŒ„è¨­å®šç‚º ANDROID_HOME ç’°å¢ƒè®Šæ•¸ (é è¨­ç›®éŒ„ç‚º C:\\Users\\Titan\\AppData\\Local\\Android\\sdk )å®šæœŸæ›´æ–° Android SDK (æ–¼ Android Studio &gt; Configure &gt; SDK Manager å®‰è£)è¨­å®šä½ çš„ Android è£ç½®æƒ³åœ¨ Android è£ç½®ä¸ŠåŸ·è¡Œå’Œæ¸¬è©¦ Flutter Appï¼Œéœ€è¦ Android 4.1 (API level 16) æˆ–æ›´é«˜ç‰ˆæœ¬çš„ Android è¨­å‚™ã€‚è£ç½®è«‹é–‹å•Ÿ é–‹ç™¼è€…æ¨¡å¼ å…§çš„ USB åµéŒ¯ï¼Œè©³æƒ…å¯åƒè€ƒ Configure on-device developer options | Android Developers æ­¤ Android å®˜æ–¹æ–‡ä»¶å®‰è£ Google USB Driver (é™ Windows)ä½¿ç”¨ USB ç·šå°‡è£ç½®é€£æ¥è‡³é›»è…¦ï¼Œå¦‚æœä½ çš„è£ç½®æœ‰å‡ºç¾æç¤ºï¼Œè«‹æˆæ¬Šä½ çš„é›»è…¦å¯è¨ªå•ä½ çš„è£ç½®é–‹å•Ÿçµ‚ç«¯æ©Ÿï¼ŒåŸ·è¡Œ flutter devices æŒ‡ä»¤ä»¥é©—è­‰ Flutter æ˜¯å¦æˆåŠŸé€£çµ Android è£ç½®12345# åƒæˆ‘é€£æ¥åˆ° Note 8$ flutter devices1 connected device:SM N950F â€¢ 988a98444d********** â€¢ android-arm64 â€¢ Android 8.0.0 (API 26)Flutter é è¨­æœƒä»¥ adb å·¥å…·åŸºæ–¼çš„ Android SDK ç‰ˆæœ¬ä¾†ä½¿ç”¨ï¼Œè‹¥æƒ³ç”¨å…¶ä»–ç‰ˆæœ¬çš„ Android SDKï¼Œå¯è¨­å®šä½ æ‰€éœ€çš„ Android SDK ç›®éŒ„ç‚º ANDROID_HOME ç’°å¢ƒè®Šæ•¸ã€‚å¦‚æœåŸ·è¡Œ flutter runæŒ‡ä»¤ï¼Œè€Œä¸”æˆåŠŸå°‡ App å®‰ç½®æ‰‹æ©Ÿä¸¦åŸ·è¡Œï¼Œå°±æœƒçœ‹åˆ° App çš„ç•«é¢è¨­å®š Android æ¨¡æ“¬å™¨ (emulator)æƒ³åœ¨ Android æ¨¡æ“¬å™¨ä¸ŠåŸ·è¡Œå’Œæ¸¬è©¦ Flutter Appï¼Œè«‹ä¾ç…§ä¸‹é¢æ­¥é©Ÿï¼šåœ¨ä¸»æ©Ÿä¸Šå•Ÿç”¨ VM accelerationå•Ÿå‹• Android Studio &gt; Tools &gt; AVD Manager ä¸¦é»é¸ Create Virtual Deviceé¸æ“‡è¨­å‚™å®šç¾©ï¼Œç„¶å¾Œé»æ“‡ Nexté¸æ“‡ä½ æ‰€éœ€çš„ Android ç‰ˆæœ¬çš„ OS imageï¼Œç„¶å¾Œé»é¸ Next (å»ºè­°é¸æ“‡ x86 æˆ– x86_64 image)åœ¨ Emulated Performance æ¬„ä½è«‹é¸æ“‡ Hardware - GLES 2.0 ä»¥å•Ÿç”¨ hardware accelerationé©—è­‰ AVD è¨­å®šæ˜¯å¦æ­£ç¢ºï¼Œè‹¥ç¢ºå®šè«‹é»é¸ Finishåœ¨ Android Virtual Device Manager ä¸­ï¼Œé¸æ“‡æŸå°æ¨¡æ“¬å™¨ä¸¦é»æ“Š Runæœ‰é—œä¸Šè¿°æ­¥é©Ÿçš„è©³æƒ…å¯åƒè€ƒ Managing AVDsè¨­å®šç·¨è¼¯å™¨è¨­å®š Android Studioå®‰è£ Flutter å’Œ Dart plugins (å¤–æ›)ï¼Œæœ‰å…©å€‹ plugin æ”¯æ´ Flutterï¼šFlutter å¤–æ›ï¼šæ”¯æŒ Flutter é–‹ç™¼äººå“¡å·¥ä½œæµç¨‹ (running, debugging, hot reload â€¦ ç­‰)Dart å¤–æ›ï¼šæä¾›ç¨‹å¼ç¢¼åˆ†æ (è¼¸å…¥æ™‚çš„ç¨‹å¼ç¢¼é©—è­‰ã€ç¨‹å¼ç¢¼è‡ªå‹•è£œå…¨)å®‰è£æ­¥é©Ÿï¼šåŸ·è¡Œ Android Studioé–‹å•Ÿå¤–æ›é¸é … (File &gt; Settings &gt; Plugins)é»é¸ Browse repositoriesâ€¦ï¼Œæ¥è‘—æœå°‹ Flutter ä¸¦é¸æ“‡ä¸¦å®‰è£åç‚º Flutter çš„ plugin (è«‹æ³¨æ„ï¼Œå®‰è£ Flutter å¤–æ›æ™‚æœƒåŒæ™‚å®‰è£ Dart èªè¨€å¤–æ›)é»æ“Š Restart Android Studioè¨­å®š VS Codeå®‰è£ Flutter pluginï¼šå®‰è£ Flutter æ­¤æ“´å……åŠŸèƒ½ï¼Œä¸¦é‡å•Ÿ VS Codeã€‚ä½¿ç”¨ Flutter Doctor é©—è­‰ä½ çš„è¨­å®šç’°å¢ƒï¼šæŒ‰ F1 æˆ– ctrl + shift + p å¾Œï¼Œè¼¸å…¥ Flutter ä¸¦é»é¸ Flutter: Run Flutter Doctor å³å¯è‡³ OUTPUT (è¼¸å‡º) æŸ¥çœ‹é©—è­‰çµæœã€‚ä½¿ç”¨ Android Studio é–‹ç™¼å»ºç«‹æ–° appåœ¨ Android Studio ä¸­å»ºç«‹ Flutter å°ˆæ¡ˆ ( File &gt; New &gt; New Flutter Projectâ€¦ )æ¥è‘—é¸æ“‡ Flutter Applicationï¼Œä¸¦é»é¸ Nextè«‹è¨­å®šå°ˆæ¡ˆåç¨±ã€ç¢ºå®š Flutter SDK ç›®éŒ„ã€è¨­å®šå°ˆæ¡ˆå„²å­˜ä½ç½®èˆ‡å¡«å¯«å°ˆæ¡ˆçš„ç°¡å–®æè¿°å¾Œï¼Œé»é¸ Nextæœ€å¾Œè¼¸å…¥å…¬å¸ç¶²åŸŸ (e.g. example.com) å¾Œï¼Œé»é¸ Finish å³å¯å»ºç«‹æ–°çš„ Flutter å°ˆæ¡ˆåŸ·è¡Œ appä¸‹åœ–ç‚º Android Studio çš„å·¥å…·åˆ—ï¼šåœ–ç‰‡ä¾†æºï¼šGet Started: Test Drive | Flutteråœ¨ target selector ä¸­ï¼Œé¸æ“‡å·²åŸ·è¡Œçš„ Android è£ç½®ï¼Œè‹¥ç•¶å‰æœªå•Ÿå‹•æˆ–æœªé€£æ¥ä»»ä½• Android è£ç½®ï¼Œé¸æ“‡æŸä¸€æ¨¡æ“¬å™¨æ™‚ï¼ŒAndroid Studio å°±æœƒé–‹å•Ÿè©²é¸æ“‡çš„æ¨¡æ“¬å™¨ã€‚å¦‚æœæ²’æœ‰å¯ç”¨çš„è£ç½®ï¼Œå¯è‡³å‰é¢ä»‹ç´¹çš„ è¨­å®š Android æ¨¡æ“¬å™¨ æ®µè½ä¾†æ–°å»ºæ¨¡æ“¬å™¨ã€‚é»æ“Š Run åœ–ç¤ºåŸ·è¡Œ appç¨å¾Œå°±æœƒåœ¨æ¨¡æ“¬å™¨æˆ–è£ç½®ä¸Šçœ‹åˆ°ä¸‹åœ–çš„ app ç•«é¢ç­‰å¾…çš„éç¨‹ä¸­æœƒåˆå§‹åŒ– gradlegradle æœƒ resolve dependencieså°‡å°ˆæ¡ˆè½‰æˆ apkå°‡ apk å®‰è£ä¸¦åŸ·è¡Œæ–¼è£ç½®ä¸Š1234567891011121314151617181920Launching lib\\main.dart on Android SDK built for x86 64 in debug mode...Initializing gradle...Resolving dependencies...Running 'gradlew assembleDebug'...Built build\\app\\outputs\\apk\\debug\\app-debug.apk.Installing build\\app\\outputs\\apk\\app.apk...D/OpenGLRenderer( 4777): HWUI GL PipelineI/OpenGLRenderer( 4777): Initialized EGL, version 1.4D/OpenGLRenderer( 4777): Swap behavior 1D/ ( 4777): HostConnection::get() New Host Connection established 0x7073cf2e5b00, tid 4831W/OpenGLRenderer( 4777): Failed to choose config with EGL_SWAP_BEHAVIOR_PRESERVED, retrying without...D/OpenGLRenderer( 4777): Swap behavior 0D/EGL_emulation( 4777): eglCreateContext: 0x7073cf2a7600: maj 2 min 0 rcv 2D/EGL_emulation( 4777): eglMakeCurrent: 0x7073cf2a7600: ver 2 0 (tinfo 0x7073b4be9300)D/EGL_emulation( 4777): eglCreateContext: 0x7073cf3b10a0: maj 2 min 0 rcv 2D/EGL_emulation( 4777): eglMakeCurrent: 0x7073cf3b10a0: ver 2 0 (tinfo 0x7073c2fe87c0)Syncing files to device Android SDK built for x86 64...D/EGL_emulation( 4777): eglMakeCurrent: 0x7073cf2a7600: ver 2 0 (tinfo 0x7073b4be9300)D/ ( 4777): HostConnection::get() New Host Connection established 0x7073cf2e65e0, tid 4813D/EGL_emulation( 4777): eglMakeCurrent: 0x7073cf3b10a0: ver 2 0 (tinfo 0x7073c560d6c0)å˜—è©¦ hot reloadä¿®æ”¹ä¸€äº›å…§å®¹ä¸¦å„²å­˜ï¼Œapp å°±æœƒè‡ªå‹•åš hot reloadï¼Œå°±æœƒå¾ˆå¿«åœ°çœ‹åˆ°æœ€æ–°çš„æ›´æ–°ã€‚ä½¿ç”¨ VS Code é–‹ç™¼å»ºç«‹æ–° appæŒ‰ F1 æˆ– ctrl + shift + p å¾Œï¼Œè¼¸å…¥ Flutter ä¸¦é»é¸ Flutter: New Projectè¼¸å…¥å°ˆæ¡ˆåç¨±å¾Œï¼ŒæŒ‰ enter éµé¸æ“‡å°ˆæ¡ˆç›®éŒ„çš„å„²å­˜ä½ç½®ç­‰å¾…å°ˆæ¡ˆå»ºç«‹å®Œæˆï¼Œä¸¦åœ¨ç•«é¢é¡¯ç¤º lib/main.dart æª”æ¡ˆåŸ·è¡Œ appå¾ VS Code åº•éƒ¨çš„è—è‰²ç‹€æ…‹æ¬„ä¸­é»é¸ Device Selectorè‹¥è¦ä½¿ç”¨å¯¦é«”è£ç½®ï¼Œè©³æƒ…è‡³ è¨­å®šä½ çš„ Android è£ç½® åƒè€ƒã€‚è‹¥é€£çµæˆåŠŸæœƒåœ¨ VS Code åº•éƒ¨çš„è—è‰²ç‹€æ…‹æ¬„ä¸­çœ‹åˆ°ä½ çš„è£ç½®åç¨±å¦‚æœæ²’æœ‰å¯ç”¨çš„è£ç½®ï¼Œè«‹é»é¸ No Devices ä¸¦å•Ÿå‹•æ¨¡æ“¬å™¨åŸ·è¡Œ Debugç­‰å¾… App åŸ·è¡Œï¼Œå¯åœ¨åµéŒ¯ä¸»æ§å° (Debug Console) çœ‹åˆ°åŸ·è¡Œé€²åº¦ï¼Œç¨å¾Œå°±æœƒåœ¨æ¨¡æ“¬å™¨æˆ–è£ç½®ä¸Šçœ‹åˆ°ä¸‹åœ–çš„ app ç•«é¢ä½¿ç”¨ Terminal + Editor é–‹ç™¼å»ºç«‹æ–° appä½¿ç”¨ flutter create æŒ‡ä»¤ä¾†å»ºç«‹ Flutter å°ˆæ¡ˆï¼Œè£¡é¢åŒ…å« Material Components çš„ç¯„ä¾‹ appã€‚app çš„ç¨‹å¼ç¢¼åœ¨ lib/main.dartã€‚12$ flutter create &lt;prject-name&gt;$ cd &lt;prject-name&gt;åŸ·è¡Œ appä½¿ç”¨ flutter devices æŒ‡ä»¤å¯æª¢æŸ¥æ˜¯å¦æœ‰æ­£åœ¨åŸ·è¡Œçš„æ¨¡æ“¬å™¨æˆ–è£ç½®ã€‚å¦‚æœæ²’æœ‰å¯ç”¨çš„è£ç½®ï¼Œå¯è‡³å‰é¢ä»‹ç´¹çš„ è¨­å®š Android æ¨¡æ“¬å™¨ æ®µè½ä¾†æ–°å»ºæ¨¡æ“¬å™¨ã€‚1234$ flutter devices1 connected device:Android SDK built for x86 64 â€¢ emulator-5554 â€¢ android-x64 â€¢ Android 8.0.0 (API 26) (emulator)ä½¿ç”¨ flutter run æŒ‡ä»¤å¯åŸ·è¡Œ appï¼Œä¸¦æä¾›ä»¥ä¸‹åŠŸèƒ½çš„å¿«é€Ÿéµï¼šrï¼šhot reloadRï¼šhot restart (and rebuild state)hï¼šé¡¯ç¤ºæ›´å¤šå¹«åŠ©è¨Šæ¯qï¼šåœæ­¢åŸ·è¡Œ123456789101112131415$ flutter runUsing hardware rendering with device Android SDK built for x86 64. If you get graphics artifacts, consider enabling software rendering with \"--enable-software-rendering\".Launching lib/main.dart on Android SDK built for x86 64 in debug mode...Initializing gradle... 1.7sResolving dependencies... 48.1sRunning 'gradlew assembleDebug'... 88.5sBuilt build\\app\\outputs\\apk\\debug\\app-debug.apk.Installing build\\app\\outputs\\apk\\app.apk... 11.4sSyncing files to device Android SDK built for x86 64...D/ ( 5458): HostConnection::get() New Host Connection established 0x7073c31aabe0, tid 5513D/EGL_emulation( 5458): eglMakeCurrent: 0x7073cf3b1280: ver 2 0 (tinfo 0x7073c2ab65c0) 12.3sğŸ”¥ To hot reload changes while running, press \"r\". To hot restart (and rebuild state), press \"R\".An Observatory debugger and profiler on Android SDK built for x86 64 is available at: http://127.0.0.1:2158/For a more detailed help message, press \"h\". To quit, press \"q\".","categories":[{"name":"Windows","slug":"windows","permalink":"https://titangene.github.io/categories/windows/"},{"name":"Flutter","slug":"windows/flutter","permalink":"https://titangene.github.io/categories/windows/flutter/"},{"name":"Android","slug":"windows/flutter/android","permalink":"https://titangene.github.io/categories/windows/flutter/android/"},{"name":"Mobile App","slug":"windows/flutter/android/mobile-app","permalink":"https://titangene.github.io/categories/windows/flutter/android/mobile-app/"}],"tags":[{"name":"Dart","slug":"dart","permalink":"https://titangene.github.io/tags/dart/"},{"name":"VS Code","slug":"vs-code","permalink":"https://titangene.github.io/tags/vs-code/"},{"name":"Android Studio","slug":"android-studio","permalink":"https://titangene.github.io/tags/android-studio/"}]},{"title":"Hexo åŠ å…¥ Disqus ç•™è¨€ç‰ˆ (åŒ…å«ç•™è¨€æ•¸)","slug":"hexo-disqus","date":"2018-10-22T14:40:00.000Z","updated":"2019-05-12T07:25:56.244Z","comments":true,"path":"article/hexo-disqus.html","link":"","permalink":"https://titangene.github.io/article/hexo-disqus.html","excerpt":"Blog æœ€é‡è¦çš„æ˜¯å¯ä»¥å¢é€²æŠ€è¡“çš„äº¤æµï¼Œè€Œäº¤æµå°±å¯ä»¥é€éç•™è¨€ç‰ˆä¾†é”æˆã€‚å¤§éƒ¨åˆ†çš„ Blog åœ¨æ¯ç¯‡æ–‡ç« ä¸‹é¢éƒ½æœƒæœ‰ç•™è¨€æ¿ï¼Œè€Œæœ€å¸¸è¦‹çš„å°±æ˜¯ Disqus ç•™è¨€æ¿ï¼Œå› æ­¤æœ¬ç¯‡æœƒèªªæ˜å¦‚ä½•å°‡ Disqus ç•™è¨€æ¿å’Œå„æ–‡ç« çš„ç•™è¨€æ•¸åŠ å…¥ Hexo çš„ä¸»é¡Œä¸­ã€‚","text":"Blog æœ€é‡è¦çš„æ˜¯å¯ä»¥å¢é€²æŠ€è¡“çš„äº¤æµï¼Œè€Œäº¤æµå°±å¯ä»¥é€éç•™è¨€ç‰ˆä¾†é”æˆã€‚å¤§éƒ¨åˆ†çš„ Blog åœ¨æ¯ç¯‡æ–‡ç« ä¸‹é¢éƒ½æœƒæœ‰ç•™è¨€æ¿ï¼Œè€Œæœ€å¸¸è¦‹çš„å°±æ˜¯ Disqus ç•™è¨€æ¿ï¼Œå› æ­¤æœ¬ç¯‡æœƒèªªæ˜å¦‚ä½•å°‡ Disqus ç•™è¨€æ¿å’Œå„æ–‡ç« çš„ç•™è¨€æ•¸åŠ å…¥ Hexo çš„ä¸»é¡Œä¸­ã€‚ç”³è«‹ç¶²ç«™ç•™è¨€ç‰ˆå¸³è™Ÿè‡³ Disqus é¦–é è¨»å†Šå¸³è™Ÿå¾Œä¸¦ç™»å…¥ï¼Œæ¥è‘—é»æ“Šé¦–é çš„ã€ŒGET STARTEDã€ï¼šé¸æ“‡ã€ŒI want to install Disqus on my siteã€é¸é …ï¼šéœ€è¦è¼¸å…¥çš„æ¬„ä½ï¼šWebsit Nameï¼šè‡ªè¨‚ short nameï¼Œä¸”æ˜¯å”¯ä¸€ï¼Œåƒæˆ‘æ˜¯è¨­å®š titangene-blogã€‚short name æœƒåœ¨è¨­å®š Hexo æ™‚éœ€è¦Categoryï¼šé¡åˆ¥ï¼Œè‡ªè¡Œé¸æ“‡Languageï¼šèªè¨€ï¼Œè‡ªè¡Œé¸æ“‡å¡«å¯«å¾Œé»æ“Šã€ŒCreate Siteã€ï¼šè¨­å®š Hexoåœ¨ material-flow ä¸»é¡Œå…§çš„ _config.yml åŸæœ‰è¨­å®šæ˜¯ä½¿ç”¨ disqus_shortname åƒæ•¸ä¾†è¨­å®š Disqus çš„ short nameï¼š1disqus_shortname: your_disqus_short_nameä½†æˆ‘æƒ³åœ¨ blog åŠ ä¸Šç•™è¨€æ•¸ï¼Œæ‰€ä»¥æ‰å°‡åƒæ•¸è¨­å®šæ”¹æˆä¸‹é¢å…§å®¹ï¼šenableï¼šè¨­å®š true æˆ– false ä¾†æ±ºå®šæ˜¯å¦è¦å•Ÿç”¨ Disqus çš„ç•™è¨€ç‰ˆåŠŸèƒ½shortnameï¼šè¨­å®šä½ çš„ Disqus çš„ short namecountï¼šè¨­å®š true æˆ– false ä¾†æ±ºå®šæ˜¯å¦è¦é¡¯ç¤ºæ–‡ç« çš„ç•™è¨€æ•¸12345# Commentsdisqus: enable: true shortname: your_disqus_short_name count: trueé‚£æ¥è‘—å°±æ˜¯å°‡ Disqus çš„ç•™è¨€ç‰ˆåŠŸèƒ½åŠ å…¥ä¸»é¡Œä¸­ï¼Œä¸»è¦åˆ†æˆå¹¾å€‹æ­¥é©Ÿï¼šåŠ å…¥ Disqus scriptæ–°å¢ Disqus ç•™è¨€ç‰ˆæ–°å¢ Disqus ç•™è¨€æ•¸å¦‚æœåœ¨å‰›å‰›ä¸Šé¢çš„ count åƒæ•¸è¨­å®šç‚º false å‰‡å¯ä»¥è·³éç¬¬ä¸‰å€‹æ­¥é©Ÿ æ–°å¢ Disqus ç•™è¨€æ•¸ã€‚ä¸‹é¢æä¾›çš„ç¨‹å¼ç¢¼å¯é©ç”¨æ–¼ Hexo çš„ material-flow ä¸»é¡Œï¼ŒHTML çµæ§‹å¯ä¾å„è‡ªä½¿ç”¨çš„ç‰ˆå‹æˆ–éœ€æ±‚ä¾†ä¿®æ”¹ã€‚è‹¥æƒ³ç›´æ¥çœ‹æˆ‘è¨­å®šçš„åŸå§‹ç¢¼ï¼Œå¯è‡³æ­¤ Blog çš„ GitHub Repoã€Œtitangene/hexo-blogã€æŸ¥çœ‹ã€‚åŠ å…¥ Disqus scriptåœ¨ themes\\material-flow\\layout\\_partial\\script\\disqus.ejs æª”æ¡ˆå…§åŠ å…¥ä»¥ä¸‹ç¨‹å¼ç¢¼ï¼Œç•¶é é¢è¼‰å…¥æ™‚ï¼Œæœƒä»¥éåŒæ­¥çš„æ–¹å¼å°‡ Disqus çš„ script åŠ å…¥ &lt;head&gt; æˆ– &lt;body&gt; æ¨™ç±¤ä¸­ï¼š1234567891011121314151617181920212223&lt;% if (config.disqus.enable) &#123; %&gt; &lt;% if (page.comments) &#123; %&gt;&lt;script&gt; var disqus_shortname = '&lt;%= config.disqus.shortname %&gt;'; var disqus_config = function() &#123; this.page.url = '&lt;%= page.permalink %&gt;'; this.page.identifier = '&lt;%= page.path %&gt;'; this.page.title = '&lt;%= page.title %&gt;'; &#125;; (function() &#123; var dsq = document.createElement('script'); dsq.async = true; dsq.src = '//' + disqus_shortname + '.disqus.com/embed.js'; dsq.setAttribute('data-timestamp', '' + new Date()); (document.head || document.body).appendChild(dsq); &#125;)();&lt;/script&gt;&lt;% &#125; %&gt; &lt;% if (config.disqus.count) &#123; %&gt;&lt;script id=\"dsq-count-scr\" src=\"https://&lt;%= config.disqus.shortname %&gt;.disqus.com/count.js\" async&gt;&lt;/script&gt;&lt;% &#125; %&gt; &lt;% &#125; %&gt;æ¥è‘—åœ¨ themes\\material-flow\\layout\\layout.ejs æª”æ¡ˆå…§çš„ &lt;body&gt; æ¨™ç±¤ä¸­å°‡å‰›å‰›æ–°å¢çš„ disqus.ejs è¼‰å…¥ï¼š1&lt;%- partial('script/disqus') %&gt;æ–°å¢ Disqus ç•™è¨€ç‰ˆåœ¨ themes\\material-flow\\layout\\_partial\\article.ejs æª”æ¡ˆå…§æ‰¾åˆ°é©ç•¶çš„ä½ç½®åŠ å…¥ä»¥ä¸‹ç¨‹å¼ç¢¼ï¼Œå°±å¯ä»¥åœ¨æ–‡ç« å…§æ–°å¢ Disqus ç•™è¨€ç‰ˆï¼š1234567891011&lt;% if (post.comments &amp;&amp; config.disqus.enable) &#123; %&gt;&lt;section class=\"comments\" id=\"comments\"&gt; &lt;h2&gt;ç•™è¨€ç‰ˆ&lt;/h2&gt; &lt;div id=\"disqus_thread\"&gt; &lt;noscript &gt;Please enable JavaScript to view the &lt;a href=\"https://disqus.com/?ref_noscript\"&gt;comments powered by Disqus.&lt;/a&gt;&lt;/noscript &gt; &lt;/div&gt;&lt;/section&gt;&lt;% &#125; %&gt;ä¸Šé¢ç¨‹å¼ç¢¼ä¸­æœ€é‡è¦çš„æ˜¯ &lt;div id=&quot;disqus_thread&quot;&gt; é€™å¥ï¼Œå› ç‚ºç•¶é é¢è¼‰å…¥ä¸¦å°‡ Disqus çš„ script è¼‰å…¥å¾Œï¼Œå°±æœƒå°‡æ­¤æ¨™ç±¤å…§çš„å…§å®¹å–ä»£æˆ Disqus ç•™è¨€ç‰ˆï¼Œè€Œ Disqus ç•™è¨€ç‰ˆæ˜¯ä½¿ç”¨ &lt;iframe&gt; æ¨™ç±¤çš„æ–¹å¼åµŒå…¥åœ¨é é¢ä¸­ï¼šæ–°å¢ Disqus ç•™è¨€æ•¸åœ¨ themes\\material-flow\\layout\\_partial\\article.ejs æª”æ¡ˆå…§æ‰¾åˆ°é©ç•¶çš„ä½ç½®åŠ å…¥ä»¥ä¸‹ç¨‹å¼ç¢¼ï¼Œå°±å¯ä»¥åœ¨æ–‡ç« å…§æ–°å¢ Disqus ç•™è¨€æ•¸ï¼š1234567891011121314&lt;% if (post.comments &amp;&amp; config.disqus.enable &amp;&amp; config.disqus.count) &#123; %&gt;&lt;span class=\"comments-count\"&gt; &lt;span class=\"post-meta-item-icon\"&gt; &lt;i class=\"fas fa-comment\"&gt;&lt;/i&gt; &lt;/span&gt; &lt;a href=\"&lt;%- post.permalink %&gt;#disqus_thread\" class=\"article-comment-count\" data-disqus-identifier=\"&lt;%= post.path %&gt;\" itemprop=\"discussionUrl\" &gt; &lt;/a&gt;&lt;/span&gt;&lt;% &#125; %&gt;ä¹Ÿå¯ä»¥åœ¨ themes\\material-flow\\layout\\_partial\\post.ejs æª”æ¡ˆå…§æ–°å¢ Disqus ç•™è¨€æ•¸ï¼Œé€™æ¨£å°±å¯ä»¥åœ¨é¦–é çœ‹åˆ°å„æ–‡ç« çš„ç•™è¨€æ•¸ã€‚ä¸Šé¢ç¨‹å¼ç¢¼ä¸­æœ€é‡è¦çš„æ˜¯ &lt;a href=&quot;&lt;%- post.permalink %&gt;#disqus_thread&quot;...&gt; é€™å¥ï¼Œå› ç‚ºåœ¨é€£çµçš„æœ€å¾ŒåŠ ä¸Š #disqus_threadï¼Œå°±ä»£è¡¨è¦å‘Šè¨´ Disqus è¦æ‰¾å“ªå€‹é€£çµçš„ç•™è¨€æ•¸ï¼Œä¸¦å°‡ç•™è¨€æ•¸è¨­ç‚ºé€£çµåç¨± (ä¾‹å¦‚ï¼š1 ç•™è¨€)ã€‚è€Œ data-disqus-identifier å±¬æ€§éœ€è¨­ç‚ºæ­¤é é¢çš„è­˜åˆ¥åç¨±ï¼šå¯åƒè€ƒ Disqus çš„ JavaScript configuration variables | Disqus æ–‡ä»¶ã€‚è‹¥è¦è¨­å®šé¡¯ç¤ºåœ¨é é¢ä¸Šçš„ç•™è¨€æ•¸æ–‡å­—ï¼Œå¯è‡³ Disqus çš„ã€ŒSetting &gt; Community &gt; Comment Count Linkã€å…§è¨­å®šï¼Œå¯åˆ†åˆ¥è¨­å®šä¸‰ç¨®æƒ…æ³ï¼š0 å‰‡ç•™è¨€1 å‰‡ç•™è¨€å¤šå‰‡ç•™è¨€ï¼š{num} æ˜¯ä½œç‚ºç•™è¨€æ•¸çš„è®Šæ•¸Demoè¨­å®šå¾Œå°±å¯ä»¥çœ‹åˆ°æ¯ç¯‡æ–‡ç« ä¸‹é¢éƒ½å¯ä»¥ç•™è¨€å›‰ï¼å¯åœ¨æ¯ç¯‡æ–‡ç« çœ‹åˆ°ç•™è¨€æ•¸ï¼šåƒè€ƒä¾†æºInstall instructions for Universal Code | DisqusAdding comment count links to your home page | Disqus","categories":[{"name":"Blog","slug":"blog","permalink":"https://titangene.github.io/categories/blog/"}],"tags":[{"name":"Hexo","slug":"hexo","permalink":"https://titangene.github.io/tags/hexo/"},{"name":"Comment","slug":"comment","permalink":"https://titangene.github.io/tags/comment/"}]}]}